!function(t,e){for(var n in e)t[n]=e[n]}(window,function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=25)}([function(t,e,n){(function(e){!function(){var n;function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}function r(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var o,s="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)o=Object.setPrototypeOf;else{var h;t:{var l={};try{l.__proto__={a:!0},h=l.a;break t}catch(t){}h=!1}o=h?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var u=o;function d(t,e){if(t.prototype=s(e.prototype),t.prototype.constructor=t,u)u(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,n);i&&Object.defineProperty(t,n,i)}else t[n]=e[n];t.jA=e.prototype}var c="undefined"!=typeof window&&window===self?self:void 0!==e&&null!=e?e:self,f="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};!function(t){if(t){for(var e=c,n=["Array","prototype","fill"],i=0;i<n.length-1;i++){var a=n[i];a in e||(e[a]={}),e=e[a]}(t=t(i=e[n=n[n.length-1]]))!=i&&null!=t&&f(e,n,{writable:!0,value:t})}}((function(t){return t||function(t,e,n){var i=this.length||0;for(0>e&&(e=Math.max(0,i+e)),(null==n||n>i)&&(n=i),0>(n=Number(n))&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}}));var g="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||"object"==typeof window&&window.window===window&&window||{};function p(){}function m(t,e){var n=-1;return function(){var i=this,a=arguments;-1!==n&&g.clearTimeout(n),n=v((function(){n=-1,t.apply(i,a)}),e)}}function v(t,e){return g.setTimeout(t,e)}function y(t){return g.document.createElement(t)}function w(t){throw Error(t)}function S(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),w(t)}function P(t,e,n,i){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==i&&(n+="."+i),w(n+" is not in the range "+e+": "+t)}function b(t){g.console&&g.console.log(t)}function x(){g.console&&g.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function k(t){return"object"==typeof t&&null!==t}function L(t){return Array.isArray(t)||g.NodeList&&t instanceof g.NodeList||g.HTMLCollection&&t instanceof g.HTMLCollection}function M(t){return Array.prototype.slice.call(t)}function N(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):w("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function T(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):w("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function C(){var t=Y.pop();return void 0===t?[]:t}function F(t){t.length=0,Y.push(t)}function B(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(k(t)&&t.constructor)return B(t.constructor);return typeof t}function O(t){var e=t;return k(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function A(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.aA;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function j(t,e,n){Object.defineProperty(Fn.prototype,t,{get:e,set:n})}function D(){var t=H;if(0===t.length)for(var e=g.document.getElementsByTagName("canvas"),n=e.length,i=0;i<n;i++){var a=e[i];a.parentElement&&a.parentElement.C&&t.push(a.parentElement.C)}return t}function z(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,a=0;a<t.length;a+=2)n[i++]=e[t.substr(a,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=i=0;256>n;n++)i=(i+e[n]+119)%256,a=e[n],e[n]=e[i],e[i]=a;i=n=0;for(var r="",o=0;o<t.length;o++)i=(i+e[n=(n+1)%256])%256,a=e[n],e[n]=e[i],e[i]=a,r+=String.fromCharCode(t.charCodeAt(o)^e[(e[n]+e[i])%256]);return r}void 0===g.requestAnimationFrame&&(g.requestAnimationFrame=g.setImmediate);var G=void 0!==g.navigator&&0<g.navigator.userAgent.indexOf("MSIE 9.0"),E=void 0!==g.navigator&&0<g.navigator.userAgent.indexOf("MSIE 10.0"),R=void 0!==g.navigator&&0<g.navigator.userAgent.indexOf("Trident/7"),I=void 0!==g.navigator&&0<g.navigator.userAgent.indexOf("Edge/"),_=void 0!==g.navigator&&void 0!==g.navigator.platform&&0<=g.navigator.platform.toUpperCase().indexOf("MAC"),V=void 0!==g.navigator&&void 0!==g.navigator.platform&&null!==g.navigator.platform.match(/(iPhone|iPod|iPad)/i),Y=[];Object.freeze([]);var H=[];function X(t,e,n){it(this),this.l=t,this.Ua=e,this.u=n}function U(t,e){return null==e||""===e?null:t[e]}function q(){this.lw=[]}function W(){}function K(){}p.className="Util",p.Dx="32ab5ff3b26f42dc0ed90f224d2913b5",p.adym="gojs.net",p.vfo="28e646fdb263",p.className="Util",X.prototype.toString=function(){return"EnumValue."+this.Ua},c.Object.defineProperties(X.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Ua}},value:{get:function(){return this.u}}}),X.className="EnumValue",q.prototype.toString=function(){return this.lw.join("")},q.prototype.add=function(t){""!==t&&this.lw.push(t)},q.className="StringBuilder",W.className="PropertyCollection",K.prototype.reset=function(){},K.prototype.next=function(){return!1},K.prototype.dd=function(){return!1},K.prototype.first=function(){return null},K.prototype.any=function(){return!1},K.prototype.all=function(){return!0},K.prototype.each=function(){return this},K.prototype.map=function(){return this},K.prototype.filter=function(){return this},K.prototype.xd=function(){},K.prototype.toString=function(){return"EmptyIterator"},c.Object.defineProperties(K.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),K.prototype.first=K.prototype.first,K.prototype.hasNext=K.prototype.dd,K.prototype.next=K.prototype.next,K.prototype.reset=K.prototype.reset;var J;function Z(t){this.key=-1,this.value=t}function $(t){this.pb=t,this.Ye=null,t.Ja=null,this.la=t.Ba,this.Sa=-1}function Q(t){this.pb=t,t.Sg=null,this.la=t.Ba,this.Sa=t.j.length}function tt(t){it(this),this.v=!1,this.j=[],this.Ba=0,this.Sg=this.Ja=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function et(t){this.hg=t,t.Ja=null,this.la=t.Ba,this.na=null}function nt(t){it(this),this.v=!1,this.Db={},this.Cb=0,this.Ja=null,this.Ba=0,this.Ue=this.fa=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function it(t){t.__gohashid=ot++}function at(t){var e=t.__gohashid;return void 0===e&&(e=ot++,t.__gohashid=e),e}function rt(t){return t.__gohashid}K.className="EmptyIterator",J=new K,Z.prototype.reset=function(){this.key=-1},Z.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Z.prototype.dd=function(){return this.next()},Z.prototype.first=function(){return this.key=0,this.value},Z.prototype.any=function(t){return this.key=-1,t(this.value)},Z.prototype.all=function(t){return this.key=-1,t(this.value)},Z.prototype.each=function(t){return this.key=-1,t(this.value),this},Z.prototype.map=function(t){return new Z(t(this.value))},Z.prototype.filter=function(t){return t(this.value)?new Z(this.value):J},Z.prototype.xd=function(){this.value=null},Z.prototype.toString=function(){return"SingletonIterator("+this.value+")"},c.Object.defineProperties(Z.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Z.prototype.first=Z.prototype.first,Z.prototype.hasNext=Z.prototype.dd,Z.prototype.next=Z.prototype.next,Z.prototype.reset=Z.prototype.reset,Z.className="SingletonIterator",$.prototype.reset=function(){var t=this.pb;t.Ja=null,this.la=t.Ba,this.Sa=-1},$.prototype.next=function(){var t=this.pb;if(t.Ba!==this.la&&0>this.key)return!1;var e=(t=t.j).length,n=++this.Sa,i=this.Ye;if(null!==i)for(;n<e;){var a=t[n];if(i(a))return this.key=this.Sa=n,this.value=a,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.xd()}return!1},$.prototype.dd=function(){return this.next()},$.prototype.first=function(){var t=this.pb;this.la=t.Ba,this.Sa=0;var e=(t=t.j).length,n=this.Ye;if(null!==n){for(var i=0;i<e;){var a=t[i];if(n(a))return this.key=this.Sa=i,this.value=a;i++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},$.prototype.any=function(t){var e=this.pb;e.Ja=null,this.Sa=-1;for(var n=(e=e.j).length,i=this.Ye,a=0;a<n;a++){var r=e[a];if((null===i||i(r))&&t(r))return!0}return!1},$.prototype.all=function(t){var e=this.pb;e.Ja=null,this.Sa=-1;for(var n=(e=e.j).length,i=this.Ye,a=0;a<n;a++){var r=e[a];if((null===i||i(r))&&!t(r))return!1}return!0},$.prototype.each=function(t){var e=this.pb;e.Ja=null,this.Sa=-1;for(var n=(e=e.j).length,i=this.Ye,a=0;a<n;a++){var r=e[a];(null===i||i(r))&&t(r)}return this},$.prototype.map=function(t){var e=this.pb;e.Ja=null,this.Sa=-1;for(var n=[],i=(e=e.j).length,a=this.Ye,r=0;r<i;r++){var o=e[r];(null===a||a(o))&&n.push(t(o))}return(t=new tt).j=n,t.kb(),t.iterator},$.prototype.filter=function(t){var e=this.pb;e.Ja=null,this.Sa=-1;for(var n=[],i=(e=e.j).length,a=this.Ye,r=0;r<i;r++){var o=e[r];(null===a||a(o))&&t(o)&&n.push(o)}return(t=new tt).j=n,t.kb(),t.iterator},$.prototype.xd=function(){this.key=-1,this.value=null,this.la=-1,this.Ye=null,this.pb.Ja=this},$.prototype.toString=function(){return"ListIterator@"+this.Sa+"/"+this.pb.count},c.Object.defineProperties($.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.Ye},set:function(t){this.Ye=t}},count:{get:function(){var t=this.Ye;if(null!==t){for(var e=0,n=this.pb.j,i=n.length,a=0;a<i;a++)t(n[a])&&e++;return e}return this.pb.j.length}}}),$.prototype.first=$.prototype.first,$.prototype.hasNext=$.prototype.dd,$.prototype.next=$.prototype.next,$.prototype.reset=$.prototype.reset,$.className="ListIterator",Q.prototype.reset=function(){var t=this.pb;t.Sg=null,this.la=t.Ba,this.Sa=t.j.length},Q.prototype.next=function(){var t=this.pb;if(t.Ba!==this.la&&0>this.key)return!1;var e=--this.Sa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.xd(),!1)},Q.prototype.dd=function(){return this.next()},Q.prototype.first=function(){var t=this.pb;this.la=t.Ba;var e=t.j;return this.Sa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},Q.prototype.any=function(t){var e=this.pb;e.Sg=null;var n=(e=e.j).length;for(this.Sa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},Q.prototype.all=function(t){var e=this.pb;e.Sg=null;var n=(e=e.j).length;for(this.Sa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},Q.prototype.each=function(t){var e=this.pb;e.Sg=null;var n=(e=e.j).length;for(this.Sa=n,--n;0<=n;n--)t(e[n]);return this},Q.prototype.map=function(t){var e=this.pb;e.Sg=null;var n=[],i=(e=e.j).length;for(this.Sa=i,--i;0<=i;i--)n.push(t(e[i]));return(t=new tt).j=n,t.kb(),t.iterator},Q.prototype.filter=function(t){var e=this.pb;e.Sg=null;var n=[],i=(e=e.j).length;for(this.Sa=i,--i;0<=i;i--){var a=e[i];t(a)&&n.push(a)}return(t=new tt).j=n,t.kb(),t.iterator},Q.prototype.xd=function(){this.key=-1,this.value=null,this.la=-1,this.pb.Sg=this},Q.prototype.toString=function(){return"ListIteratorBackwards("+this.Sa+"/"+this.pb.count+")"},c.Object.defineProperties(Q.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.pb.j.length}}}),Q.prototype.first=Q.prototype.first,Q.prototype.hasNext=Q.prototype.dd,Q.prototype.next=Q.prototype.next,Q.prototype.reset=Q.prototype.reset,Q.className="ListIteratorBackwards",(n=tt.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},n.freeze=function(){return this.v=!0,this},n.ha=function(){return this.v=!1,this},n.toString=function(){return"List()#"+rt(this)},n.add=function(t){return null===t||(this.v&&S(this,t),this.j.push(t),this.kb()),this},n.push=function(t){this.add(t)},n.addAll=function(t){if(null===t)return this;this.v&&S(this);var e=this.j;if(L(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.kb(),this},n.clear=function(){this.v&&S(this),this.j.length=0,this.kb()},n.contains=function(t){return null!==t&&-1!==this.j.indexOf(t)},n.has=function(t){return this.contains(t)},n.indexOf=function(t){return null===t?-1:this.j.indexOf(t)},n.N=function(t){var e=this.j;return(0>t||t>=e.length)&&P(t,"0 <= i < length",tt,"elt:i"),e[t]},n.get=function(t){return this.N(t)},n.gd=function(t,e){var n=this.j;(0>t||t>=n.length)&&P(t,"0 <= i < length",tt,"setElt:i"),this.v&&S(this,t),n[t]=e},n.set=function(t,e){this.gd(t,e)},n.first=function(){var t=this.j;return 0===t.length?null:t[0]},n.Sb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},n.pop=function(){this.v&&S(this);var t=this.j;return 0<t.length?t.pop():null},tt.prototype.any=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},tt.prototype.all=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},tt.prototype.each=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)t(e[i]);return this},tt.prototype.map=function(t){for(var e=new tt,n=[],i=this.j,a=i.length,r=0;r<a;r++)n.push(t(i[r]));return e.j=n,e.kb(),e},tt.prototype.filter=function(t){for(var e=new tt,n=[],i=this.j,a=i.length,r=0;r<a;r++){var o=i[r];t(o)&&n.push(o)}return e.j=n,e.kb(),e},(n=tt.prototype).Ib=function(t,e){0>t&&P(t,">= 0",tt,"insertAt:i"),this.v&&S(this,t);var n=this.j;t>=n.length?n.push(e):n.splice(t,0,e),this.kb()},n.remove=function(t){if(null===t)return!1;this.v&&S(this,t);var e=this.j;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.kb(),!0)},n.delete=function(t){return this.remove(t)},n.mb=function(t){var e=this.j;(0>t||t>=e.length)&&P(t,"0 <= i < length",tt,"removeAt:i"),this.v&&S(this,t),t===e.length-1?e.pop():e.splice(t,1),this.kb()},n.removeRange=function(t,e){var n=this.j,i=n.length;if(0>t)t=0;else if(t>=i)return this;if(0>e)return this;if(e>=i&&(e=i-1),t>e)return this;this.v&&S(this);for(var a=t,r=e+1;r<i;)n[a++]=n[r++];return n.length=i-(e-t+1),this.kb(),this},tt.prototype.copy=function(){var t=new tt,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},(n=tt.prototype).Na=function(){for(var t=this.j,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},n.Rv=function(){for(var t=new nt,e=this.j,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},n.sort=function(t){return this.v&&S(this),this.j.sort(t),this.kb(),this},n.Wi=function(t,e,n){var i=this.j,a=i.length;void 0===e&&(e=0),void 0===n&&(n=a),this.v&&S(this);var r=n-e;if(1>=r)return this;if((0>e||e>=a-1)&&P(e,"0 <= from < length",tt,"sortRange:from"),2===r)return 0<t(n=i[e],a=i[e+1])&&(i[e]=a,i[e+1]=n,this.kb()),this;if(0===e)if(n>=a)i.sort(t);else for((e=i.slice(0,n)).sort(t),t=0;t<n;t++)i[t]=e[t];else if(n>=a)for((n=i.slice(e)).sort(t),t=e;t<a;t++)i[t]=n[t-e];else for((a=i.slice(e,n)).sort(t),t=e;t<n;t++)i[t]=a[t-e];return this.kb(),this},n.reverse=function(){return this.v&&S(this),this.j.reverse(),this.kb(),this},c.Object.defineProperties(tt.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(0>=this.j.length)return J;var t=this.Ja;return null!==t?(t.reset(),t):new $(this)}},iteratorBackwards:{get:function(){if(0>=this.j.length)return J;var t=this.Sg;return null!==t?(t.reset(),t):new Q(this)}}}),tt.prototype.reverse=tt.prototype.reverse,tt.prototype.sortRange=tt.prototype.Wi,tt.prototype.sort=tt.prototype.sort,tt.prototype.toSet=tt.prototype.Rv,tt.prototype.toArray=tt.prototype.Na,tt.prototype.removeRange=tt.prototype.removeRange,tt.prototype.removeAt=tt.prototype.mb,tt.prototype.delete=tt.prototype.delete,tt.prototype.remove=tt.prototype.remove,tt.prototype.insertAt=tt.prototype.Ib,tt.prototype.pop=tt.prototype.pop,tt.prototype.last=tt.prototype.Sb,tt.prototype.first=tt.prototype.first,tt.prototype.set=tt.prototype.set,tt.prototype.setElt=tt.prototype.gd,tt.prototype.get=tt.prototype.get,tt.prototype.elt=tt.prototype.N,tt.prototype.indexOf=tt.prototype.indexOf,tt.prototype.has=tt.prototype.has,tt.prototype.contains=tt.prototype.contains,tt.prototype.clear=tt.prototype.clear,tt.prototype.addAll=tt.prototype.addAll,tt.prototype.push=tt.prototype.push,tt.prototype.add=tt.prototype.add,tt.prototype.thaw=tt.prototype.ha,tt.prototype.freeze=tt.prototype.freeze,tt.className="List",et.prototype.reset=function(){var t=this.hg;t.Ja=null,this.la=t.Ba,this.na=null},et.prototype.next=function(){var t=this.hg;if(t.Ba!==this.la&&null===this.key)return!1;var e=this.na;return null!==(e=null===e?t.fa:e.oa)?(this.na=e,this.value=e.value,this.key=e.key,!0):(this.xd(),!1)},et.prototype.dd=function(){return this.next()},et.prototype.first=function(){var t=this.hg;if(this.la=t.Ba,null!==(t=t.fa)){this.na=t;var e=t.value;return this.key=t.key,this.value=e}return null},et.prototype.any=function(t){var e=this.hg;for(this.na=e.Ja=null,e=e.fa;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},et.prototype.all=function(t){var e=this.hg;for(this.na=e.Ja=null,e=e.fa;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},et.prototype.each=function(t){var e=this.hg;for(this.na=e.Ja=null,e=e.fa;null!==e;)t(e.value),e=e.oa;return this},et.prototype.map=function(t){var e=this.hg;e.Ja=null;var n=new tt;for(e=e.fa;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},et.prototype.filter=function(t){var e=this.hg;e.Ja=null;var n=new tt;for(e=e.fa;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},et.prototype.xd=function(){this.value=this.key=null,this.la=-1,this.hg.Ja=this},et.prototype.toString=function(){return null!==this.na?"SetIterator@"+this.na.value:"SetIterator"},c.Object.defineProperties(et.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.hg.Cb}}}),et.prototype.first=et.prototype.first,et.prototype.hasNext=et.prototype.dd,et.prototype.next=et.prototype.next,et.prototype.reset=et.prototype.reset,et.className="SetIterator",(n=nt.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},n.freeze=function(){return this.v=!0,this},n.ha=function(){return this.v=!1,this},n.toString=function(){return"Set()#"+rt(this)},n.add=function(t){if(null===t)return this;this.v&&S(this,t);var e=t;return k(t)&&(e=at(t)),void 0===this.Db[e]&&(this.Cb++,t=new ut(t,t),this.Db[e]=t,null===(e=this.Ue)?this.fa=t:(t.wl=e,e.oa=t),this.Ue=t,this.kb()),this},n.addAll=function(t){if(null===t)return this;if(this.v&&S(this),L(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},n.contains=function(t){if(null===t)return!1;var e=t;return(!k(t)||void 0!==(e=rt(t)))&&void 0!==this.Db[e]},n.has=function(t){return this.contains(t)},n.sy=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},n.ty=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},n.first=function(){var t=this.fa;return null===t?null:t.value},nt.prototype.any=function(t){for(var e=this.fa;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},nt.prototype.all=function(t){for(var e=this.fa;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},nt.prototype.each=function(t){for(var e=this.fa;null!==e;)t(e.value),e=e.oa;return this},nt.prototype.map=function(t){for(var e=new nt,n=this.fa;null!==n;)e.add(t(n.value)),n=n.oa;return e},nt.prototype.filter=function(t){for(var e=new nt,n=this.fa;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.oa}return e},(n=nt.prototype).remove=function(t){if(null===t)return!1;this.v&&S(this,t);var e=t;if(k(t)&&void 0===(e=rt(t)))return!1;if(void 0===(t=this.Db[e]))return!1;var n=t.oa,i=t.wl;return null!==n&&(n.wl=i),null!==i&&(i.oa=n),this.fa===t&&(this.fa=n),this.Ue===t&&(this.Ue=i),delete this.Db[e],this.Cb--,this.kb(),!0},n.delete=function(t){return this.remove(t)},n.oq=function(t){if(null===t)return this;if(this.v&&S(this),L(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},n.Oz=function(t){if(null===t||0===this.count)return this;this.v&&S(this);var e=new nt;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.oq(t),this},n.clear=function(){this.v&&S(this),this.Db={},this.Cb=0,null!==this.Ja&&this.Ja.reset(),this.Ue=this.fa=null,this.kb()},nt.prototype.copy=function(){var t,e=new nt,n=this.Db;for(t in n)e.add(n[t].value);return e},nt.prototype.Na=function(){var t,e=Array(this.Cb),n=this.Db,i=0;for(t in n)e[i]=n[t].value,i++;return e},nt.prototype.Qv=function(){var t,e=new tt,n=this.Db;for(t in n)e.add(n[t].value);return e},c.Object.defineProperties(nt.prototype,{count:{get:function(){return this.Cb}},size:{get:function(){return this.Cb}},iterator:{get:function(){if(0>=this.Cb)return J;var t=this.Ja;return null!==t?(t.reset(),t):new et(this)}}}),nt.prototype.toList=nt.prototype.Qv,nt.prototype.toArray=nt.prototype.Na,nt.prototype.clear=nt.prototype.clear,nt.prototype.retainAll=nt.prototype.Oz,nt.prototype.removeAll=nt.prototype.oq,nt.prototype.delete=nt.prototype.delete,nt.prototype.remove=nt.prototype.remove,nt.prototype.first=nt.prototype.first,nt.prototype.containsAny=nt.prototype.ty,nt.prototype.containsAll=nt.prototype.sy,nt.prototype.has=nt.prototype.has,nt.prototype.contains=nt.prototype.contains,nt.prototype.addAll=nt.prototype.addAll,nt.prototype.add=nt.prototype.add,nt.prototype.thaw=nt.prototype.ha,nt.prototype.freeze=nt.prototype.freeze;var ot=1;function st(t){this.ja=t,this.la=t.Ba,this.na=null}function ht(t){nt.call(this),it(this),this.v=!0,this.ja=t}function lt(t){this.ja=t,t.Te=null,this.la=t.Ba,this.na=null}function ut(t,e){this.key=t,this.value=e,this.wl=this.oa=null}function dt(t){this.ja=t,t.Ja=null,this.la=t.Ba,this.na=null}function ct(t){it(this),this.v=!1,this.Db={},this.Cb=0,this.Te=this.Ja=null,this.Ba=0,this.Ue=this.fa=null,void 0!==t&&("function"==typeof t||"string"==typeof t?x():this.addAll(t))}function ft(t,e){void 0===t?this.G=this.F=0:"number"==typeof t&&"number"==typeof e?(this.F=t,this.G=e):w("Invalid arguments to Point constructor: "+t+", "+e),this.v=!1}function gt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),new ft(n,a)}return new ft}function pt(t){return t.x.toString()+" "+t.y.toString()}function mt(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function vt(t,e){return e.Ud(t),t}function yt(t,e,n,i,a,r){var o=a-n,s=r-i,h=o*o+s*s,l=-(n-=t)*o-(i-=e)*s;return 0>=l||l>=h?(o=a-t,s=r-e,Math.min(n*n+i*i,o*o+s*s)):(t=o*i-s*n)*t/h}function wt(t,e,n,i){return(t=n-t)*t+(e=i-e)*e}function St(t,e,n,i){return e=i-e,0===(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?i=0>e?i+180:180-i:0>e&&(i=360-i),i)}nt.className="Set",nt.uniqueHash=it,nt.hashIdUnique=at,nt.hashId=rt,st.prototype.reset=function(){this.la=this.ja.Ba,this.na=null},st.prototype.next=function(){var t=this.ja;if(t.Ba!==this.la&&null===this.key)return!1;var e=this.na;return null!==(e=null===e?t.fa:e.oa)?(this.na=e,this.value=this.key=t=e.key,!0):(this.xd(),!1)},st.prototype.dd=function(){return this.next()},st.prototype.first=function(){var t=this.ja;return this.la=t.Ba,null!==(t=t.fa)?(this.na=t,this.value=this.key=t=t.key):null},st.prototype.any=function(t){var e=this.ja;for(this.na=null,e=e.fa;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},st.prototype.all=function(t){var e=this.ja;for(this.na=null,e=e.fa;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},st.prototype.each=function(t){var e=this.ja;for(this.na=null,e=e.fa;null!==e;)t(e.key),e=e.oa;return this},st.prototype.map=function(t){var e=this.ja;this.na=null;var n=new tt;for(e=e.fa;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},st.prototype.filter=function(t){var e=this.ja;this.na=null;var n=new tt;for(e=e.fa;null!==e;){var i=e.key;t(i)&&n.add(i),e=e.oa}return n.iterator},st.prototype.xd=function(){this.value=this.key=null,this.la=-1},st.prototype.toString=function(){return null!==this.na?"MapKeySetIterator@"+this.na.value:"MapKeySetIterator"},c.Object.defineProperties(st.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ja.Cb}}}),st.prototype.first=st.prototype.first,st.prototype.hasNext=st.prototype.dd,st.prototype.next=st.prototype.next,st.prototype.reset=st.prototype.reset,st.className="MapKeySetIterator",d(ht,nt),(n=ht.prototype).freeze=function(){return this},n.ha=function(){return this},n.toString=function(){return"MapKeySet("+this.ja.toString()+")"},n.add=function(){return w("This Set is read-only: "+this.toString()),this},n.contains=function(t){return this.ja.contains(t)},n.has=function(t){return this.contains(t)},n.remove=function(){return w("This Set is read-only: "+this.toString()),!1},n.delete=function(t){return this.remove(t)},n.clear=function(){w("This Set is read-only: "+this.toString())},n.first=function(){var t=this.ja.fa;return null!==t?t.key:null},ht.prototype.any=function(t){for(var e=this.ja.fa;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},ht.prototype.all=function(t){for(var e=this.ja.fa;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},ht.prototype.each=function(t){for(var e=this.ja.fa;null!==e;)t(e.key),e=e.oa;return this},ht.prototype.map=function(t){for(var e=new nt,n=this.ja.fa;null!==n;)e.add(t(n.key)),n=n.oa;return e},ht.prototype.filter=function(t){for(var e=new nt,n=this.ja.fa;null!==n;){var i=n.key;t(i)&&e.add(i),n=n.oa}return e},ht.prototype.copy=function(){return new ht(this.ja)},ht.prototype.Rv=function(){var t,e=new nt,n=this.ja.Db;for(t in n)e.add(n[t].key);return e},ht.prototype.Na=function(){var t,e=this.ja.Db,n=Array(this.ja.Cb),i=0;for(t in e)n[i]=e[t].key,i++;return n},ht.prototype.Qv=function(){var t,e=new tt,n=this.ja.Db;for(t in n)e.add(n[t].key);return e},c.Object.defineProperties(ht.prototype,{count:{get:function(){return this.ja.Cb}},size:{get:function(){return this.ja.Cb}},iterator:{get:function(){return 0>=this.ja.Cb?J:new st(this.ja)}}}),ht.prototype.toList=ht.prototype.Qv,ht.prototype.toArray=ht.prototype.Na,ht.prototype.toSet=ht.prototype.Rv,ht.prototype.first=ht.prototype.first,ht.prototype.clear=ht.prototype.clear,ht.prototype.delete=ht.prototype.delete,ht.prototype.remove=ht.prototype.remove,ht.prototype.has=ht.prototype.has,ht.prototype.contains=ht.prototype.contains,ht.prototype.add=ht.prototype.add,ht.prototype.thaw=ht.prototype.ha,ht.prototype.freeze=ht.prototype.freeze,ht.className="MapKeySet",lt.prototype.reset=function(){var t=this.ja;t.Te=null,this.la=t.Ba,this.na=null},lt.prototype.next=function(){var t=this.ja;if(t.Ba!==this.la&&null===this.key)return!1;var e=this.na;return null!==(e=null===e?t.fa:e.oa)?(this.na=e,this.value=e.value,this.key=e.key,!0):(this.xd(),!1)},lt.prototype.dd=function(){return this.next()},lt.prototype.first=function(){var t=this.ja;if(this.la=t.Ba,null!==(t=t.fa)){this.na=t;var e=t.value;return this.key=t.key,this.value=e}return null},lt.prototype.any=function(t){var e=this.ja;for(this.na=e.Te=null,e=e.fa;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},lt.prototype.all=function(t){var e=this.ja;for(this.na=e.Te=null,e=e.fa;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},lt.prototype.each=function(t){var e=this.ja;for(this.na=e.Te=null,e=e.fa;null!==e;)t(e.value),e=e.oa;return this},lt.prototype.map=function(t){var e=this.ja;this.na=e.Te=null;var n=new tt;for(e=e.fa;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},lt.prototype.filter=function(t){var e=this.ja;this.na=e.Te=null;var n=new tt;for(e=e.fa;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},lt.prototype.xd=function(){this.value=this.key=null,this.la=-1,this.ja.Te=this},lt.prototype.toString=function(){return null!==this.na?"MapValueSetIterator@"+this.na.value:"MapValueSetIterator"},c.Object.defineProperties(lt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ja.Cb}}}),lt.prototype.first=lt.prototype.first,lt.prototype.hasNext=lt.prototype.dd,lt.prototype.next=lt.prototype.next,lt.prototype.reset=lt.prototype.reset,lt.className="MapValueSetIterator",ut.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},ut.className="KeyValuePair",dt.prototype.reset=function(){var t=this.ja;t.Ja=null,this.la=t.Ba,this.na=null},dt.prototype.next=function(){var t=this.ja;if(t.Ba!==this.la&&null===this.key)return!1;var e=this.na;return null!==(e=null===e?t.fa:e.oa)?(this.na=e,this.key=e.key,this.value=e.value,!0):(this.xd(),!1)},dt.prototype.dd=function(){return this.next()},dt.prototype.first=function(){var t=this.ja;return this.la=t.Ba,null!==(t=t.fa)?(this.na=t,this.key=t.key,this.value=t.value,t):null},dt.prototype.any=function(t){var e=this.ja;for(this.na=e.Ja=null,e=e.fa;null!==e;){if(t(e))return!0;e=e.oa}return!1},dt.prototype.all=function(t){var e=this.ja;for(this.na=e.Ja=null,e=e.fa;null!==e;){if(!t(e))return!1;e=e.oa}return!0},dt.prototype.each=function(t){var e=this.ja;for(this.na=e.Ja=null,e=e.fa;null!==e;)t(e),e=e.oa;return this},dt.prototype.map=function(t){var e=this.ja;this.na=e.Ja=null;var n=new tt;for(e=e.fa;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},dt.prototype.filter=function(t){var e=this.ja;this.na=e.Ja=null;var n=new tt;for(e=e.fa;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},dt.prototype.xd=function(){this.value=this.key=null,this.la=-1,this.ja.Ja=this},dt.prototype.toString=function(){return null!==this.na?"MapIterator@"+this.na:"MapIterator"},c.Object.defineProperties(dt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ja.Cb}}}),dt.prototype.first=dt.prototype.first,dt.prototype.hasNext=dt.prototype.dd,dt.prototype.next=dt.prototype.next,dt.prototype.reset=dt.prototype.reset,dt.className="MapIterator",(n=ct.prototype).kb=function(){var t=this.Ba;999999999<++t&&(t=0),this.Ba=t},n.freeze=function(){return this.v=!0,this},n.ha=function(){return this.v=!1,this},n.toString=function(){return"Map()#"+rt(this)},n.add=function(t,e){this.v&&S(this,t);var n=t;k(t)&&(n=at(t));var i=this.Db[n];return void 0===i?(this.Cb++,t=new ut(t,e),this.Db[n]=t,null===(n=this.Ue)?this.fa=t:(t.wl=n,n.oa=t),this.Ue=t,this.kb()):i.value=e,this},n.set=function(t,e){return this.add(t,e)},n.addAll=function(t){if(null===t)return this;if(L(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},n.first=function(){return this.fa},ct.prototype.any=function(t){for(var e=this.fa;null!==e;){if(t(e))return!0;e=e.oa}return!1},ct.prototype.all=function(t){for(var e=this.fa;null!==e;){if(!t(e))return!1;e=e.oa}return!0},ct.prototype.each=function(t){for(var e=this.fa;null!==e;)t(e),e=e.oa;return this},ct.prototype.map=function(t){for(var e=new ct,n=this.fa;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},ct.prototype.filter=function(t){for(var e=new ct,n=this.fa;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(n=ct.prototype).contains=function(t){var e=t;return(!k(t)||void 0!==(e=rt(t)))&&void 0!==this.Db[e]},n.has=function(t){return this.contains(t)},n.J=function(t){var e=t;return k(t)&&void 0===(e=rt(t))||void 0===(t=this.Db[e])?null:t.value},n.get=function(t){return this.J(t)},n.remove=function(t){if(null===t)return!1;this.v&&S(this,t);var e=t;if(k(t)&&void 0===(e=rt(t)))return!1;if(void 0===(t=this.Db[e]))return!1;var n=t.oa,i=t.wl;return null!==n&&(n.wl=i),null!==i&&(i.oa=n),this.fa===t&&(this.fa=n),this.Ue===t&&(this.Ue=i),delete this.Db[e],this.Cb--,this.kb(),!0},n.delete=function(t){return this.remove(t)},n.clear=function(){this.v&&S(this),this.Db={},this.Cb=0,null!==this.Ja&&this.Ja.reset(),null!==this.Te&&this.Te.reset(),this.Ue=this.fa=null,this.kb()},ct.prototype.copy=function(){var t,e=new ct,n=this.Db;for(t in n){var i=n[t];e.add(i.key,i.value)}return e},ct.prototype.Na=function(){var t,e=this.Db,n=Array(this.Cb),i=0;for(t in e){var a=e[t];n[i]=new ut(a.key,a.value),i++}return n},ct.prototype.Yd=function(){return new ht(this)},c.Object.defineProperties(ct.prototype,{count:{get:function(){return this.Cb}},size:{get:function(){return this.Cb}},iterator:{get:function(){if(0>=this.count)return J;var t=this.Ja;return null!==t?(t.reset(),t):new dt(this)}},iteratorKeys:{get:function(){return 0>=this.count?J:new st(this)}},iteratorValues:{get:function(){if(0>=this.count)return J;var t=this.Te;return null!==t?(t.reset(),t):new lt(this)}}}),ct.prototype.toKeySet=ct.prototype.Yd,ct.prototype.toArray=ct.prototype.Na,ct.prototype.clear=ct.prototype.clear,ct.prototype.delete=ct.prototype.delete,ct.prototype.remove=ct.prototype.remove,ct.prototype.get=ct.prototype.get,ct.prototype.getValue=ct.prototype.J,ct.prototype.has=ct.prototype.has,ct.prototype.contains=ct.prototype.contains,ct.prototype.first=ct.prototype.first,ct.prototype.addAll=ct.prototype.addAll,ct.prototype.set=ct.prototype.set,ct.prototype.add=ct.prototype.add,ct.prototype.thaw=ct.prototype.ha,ct.prototype.freeze=ct.prototype.freeze,ct.className="Map",ft.prototype.assign=function(t){return this.F=t.F,this.G=t.G,this},ft.prototype.h=function(t,e){return this.F=t,this.G=e,this},ft.prototype.wg=function(t,e){return this.F=t,this.G=e,this},ft.prototype.set=function(t){return this.F=t.F,this.G=t.G,this},ft.prototype.copy=function(){var t=new ft;return t.F=this.F,t.G=this.G,t},(n=ft.prototype).ga=function(){return this.v=!0,Object.freeze(this),this},n.I=function(){return Object.isFrozen(this)?this:this.copy().freeze()},n.freeze=function(){return this.v=!0,this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,this},n.toString=function(){return"Point("+this.x+","+this.y+")"},n.A=function(t){return t instanceof ft&&(this.F===t.x&&this.G===t.y)},n.Fi=function(t,e){return this.F===t&&this.G===e},n.Qa=function(t){return qe.w(this.F,t.x)&&qe.w(this.G,t.y)},n.add=function(t){return this.F+=t.x,this.G+=t.y,this},n.Xd=function(t){return this.F-=t.x,this.G-=t.y,this},n.offset=function(t,e){return this.F+=t,this.G+=e,this},ft.prototype.rotate=function(t){if(0===t)return this;var e=this.F,n=this.G;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));return this.F=t*e-i*n,this.G=i*e+t*n,this},(n=ft.prototype).scale=function(t,e){return this.F*=t,this.G*=e,this},n.Ce=function(t){var e=t.x-this.F;return e*e+(t=t.y-this.G)*t},n.cd=function(t,e){return(t-=this.F)*t+(e-=this.G)*e},n.normalize=function(){var t=this.F,e=this.G,n=Math.sqrt(t*t+e*e);return 0<n&&(this.F=t/n,this.G=e/n),this},n.Wa=function(t){return mt(t.x-this.F,t.y-this.G)},n.direction=function(t,e){return mt(t-this.F,e-this.G)},n.Hz=function(t,e,n,i){return qe.Si(t,e,n,i,this.F,this.G,this),this},n.Iz=function(t,e){return qe.Si(t.x,t.y,e.x,e.y,this.F,this.G,this),this},n.Tz=function(t,e,n,i){return qe.Wp(this.F,this.G,t,e,n,i,this),this},n.Uz=function(t,e){return qe.Wp(this.F,this.G,t.x,t.y,e.width,e.height,this),this},n.Vi=function(t,e){return this.F=t.x+e.x*t.width+e.offsetX,this.G=t.y+e.y*t.height+e.offsetY,this},n.rk=function(t,e,n,i,a){return this.F=t+a.x*n+a.offsetX,this.G=e+a.y*i+a.offsetY,this},n.transform=function(t){return t.ta(this),this},n.o=function(){return isFinite(this.x)&&isFinite(this.y)},ft.alloc=function(){var t=At.pop();return void 0===t?new ft:t},ft.allocAt=function(t,e){var n=At.pop();return void 0===n?new ft(t,e):(n.x=t,n.y=e,n)},ft.free=function(t){At.push(t)},c.Object.defineProperties(ft.prototype,{x:{get:function(){return this.F},set:function(t){this.F=t}},y:{get:function(){return this.G},set:function(t){this.G=t}}}),ft.prototype.isReal=ft.prototype.o,ft.prototype.setSpot=ft.prototype.rk,ft.prototype.setRectSpot=ft.prototype.Vi,ft.prototype.snapToGridPoint=ft.prototype.Uz,ft.prototype.snapToGrid=ft.prototype.Tz,ft.prototype.projectOntoLineSegmentPoint=ft.prototype.Iz,ft.prototype.projectOntoLineSegment=ft.prototype.Hz,ft.prototype.direction=ft.prototype.direction,ft.prototype.directionPoint=ft.prototype.Wa,ft.prototype.normalize=ft.prototype.normalize,ft.prototype.distanceSquared=ft.prototype.cd,ft.prototype.distanceSquaredPoint=ft.prototype.Ce,ft.prototype.scale=ft.prototype.scale,ft.prototype.rotate=ft.prototype.rotate,ft.prototype.offset=ft.prototype.offset,ft.prototype.subtract=ft.prototype.Xd,ft.prototype.add=ft.prototype.add,ft.prototype.equalsApprox=ft.prototype.Qa,ft.prototype.equalTo=ft.prototype.Fi,ft.prototype.equals=ft.prototype.A,ft.prototype.set=ft.prototype.set,ft.prototype.setTo=ft.prototype.wg;var Pt,bt,xt,kt,Lt,Mt,Nt,Tt,Ct,Ft,Bt,Ot,At=[];function jt(t,e){void 0===t?this.Z=this.$=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.$=t,this.Z=e):w("Invalid arguments to Size constructor: "+t+", "+e),this.v=!1}function Dt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),new jt(n,a)}return new jt}function zt(t){return t.width.toString()+" "+t.height.toString()}ft.className="Point",ft.parse=gt,ft.stringify=pt,ft.distanceLineSegmentSquared=yt,ft.distanceSquared=wt,ft.direction=St,ft.Origin=Pt=new ft(0,0).ga(),ft.InfiniteTopLeft=bt=new ft(-1/0,-1/0).ga(),ft.InfiniteBottomRight=xt=new ft(1/0,1/0).ga(),ft.SixPoint=kt=new ft(6,6).ga(),ft.NoPoint=Lt=new ft(NaN,NaN).ga(),ft.parse=gt,ft.stringify=pt,ft.distanceLineSegmentSquared=yt,ft.distanceSquared=wt,ft.direction=St,jt.prototype.assign=function(t){return this.$=t.$,this.Z=t.Z,this},jt.prototype.h=function(t,e){return this.$=t,this.Z=e,this},jt.prototype.wg=function(t,e){return this.$=t,this.Z=e,this},jt.prototype.set=function(t){return this.$=t.$,this.Z=t.Z,this},jt.prototype.copy=function(){var t=new jt;return t.$=this.$,t.Z=this.Z,t},(n=jt.prototype).ga=function(){return this.v=!0,Object.freeze(this),this},n.I=function(){return Object.isFrozen(this)?this:this.copy().freeze()},n.freeze=function(){return this.v=!0,this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,this},n.toString=function(){return"Size("+this.width+","+this.height+")"},n.A=function(t){return t instanceof jt&&(this.$===t.width&&this.Z===t.height)},n.Fi=function(t,e){return this.$===t&&this.Z===e},n.Qa=function(t){return qe.w(this.$,t.width)&&qe.w(this.Z,t.height)},n.o=function(){return isFinite(this.width)&&isFinite(this.height)},jt.alloc=function(){var t=Gt.pop();return void 0===t?new jt:t},jt.free=function(t){Gt.push(t)},c.Object.defineProperties(jt.prototype,{width:{get:function(){return this.$},set:function(t){0>t&&P(t,">= 0",jt,"width"),this.$=t}},height:{get:function(){return this.Z},set:function(t){0>t&&P(t,">= 0",jt,"height"),this.Z=t}}}),jt.prototype.isReal=jt.prototype.o,jt.prototype.equalsApprox=jt.prototype.Qa,jt.prototype.equalTo=jt.prototype.Fi,jt.prototype.equals=jt.prototype.A,jt.prototype.set=jt.prototype.set,jt.prototype.setTo=jt.prototype.wg;var Gt=[];function Et(t,e,n,i){void 0===t?this.Z=this.$=this.G=this.F=0:t instanceof ft?(n=t.x,t=t.y,e instanceof ft?(i=e.x,e=e.y,this.F=Math.min(n,i),this.G=Math.min(t,e),this.$=Math.abs(n-i),this.Z=Math.abs(t-e)):e instanceof jt?(this.F=n,this.G=t,this.$=e.$,this.Z=e.Z):w("Incorrect arguments supplied to Rect constructor")):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.F=t,this.G=e,this.$=n,this.Z=i):w("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this.v=!1}function Rt(t,e,n){t.$=e,t.Z=n}function It(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;(i=t[e++])&&(a=parseFloat(i));for(var r=0;""===t[e];)e++;(i=t[e++])&&(r=parseFloat(i));for(var o=0;""===t[e];)e++;return(i=t[e++])&&(o=parseFloat(i)),new Et(n,a,r,o)}return new Et}function _t(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Vt(t,e){return qe.ca(t.F,e.x)&&qe.ca(t.G,e.y)&&qe.ca(t.$,e.width)&&qe.ca(t.Z,e.height)}function Yt(t,e,n,i,a){var r=t.$;return n+a<=-r?(t.F+=r/2,t.$=0):(t.F-=a,t.$+=n+a),e+i<=-(n=t.Z)?(t.G+=n/2,t.Z=0):(t.G-=e,t.Z+=e+i),t}function Ht(t,e,n,i,a){var r=Math.max(t.F,e),o=Math.max(t.G,n);return e=Math.min(t.F+t.$,e+i),n=Math.min(t.G+t.Z,n+a),t.F=r,t.G=o,t.$=Math.max(0,e-r),t.Z=Math.max(0,n-o),t}function Xt(t,e,n){var i=t.$,a=t.F,r=e.x-n;return!(a>e.width+n+n+r||r>i+a)&&(i=t.Z,t=t.G,a=e.y-n,!(t>e.height+n+n+a||a>i+t))}function Ut(t,e,n,i,a){var r=Math.min(t.F,e),o=Math.min(t.G,n);return e=Math.max(t.F+t.$,e+i),n=Math.max(t.G+t.Z,n+a),t.F=r,t.G=o,t.$=e-r,t.Z=n-o,t}function qt(t,e,n,i,a,r,o,s){return void 0===o&&(o=0),void 0===s&&(s=0),t<=a&&a+o<=t+n&&e<=r&&r+s<=e+i}function Wt(t,e,n,i,a,r,o,s){return!(t>o+a||a>n+t)&&!(e>s+r||r>i+e)}jt.className="Size",jt.parse=Dt,jt.stringify=zt,jt.ZeroSize=Mt=new jt(0,0).ga(),jt.OneSize=Nt=new jt(1,1).ga(),jt.SixSize=Tt=new jt(6,6).ga(),jt.EightSize=Ct=new jt(8,8).ga(),jt.TenSize=Ft=new jt(10,10).ga(),jt.InfiniteSize=Bt=new jt(1/0,1/0).ga(),jt.NoSize=Ot=new jt(NaN,NaN).ga(),jt.parse=Dt,jt.stringify=zt,(n=Et.prototype).assign=function(t){return this.F=t.F,this.G=t.G,this.$=t.$,this.Z=t.Z,this},n.h=function(t,e,n,i){return this.F=t,this.G=e,this.$=n,this.Z=i,this},n.wg=function(t,e,n,i){return this.F=t,this.G=e,this.$=n,this.Z=i,this},n.set=function(t){return this.F=t.F,this.G=t.G,this.$=t.$,this.Z=t.Z,this},n.jd=function(t){return this.F=t.x,this.G=t.y,this},n.Rz=function(t){return this.$=t.$,this.Z=t.Z,this},Et.prototype.copy=function(){var t=new Et;return t.F=this.F,t.G=this.G,t.$=this.$,t.Z=this.Z,t},(n=Et.prototype).ga=function(){return this.v=!0,Object.freeze(this),this},n.I=function(){return Object.isFrozen(this)?this:this.copy().freeze()},n.freeze=function(){return this.v=!0,this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,this},n.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},n.A=function(t){return t instanceof Et&&(this.F===t.x&&this.G===t.y&&this.$===t.width&&this.Z===t.height)},n.Fi=function(t,e,n,i){return this.F===t&&this.G===e&&this.$===n&&this.Z===i},n.Qa=function(t){return qe.w(this.F,t.x)&&qe.w(this.G,t.y)&&qe.w(this.$,t.width)&&qe.w(this.Z,t.height)},n.da=function(t){return this.F<=t.x&&this.F+this.$>=t.x&&this.G<=t.y&&this.G+this.Z>=t.y},n.nf=function(t){return this.F<=t.x&&t.x+t.width<=this.F+this.$&&this.G<=t.y&&t.y+t.height<=this.G+this.Z},n.contains=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this.F<=t&&t+n<=this.F+this.$&&this.G<=e&&e+i<=this.G+this.Z},n.reset=function(){this.Z=this.$=this.G=this.F=0},n.offset=function(t,e){return this.F+=t,this.G+=e,this},n.Uc=function(t,e){return Yt(this,e,t,e,t)},n.Np=function(t){return Yt(this,t.top,t.right,t.bottom,t.left)},n.Pv=function(t){return Yt(this,-t.top,-t.right,-t.bottom,-t.left)},n.jz=function(t,e,n,i){return Yt(this,t,e,n,i)},n.nz=function(t){return Ht(this,t.x,t.y,t.width,t.height)},n.hv=function(t,e,n,i){return Ht(this,t,e,n,i)},n.Ic=function(t){return this.iv(t.x,t.y,t.width,t.height)},n.iv=function(t,e,n,i){var a=this.$,r=this.F;return!(1/0!==a&&1/0!==n&&(a+=r,n+=t,isNaN(n)||isNaN(a)||r>n||t>a))&&(t=this.Z,n=this.G,!(1/0!==t&&1/0!==i&&(t+=n,i+=e,isNaN(i)||isNaN(t)||n>i||e>t)))},n.Je=function(t){return Ut(this,t.x,t.y,0,0)},n.Jc=function(t){return Ut(this,t.F,t.G,t.$,t.Z)},n.Wv=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),Ut(this,t,e,n,i)},n.rk=function(t,e,n){return this.F=t-n.offsetX-n.x*this.$,this.G=e-n.offsetY-n.y*this.Z,this},n.o=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.pz=function(){return 0===this.width&&0===this.height},Et.alloc=function(){var t=Zt.pop();return void 0===t?new Et:t},Et.allocAt=function(t,e,n,i){var a=Zt.pop();return void 0===a?new Et(t,e,n,i):a.h(t,e,n,i)},Et.free=function(t){Zt.push(t)},c.Object.defineProperties(Et.prototype,{x:{get:function(){return this.F},set:function(t){this.F=t}},y:{get:function(){return this.G},set:function(t){this.G=t}},width:{get:function(){return this.$},set:function(t){0>t&&P(t,">= 0",Et,"width"),this.$=t}},height:{get:function(){return this.Z},set:function(t){0>t&&P(t,">= 0",Et,"height"),this.Z=t}},left:{get:function(){return this.F},set:function(t){this.F=t}},top:{get:function(){return this.G},set:function(t){this.G=t}},right:{get:function(){return this.F+this.$},set:function(t){this.F+=t-(this.F+this.$)}},bottom:{get:function(){return this.G+this.Z},set:function(t){this.G+=t-(this.G+this.Z)}},position:{get:function(){return new ft(this.F,this.G)},set:function(t){this.F=t.x,this.G=t.y}},size:{get:function(){return new jt(this.$,this.Z)},set:function(t){this.$=t.width,this.Z=t.height}},center:{get:function(){return new ft(this.F+this.$/2,this.G+this.Z/2)},set:function(t){this.F=t.x-this.$/2,this.G=t.y-this.Z/2}},centerX:{get:function(){return this.F+this.$/2},set:function(t){this.F=t-this.$/2}},centerY:{get:function(){return this.G+this.Z/2},set:function(t){this.G=t-this.Z/2}}}),Et.prototype.isEmpty=Et.prototype.pz,Et.prototype.isReal=Et.prototype.o,Et.prototype.setSpot=Et.prototype.rk,Et.prototype.union=Et.prototype.Wv,Et.prototype.unionRect=Et.prototype.Jc,Et.prototype.unionPoint=Et.prototype.Je,Et.prototype.intersects=Et.prototype.iv,Et.prototype.intersectsRect=Et.prototype.Ic,Et.prototype.intersect=Et.prototype.hv,Et.prototype.intersectRect=Et.prototype.nz,Et.prototype.grow=Et.prototype.jz,Et.prototype.subtractMargin=Et.prototype.Pv,Et.prototype.addMargin=Et.prototype.Np,Et.prototype.inflate=Et.prototype.Uc,Et.prototype.offset=Et.prototype.offset,Et.prototype.contains=Et.prototype.contains,Et.prototype.containsRect=Et.prototype.nf,Et.prototype.containsPoint=Et.prototype.da,Et.prototype.equalsApprox=Et.prototype.Qa,Et.prototype.equalTo=Et.prototype.Fi,Et.prototype.equals=Et.prototype.A,Et.prototype.setSize=Et.prototype.Rz,Et.prototype.setPoint=Et.prototype.jd,Et.prototype.set=Et.prototype.set,Et.prototype.setTo=Et.prototype.wg;var Kt,Jt,Zt=[];function $t(t,e,n,i){void 0===t?this.le=this.be=this.ve=this.xe=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==i?(this.top=t,this.right=e,this.bottom=n,this.left=i):w("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this.v=!1}function Qt(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new $t;for(var a=NaN;""===t[e];)e++;if((i=t[e++])&&(a=parseFloat(i)),isNaN(a))return new $t(n);for(var r=NaN;""===t[e];)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new $t(n,a);for(var o=NaN;""===t[e];)e++;return(i=t[e++])&&(o=parseFloat(i)),isNaN(o)?new $t(n,a):new $t(n,a,r,o)}return new $t}function te(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}Et.className="Rect",Et.parse=It,Et.stringify=_t,Et.contains=qt,Et.intersects=Wt,Et.ZeroRect=Kt=new Et(0,0,0,0).ga(),Et.NoRect=Jt=new Et(NaN,NaN,NaN,NaN).ga(),Et.parse=It,Et.stringify=_t,Et.contains=qt,Et.intersects=Wt,$t.prototype.assign=function(t){return this.xe=t.xe,this.ve=t.ve,this.be=t.be,this.le=t.le,this},$t.prototype.wg=function(t,e,n,i){return this.xe=t,this.ve=e,this.be=n,this.le=i,this},$t.prototype.set=function(t){return this.xe=t.xe,this.ve=t.ve,this.be=t.be,this.le=t.le,this},$t.prototype.copy=function(){var t=new $t;return t.xe=this.xe,t.ve=this.ve,t.be=this.be,t.le=this.le,t},(n=$t.prototype).ga=function(){return this.v=!0,Object.freeze(this),this},n.I=function(){return Object.isFrozen(this)?this:this.copy().freeze()},n.freeze=function(){return this.v=!0,this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,this},n.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},n.A=function(t){return t instanceof $t&&(this.xe===t.top&&this.ve===t.right&&this.be===t.bottom&&this.le===t.left)},n.Fi=function(t,e,n,i){return this.xe===t&&this.ve===e&&this.be===n&&this.le===i},n.Qa=function(t){return qe.w(this.xe,t.top)&&qe.w(this.ve,t.right)&&qe.w(this.be,t.bottom)&&qe.w(this.le,t.left)},n.o=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},$t.alloc=function(){var t=ie.pop();return void 0===t?new $t:t},$t.free=function(t){ie.push(t)},c.Object.defineProperties($t.prototype,{top:{get:function(){return this.xe},set:function(t){this.xe=t}},right:{get:function(){return this.ve},set:function(t){this.ve=t}},bottom:{get:function(){return this.be},set:function(t){this.be=t}},left:{get:function(){return this.le},set:function(t){this.le=t}}}),$t.prototype.isReal=$t.prototype.o,$t.prototype.equalsApprox=$t.prototype.Qa,$t.prototype.equalTo=$t.prototype.Fi,$t.prototype.equals=$t.prototype.A,$t.prototype.set=$t.prototype.set,$t.prototype.setTo=$t.prototype.wg;var ee,ne,ie=[];function ae(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}$t.className="Margin",$t.parse=Qt,$t.stringify=te,$t.ZeroMargin=ee=new $t(0,0,0,0).ga(),$t.TwoMargin=ne=new $t(2,2,2,2).ga(),$t.parse=Qt,$t.stringify=te,ae.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},ae.prototype.copy=function(){var t=new ae;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},(n=ae.prototype).toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},n.A=function(t){return t instanceof ae&&(this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy)},n.bt=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},n.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},n.multiply=function(t){var e=this.m12*t.m11+this.m22*t.m12,n=this.m11*t.m21+this.m21*t.m22,i=this.m12*t.m21+this.m22*t.m22,a=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=e,this.m21=n,this.m22=i,this.dx=a,this.dy=r,this},n.ov=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,a=-t.m21*e,r=t.m11*e,o=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*a+this.m21*r,a=this.m12*a+this.m22*r,this.dx=this.m11*o+this.m21*t+this.dx,this.dy=this.m12*o+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=a,this},n.at=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,a=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=a,this.dy=r,this},ae.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var i=1}else 180===t?(t=-1,i=0):270===t?(t=0,i=-1):(i=t*Math.PI/180,t=Math.cos(i),i=Math.sin(i));var a=this.m12*t+this.m22*i,r=this.m11*-i+this.m21*t,o=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=a,this.m21=r,this.m22=o,this.translate(-e,-n),this},(n=ae.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},n.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},n.ta=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},n.Ud=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},n.Vv=function(t){var e=t.F,n=t.G,i=e+t.$,a=n+t.Z,r=this.m11,o=this.m12,s=this.m21,h=this.m22,l=this.dx,u=this.dy,d=e*r+n*s+l,c=e*o+n*h+u,f=i*r+n*s+l,g=i*o+n*h+u;return n=e*r+a*s+l,e=e*o+a*h+u,r=i*r+a*s+l,i=i*o+a*h+u,a=Math.min(d,f),d=Math.max(d,f),f=Math.min(c,g),c=Math.max(c,g),a=Math.min(a,n),d=Math.max(d,n),f=Math.min(f,e),c=Math.max(c,e),a=Math.min(a,r),d=Math.max(d,r),f=Math.min(f,i),c=Math.max(c,i),t.F=a,t.G=f,t.$=d-a,t.Z=c-f,t},ae.alloc=function(){var t=_e.pop();return void 0===t?new ae:t},ae.free=function(t){_e.push(t)},ae.prototype.transformRect=ae.prototype.Vv,ae.prototype.invertedTransformPoint=ae.prototype.Ud,ae.prototype.transformPoint=ae.prototype.ta,ae.prototype.scale=ae.prototype.scale,ae.prototype.translate=ae.prototype.translate,ae.prototype.rotate=ae.prototype.rotate,ae.prototype.invert=ae.prototype.at,ae.prototype.multiplyInverted=ae.prototype.ov,ae.prototype.multiply=ae.prototype.multiply,ae.prototype.reset=ae.prototype.reset,ae.prototype.isIdentity=ae.prototype.bt,ae.prototype.equals=ae.prototype.A,ae.prototype.set=ae.prototype.set;var re,oe,se,he,le,ue,de,ce,fe,ge,pe,me,ve,ye,we,Se,Pe,be,xe,ke,Le,Me,Ne,Te,Ce,Fe,Be,Oe,Ae,je,De,ze,Ge,Ee,Re,Ie,_e=[];function Ve(t,e,n,i){void 0===t?this.Nd=this.Md=this.G=this.F=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this.v=!1}function Ye(t,e){return t.F=NaN,t.G=NaN,t.Md=e,t}function He(t){if("string"==typeof t){if("None"===(t=t.trim()))return re;if("TopLeft"===t)return oe;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return se;if("TopRight"===t)return he;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return le;if("Center"===t)return ue;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return de;if("BottomLeft"===t)return ce;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return fe;if("BottomRight"===t)return ge;if("TopSide"===t)return pe;if("LeftSide"===t)return me;if("RightSide"===t)return ve;if("BottomSide"===t)return ye;if("TopBottomSides"===t)return we;if("LeftRightSides"===t)return Se;if("TopLeftSides"===t)return Pe;if("TopRightSides"===t)return be;if("BottomLeftSides"===t)return xe;if("BottomRightSides"===t)return ke;if("NotTopSide"===t)return Le;if("NotLeftSide"===t)return Me;if("NotRightSide"===t)return Ne;if("NotBottomSide"===t)return Te;if("AllSides"===t)return Ce;if("Default"===t)return Fe;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];void 0!==i&&0<i.length&&(n=parseFloat(i));for(var a=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(a=parseFloat(i));for(var r=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(r=parseFloat(i));for(var o=0;""===t[e];)e++;return void 0!==(i=t[e++])&&0<i.length&&(o=parseFloat(i)),new Ve(n,a,r,o)}return new Ve}function Xe(t){return t.gb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}ae.className="Transform",ae.xF="54a702f3e53909c447824c6706603faf4c",Ve.prototype.assign=function(t){return this.F=t.F,this.G=t.G,this.Md=t.Md,this.Nd=t.Nd,this},Ve.prototype.wg=function(t,e,n,i){return this.F=t,this.G=e,this.Md=n,this.Nd=i,this},Ve.prototype.set=function(t){return this.F=t.F,this.G=t.G,this.Md=t.Md,this.Nd=t.Nd,this},Ve.prototype.copy=function(){var t=new Ve;return t.F=this.F,t.G=this.G,t.Md=this.Md,t.Nd=this.Nd,t},(n=Ve.prototype).ga=function(){return this.v=!0,Object.freeze(this),this},n.I=function(){return Object.isFrozen(this)?this:this.copy().freeze()},n.freeze=function(){return this.v=!0,this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,this},n.toString=function(){return this.gb()?0===this.Md&&0===this.Nd?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(re)?"None":this.A(oe)?"TopLeft":this.A(se)?"Top":this.A(he)?"TopRight":this.A(le)?"Left":this.A(ue)?"Center":this.A(de)?"Right":this.A(ce)?"BottomLeft":this.A(fe)?"Bottom":this.A(ge)?"BottomRight":this.A(pe)?"TopSide":this.A(me)?"LeftSide":this.A(ve)?"RightSide":this.A(ye)?"BottomSide":this.A(we)?"TopBottomSides":this.A(Se)?"LeftRightSides":this.A(Pe)?"TopLeftSides":this.A(be)?"TopRightSides":this.A(xe)?"BottomLeftSides":this.A(ke)?"BottomRightSides":this.A(Le)?"NotTopSide":this.A(Me)?"NotLeftSide":this.A(Ne)?"NotRightSide":this.A(Te)?"NotBottomSide":this.A(Ce)?"AllSides":this.A(Fe)?"Default":"None"},n.A=function(t){return t instanceof Ve&&((this.F===t.x||isNaN(this.F)&&isNaN(t.x))&&(this.G===t.y||isNaN(this.G)&&isNaN(t.y))&&this.Md===t.offsetX&&this.Nd===t.offsetY)},n.sv=function(){return new Ve(.5-(this.F-.5),.5-(this.G-.5),-this.Md,-this.Nd)},n.rf=function(t){if(!this.sf())return!1;if(!t.sf())if(t.A(Be))t=me;else if(t.A(Oe))t=ve;else if(t.A(Ae))t=pe;else{if(!t.A(je))return!1;t=ye}return t=t.offsetY,(this.Nd&t)===t},n.gb=function(){return!isNaN(this.x)&&!isNaN(this.y)},n.jc=function(){return isNaN(this.x)||isNaN(this.y)},n.sf=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},n.dt=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},n.Kb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},Ve.alloc=function(){var t=Ue.pop();return void 0===t?new Ve:t},Ve.free=function(t){Ue.push(t)},c.Object.defineProperties(Ve.prototype,{x:{get:function(){return this.F},set:function(t){this.F=t}},y:{get:function(){return this.G},set:function(t){this.G=t}},offsetX:{get:function(){return this.Md},set:function(t){this.Md=t}},offsetY:{get:function(){return this.Nd},set:function(t){this.Nd=t}}}),Ve.prototype.isDefault=Ve.prototype.Kb,Ve.prototype.isNone=Ve.prototype.dt,Ve.prototype.isSide=Ve.prototype.sf,Ve.prototype.isNoSpot=Ve.prototype.jc,Ve.prototype.isSpot=Ve.prototype.gb,Ve.prototype.includesSide=Ve.prototype.rf,Ve.prototype.opposite=Ve.prototype.sv,Ve.prototype.equals=Ve.prototype.A,Ve.prototype.set=Ve.prototype.set,Ve.prototype.setTo=Ve.prototype.wg;var Ue=[];Ve.className="Spot",Ve.parse=He,Ve.stringify=Xe,Ve.None=re=Ye(new Ve(0,0,0,0),0).ga(),Ve.Default=Fe=Ye(new Ve(0,0,-1,0),-1).ga(),Ve.TopLeft=oe=new Ve(0,0,0,0).ga(),Ve.TopCenter=se=new Ve(.5,0,0,0).ga(),Ve.TopRight=he=new Ve(1,0,0,0).ga(),Ve.LeftCenter=le=new Ve(0,.5,0,0).ga(),Ve.Center=ue=new Ve(.5,.5,0,0).ga(),Ve.RightCenter=de=new Ve(1,.5,0,0).ga(),Ve.BottomLeft=ce=new Ve(0,1,0,0).ga(),Ve.BottomCenter=fe=new Ve(.5,1,0,0).ga(),Ve.BottomRight=ge=new Ve(1,1,0,0).ga(),Ve.MiddleTop=De=se,Ve.MiddleLeft=ze=le,Ve.MiddleRight=Ge=de,Ve.MiddleBottom=Ee=fe,Ve.Top=Ae=se,Ve.Left=Be=le,Ve.Right=Oe=de,Ve.Bottom=je=fe,Ve.TopSide=pe=Ye(new Ve(0,0,1,1),1).ga(),Ve.LeftSide=me=Ye(new Ve(0,0,1,2),1).ga(),Ve.RightSide=ve=Ye(new Ve(0,0,1,4),1).ga(),Ve.BottomSide=ye=Ye(new Ve(0,0,1,8),1).ga(),Ve.TopBottomSides=we=Ye(new Ve(0,0,1,9),1).ga(),Ve.LeftRightSides=Se=Ye(new Ve(0,0,1,6),1).ga(),Ve.TopLeftSides=Pe=Ye(new Ve(0,0,1,3),1).ga(),Ve.TopRightSides=be=Ye(new Ve(0,0,1,5),1).ga(),Ve.BottomLeftSides=xe=Ye(new Ve(0,0,1,10),1).ga(),Ve.BottomRightSides=ke=Ye(new Ve(0,0,1,12),1).ga(),Ve.NotTopSide=Le=Ye(new Ve(0,0,1,14),1).ga(),Ve.NotLeftSide=Me=Ye(new Ve(0,0,1,13),1).ga(),Ve.NotRightSide=Ne=Ye(new Ve(0,0,1,11),1).ga(),Ve.NotBottomSide=Te=Ye(new Ve(0,0,1,7),1).ga(),Ve.AllSides=Ce=Ye(new Ve(0,0,1,15),1).ga(),Re=new Ve(.156,.156).ga(),Ie=new Ve(.844,.844).ga(),Ve.parse=He,Ve.stringify=Xe;var qe={Zz:"7da71ca0ad381e90",Ag:(Math.sqrt(2)-1)/3*4,dw:null,sqrt:function(t){if(0>=t)return 0;var e=qe.dw;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);qe.dw=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},w:function(t,e){return.5>(t-=e)&&-.5<t},ca:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Tb:function(t,e,n,i,a,r,o){if(0>=a&&(a=1e-6),t<n)var s=t,h=n;else s=n,h=t;if(e<i)var l=e,u=i;else l=i,u=e;if(t===n)return l<=o&&o<=u&&t-a<=r&&r<=t+a;if(e===i)return s<=r&&r<=h&&e-a<=o&&o<=e+a;if(h+=a,(s-=a)<=r&&r<=h&&(u+=a,(l-=a)<=o&&o<=u))if(h-s>u-l){if(!(t-n>a||n-t>a))return!0;if((r=(i-e)/(n-t)*(r-t)+e)-a<=o&&o<=r+a)return!0}else{if(!(e-i>a||i-e>a))return!0;if((o=(n-t)/(i-e)*(o-e)+t)-a<=r&&r<=o+a)return!0}return!1},Js:function(t,e,n,i,a,r,o,s,h,l,u,d){if(qe.Tb(t,e,o,s,d,n,i)&&qe.Tb(t,e,o,s,d,a,r))return qe.Tb(t,e,o,s,d,l,u);var c=(t+n)/2,f=(e+i)/2,g=(n+a)/2,p=(i+r)/2,m=((i=(c+g)/2)+(g=(g+(a=(a+o)/2))/2))/2,v=((n=(f+p)/2)+(p=(p+(r=(r+s)/2))/2))/2;return qe.Js(t,e,c,f,i,n,m,v,h,l,u,d)||qe.Js(m,v,g,p,a,r,o,s,h,l,u,d)},ny:function(t,e,n,i,a,r,o,s,h){var l=(n+a)/2,u=(i+r)/2;return h.h((((t+n)/2+l)/2+(l+(a+o)/2)/2)/2,(((e+i)/2+u)/2+(u+(r+s)/2)/2)/2),h},my:function(t,e,n,i,a,r,o,s){var h=(n+a)/2,l=(i+r)/2;return St(((t+n)/2+h)/2,((e+i)/2+l)/2,(h+(a+o)/2)/2,(l+(r+s)/2)/2)},Sl:function(t,e,n,i,a,r,o,s,h,l){if(qe.Tb(t,e,o,s,h,n,i)&&qe.Tb(t,e,o,s,h,a,r))Ut(l,t,e,0,0),Ut(l,o,s,0,0);else{var u=(t+n)/2,d=(e+i)/2,c=(n+a)/2,f=(i+r)/2,g=((i=(u+c)/2)+(c=(c+(a=(a+o)/2))/2))/2,p=((n=(d+f)/2)+(f=(f+(r=(r+s)/2))/2))/2;qe.Sl(t,e,u,d,i,n,g,p,h,l),qe.Sl(g,p,c,f,a,r,o,s,h,l)}return l},Ae:function(t,e,n,i,a,r,o,s,h,l){if(qe.Tb(t,e,o,s,h,n,i)&&qe.Tb(t,e,o,s,h,a,r))0===l.length&&(l.push(t),l.push(e)),l.push(o),l.push(s);else{var u=(t+n)/2,d=(e+i)/2,c=(n+a)/2,f=(i+r)/2,g=((i=(u+c)/2)+(c=(c+(a=(a+o)/2))/2))/2,p=((n=(d+f)/2)+(f=(f+(r=(r+s)/2))/2))/2;qe.Ae(t,e,u,d,i,n,g,p,h,l),qe.Ae(g,p,c,f,a,r,o,s,h,l)}return l},vv:function(t,e,n,i,a,r,o,s,h,l){if(qe.Tb(t,e,a,r,l,n,i))return qe.Tb(t,e,a,r,l,s,h);var u=(t+n)/2,d=(e+i)/2,c=(u+(n=(n+a)/2))/2,f=(d+(i=(i+r)/2))/2;return qe.vv(t,e,u,d,c,f,o,s,h,l)||qe.vv(c,f,n,i,a,r,o,s,h,l)},hA:function(t,e,n,i,a,r,o){return o.h(((t+n)/2+(n+a)/2)/2,((e+i)/2+(i+r)/2)/2),o},uv:function(t,e,n,i,a,r,o,s){if(qe.Tb(t,e,a,r,o,n,i))Ut(s,t,e,0,0),Ut(s,a,r,0,0);else{var h=(t+n)/2,l=(e+i)/2,u=(h+(n=(n+a)/2))/2,d=(l+(i=(i+r)/2))/2;qe.uv(t,e,h,l,u,d,o,s),qe.uv(u,d,n,i,a,r,o,s)}return s},mq:function(t,e,n,i,a,r,o,s){if(qe.Tb(t,e,a,r,o,n,i))0===s.length&&(s.push(t),s.push(e)),s.push(a),s.push(r);else{var h=(t+n)/2,l=(e+i)/2,u=(h+(n=(n+a)/2))/2,d=(l+(i=(i+r)/2))/2;qe.mq(t,e,h,l,u,d,o,s),qe.mq(u,d,n,i,a,r,o,s)}return s},Op:function(t,e,n,i,a,r,o,s,h,l,u,d,c,f){if(qe.Tb(t,e,o,s,c,n,i)&&qe.Tb(t,e,o,s,c,a,r)){var g=(t-o)*(l-d)-(e-s)*(h-u);if(0===g)return!1;if(c=((t*s-e*o)*(h-u)-(t-o)*(h*d-l*u))/g,g=((t*s-e*o)*(l-d)-(e-s)*(h*d-l*u))/g,(h>u?h-u:u-h)<(l>d?l-d:d-l)){if(e<s?o=e:(o=s,s=e),g<o||g>s)return!1}else if(t<o?s=t:(s=o,o=t),c<s||c>o)return!1;return f.h(c,g),!0}var p=(e+i)/2,m=((g=(t+n)/2)+(n=(n+a)/2))/2,v=(p+(i=(i+r)/2))/2,y=(m+(n=(n+(a=(a+o)/2))/2))/2,w=(v+(i=(i+(r=(r+s)/2))/2))/2,S=(u-h)*(u-h)+(d-l)*(d-l),P=!1;return qe.Op(t,e,g,p,m,v,y,w,h,l,u,d,c,f)&&((t=(f.x-h)*(f.x-h)+(f.y-l)*(f.y-l))<S&&(S=t,P=!0)),t=f.x,e=f.y,qe.Op(y,w,n,i,a,r,o,s,h,l,u,d,c,f)&&((f.x-h)*(f.x-h)+(f.y-l)*(f.y-l)<S?P=!0:f.h(t,e)),P},Pp:function(t,e,n,i,a,r,o,s,h,l,u,d,c){var f=0;if(qe.Tb(t,e,o,s,c,n,i)&&qe.Tb(t,e,o,s,c,a,r)){if(0===(c=(t-o)*(l-d)-(e-s)*(h-u)))return f;var g=((t*s-e*o)*(h-u)-(t-o)*(h*d-l*u))/c,p=((t*s-e*o)*(l-d)-(e-s)*(h*d-l*u))/c;if(g>=u)return f;if((h>u?h-u:u-h)<(l>d?l-d:d-l)){if(e<s?(t=e,e=s):t=s,p<t||p>e)return f}else if(t<o?(e=t,t=o):e=o,g<e||g>t)return f;0<c?f++:0>c&&f--}else{p=(e+i)/2;var m=(n+a)/2,v=(i+r)/2,y=((i=((g=(t+n)/2)+m)/2)+(m=(m+(a=(a+o)/2))/2))/2,w=((n=(p+v)/2)+(v=(v+(r=(r+s)/2))/2))/2;f+=qe.Pp(t,e,g,p,i,n,y,w,h,l,u,d,c),f+=qe.Pp(y,w,m,v,a,r,o,s,h,l,u,d,c)}return f},Si:function(t,e,n,i,a,r,o){return qe.ca(t,n)?(e<i?(n=e,e=i):n=i,r<n?(o.h(t,n),!1):r>e?(o.h(t,e),!1):(o.h(t,r),!0)):qe.ca(e,i)?(t<n?(i=t,t=n):i=n,a<i?(o.h(i,e),!1):a>t?(o.h(t,e),!1):(o.h(a,e),!0)):-5e-6>(a=((t-a)*(t-n)+(e-r)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)))?(o.h(t,e),!1):1.000005<a?(o.h(n,i),!1):(o.h(t+a*(n-t),e+a*(i-e)),!0)},Ge:function(t,e,n,i,a,r,o,s,h){return qe.w(t,n)&&qe.w(e,i)?(h.h(t,e),!1):qe.ca(a,o)?qe.ca(t,n)?(qe.Si(t,e,n,i,a,r,h),!1):qe.Si(t,e,n,i,a,(i-e)/(n-t)*(a-t)+e,h):(s=(s-r)/(o-a),qe.ca(t,n)?(n=s*(t-a)+r,e<i?(a=e,e=i):a=i,n<a?(h.h(t,a),!1):n>e?(h.h(t,e),!1):(h.h(t,n),!0)):(o=(i-e)/(n-t),qe.ca(s,o)?(qe.Si(t,e,n,i,a,r,h),!1):(a=(o*t-s*a+r-e)/(o-s),qe.ca(o,0)?(t<n?(i=t,t=n):i=n,a<i?(h.h(i,e),!1):a>t?(h.h(t,e),!1):(h.h(a,e),!0)):qe.Si(t,e,n,i,a,o*(a-t)+e,h))))},eA:function(t,e,n,i,a){return qe.Ge(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,a)},dA:function(t,e,n,i,a,r,o,s,h,l){function u(n,i){var a=(n-t)*(n-t)+(i-e)*(i-e);a<d&&(d=a,h.h(n,i))}var d=1/0;u(h.x,h.y);var c=0,f=0,g=0,p=0;if(a<o?(c=a,f=o):(c=o,f=a),r<s?(g=a,p=o):(g=o,p=a),c=(f-c)/2+l,l=(p-g)/2+l,a=(a+o)/2,r=(r+s)/2,0===c||0===l)return h;if(.5>(n>t?n-t:t-n)){if(0>(c=1-(n-a)*(n-a)/(c*c)))return h;i=-l*(c=Math.sqrt(c))+r,u(n,l*c+r),u(n,i)}else{if(0>(c=(s=2*(n=(i-e)/(n-t))*(e-n*t)/(l*l)-2*n*r/(l*l)-2*a/(c*c))*s-4*(i=1/(c*c)+n*n/(l*l))*(2*n*t*r/(l*l)-2*e*r/(l*l)+r*r/(l*l)+a*a/(c*c)-1+(e-n*t)*(e-n*t)/(l*l))))return h;u(l=(-s+(c=Math.sqrt(c)))/(2*i),n*l-n*t+e),u(c=(-s-c)/(2*i),n*c-n*t+e)}return h},Tc:function(t,e,n,i,a,r,o,s,h){var l=1e21,u=t,d=e;if(qe.Ge(t,e,t,i,a,r,o,s,h)){var c=(h.x-a)*(h.x-a)+(h.y-r)*(h.y-r);c<l&&(l=c,u=h.x,d=h.y)}return qe.Ge(n,e,n,i,a,r,o,s,h)&&((c=(h.x-a)*(h.x-a)+(h.y-r)*(h.y-r))<l&&(l=c,u=h.x,d=h.y)),qe.Ge(t,e,n,e,a,r,o,s,h)&&((e=(h.x-a)*(h.x-a)+(h.y-r)*(h.y-r))<l&&(l=e,u=h.x,d=h.y)),qe.Ge(t,i,n,i,a,r,o,s,h)&&((t=(h.x-a)*(h.x-a)+(h.y-r)*(h.y-r))<l&&(l=t,u=h.x,d=h.y)),h.h(u,d),1e21>l},cA:function(t,e,n,i,a,r,o,s,h){return o=a-o,0===(n=t-n)||0===o?0===n?a=(e=(r-s)/o)*(s=t)+(r-e*a):a=(r=(e-i)/n)*(s=a)+(e-r*t):a=(i=(e-i)/n)*(s=(r-(s=(r-s)/o)*a-(t=e-i*t))/(i-s))+t,h.h(s,a),h},Zs:function(t,e,n){var i=e.x,a=e.y,r=n.x,o=n.y,s=t.left,h=t.right,l=t.top,u=t.bottom;return i===r?(a<o?(r=a,a=o):r=o,s<=i&&i<=h&&r<=u&&a>=l):a===o?(i<r?(o=i,i=r):o=r,l<=a&&a<=u&&o<=h&&i>=s):!!(t.da(e)||t.da(n)||qe.Ys(s,l,h,l,i,a,r,o)||qe.Ys(h,l,h,u,i,a,r,o)||qe.Ys(h,u,s,u,i,a,r,o)||qe.Ys(s,u,s,l,i,a,r,o))},Ys:function(t,e,n,i,a,r,o,s){return 0>=qe.Ls(t,e,n,i,a,r)*qe.Ls(t,e,n,i,o,s)&&0>=qe.Ls(a,r,o,s,t,e)*qe.Ls(a,r,o,s,n,i)},Ls:function(t,e,n,i,a,r){return n-=t,0===(r=(t=a-t)*(i-=e)-(e=r-e)*n)&&(0<(r=t*n+e*i)&&(0>(r=(t-n)*n+(e-i)*i)&&(r=0))),0>r?-1:0<r?1:0},jq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Zw:function(t,e,n,i,a,r){var o=Math.PI;r||(i*=o/180,a*=o/180);var s=i>a?-1:1;r=[];var h=o/2,l=i;if(1e-5>(i=Math.min(2*o,Math.abs(a-i))))return h=l+s*Math.min(i,h),s=t+n*Math.cos(l),l=e+n*Math.sin(l),t+=n*Math.cos(h),e+=n*Math.sin(h),n=(s+t)/2,h=(l+e)/2,r.push([s,l,n,h,n,h,t,e]),r;for(;1e-5<i;)a=l+s*Math.min(i,h),r.push(qe.vy(n,l,a,t,e)),i-=Math.abs(a-l),l=a;return r},vy:function(t,e,n,i,a){var r=(n-e)/2,o=t*Math.cos(r),s=t*Math.sin(r),h=-s,l=o*o+h*h,u=l+o*o+h*s;return s=o-(l=4/3*(Math.sqrt(2*l*u)-u)/(o*s-h*o))*h,h=-(o=h+l*o),l=r+e,r=Math.cos(l),l=Math.sin(l),[i+t*Math.cos(e),a+t*Math.sin(e),i+s*r-o*l,a+s*l+o*r,i+s*r-h*l,a+s*l+h*r,i+t*Math.cos(n),a+t*Math.sin(n)]},Wp:function(t,e,n,i,a,r,o){var s=n=Math.floor((t-n)/a)*a+n;return n+a-t<a/2&&(s=n+a),t=i=Math.floor((e-i)/r)*r+i,i+r-e<r/2&&(t=i+r),o.h(s,t),o},jx:function(t,e){var n,i=Math.max(t,e);t=Math.min(t,e);do{e=i%t,i=n=t,t=e}while(0<e);return n},Ay:function(t,e,n,i){var a=0>n,r=0>i;if(t<e)var o=1,s=0;else o=0,s=1;var h=0===o?t:e,l=0===o?n:i;return(0===o?a:r)&&(l=-l),n=0===(o=s)?n:i,(0===o?a:r)&&(n=-n),qe.By(h,0===o?t:e,l,n,0,0)},By:function(t,e,n,i,a,r){if(0<i)if(0<n){a=t*t,t*=n;var o=e*i,s=-(r=e*e)+o,h=-r+Math.sqrt(t*t+o*o);e=s;for(var l=0;9999999999>l&&((e=.5*(s+h))!==s&&e!==h);++l){var u=t/(e+a),d=o/(e+r);if(0<(u=u*u+d*d-1))s=e;else{if(!(0>u))break;h=e}}n=a*n/(e+a)-n,i=r*i/(e+r)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else(r=t*n)<(i=t*t-e*e)?(i=r/i,r=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,n=Math.sqrt(n*n+r*r)):n=Math.abs(n-t);return n},Ke:new W,Bm:new W};function We(t){it(this),this.v=!1,void 0===t&&(t=hn),this.va=t,this.Bc=this.mc=this.bd=this.ad=0,this.hj=new tt,this.mr=this.hj.Ba,this.Vq=(new Et).freeze(),this.ra=!0,this.Nm=this.zk=null,this.Om=NaN,this.df=oe,this.ef=ge,this.cl=this.el=NaN,this.Ff=Br}function Ke(t,e){return t.type===rn&&e.type===hn&&!!(1===e.figures.count&&(e=e.figures.N(0),1===e.segments.count&&qe.w(t.startX,e.startX)&&qe.w(t.startY,e.startY)&&(e=e.segments.N(0),e.type===gn&&qe.w(t.endX,e.endX)&&qe.w(t.endY,e.endY))))}function Je(t){return t.toString()}function Ze(t,e){function n(){return p>=S-1||null!==h[p+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)}function i(){return p++,h[p]}function a(){var t=new ft(parseFloat(i()),parseFloat(i()));return m===m.toLowerCase()&&(t.x=w.x+t.x,t.y=w.y+t.y),t}function r(){return w=a()}function o(){return y=a()}function s(){var t=v.toLowerCase();return"c"!==t&&"s"!==t&&"q"!==t&&"t"!==t?w:new ft(2*w.x-y.x,2*w.y-y.y)}void 0===e&&(e=!1);var h=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2")).replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<h.length;t++){var l=h[t];if(null!==l.match(/(\.[0-9]*)(\.)/gm)){for(var u=C(),d="",c=!1,f=0;f<l.length;f++){var g=l[f];"."!==g||c?"."===g?(u.push(d),d="."):d+=g:(c=!0,d+=g)}for(u.push(d),h.splice(t,1),l=0;l<u.length;l++)h.splice(t+l,0,u[l]);t+=u.length-1,F(u)}}var p=-1,m="",v="";u=new ft(0,0);var y=new ft(0,0),w=new ft(0,0),S=h.length;for(t=Bl(null),d=l=!1,c=!0,f=null;!(p>=S-1);)if(v=m,""!==(m=i()))switch(m.toUpperCase()){case"X":c=!0,d=l=!1;break;case"M":for(f=r(),null===t.ec||!0===c?(Ml(t,f.x,f.y,l,!d),c=!1):t.moveTo(f.x,f.y),u=w;!n();)f=r(),t.lineTo(f.x,f.y);break;case"L":for(;!n();)f=r(),t.lineTo(f.x,f.y);break;case"H":for(;!n();)w=new ft((m===m.toLowerCase()?w.x:0)+parseFloat(i()),w.y),t.lineTo(w.x,w.y);break;case"V":for(;!n();)w=new ft(w.x,(m===m.toLowerCase()?w.y:0)+parseFloat(i())),t.lineTo(w.x,w.y);break;case"C":for(;!n();){f=a(),g=o();var P=r();Tl(t,f.x,f.y,g.x,g.y,P.x,P.y)}break;case"S":for(;!n();)f=s(),g=o(),P=r(),Tl(t,f.x,f.y,g.x,g.y,P.x,P.y);break;case"Q":for(;!n();)f=o(),g=r(),Cl(t,f.x,f.y,g.x,g.y);break;case"T":for(;!n();)y=f=s(),g=r(),Cl(t,f.x,f.y,g.x,g.y);break;case"B":for(;!n();){f=parseFloat(i()),g=parseFloat(i()),P=parseFloat(i());var b=parseFloat(i()),x=parseFloat(i()),k=x,L=!1;n()||(k=parseFloat(i()),n()||(L=0!==parseFloat(i()))),m===m.toLowerCase()&&(P+=w.x,b+=w.y),t.arcTo(f,g,P,b,x,k,L)}break;case"A":for(;!n();)Fl(t,f=Math.abs(parseFloat(i())),g=Math.abs(parseFloat(i())),P=parseFloat(i()),b=!!parseFloat(i()),x=!!parseFloat(i()),(k=r()).x,k.y);break;case"Z":Nl(t),w=u;break;case"F":for(f="",g=1;h[p+g];)if(null!==h[p+g].match(/[Uu]/))g++;else{if(null!==h[p+g].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){f=h[p+g];break}g++}f.match(/[Mm]/)?l=!0:0<t.ec.segments.length&&(t.ec.isFilled=!0);break;case"U":for(f="",g=1;h[p+g];)if(null!==h[p+g].match(/[Ff]/))g++;else{if(null!==h[p+g].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){f=h[p+g];break}g++}f.match(/[Mm]/)?d=!0:t.tq(!1)}if(u=t.Ts,Ol=t,e)for(e=u.figures.iterator;e.next();)e.value.isFilled=!0;return u}function $e(t,e){for(var n=t.length,i=ft.alloc(),a=0;a<n;a++){var r=t[a];i.x=r[0],i.y=r[1],e.ta(i),r[0]=i.x,r[1]=i.y,i.x=r[2],i.y=r[3],e.ta(i),r[2]=i.x,r[3]=i.y,i.x=r[4],i.y=r[5],e.ta(i),r[4]=i.x,r[5]=i.y,i.x=r[6],i.y=r[7],e.ta(i),r[6]=i.x,r[7]=i.y}ft.free(i)}function Qe(t,e,n){switch(t.type){case rn:case on:case sn:n?e.h(t.ad,t.bd,0,0):Ut(e,t.ad,t.bd,0,0),Ut(e,t.mc,t.Bc,0,0);break;case hn:var i=t.figures;t=i.j,i=i.length;for(var a=0;a<i;a++){var r=t[a];n&&0===a?e.h(r.startX,r.startY,0,0):Ut(e,r.startX,r.startY,0,0);for(var o=r.segments.j,s=o.length,h=r.startX,l=r.startY,u=0;u<s;u++){var d=o[u];switch(d.type){case gn:case fn:Ut(e,h=d.endX,l=d.endY,0,0);break;case pn:qe.Sl(h,l,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),h=d.endX,l=d.endY;break;case mn:qe.uv(h,l,d.point1X,d.point1Y,d.endX,d.endY,.5,e),h=d.endX,l=d.endY;break;case vn:case yn:var c=d.type===vn?dn(d,r):cn(d,r,h,l),f=c.length;if(0===f){Ut(e,h=d.centerX,l=d.centerY,0,0);break}d=null;for(var g=0;g<f;g++)d=c[g],qe.Sl(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);null!==d&&(h=d[6],l=d[7]);break;default:w("Unknown Segment type: "+d.type)}}}break;default:w("Unknown Geometry type: "+t.type)}}function tn(t,e,n,i,a,r,o,s){if(qe.Tb(a,r,o,s,.05,t,e))return NaN;var h=(t-n)*(r-s);if(0===h)return 0;var l=((t*i-e*n)*(a-o)-(t-n)*(a*s-r*o))/h;if(e=(t*i-e*n)*(r-s)/h,l>=t)return 0;if((a>o?a-o:o-a)<(r>s?r-s:s-r)){if(r<s){if(e<r||e>s)return 0}else if(e<s||e>r)return 0}else if(a<o){if(l<a||l>o)return 0}else if(l<o||l>a)return 0;return 0<h?1:-1}function en(t,e,n,i){for(var a=(t=t.figures.j).length,r=0;r<a;r++)if(t[r].da(e,n,i))return!0;return!1}function nn(t){if(null===t.zk){var e=t.zk=[],n=t.Nm=[],i=[],a=[];if(t.type===rn)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),a.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(a);else if(t.type===on)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),n.push(a);else if(t.type===sn){var r=new ln;r.startX=t.endX,r.startY=(t.startY+t.endY)/2;var o=new un(vn);if(o.startAngle=0,o.sweepAngle=360,o.centerX=(t.startX+t.endX)/2,o.centerY=(t.startY+t.endY)/2,o.radiusX=Math.abs(t.startX-t.endX)/2,o.radiusY=Math.abs(t.startY-t.endY)/2,r.add(o),0===(a=(t=dn(o,r)).length))i.push(o.centerX),i.push(o.centerY);else{o=r.startX,r=r.startY;for(var s=0;s<a;s++){var h=t[s];qe.Ae(o,r,h[2],h[3],h[4],h[5],h[6],h[7],.5,i),o=h[6],r=h[7]}}e.push(i),n.push(an(i))}else for(t=t.figures.iterator;t.next();){a=t.value,(i=[]).push(a.startX),i.push(a.startY),s=o=a.startX,h=r=a.startY;for(var l=a.segments.j,u=l.length,d=0;d<u;d++){var c=l[d];switch(c.type){case fn:4<=i.length&&(e.push(i),n.push(an(i))),(i=[]).push(c.endX),i.push(c.endY),s=o=c.endX,h=r=c.endY;break;case gn:i.push(c.endX),i.push(c.endY),o=c.endX,r=c.endY;break;case pn:qe.Ae(o,r,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,i),o=c.endX,r=c.endY;break;case mn:qe.mq(o,r,c.point1X,c.point1Y,c.endX,c.endY,.5,i),o=c.endX,r=c.endY;break;case vn:var f=dn(c,a),g=f.length;if(0===g){i.push(c.centerX),i.push(c.centerY),o=c.centerX,r=c.centerY;break}for(var p=0;p<g;p++){var m=f[p];qe.Ae(o,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,i),o=m[6],r=m[7]}break;case yn:if(0===(g=(f=cn(c,a,o,r)).length)){i.push(c.centerX),i.push(c.centerY),o=c.centerX,r=c.centerY;break}for(p=0;p<g;p++)m=f[p],qe.Ae(o,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,i),o=m[6],r=m[7];break;default:w("Segment not of valid type: "+c.type)}c.isClosed&&(i.push(s),i.push(h))}4<=i.length&&(e.push(i),n.push(an(i)))}}}function an(t){for(var e=[],n=0,i=0,a=t.length,r=0;r<a;r+=2){var o=t[r],s=t[r+1];0!==r&&e.push(Math.sqrt(wt(n,i,o,s))),n=o,i=s}return e}qe.za=qe.Zz,We.prototype.copy=function(){var t=new We;t.va=this.va,t.ad=this.ad,t.bd=this.bd,t.mc=this.mc,t.Bc=this.Bc;for(var e=this.hj.j,n=e.length,i=t.hj,a=0;a<n;a++){var r=e[a].copy();i.add(r)}return t.mr=this.mr,t.Vq.assign(this.Vq),t.ra=this.ra,t.zk=this.zk,t.Nm=this.Nm,t.Om=this.Om,t.df=this.df.I(),t.ef=this.ef.I(),t.el=this.el,t.cl=this.cl,t.Ff=this.Ff,t},(n=We.prototype).ga=function(){return this.freeze(),Object.freeze(this),this},n.freeze=function(){this.v=!0;var t=this.figures;t.freeze();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].freeze();return this},n.ha=function(){Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1;var t=this.figures;t.ha();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ha();return this},n.Qa=function(t){if(!(t instanceof We))return!1;if(this.type!==t.type)return this.type===rn&&t.type===hn?Ke(this,t):t.type===rn&&this.type===hn&&Ke(t,this);if(this.type===hn){var e=this.figures.j;t=t.figures.j;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].Qa(t[i]))return!1;return!0}return qe.w(this.startX,t.startX)&&qe.w(this.startY,t.startY)&&qe.w(this.endX,t.endX)&&qe.w(this.endY,t.endY)},n.fb=function(t){t.classType===We&&(this.type=t)},n.toString=function(t){switch(void 0===t&&(t=-1),this.type){case rn:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case on:var e=new Et(this.startX,this.startY,0,0);return e.Wv(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case sn:if((e=new Et(this.startX,this.startY,0,0)).Wv(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case hn:e="";for(var i=(n=this.figures.j).length,a=0;a<i;a++){var r=n[a];0<a&&(e+=" x "),r.isFilled&&(e+="F "),e+=r.toString(t)}return e;default:return this.type.toString()}},n.mv=function(){if(this.ra||this.mr!==this.figures.Ba)return!0;for(var t=this.figures.j,e=t.length,n=0;n<e;n++)if(t[n].mv())return!0;return!1},We.prototype.computeBounds=function(){this.ra=!1,this.Nm=this.zk=null,this.Om=NaN,this.mr=this.figures.Ba;for(var t=this.figures.j,e=t.length,n=0;n<e;n++){var i=t[n];i.ra=!1;var a=i.segments;i.ts=a.Ba,a=(i=a.j).length;for(var r=0;r<a;r++){var o=i[r];o.ra=!1,o.Le=null}}(t=this.Vq).ha(),isNaN(this.el)||isNaN(this.cl)?t.h(0,0,0,0):t.h(0,0,this.el,this.cl),Qe(this,t,!1),Ut(t,0,0,0,0),t.freeze()},We.prototype.Yw=function(){var t=new Et;return Qe(this,t,!0),t},We.prototype.normalize=function(){this.v&&S(this);var t=this.Yw();return this.offset(-t.x,-t.y),new ft(-t.x,-t.y)},We.prototype.offset=function(t,e){return this.v&&S(this),this.transform(1,0,0,1,t,e),this},We.prototype.scale=function(t,e){return this.v&&S(this),this.transform(t,0,0,e,0,0),this},We.prototype.rotate=function(t,e,n){this.v&&S(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=ae.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),ae.free(i),this},(n=We.prototype).transform=function(t,e,n,i,a,r){switch(this.type){case rn:case on:case sn:var o=this.ad,s=this.bd;this.ad=o*t+s*n+a,this.bd=o*e+s*i+r,o=this.mc,s=this.Bc,this.mc=o*t+s*n+a,this.Bc=o*e+s*i+r;break;case hn:for(var h=this.figures.j,l=h.length,u=0;u<l;u++){var d=h[u];o=d.startX,s=d.startY,d.startX=o*t+s*n+a,d.startY=o*e+s*i+r;for(var c=(d=d.segments.j).length,f=0;f<c;f++){var g=d[f];switch(g.type){case gn:case fn:o=g.endX,s=g.endY,g.endX=o*t+s*n+a,g.endY=o*e+s*i+r;break;case pn:o=g.point1X,s=g.point1Y,g.point1X=o*t+s*n+a,g.point1Y=o*e+s*i+r,o=g.point2X,s=g.point2Y,g.point2X=o*t+s*n+a,g.point2Y=o*e+s*i+r,o=g.endX,s=g.endY,g.endX=o*t+s*n+a,g.endY=o*e+s*i+r;break;case mn:o=g.point1X,s=g.point1Y,g.point1X=o*t+s*n+a,g.point1Y=o*e+s*i+r,o=g.endX,s=g.endY,g.endX=o*t+s*n+a,g.endY=o*e+s*i+r;break;case vn:o=g.centerX,s=g.centerY,g.centerX=o*t+s*n+a,g.centerY=o*e+s*i+r,0!==e&&(0>(o=180*Math.atan2(e,t)/Math.PI)&&(o+=360),g.startAngle+=o),0>t&&(g.startAngle=180-g.startAngle,g.sweepAngle=-g.sweepAngle),0>i&&(g.startAngle=-g.startAngle,g.sweepAngle=-g.sweepAngle),g.radiusX*=Math.sqrt(t*t+n*n),void 0!==g.radiusY&&(g.radiusY*=Math.sqrt(e*e+i*i));break;case yn:o=g.endX,s=g.endY,g.endX=o*t+s*n+a,g.endY=o*e+s*i+r,0!==e&&(0>(o=180*Math.atan2(e,t)/Math.PI)&&(o+=360),g.xAxisRotation+=o),0>t&&(g.xAxisRotation=180-g.xAxisRotation,g.isClockwiseArc=!g.isClockwiseArc),0>i&&(g.xAxisRotation=-g.xAxisRotation,g.isClockwiseArc=!g.isClockwiseArc),g.radiusX*=Math.sqrt(t*t+n*n),g.radiusY*=Math.sqrt(e*e+i*i);break;default:w("Unknown Segment type: "+g.type)}}}}return this.ra=!0,this},n.da=function(t,e,n,i){var a=t.x;t=t.y;for(var r,o,s,h,l,u=this.bounds.x-20,d=0,c=this.figures.j,f=c.length,g=0;g<f;g++){var p=c[g];if(p.isFilled){if(n&&p.da(a,t,e))return!0;for(var m=p.segments,v=r=p.startX,y=o=p.startY,S=m.j,P=0;P<=m.length;P++){var b=void 0;if(P!==m.length){var x=(b=S[P]).type;h=b.endX,l=b.endY}else x=gn,h=v,l=y;switch(x){case fn:if(v=tn(a,t,u,t,r,o,v,y),isNaN(v))return!0;d+=v,v=h,y=l;break;case gn:if(r=tn(a,t,u,t,r,o,h,l),isNaN(r))return!0;d+=r;break;case pn:d+=s=qe.Pp(r,o,b.point1X,b.point1Y,b.point2X,b.point2Y,h,l,u,t,a,t,.5);break;case mn:d+=s=qe.Pp(r,o,(r+2*b.point1X)/3,(o+2*b.point1Y)/3,(2*b.point1X+h)/3,(2*b.point1Y+l)/3,h,l,u,t,a,t,.5);break;case vn:case yn:var k=(x=b.type===vn?dn(b,p):cn(b,p,r,o)).length;if(0===k){if(r=tn(a,t,u,t,r,o,b.centerX,b.centerY),isNaN(r))return!0;d+=r;break}b=null;for(var L=0;L<k;L++){if(b=x[L],0===L){if(s=tn(a,t,u,t,r,o,b[0],b[1]),isNaN(s))return!0;d+=s}d+=s=qe.Pp(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],u,t,a,t,.5)}null!==b&&(h=b[6],l=b[7]);break;default:w("Unknown Segment type: "+b.type)}r=h,o=l}if(0!==d)return!0;d=0}else if(p.da(a,t,i?e:e+2))return!0}return 0!==d},n.dv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new ft),this.type===rn)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,a=n.length,r=this.flattenedTotalLength*t,o=0,s=0;s<a;s++){var h=i[s],l=h.length;for(t=0;t<l;t++){var u=h[t];if(o+u>=r)return i=(r-o)/u,a=(n=n[s])[2*t],s=n[2*t+1],e.h(a+(n[2*t+2]-a)*i,s+(n[2*t+3]-s)*i),e;o+=u}}return e.h(NaN,NaN),e},n.kx=function(t){if(this.type===rn){var e=this.startX,n=this.startY,i=this.endX,a=this.endY;if(e!==i||n!==a){var r=t.x;if(t=t.y,e===i){if(n<a){var o=n;i=a}else o=a,i=n;return t<=o?o===n?0:1:t>=i?i===n?0:1:Math.abs(t-n)/(i-o)}return n===a?(e<i?o=e:(o=i,i=e),r<=o?o===e?0:1:r>=i?i===e?0:1:Math.abs(r-e)/(i-o)):((r-e)*(r-e)+(t-n)*(t-n))/((i-e)*(i-e)+(a-n)*(a-n))}}else{if(this.type!==on){e=this.flattenedSegments,n=this.flattenedLengths,r=this.flattenedTotalLength,i=ft.alloc(),a=1/0,m=o=0,v=e.length;for(var s=y=0,h=0;h<v;h++)for(var l=e[h],u=n[h],d=l.length,c=0;c<d;c+=2){var f=l[c],g=l[c+1];if(0!==c){qe.Si(y,s,f,g,t.x,t.y,i);var p=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y);p<a&&(a=p,o=m,o+=Math.sqrt((i.x-y)*(i.x-y)+(i.y-s)*(i.y-s))),m+=u[(c-2)/2]}y=f,s=g}return ft.free(i),0>(t=o/r)?0:1<t?1:t}o=this.startX;var m=this.startY,v=this.endX;if(a=this.endY,o!==v||m!==a){r=2*(e=v-o)+2*(n=a-m),i=t.x,t=t.y,i=Math.min(Math.max(i,o),v),t=Math.min(Math.max(t,m),a),o=Math.abs(i-o),v=Math.abs(i-v),m=Math.abs(t-m),a=Math.abs(t-a);var y=Math.min(o,v,m,a);if(y===m)return i/r;if(y===v)return(e+t)/r;if(y===a)return(2*e+n-i)/r;if(y===o)return(2*e+2*n-t)/r}}return 0},n.add=function(t){return this.hj.add(t),this},n.xm=function(t,e,n,i,a,r,o,s){return this.v&&S(this),this.df=new Ve(t,e,a,r).freeze(),this.ef=new Ve(n,i,o,s).freeze(),this},c.Object.defineProperties(We.prototype,{flattenedSegments:{get:function(){return nn(this),this.zk}},flattenedLengths:{get:function(){return nn(this),this.Nm}},flattenedTotalLength:{get:function(){var t=this.Om;if(isNaN(t)){if(this.type===rn){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===on)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,i=t=0;i<n;i++)for(var a=e[i],r=a.length,o=0;o<r;o++)t+=a[o];this.Om=t}return t}},type:{get:function(){return this.va},set:function(t){this.va!==t&&(this.v&&S(this,t),this.va=t,this.ra=!0)}},startX:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.v&&S(this,t),this.ad=t,this.ra=!0)}},startY:{get:function(){return this.bd},set:function(t){this.bd!==t&&(this.v&&S(this,t),this.bd=t,this.ra=!0)}},endX:{get:function(){return this.mc},set:function(t){this.mc!==t&&(this.v&&S(this,t),this.mc=t,this.ra=!0)}},endY:{get:function(){return this.Bc},set:function(t){this.Bc!==t&&(this.v&&S(this,t),this.Bc=t,this.ra=!0)}},figures:{get:function(){return this.hj},set:function(t){this.hj!==t&&(this.v&&S(this,t),this.hj=t,this.ra=!0)}},spot1:{get:function(){return this.df},set:function(t){this.v&&S(this,t),this.df=t.I()}},spot2:{get:function(){return this.ef},set:function(t){this.v&&S(this,t),this.ef=t.I()}},defaultStretch:{get:function(){return this.Ff},set:function(t){this.v&&S(this,t),this.Ff=t}},bounds:{get:function(){return this.mv()&&this.computeBounds(),this.Vq}}}),We.prototype.setSpots=We.prototype.xm,We.prototype.add=We.prototype.add,We.prototype.getFractionForPoint=We.prototype.kx,We.prototype.getPointAlongPath=We.prototype.dv,We.prototype.transform=We.prototype.transform,We.prototype.rotate=We.prototype.rotate,We.prototype.scale=We.prototype.scale,We.prototype.offset=We.prototype.offset,We.prototype.normalize=We.prototype.normalize,We.prototype.computeBoundsWithoutOrigin=We.prototype.Yw,We.prototype.equalsApprox=We.prototype.Qa;var rn=new X(We,"Line",0),on=new X(We,"Rectangle",1),sn=new X(We,"Ellipse",2),hn=new X(We,"Path",3);function ln(t,e,n,i){it(this),this.v=!1,void 0===n&&(n=!0),this.Cr=n,void 0===i&&(i=!0),this.Gr=i,this.ad=void 0!==t?t:0,this.bd=void 0!==e?e:0,this.Bl=new tt,this.ts=this.Bl.Ba,this.ra=!0}function un(t,e,n,i,a,r,o,s){it(this),this.v=!1,void 0===t&&(t=gn),this.va=t,this.mc=void 0!==e?e:0,this.Bc=void 0!==n?n:0,void 0===i&&(i=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===o&&(o=0),t===yn?(0>(t=r%360)&&(t+=360),this.ue=t,this.oi=0,this.pi=Math.max(i,0),this.$g=Math.max(a,0),this.il="boolean"==typeof o&&!!o,this.Fk=!!s):(this.ue=i,this.oi=a,t===vn&&(r=Math.max(r,0)),this.pi=r,"number"==typeof o?(t===vn&&(o=Math.max(o,0)),this.$g=o):this.$g=0,this.Fk=this.il=!1),this.mj=!1,this.ra=!0,this.Le=null}function dn(t,e){if(null!==t.Le&&!1===e.ra)return t.Le;var n=t.radiusX,i=t.radiusY;if(void 0===i&&(i=n),0===n||0===i)return t.Le=[],t.Le;e=t.ue;var a=t.oi,r=qe.Zw(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==i){var o=ae.alloc();o.reset(),n<i?o.scale(1,i/n):o.scale(n/i,1),$e(r,o),ae.free(o)}for(n=r.length,i=0;i<n;i++)(o=r[i])[0]+=e,o[1]+=a,o[2]+=e,o[3]+=a,o[4]+=e,o[5]+=a,o[6]+=e,o[7]+=a;return t.Le=r,t.Le}function cn(t,e,n,i){function a(t,e,n,i){return(t*i<e*n?-1:1)*Math.acos((t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(n*n+i*i)))}if(null!==t.Le&&!1===e.ra)return t.Le;e=t.pi;var r=t.$g;0===e&&(e=1e-4),0===r&&(r=1e-4);var o=Math.PI/180*t.ue,s=t.il,h=t.Fk,l=t.mc,u=t.Bc,d=Math.cos(o),c=Math.sin(o),f=d*(n-l)/2+c*(i-u)/2,g=f*f/(e*e)+(o=-c*(n-l)/2+d*(i-u)/2)*o/(r*r);return 1<g&&(e*=Math.sqrt(g),r*=Math.sqrt(g)),g=(s===h?-1:1)*Math.sqrt((e*e*r*r-e*e*o*o-r*r*f*f)/(e*e*o*o+r*r*f*f)),isNaN(g)&&(g=0),s=g*e*o/r,g=g*-r*f/e,isNaN(s)&&(s=0),isNaN(g)&&(g=0),n=(n+l)/2+d*s-c*g,i=(i+u)/2+c*s+d*g,u=a(1,0,(f-s)/e,(o-g)/r),o=a(d=(f-s)/e,l=(o-g)/r,f=(-f-s)/e,s=(-o-g)/r),-1>=(f=(d*f+l*s)/(Math.sqrt(d*d+l*l)*Math.sqrt(f*f+s*s)))?o=Math.PI:1<=f&&(o=0),!h&&0<o&&(o-=2*Math.PI),h&&0>o&&(o+=2*Math.PI),h=e>r?1:e/r,f=e>r?r/e:1,e=qe.Zw(0,0,e>r?e:r,u,u+o,!0),(r=ae.alloc()).reset(),r.translate(n,i),r.rotate(t.ue,0,0),r.scale(h,f),$e(e,r),ae.free(r),t.Le=e,t.Le}We.className="Geometry",We.stringify=Je,We.fillPath=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",i=0;i<e;i++){var a=t[i];n=null!==a.match(/[Ff]/)?0===i?n+a:n+"X"+(" "===a[0]?"":" ")+a:n+(0===i?"":"X ")+"F"+(" "===a[0]?"":" ")+a}return n},We.parse=Ze,We.Line=rn,We.Rectangle=on,We.Ellipse=sn,We.Path=hn,ln.prototype.copy=function(){var t=new ln;t.Cr=this.Cr,t.Gr=this.Gr,t.ad=this.ad,t.bd=this.bd;for(var e=this.Bl.j,n=e.length,i=t.Bl,a=0;a<n;a++){var r=e[a].copy();i.add(r)}return t.ts=this.ts,t.ra=this.ra,t},(n=ln.prototype).Qa=function(t){if(!(t instanceof ln&&qe.w(this.startX,t.startX)&&qe.w(this.startY,t.startY)))return!1;var e=this.segments.j;t=t.segments.j;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].Qa(t[i]))return!1;return!0},n.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.j,i=n.length,a=0;a<i;a++)e+=" "+n[a].toString(t);return e},n.freeze=function(){this.v=!0;var t=this.segments;t.freeze();var e=t.j;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},n.ha=function(){this.v=!1;var t=this.segments;t.ha();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ha();return this},n.mv=function(){if(this.ra)return!0;var t=this.segments;if(this.ts!==t.Ba)return!0;for(var e=(t=t.j).length,n=0;n<e;n++)if(t[n].ra)return!0;return!1},n.add=function(t){return this.Bl.add(t),this},n.da=function(t,e,n){for(var i=this.startX,a=this.startY,r=i,o=a,s=this.segments.j,h=s.length,l=0;l<h;l++){var u=s[l];switch(u.type){case fn:r=u.endX,o=u.endY,i=u.endX,a=u.endY;break;case gn:if(qe.Tb(i,a,u.endX,u.endY,n,t,e))return!0;i=u.endX,a=u.endY;break;case pn:if(qe.Js(i,a,u.point1X,u.point1Y,u.point2X,u.point2Y,u.endX,u.endY,.5,t,e,n))return!0;i=u.endX,a=u.endY;break;case mn:if(qe.vv(i,a,u.point1X,u.point1Y,u.endX,u.endY,.5,t,e,n))return!0;i=u.endX,a=u.endY;break;case vn:case yn:var d=u.type===vn?dn(u,this):cn(u,this,i,a),c=d.length;if(0===c){if(qe.Tb(i,a,u.centerX,u.centerY,n,t,e))return!0;i=u.centerX,a=u.centerY;break}for(var f=null,g=0;g<c;g++)if(f=d[g],0===g&&qe.Tb(i,a,f[0],f[1],n,t,e)||qe.Js(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],.5,t,e,n))return!0;null!==f&&(i=f[6],a=f[7]);break;default:w("Unknown Segment type: "+u.type)}if(u.isClosed&&(i!==r||a!==o)&&qe.Tb(i,a,r,o,n,t,e))return!0}return!1},c.Object.defineProperties(ln.prototype,{isFilled:{get:function(){return this.Cr},set:function(t){this.v&&S(this,t),this.Cr=t}},isShadowed:{get:function(){return this.Gr},set:function(t){this.v&&S(this,t),this.Gr=t}},startX:{get:function(){return this.ad},set:function(t){this.v&&S(this,t),this.ad=t,this.ra=!0}},startY:{get:function(){return this.bd},set:function(t){this.v&&S(this,t),this.bd=t,this.ra=!0}},segments:{get:function(){return this.Bl},set:function(t){this.v&&S(this,t),this.Bl=t,this.ra=!0}}}),ln.prototype.add=ln.prototype.add,ln.prototype.equalsApprox=ln.prototype.Qa,ln.className="PathFigure",un.prototype.copy=function(){var t=new un;return t.va=this.va,t.mc=this.mc,t.Bc=this.Bc,t.ue=this.ue,t.oi=this.oi,t.pi=this.pi,t.$g=this.$g,t.il=this.il,t.Fk=this.Fk,t.mj=this.mj,t.ra=this.ra,t},(n=un.prototype).Qa=function(t){if(!(t instanceof un)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case fn:case gn:return qe.w(this.endX,t.endX)&&qe.w(this.endY,t.endY);case pn:return qe.w(this.endX,t.endX)&&qe.w(this.endY,t.endY)&&qe.w(this.point1X,t.point1X)&&qe.w(this.point1Y,t.point1Y)&&qe.w(this.point2X,t.point2X)&&qe.w(this.point2Y,t.point2Y);case mn:return qe.w(this.endX,t.endX)&&qe.w(this.endY,t.endY)&&qe.w(this.point1X,t.point1X)&&qe.w(this.point1Y,t.point1Y);case vn:return qe.w(this.startAngle,t.startAngle)&&qe.w(this.sweepAngle,t.sweepAngle)&&qe.w(this.centerX,t.centerX)&&qe.w(this.centerY,t.centerY)&&qe.w(this.radiusX,t.radiusX)&&qe.w(this.radiusY,t.radiusY);case yn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&qe.w(this.xAxisRotation,t.xAxisRotation)&&qe.w(this.endX,t.endX)&&qe.w(this.endY,t.endY)&&qe.w(this.radiusX,t.radiusX)&&qe.w(this.radiusY,t.radiusY);default:return!1}},n.fb=function(t){t.classType===un&&(this.type=t)},n.toString=function(t){switch(void 0===t&&(t=-1),this.type){case fn:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case gn:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case pn:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case mn:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case vn:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case yn:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.mj?"z":"")},n.freeze=function(){return this.v=!0,this},n.ha=function(){return this.v=!1,this},n.close=function(){return this.mj=!0,this},c.Object.defineProperties(un.prototype,{isClosed:{get:function(){return this.mj},set:function(t){this.mj!==t&&(this.mj=t,this.ra=!0)}},type:{get:function(){return this.va},set:function(t){this.v&&S(this,t),this.va=t,this.ra=!0}},endX:{get:function(){return this.mc},set:function(t){this.v&&S(this,t),this.mc=t,this.ra=!0}},endY:{get:function(){return this.Bc},set:function(t){this.v&&S(this,t),this.Bc=t,this.ra=!0}},point1X:{get:function(){return this.ue},set:function(t){this.v&&S(this,t),this.ue=t,this.ra=!0}},point1Y:{get:function(){return this.oi},set:function(t){this.v&&S(this,t),this.oi=t,this.ra=!0}},point2X:{get:function(){return this.pi},set:function(t){this.v&&S(this,t),this.pi=t,this.ra=!0}},point2Y:{get:function(){return this.$g},set:function(t){this.v&&S(this,t),this.$g=t,this.ra=!0}},centerX:{get:function(){return this.ue},set:function(t){this.v&&S(this,t),this.ue=t,this.ra=!0}},centerY:{get:function(){return this.oi},set:function(t){this.v&&S(this,t),this.oi=t,this.ra=!0}},radiusX:{get:function(){return this.pi},set:function(t){0>t&&P(t,">= zero",un,"radiusX"),this.v&&S(this,t),this.pi=t,this.ra=!0}},radiusY:{get:function(){return this.$g},set:function(t){0>t&&P(t,">= zero",un,"radiusY"),this.v&&S(this,t),this.$g=t,this.ra=!0}},startAngle:{get:function(){return this.mc},set:function(t){this.mc!==t&&(this.v&&S(this,t),0>(t%=360)&&(t+=360),this.mc=t,this.ra=!0)}},sweepAngle:{get:function(){return this.Bc},set:function(t){this.v&&S(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Bc=t,this.ra=!0}},isClockwiseArc:{get:function(){return this.Fk},set:function(t){this.v&&S(this,t),this.Fk=t,this.ra=!0}},isLargeArc:{get:function(){return this.il},set:function(t){this.v&&S(this,t),this.il=t,this.ra=!0}},xAxisRotation:{get:function(){return this.ue},set:function(t){0>(t%=360)&&(t+=360),this.v&&S(this,t),this.ue=t,this.ra=!0}}}),un.prototype.equalsApprox=un.prototype.Qa;var fn=new X(un,"Move",0),gn=new X(un,"Line",1),pn=new X(un,"Bezier",2),mn=new X(un,"QuadraticBezier",3),vn=new X(un,"Arc",4),yn=new X(un,"SvgArc",4);function wn(){this.C=null,this.Cu=new ft(0,0).freeze(),this.St=new ft(0,0).freeze(),this.Oq=this.Vr=0,this.Pq=1,this.Kr="",this.Es=this.fr=!1,this.er=this.Rq=0,this.Dg=this.tr=this.Er=!1,this.lr=null,this.Cs=0,this.Qd=this.Bs=null}function Sn(){this.C=null,this.Ua="",this.fs=this.zs=null}function Pn(){this.Vm=xn,this.Ej=this.Ur="",this.Bo=this.Co=this.Ho=this.Io=this.Go=this.C=this.Zb=null}un.className="PathSegment",un.Move=fn,un.Line=gn,un.Bezier=pn,un.QuadraticBezier=mn,un.Arc=vn,un.SvgArc=yn,wn.prototype.copy=function(){var t=new wn;return this.clone(t)},wn.prototype.clone=function(t){return t.C=this.C,t.Cu.assign(this.viewPoint),t.St.assign(this.documentPoint),t.Vr=this.Vr,t.Oq=this.Oq,t.Pq=this.Pq,t.Kr=this.Kr,t.fr=this.fr,t.Es=this.Es,t.Rq=this.Rq,t.er=this.er,t.Er=this.Er,t.tr=this.tr,t.Dg=this.Dg,t.lr=this.lr,t.Cs=this.Cs,t.Bs=this.Bs,t.Qd=this.Qd,t},wn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},wn.prototype.Zp=function(t,e){var n=this.diagram;return null===n||Ia(n,this.event,t,e),e},wn.prototype.az=function(t,e){var n=this.diagram;return null===n||(Ia(n,this.event,t,e),e.assign(n.xt(e))),e},c.Object.defineProperties(wn.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},viewPoint:{get:function(){return this.Cu},set:function(t){this.Cu.assign(t)}},documentPoint:{get:function(){return this.St},set:function(t){this.St.assign(t)}},modifiers:{get:function(){return this.Vr},set:function(t){this.Vr=t}},button:{get:function(){return this.Oq},set:function(t){if(this.Oq=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Pq},set:function(t){this.Pq=t}},key:{get:function(){return this.Kr},set:function(t){this.Kr=t}},down:{get:function(){return this.fr},set:function(t){this.fr=t}},up:{get:function(){return this.Es},set:function(t){this.Es=t}},clickCount:{get:function(){return this.Rq},set:function(t){this.Rq=t}},delta:{get:function(){return this.er},set:function(t){this.er=t}},isMultiTouch:{get:function(){return this.Er},set:function(t){this.Er=t}},handled:{get:function(){return this.tr},set:function(t){this.tr=t}},bubbles:{get:function(){return this.Dg},set:function(t){this.Dg=t}},event:{get:function(){return this.lr},set:function(t){this.lr=t}},isTouchEvent:{get:function(){var t=g.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=g.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.Cs},set:function(t){this.Cs=t}},targetDiagram:{get:function(){return this.Bs},set:function(t){this.Bs=t}},targetObject:{get:function(){return this.Qd},set:function(t){this.Qd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),wn.prototype.getMultiTouchDocumentPoint=wn.prototype.az,wn.prototype.getMultiTouchViewPoint=wn.prototype.Zp,wn.className="InputEvent",Sn.prototype.copy=function(){var t=new Sn;return t.C=this.C,t.Ua=this.Ua,t.zs=this.zs,t.fs=this.fs,t},Sn.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},c.Object.defineProperties(Sn.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},name:{get:function(){return this.Ua},set:function(t){this.Ua=t}},subject:{get:function(){return this.zs},set:function(t){this.zs=t}},parameter:{get:function(){return this.fs},set:function(t){this.fs=t}}}),Sn.className="DiagramEvent",Pn.prototype.clear=function(){this.Bo=this.Co=this.Ho=this.Io=this.Go=this.C=this.Zb=null},Pn.prototype.copy=function(){var t=new Pn;t.Vm=this.Vm,t.Ur=this.Ur,t.Ej=this.Ej,t.Zb=this.Zb,t.C=this.C,t.Go=this.Go;var e=this.Io;return t.Io=k(e)&&"function"==typeof e.I?e.I():e,e=this.Ho,t.Ho=k(e)&&"function"==typeof e.I?e.I():e,e=this.Co,t.Co=k(e)&&"function"==typeof e.I?e.I():e,e=this.Bo,t.Bo=k(e)&&"function"==typeof e.I?e.I():e,t},Pn.prototype.fb=function(t){t.classType===Pn&&(this.change=t)},Pn.prototype.toString=function(){var t="";return t=this.change===bn?t+"* ":this.change===xn?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===bn?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=O(this.object)),null!==this.oldValue&&(t+="  old: "+O(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+O(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},Pn.prototype.J=function(t){return t?this.oldValue:this.newValue},Pn.prototype.cz=function(t){return t?this.oldParam:this.newParam},Pn.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},Pn.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.Sj(this,!0):null!==this.diagram&&this.diagram.Sj(this,!0))},Pn.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},Pn.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.Sj(this,!1):null!==this.diagram&&this.diagram.Sj(this,!1))},c.Object.defineProperties(Pn.prototype,{model:{get:function(){return this.Zb},set:function(t){this.Zb=t}},diagram:{get:function(){return this.C},set:function(t){this.C=t}},change:{get:function(){return this.Vm},set:function(t){this.Vm=t}},modelChange:{get:function(){return this.Ur},set:function(t){this.Ur=t}},propertyName:{get:function(){return this.Ej},set:function(t){this.Ej=t}},isTransactionFinished:{get:function(){return this.Vm===bn&&("CommittedTransaction"===this.Ej||"FinishedUndo"===this.Ej||"FinishedRedo"===this.Ej)}},object:{get:function(){return this.Go},set:function(t){this.Go=t}},oldValue:{get:function(){return this.Io},set:function(t){this.Io=t}},oldParam:{get:function(){return this.Ho},set:function(t){this.Ho=t}},newValue:{get:function(){return this.Co},set:function(t){this.Co=t}},newParam:{get:function(){return this.Bo},set:function(t){this.Bo=t}}}),Pn.prototype.redo=Pn.prototype.redo,Pn.prototype.canRedo=Pn.prototype.canRedo,Pn.prototype.undo=Pn.prototype.undo,Pn.prototype.canUndo=Pn.prototype.canUndo,Pn.prototype.getParam=Pn.prototype.cz,Pn.prototype.getValue=Pn.prototype.J,Pn.prototype.clear=Pn.prototype.clear;var bn=new X(Pn,"Transaction",-1),xn=new X(Pn,"Property",0),kn=new X(Pn,"Insert",1),Ln=new X(Pn,"Remove",2);function Mn(){this.u=(new tt).freeze(),this.Ua="",this.l=!1}function Nn(){this.ju=new nt,this.Dc=!1,this.K=(new tt).freeze(),this.ge=-1,this.u=999,this.ie=!1,this.cr=null,this.Ai=0,this.l=!1,this.re=(new tt).freeze(),this.sl=new tt,this.Zt=!0,this.du=!1}function Tn(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&b("Ending transaction without having started a transaction: "+n);var i=1===t.transactionLevel;i&&e&&t.yb("CommittingTransaction",n,t.currentTransaction);var a=0;if(0<t.transactionLevel&&(t.Ai--,t.isEnabled)){var r=t.re.count;0<r&&(""===n&&(n=t.re.N(0)),t.re.ha(),t.re.mb(r-1),t.re.freeze()),0<(r=t.sl.count)&&(a=t.sl.N(r-1),t.sl.mb(r-1))}if(r=t.currentTransaction,i){if(e){if(t.du=!1,t.isEnabled&&null!==r){for((e=r).isComplete=!0,e.name=n,(i=t.history).ha(),a=i.count-1;a>t.historyIndex;a--)null!==(r=i.N(a))&&r.clear(),i.mb(a),t.du=!0;0<=(a=t.maxHistoryLength)&&(0===a?i.clear():i.count>=a&&(null!==(r=i.N(0))&&r.clear(),i.mb(0),t.ge--)),0!==a&&(i.add(e),t.ge++),i.freeze(),r=e}t.yb("CommittedTransaction",n,r)}else{t.ie=!0;try{t.isEnabled&&null!==r&&(r.isComplete=!0,r.undo())}finally{t.yb("RolledBackTransaction",n,r),t.ie=!1}null!==r&&r.clear()}return t.cr=null,!0}if(t.isEnabled&&!e&&null!==r){for(t=a,e=(n=r.changes).count-1;e>=t;e--)null!==(i=n.N(e))&&i.undo(),n.ha(),n.mb(e);n.freeze()}return!1}function Cn(){it(this),this.C=_r,this.Ua="",this.Dc=!0,this.Ub=!1,this.Bq=null,this.$x=new wn,this.Hs=-1}function Fn(){Cn.call(this),this.name="ToolManager",this.Kc=new tt,this.Vc=new tt,this.zg=new tt,this.ba=this.La=850,this.u=new jt(2,2).ga(),this.Vb=5e3,this.Ma=An,this.K=zn,this.br=this.l=null,this.Lj=-1}function Bn(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}function On(t,e,n,i){null!==n&&(n.name=e,n.hb(t.diagram)),t.findTool(e)?t.replaceTool(e,n):null!==n&&i.add(n)}Pn.className="ChangedEvent",Pn.Transaction=bn,Pn.Property=xn,Pn.Insert=kn,Pn.Remove=Ln,Mn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.N(n);null!==i&&(e+="\n  "+i.toString())}}return e},Mn.prototype.clear=function(){var t=this.changes;t.ha();for(var e=t.count-1;0<=e;e--){var n=t.N(e);null!==n&&n.clear()}t.clear(),t.freeze()},Mn.prototype.canUndo=function(){return this.isComplete},Mn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.N(t);null!==e&&e.undo()}},Mn.prototype.canRedo=function(){return this.isComplete},Mn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.N(e);null!==n&&n.redo()}},c.Object.defineProperties(Mn.prototype,{changes:{get:function(){return this.u}},name:{get:function(){return this.Ua},set:function(t){this.Ua=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Mn.prototype.redo=Mn.prototype.redo,Mn.prototype.canRedo=Mn.prototype.canRedo,Mn.prototype.undo=Mn.prototype.undo,Mn.prototype.canUndo=Mn.prototype.canUndo,Mn.prototype.clear=Mn.prototype.clear,Mn.className="Transaction",Nn.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.N(i);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,i=0;i<n;i++)e+="\n "+this.history.N(i).toString(t-1);return e},Nn.prototype.clear=function(){var t=this.history;t.ha();for(var e=t.count-1;0<=e;e--){var n=t.N(e);null!==n&&n.clear()}t.clear(),this.ge=-1,t.freeze(),this.ie=!1,this.cr=null,this.Ai=0,this.re.ha(),this.re.clear(),this.re.freeze(),this.sl.clear()},Nn.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(n=Nn.prototype).Rw=function(t){this.ju.add(t)},n.yx=function(t){this.ju.remove(t)},n.Aa=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Zt&&(this.Zt=!1,this.Ai++,this.yb("StartingFirstTransaction",t,this.currentTransaction),0<this.Ai&&this.Ai--),this.isEnabled&&(this.re.ha(),this.re.add(t),this.re.freeze(),null===this.currentTransaction?this.sl.add(0):this.sl.add(this.currentTransaction.changes.count)),this.Ai++;var e=1===this.transactionLevel;return e&&this.yb("StartedTransaction",t,this.currentTransaction),e},n.Za=function(t){return void 0===t&&(t=""),Tn(this,!0,t)},n.wf=function(){return Tn(this,!1,"")},Nn.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Nn.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ie=!0,this.yb("StartingUndo","Undo",t),this.ge--,t.undo()}catch(t){b("undo error: "+t.toString())}finally{this.yb("FinishedUndo","Undo",t),this.ie=!1}}},Nn.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Nn.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ie=!0,this.yb("StartingRedo","Redo",t),this.ge++,t.redo()}catch(t){b("redo error: "+t.toString())}finally{this.yb("FinishedRedo","Redo",t),this.ie=!1}}},Nn.prototype.yb=function(t,e,n){void 0===n&&(n=null);var i=new Pn;for(i.change=bn,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)e=t.value,i.model=e,e.Ks(i)},Nn.prototype.gv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.cr=e=new Mn);var n=t.copy();(e=e.changes).ha(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Zt&&(null!==(t=t.diagram)&&!1===t.Qi||b("Change not within a transaction: "+n.toString()))}},Nn.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(void 0!==(t=t.object).layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},c.Object.defineProperties(Nn.prototype,{models:{get:function(){return this.ju.iterator}},isEnabled:{get:function(){return this.Dc},set:function(t){this.Dc=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.N(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.N(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ie}},history:{get:function(){return this.K}},maxHistoryLength:{get:function(){return this.u},set:function(t){this.u=t}},historyIndex:{get:function(){return this.ge}},currentTransaction:{get:function(){return this.cr}},transactionLevel:{get:function(){return this.Ai}},isInTransaction:{get:function(){return 0<this.Ai}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.re}}}),Nn.prototype.handleChanged=Nn.prototype.gv,Nn.prototype.redo=Nn.prototype.redo,Nn.prototype.undo=Nn.prototype.undo,Nn.prototype.canUndo=Nn.prototype.canUndo,Nn.prototype.rollbackTransaction=Nn.prototype.wf,Nn.prototype.commitTransaction=Nn.prototype.Za,Nn.prototype.startTransaction=Nn.prototype.Aa,Nn.prototype.removeModel=Nn.prototype.yx,Nn.prototype.addModel=Nn.prototype.Rw,Nn.prototype.clear=Nn.prototype.clear,Nn.className="UndoManager",Cn.prototype.hb=function(t){this.C=t},Cn.prototype.toString=function(){return""!==this.name?this.name+" Tool":B(this.constructor)},Cn.prototype.updateAdornments=function(){},Cn.prototype.canStart=function(){return this.isEnabled},Cn.prototype.doStart=function(){},Cn.prototype.doActivate=function(){this.isActive=!0},Cn.prototype.doDeactivate=function(){this.isActive=!1},Cn.prototype.doStop=function(){},Cn.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Cn.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Cn.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Cn.prototype.doMouseMove=function(){},Cn.prototype.doMouseUp=function(){this.stopTool()},Cn.prototype.doMouseWheel=function(){},Cn.prototype.canStartMultiTouch=function(){return!0},Cn.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.Zp(0,ft.allocAt(NaN,NaN)),i=e.Zp(1,ft.allocAt(NaN,NaN));if(n.o()&&i.o()&&(this.doCancel(),t.bm("hasGestureZoom"))){t.Jo=t.scale;var a=i.x-n.x,r=i.y-n.y;t.Hw=Math.sqrt(a*a+r*r),e.bubbles=!1}ft.free(n),ft.free(i)},Cn.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.Zp(0,ft.allocAt(NaN,NaN)),i=e.Zp(1,ft.allocAt(NaN,NaN));if(n.o()&&i.o()&&(this.doCancel(),t.bm("hasGestureZoom"))){var a=i.x-n.x,r=i.y-n.y;r=Math.sqrt(a*a+r*r)/t.Hw,a=new ft((Math.min(i.x,n.x)+Math.max(i.x,n.x))/2,(Math.min(i.y,n.y)+Math.max(i.y,n.y))/2),r*=t.Jo;var o=t.commandHandler;if(r!==t.scale&&o.canResetZoom(r)){var s=t.zoomPoint;t.zoomPoint=a,o.resetZoom(r),t.zoomPoint=s}e.bubbles=!1}ft.free(n),ft.free(i)},Cn.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Cn.prototype.doKeyUp=function(){},Cn.prototype.Aa=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.Aa(t)},Cn.prototype.yg=function(){var t=this.diagram;return null===this.transactionResult?t.wf():t.Za(this.transactionResult)},Cn.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.$l(e.documentPoint,!1);if(null!==n){if(_?e.meta:e.control){for(t.aa("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.aa("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.aa("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.aa("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(_?e.meta:e.control)||e.shift||t.Qp()}},Cn.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.Rb(i.documentPoint,t,e),i.targetObject=t,function(t,e,n){if(e.handled=!1,null===t||t.ug()){var i=0;e.left?i=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(i=3);var a="ObjectSingleClicked";if(null!==t){switch(i){case 1:a="ObjectSingleClicked";break;case 2:a="ObjectDoubleClicked";break;case 3:a="ObjectContextClicked"}0!==i&&n.aa(a,t)}else{switch(i){case 1:a="BackgroundSingleClicked";break;case 2:a="BackgroundDoubleClicked";break;case 3:a="BackgroundContextClicked"}0!==i&&n.aa(a)}if(null!==t)for(;null!==t;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,i,n),i.handled},Cn.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.rb){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.da(e.documentPoint)?t.Rb(e.documentPoint,null,null):null;e.targetObject=i;var a=!1;if(i!==t.Kk){var r=t.Kk,o=r;for(t.Kk=i,this.doCurrentObjectChanged(r,i),e.handled=!1;null!==r;){var s=r.mouseLeave;if(null!==s){if(i===r)break;if(null!==i&&i.tg(r))break;if(s(e,r,i),a=!0,e.handled)break}r=r.panel}for(r=o,e.handled=!1;null!==i;){if(null!==(o=i.mouseEnter)){if(r===i)break;if(null!==r&&r.tg(i))break;if(o(e,i,r),a=!0,e.handled)break}i=i.panel}i=t.Kk}if(null!==i){for(r=i,o="";null!==r&&""===(o=r.cursor);)r=r.panel;for(t.currentCursor=o,e.handled=!1,r=i;null!==r&&(null===(i=r.mouseOver)||(i(e,r),a=!0,!e.handled));)r=r.panel}else t.currentCursor="",null!==(i=t.mouseOver)&&(i(e),a=!0);a&&t.cc(),t.skipsUndoManager=n}},Cn.prototype.doCurrentObjectChanged=function(){},Cn.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.o()){var i=t.commandHandler,a=t.toolManager.mouseWheelBehavior;if(null!==i&&(a===jn&&!e.shift||a===An&&e.control)&&(0<n?i.canIncreaseZoom():i.canDecreaseZoom()))a=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=a,e.bubbles=!1;else if(a===jn&&e.shift||a===An&&!e.control){i=t.position.copy();var r=0<n?n:-n,o=e.event,s=o.deltaMode;if(a=o.deltaX,o=o.deltaY,(E||R||I)&&(s=1,0<a&&(a=3),0>a&&(a=-3),0<o&&(o=3),0>o&&(o=-3)),void 0===s||void 0===a||void 0===o||0===a&&0===o||e.shift)!e.shift&&t.allowVerticalScroll?(r=3*r*t.scrollVerticalLineChange,0<n?t.scroll("pixel","up",r):t.scroll("pixel","down",r)):e.shift&&t.allowHorizontalScroll&&(r=3*r*t.scrollHorizontalLineChange,0<n?t.scroll("pixel","left",r):t.scroll("pixel","right",r));else{switch(s){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}0!==a&&t.allowHorizontalScroll&&(0<a?t.scroll(n,"left",-a):t.scroll(n,"right",a)),0!==o&&t.allowVerticalScroll&&(0<o?t.scroll(n,"up",-o):t.scroll(n,"down",o))}t.position.A(i)||(e.bubbles=!1)}}},Cn.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.$x);this.Hs=v((function(){n.doWaitAfter(i)}),t)},Cn.prototype.cancelWaitAfter=function(){-1!==this.Hs&&g.clearTimeout(this.Hs),this.Hs=-1},Cn.prototype.doWaitAfter=function(){},Cn.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Rb(t,(function(t){for(;null!==t&&!(t.panel instanceof tu);)t=t.panel;return t})))?null:t.part.category===e?t:null},Cn.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var i=n.toolManager.dragSize,a=i.width;return i=i.height,n.firstInput.isTouchEvent&&(a+=6,i+=6),Math.abs(e.x-t.x)>a||Math.abs(e.y-t.y)>i},c.Object.defineProperties(Cn.prototype,{diagram:{get:function(){return this.C},set:function(t){t instanceof va&&(this.C=t)}},name:{get:function(){return this.Ua},set:function(t){this.Ua=t}},isEnabled:{get:function(){return this.Dc},set:function(t){this.Dc=t}},isActive:{get:function(){return this.Ub},set:function(t){this.Ub=t}},transactionResult:{get:function(){return this.Bq},set:function(t){this.Bq=t}}}),Cn.prototype.stopTransaction=Cn.prototype.yg,Cn.prototype.startTransaction=Cn.prototype.Aa,Cn.className="Tool",d(Fn,Cn),Fn.prototype.initializeStandardTools=function(){},Fn.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof tu&&this.br===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},Fn.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Gn&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===En)return void(e.bubbles=!0);if(this.gestureBehavior===Gn)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var a=this.mouseDownTools.N(i);if(a.hb(this.diagram),a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===An?this.mouseWheelBehavior=jn:this.mouseWheelBehavior===jn&&(this.mouseWheelBehavior=An)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},Fn.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===En)return void(e.bubbles=!0);if(this.gestureBehavior===Gn)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var a=this.mouseMoveTools.N(i);if(a.hb(this.diagram),a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseMove()))}Bn(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},Fn.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof tu&&(e===t||e.tg(t))||this.hideToolTip()},Fn.prototype.doWaitAfter=function(t){var e=this.diagram;e.Da&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.Ml=!0,e.doMouseUp()))},Fn.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Rb(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},Fn.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Rb(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof tu)||e!==t&&!e.tg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},Fn.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof tu){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.$b(),this.positionToolTip(t,e)}else t instanceof Ci&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.Lj&&(g.clearTimeout(this.Lj),this.Lj=-1),0<(t=this.toolTipDuration)&&1/0!==t){var a=this;this.Lj=v((function(){a.hideToolTip()}),t)}},Fn.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>a.right&&(n.x-=i.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y=n.y+20/e.scale+i.height>a.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<a.y&&(n.y=a.y),t.position=n}},Fn.prototype.hideToolTip=function(){-1!==this.Lj&&(g.clearTimeout(this.Lj),this.Lj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof tu?(t.remove(e),null!==this.br&&this.br.vf(e.category),e.data=null,e.adornedObject=null):e instanceof Ci&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},Fn.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.N(n);if(i.hb(this.diagram),i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp()))}t.doFocus(),this.doDeactivate()},Fn.prototype.doMouseWheel=function(){this.standardMouseWheel()},Fn.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},Fn.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},Fn.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.N(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((i=this.mouseMoveTools.N(n)).name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((i=this.mouseUpTools.N(n)).name===t)return i;return null},Fn.prototype.replaceTool=function(t,e){null!==e&&e.hb(this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var a=this.mouseDownTools.N(i);if(a.name===t)return null!==e?this.mouseDownTools.gd(i,e):this.mouseDownTools.mb(i),a}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if((a=this.mouseMoveTools.N(i)).name===t)return null!==e?this.mouseMoveTools.gd(i,e):this.mouseMoveTools.mb(i),a;for(n=this.mouseUpTools.length,i=0;i<n;i++)if((a=this.mouseUpTools.N(i)).name===t)return null!==e?this.mouseUpTools.gd(i,e):this.mouseUpTools.mb(i),a;return null},c.Object.defineProperties(Fn.prototype,{mouseWheelBehavior:{get:function(){return this.Ma},set:function(t){this.Ma=t}},gestureBehavior:{get:function(){return this.K},set:function(t){this.K=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.br=null!==t&&t instanceof tu?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Kc}},mouseMoveTools:{get:function(){return this.Vc}},mouseUpTools:{get:function(){return this.zg}},hoverDelay:{get:function(){return this.La},set:function(t){this.La=t}},holdDelay:{get:function(){return this.ba},set:function(t){this.ba=t}},dragSize:{get:function(){return this.u},set:function(t){this.u=t.I()}},toolTipDuration:{get:function(){return this.Vb},set:function(t){this.Vb=t}}});var An=new X(Fn,"WheelScroll",0),jn=new X(Fn,"WheelZoom",1),Dn=new X(Fn,"WheelNone",2),zn=new X(Fn,"GestureZoom",3),Gn=new X(Fn,"GestureCancel",4),En=new X(Fn,"GestureNone",5);function Rn(){Cn.call(this),this.name="Dragging",this.K=this.Kc=!0,this.u=this.Ma=this.ba=this.dg=null,this.xn=this.Vc=!1,this.Hl=new ft(NaN,NaN),this.xs=new ft,this.Vb=!0,this.Rk=100,this.Kg=[],this.zg=(new nt).freeze(),this.La=new wo}function In(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.dk()&&1===e.count&&e.first()instanceof wu?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Tj(),t.dg=n.toolManager.findTool("Relinking"),null===t.dg&&(t.dg=new gi,t.dg.hb(n))):(t.draggedLink=null,t.dg=null))}}function _n(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,Zn(t,e.lastInput,null),e.skipsUndoManager=n,t.Kg.length=0}function Vn(){var t=oi;Xn(t),Wn(t);var e=t.diagram;t.Hl.o()&&(e.position=t.Hl),e.xf()}function Yn(t,e){var n=1/0,i=1/0,a=-1/0,r=-1/0;for(t=t.iterator;t.next();){var o=t.value;if(o.bc()&&o.isVisible()){var s=o.location;o=s.x,s=s.y,isNaN(o)||isNaN(s)||(o<n&&(n=o),s<i&&(i=s),o>a&&(a=o),s>r&&(r=s))}}1/0===n?e.h(0,0,0,0):e.h(n,i,a-n,r-i)}function Hn(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&0<i.currentTransaction.changes.count&&(n.undoManager.wf(),n.Aa("Drag")):Wn(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Yd():n.selection,e=(n=n.Yj(e,n,!0)).iterator;e.next();)e.value.location=e.key.location;for(Yn(n,e=Et.alloc()),Et.free(e),e=new ct,i=t.draggedParts.iterator;i.next();){var a=i.key;a.bc()&&a.canCopy()&&(null!==(a=n.J(a))&&(a.$b(),e.add(a,t.pd(a.location))))}for(n=n.iterator;n.next();)(i=n.value)instanceof wu&&i.canCopy()&&e.add(i,t.pd());t.copiedParts=e,In(t,e.Yd()),null!==t.draggedLink&&(e=(n=t.draggedLink).routeBounds,bu(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2)))}}}function Xn(t){var e=t.diagram;if(null!==t.copiedParts&&(e.qt(t.copiedParts.Yd(),!1),t.copiedParts=null,null!==t.draggedParts))for(var n=t.draggedParts.iterator;n.next();)n.key instanceof wu&&(n.value.point=new ft(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Un(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.dg){var e=t.dg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.dg=null}}function qn(t,e,n){var i=t.diagram,a=t.startPoint,r=ft.alloc();r.assign(i.lastInput.documentPoint),t.moveParts(e,r.Xd(a),n),ft.free(r),!0===i.Ee("temporaryPixelRatio")&&null===i.jh&&30<i.Uw&&(Pa(i),i.nt())}function Wn(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var i=n.key;i.bc()&&(i.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((i=n.key)instanceof wu&&i.suspendsRouting){var a=n.value.point;t.draggedParts.add(i,t.pd()),bu(i,-a.x,-a.y)}e.fd()}}function Kn(t,e){return null===e||!!(null===(e=e.part)||e instanceof tu||e.layer.isTemporary||t.draggedParts&&t.draggedParts.contains(e)||t.copiedParts&&t.copiedParts.contains(e))}function Jn(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),ti(t,!1));var i=Oa(n,e,null,(function(e){return!Kn(t,e)})),a=n.lastInput;a.targetObject=i;var r=n.skipsUndoManager,o=!1;try{if(n.skipsUndoManager=!0,o=Zn(t,a,i),!t.isActive&&null===oi)return;if(null===i||n.handlesDragDropForTopLevelParts){var s=n.mouseDragOver;null!==s&&(s(a),o=!0)}if(!t.isActive&&null===oi)return;if(t.doDragOver(e,i),!t.isActive&&null===oi)return}finally{n.skipsUndoManager=r,o&&n.fd()}n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Ns(a.viewPoint)}function Zn(t,e,n){var i=!1,a=t.Kg.length,r=0<a?t.Kg[0]:null;if(n===r)return!1;e.handled=!1;for(var o=0;o<a;o++){var s=t.Kg[o],h=s.mouseDragLeave;if(null!==h&&(h(e,s,n),i=!0,e.handled))break}if(t.Kg.length=0,!t.isActive&&null===oi||null===n)return i;for(e.handled=!1,a=n;null!==a;)t.Kg.push(a),a=$n(a);for(a=t.Kg.length,n=0;n<a&&(null===(s=(o=t.Kg[n]).mouseDragEnter)||(s(e,o,r),i=!0,!e.handled));n++);return i}function $n(t){var e=t.panel;return null!==e?e:t instanceof jl&&!(t instanceof pu)&&(null!==(t=t.containingGroup)&&t.handlesDragDropForMembers)?t:null}function Qn(t,e,n){var i=t.dg;if(null===i)return null;var a=t.diagram.qg(e,i.portGravity,(function(t){return i.findValidLinkablePort(t,n)}));t=ft.alloc();var r=1/0,o=null;for(a=a.iterator;a.next();){var s=a.value;if(null!==s.part){var h=s.ma(ue,t);(h=e.Ce(h))<r&&(o=s,r=h)}}return ft.free(t),o}function ti(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var i=t.diagram;if(!i.isReadOnly){var a=t.dg;if(null!==a){var r=null,o=null;null===n.fromNode&&(null!==(r=Qn(t,n.i(0),!1))&&(o=r.part));var s=null,h=null;null===n.toNode&&(null!==(s=Qn(t,n.i(n.pointsCount-1),!0))&&(h=s.part)),a.isValidLink(o,r,h,s)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=o,null!==r&&(n.fromPortId=r.portId),n.toNode=h,null!==s&&(n.toPortId=s.portId),n.fromPort!==i.tx&&i.aa("LinkRelinked",n,i.tx),n.toPort!==i.ux&&i.aa("LinkRelinked",n,i.ux)):pi(a,o,r,h,s):pi(a,null,null,null,null)}}}}function ei(t,e){var n=t.diagram;t.dragsLink&&ti(t,!0),_n(t);var i=Oa(n,e,null,(function(e){return!Kn(t,e)})),a=n.lastInput;if(a.targetObject=i,null!==i){a.handled=!1;for(var r=i;null!==r;){var o=r.mouseDrop;if(null!==o&&(o(a,r),a.handled))break;ni(t,a,r),r=$n(r)}}else null!==(r=n.mouseDrop)&&r(a);if(t.isActive||null!==oi){for(a=(t.copiedParts||t.draggedParts).iterator;a.next();)(r=a.key)instanceof eu&&r.linksConnected.each((function(t){t.suspendsRouting=!1}));if(t.doDropOnto(e,i),t.isActive||null!==oi){for(e=Et.alloc(),i=n.selection.iterator;i.next();)(a=i.value)instanceof eu&&ii(t,n,a,e);Et.free(e)}}}function ni(t,e,n){t=t.diagram,n instanceof jl&&null===n.containingGroup&&!(n instanceof pu)&&t.handlesDragDropForTopLevelParts&&(null!==(n=t.mouseDrop)&&n(e))}function ii(t,e,n,i){var a=!1;for(n.getAvoidableRect(i),e.viewportBounds.nf(i)&&(a=!0),e=e.links,t=t.copiedParts||t.draggedParts;e.next();){var r=e.value;a&&!Kl(r)||t.contains(r)&&t.contains(n)||!r.Vd(n)&&r.isAvoiding&&Xt(r.actualBounds,i,0)&&r.Ra()}}function ai(t,e,n,i){if(null===t.copiedParts){var a=t.diagram;if(!a.isReadOnly&&!a.isModelReadOnly){a.skipsUndoManager=!n,a.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=a.Yj(e,a,!0);var r=Et.alloc();Yn(e,r),i=r.x+r.width/2,a=r.y+r.height/2,Et.free(r),r=t.xs;var o=new ct,s=ft.alloc();for(e=e.iterator;e.next();){var h=e.value,l=n.J(h);h.bc()&&h.canCopy()?(h=h.location,s.h(r.x-(i-h.x),r.y-(a-h.y)),l.location=s,l.$b(),o.add(l,t.pd(s))):l instanceof wu&&h.canCopy()&&(bu(l,r.x-i,r.y-a),o.add(l,t.pd()))}ft.free(s),t.copiedParts=o,In(t,o.Yd()),null!==t.draggedLink&&(i=(n=t.draggedLink).routeBounds,bu(n,t.startPoint.x-(i.x+i.width/2),t.startPoint.y-(i.y+i.height/2)))}}}Fn.className="ToolManager",Fn.WheelScroll=An,Fn.WheelZoom=jn,Fn.WheelNone=Dn,Fn.GestureZoom=zn,Fn.GestureCancel=Gn,Fn.GestureNone=En,d(Rn,Cn),Rn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Rk))&&null!==this.findDraggablePart()},Rn.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.$l(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},Rn.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.$l(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.aa("ChangingSelection",t.selection),e=t.lastInput,(_?e.meta:e.control)||e.shift||dr(t),this.currentPart.isSelected=!0,t.aa("ChangedSelection",t.selection))}}},Rn.prototype.doActivate=function(){var t=this.diagram;null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(oi=null,this.isActive=!0,this.Hl.set(t.position),In(this,t.selection),this.Kg.length=0,this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.sk=!0,!0===t.Ee("temporaryPixelRatio")&&30<t.Uw&&Pa(t),rr(t,this.draggedParts),this.Aa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.xn=!1,oi=this,si=this.diagram,this.doSimulatedDragOut()))},Rn.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Rn.prototype.pd=function(t){return void 0===t?new vo(Pt):this.isGridSnapEnabled?new vo(new ft(Math.round(t.x),Math.round(t.y))):new vo(t.copy())},Rn.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.xf(),_n(this),or(t,this.draggedParts),this.draggedParts=this.currentPart=null,this.xn=this.isDragOutStarted=!1,0<ri.count){for(var e=ri,n=e.length,i=0;i<n;i++){var a=e.N(i);Un(a),Xn(a),_n(a),a.diagram.xf()}e.clear()}Un(this),this.Hl.h(NaN,NaN),oi=si=null,Xn(this),t.isMouseCaptured=!1,t.currentCursor="",t.sk=!1,this.yg(),ba(t,!0)},Rn.prototype.doCancel=function(){Xn(this),Wn(this);var t=this.diagram;this.Hl.o()&&(t.position=this.Hl),this.stopTool()},Rn.prototype.doKeyDown=function(){this.isActive&&("Esc"===this.diagram.lastInput.key?this.doCancel():this.doMouseMove())},Rn.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},Rn.prototype.moveParts=function(t,e,n){var i=this.diagram;null!==i&&nr(i,t,e,this.dragOptions,n)},Rn.prototype.doDragOver=function(){},Rn.prototype.doDropOnto=function(){},Rn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,null,e.targetDiagram||null)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(t.currentCursor="copy",Hn(this,!1),rr(t,this.copiedParts),qn(this,this.copiedParts,!1),or(t,this.copiedParts)):this.mayMove()?(Xn(this),qn(this,this.draggedParts,!0)):this.mayDragOut()?(t.currentCursor="no-drop",Hn(this,!1),qn(this,this.copiedParts,!1)):Xn(this),Jn(this,t.lastInput.documentPoint))}},Rn.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,null,e.documentPoint,e.targetDiagram)){var n=!1;if((e=this.mayCopy())&&null!==this.copiedParts?(Xn(this),Hn(this,!0),rr(t,this.copiedParts),qn(this,this.copiedParts,!1),or(t,this.copiedParts),null!==this.copiedParts&&t.Hv(this.copiedParts.Yd())):(n=!0,Xn(this),this.mayMove()&&(qn(this,this.draggedParts,!0),Jn(this,t.lastInput.documentPoint))),this.xn=!0,ei(this,t.lastInput.documentPoint),this.isActive){var i=e?this.copiedParts.Yd():this.draggedParts.Yd();if(this.copiedParts=null,n&&null!==this.draggedParts)for(n=this.draggedParts.iterator;n.next();){var a=n.key;a instanceof eu&&(null===(a=a.containingGroup)||null===a.placeholder||this.draggedParts.contains(a)||a.placeholder.s())}t.Xa(),or(t,this.draggedParts),this.transactionResult=e?"Copy":"Move",t.aa(e?"SelectionCopied":"SelectionMoved",i)}this.stopTool()}}},Rn.prototype.simulatedMouseMove=function(t,e,n){if(null===oi)return!1;var i=oi.diagram;n instanceof va||(n=null);var a=si;return n!==a&&(null!==a&&a!==i&&(a.xf(),oi.isDragOutStarted=!1,null!==(a=a.toolManager.findTool("Dragging"))&&a.doSimulatedDragLeave()),si=n,null!==n&&n!==i&&(Vn(),null!==(a=n.toolManager.findTool("Dragging"))&&(ri.contains(a)||ri.add(a),a.doSimulatedDragEnter()))),!(null===n||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert)&&(null!==(i=n.toolManager.findTool("Dragging"))&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new ft),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.wt(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),!0)},Rn.prototype.simulatedMouseUp=function(t,e,n,i){if(null===oi)return!1;null===i&&(i=e),e=si;var a=oi.diagram;if(i!==e){var r=e.toolManager.findTool("Dragging");if(null!==e&&e!==a&&null!==r)return e.xf(),oi.isDragOutStarted=!1,r.doSimulatedDragLeave(),!1;si=i,e=i.toolManager.findTool("Dragging"),null!==i&&null!==e&&(Vn(),ri.contains(e)||ri.add(e),e.doSimulatedDragEnter())}return null===i?(oi.doCancel(),!0):i!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),n=i.getMouse(t)):null===n&&(n=new ft),i.lastInput.documentPoint=n,i.lastInput.viewPoint=i.wt(n),i.lastInput.down=!1,i.lastInput.up=!0,null!==(t=i.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=oi)&&(i=t.mayCopy(),t.transactionResult=i?"Copy":"Move",t.stopTool()),!0)},Rn.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(_?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.bc()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Rn.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.bc()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Rn.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.bc()&&e.canMove())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},Rn.prototype.computeBorder=function(t,e,n){return this.xn||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},Rn.prototype.Yy=function(){return oi},Rn.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;return null!==oi&&oi.diagram.model.dataFormat===t.model.dataFormat},Rn.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.vd(),Ya(t),t.animationManager.vd(),null!==(t=oi)&&(t.diagram.currentCursor="copy",t.diagram.sk=!1)}},Rn.prototype.doSimulatedDragLeave=function(){null!==oi&&oi.doSimulatedDragOut(),this.doCancel()},Rn.prototype.doSimulatedDragOver=function(){var t=this.diagram,e=oi;null!==e&&null!==e.draggedParts&&this.mayDragIn()&&("auto"===t.currentCursor&&(t.currentCursor="copy"),ai(this,e.draggedParts.Yd(),!1,t.firstInput),qn(this,this.copiedParts,!1),Jn(this,t.lastInput.documentPoint))},Rn.prototype.doSimulatedDrop=function(){var t=this.diagram,e=oi;if(null!==e){var n=e.diagram;e.xn=!0,Xn(this),this.mayDragIn()&&(this.Aa("Drop"),ai(this,e.draggedParts.Yd(),!0,t.lastInput),qn(this,this.copiedParts,!1),null!==this.copiedParts&&t.Hv(this.copiedParts.Yd()),ei(this,t.lastInput.documentPoint),t.Xa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new nt,this.copiedParts=null,t.doFocus(),t.aa("ExternalObjectsDropped",e,n),this.yg())}},Rn.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.sk=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor="no-drop"},Rn.prototype.computeMove=function(t,e,n,i){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,i):new ft},c.Object.defineProperties(Rn.prototype,{isCopyEnabled:{get:function(){return this.Kc},set:function(t){this.Kc=t}},copiesEffectiveCollection:{get:function(){return this.K},set:function(t){this.K=t}},dragOptions:{get:function(){return this.La},set:function(t){this.La=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Vb},set:function(t){this.Vb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){null===this.diagram||this.dragOptions.gridSnapCellSize.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.A(t)||(t=t.I(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},currentPart:{get:function(){return this.ba},set:function(t){this.ba=t}},copiedParts:{get:function(){return this.u},set:function(t){this.u=t}},draggedParts:{get:function(){return this.Ma},set:function(t){this.Ma=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Yd():null!==this.draggedParts?this.draggedParts.Yd():this.zg}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Vc},set:function(t){this.Vc=t}},startPoint:{get:function(){return this.xs},set:function(t){this.xs.A(t)||this.xs.assign(t)}},delay:{get:function(){return this.Rk},set:function(t){this.Rk=t}}}),Rn.prototype.getDraggingSource=Rn.prototype.Yy;var ri=null,oi=null,si=null;function hi(){Cn.call(this),this.zg=100,this.ba=!1;var t=new wu,e=new Oh;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new Oh).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.Gm=t,t=new eu,(e=new Oh).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Nt,t.add(e),t.selectable=!1,t.layerName="Tool",this.Em=t,this.Fm=e,t=new eu,(e=new Oh).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Nt,t.add(e),t.selectable=!1,t.layerName="Tool",this.zq=t,this.Aq=e,this.Vc=this.Kc=this.Ma=this.La=this.Vb=null,this.K=!0,this.Px=new ct,this.Cm=this.ji=this.Dm=null}function li(t,e,n,i,a){if(e===n)return!0;if(null===e||null===n)return!1;for(var r=e.linksConnected;r.next();){var o=r.value;if(o!==i&&(!a||o.isTreeLink)&&o.toNode===e&&((o=o.fromNode)!==e&&li(t,o,n,i,a)))return!0}return!1}function ui(){hi.call(this),this.name="Linking",this.u={},this.l=null,this.L=di,this.Dh=null}Rn.className="DraggingTool",ri=new tt,j("draggingTool",(function(){return this.findTool("Dragging")}),(function(t){On(this,"Dragging",t,this.mouseMoveTools)})),Fn.prototype.doCancel=function(){null!==oi&&oi.doCancel(),Cn.prototype.doCancel.call(this)},d(hi,Cn),hi.prototype.doStop=function(){this.diagram.xf(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},hi.prototype.copyPortProperties=function(t,e,n,i,a){if(null!==t&&null!==e&&null!==n&&null!==i){var r=e.De(),o=jt.alloc();o.width=e.naturalBounds.width*r,o.height=e.naturalBounds.height*r,i.desiredSize=o,jt.free(o),a?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=ue,r=ft.alloc(),n.location=e.ma(ue,r),ft.free(r),i.angle=e.Li(),null!==this.portTargeted&&this.portTargeted(t,e,n,i,a)}},hi.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=Nt,e.fromSpot=re,e.toSpot=re),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},hi.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},hi.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof eu){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Ns(t.lastInput.viewPoint)}},hi.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof eu))return null;for(;null!==t;){var i=e?t.toLinkable:t.fromLinkable;if(!0===i&&(null!==t.portId||t instanceof eu)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===i)break;t=t.panel}return null},hi.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,i=this.portGravity;0>=i&&(i=.1);var a=this,r=e.qg(n,i,(function(e){return a.findValidLinkablePort(e,t)}),null,!0);for(i=1/0,e=null,r=r.iterator;r.next();){var o=r.value,s=o.part;if(s instanceof eu){var h=o.ma(ue,ft.alloc()),l=n.x-h.x,u=n.y-h.y;ft.free(h),(h=l*l+u*u)<i&&(null!==(l=this.validPortsCache.J(o))?l&&(e=o,i=h):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,s,o)||!t&&this.isValidLink(s,o,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(o,!0),e=o,i=h):this.validPortsCache.add(o,!1))}}return null!==e&&((n=e.part)instanceof eu&&(null===n.layer||n.layer.allowLink))?e:null},hi.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Vp(e).count>=n)return!1}return!0},hi.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.sd(e).count>=n)return!1}return!0},hi.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(t=t.part,e=e.part,null!==t&&t===e))},hi.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof eu))return!1;null===(t=t.portId)&&(t="");var i=e.part;if(!(i instanceof eu))return!1;for(null===(e=e.portId)&&(e=""),e=i.sd(e);e.next();)if((i=e.value).fromNode===n&&i.fromPortId===t)return!0;return!1},hi.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(null===e||null===i||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var a=t.linkValidation;if(null!==a&&!a(t,e,n,i,this.originalLink))return!1}return!(null!==n&&null!==(a=n.linkValidation)&&!a(t,e,n,i,this.originalLink))&&(null===(a=this.linkValidation)||a(t,e,n,i,this.originalLink))},hi.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var i=new nt;return i.add(t),function t(e,n,i,a){if(n===i)return!0;var r=n.fromNode;return!(null===r||!r.isLinkLabel||(a.add(r),!t(e,r.labeledLink,i,a)))||!(null===(n=n.toNode)||!n.isLinkLabel||(a.add(n),!t(e,n.labeledLink,i,a)))}(this,n,e,i)},hi.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==Zr){if(i===eo){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var a=i.value;if(a!==n&&a.isTreeLink&&a.toNode===e)return!1}return!li(this,t,e,n,!0)}if(i===no){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if((a=i.value)!==n&&a.isTreeLink&&a.fromNode===t)return!1;return!li(this,t,e,n,!0)}if(i===$r)return t===e?t=!0:((i=new nt).add(e),t=function t(e,n,i,a,r){if(i===a)return!0;if(null===i||null===a||n.contains(i))return!1;n.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r&&s.toNode===i&&((s=s.fromNode)!==i&&t(e,n,s,a,r)))return!0}return!1}(this,i,t,e,n)),!t;if(i===Qr)return!li(this,t,e,n,!1);if(i===to)return t===e?t=!0:((i=new nt).add(e),t=function t(e,n,i,a,r){if(i===a)return!0;if(null===i||null===a||n.contains(i))return!1;n.add(i);for(var o=i.linksConnected;o.next();){var s=o.value;if(s!==r){var h=s.fromNode;if(s=s.toNode,(h=h===i?s:h)!==i&&t(e,n,h,a,r))return!0}}return!1}(this,i,t,e,n)),!t}return!0},c.Object.defineProperties(hi.prototype,{portGravity:{get:function(){return this.zg},set:function(t){0<=t&&(this.zg=t)}},isUnconnectedLinkValid:{get:function(){return this.ba},set:function(t){this.ba=t}},temporaryLink:{get:function(){return this.Gm},set:function(t){this.Gm=t}},temporaryFromNode:{get:function(){return this.Em},set:function(t){this.Em=t}},temporaryFromPort:{get:function(){return this.Fm},set:function(t){this.Fm=t}},temporaryToNode:{get:function(){return this.zq},set:function(t){this.zq=t}},temporaryToPort:{get:function(){return this.Aq},set:function(t){this.Aq=t}},originalLink:{get:function(){return this.Vb},set:function(t){this.Vb=t}},originalFromNode:{get:function(){return this.La},set:function(t){this.La=t}},originalFromPort:{get:function(){return this.Ma},set:function(t){this.Ma=t}},originalToNode:{get:function(){return this.Kc},set:function(t){this.Kc=t}},originalToPort:{get:function(){return this.Vc},set:function(t){this.Vc=t}},isForwards:{get:function(){return this.K},set:function(t){this.K=t}},validPortsCache:{get:function(){return this.Px}},targetPort:{get:function(){return this.Dm},set:function(t){this.Dm=t}},linkValidation:{get:function(){return this.ji},set:function(t){this.ji=t}},portTargeted:{get:function(){return this.Cm},set:function(t){this.Cm=t}}}),hi.className="LinkingBaseTool",d(ui,hi),ui.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.ct()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},ui.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Rb(t.firstInput.documentPoint,null,null)),null===e||!(e.part instanceof eu))return null;if((t=this.direction)===di||t===ci){var n=this.findValidLinkablePort(e,!1);if(null!==n)return this.isForwards=!0,n}return t!==di&&t!==fi||null===(e=this.findValidLinkablePort(e,!0))?null:(this.isForwards=!1,e)},ui.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null!==e&&(this.Aa(this.name),t.isMouseCaptured=!0,t.currentCursor="pointer",this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.o()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof eu&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.o()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof eu&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ra(),t.add(this.temporaryLink)),this.isActive=!0)},ui.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.yg()},ui.prototype.doStop=function(){hi.prototype.doStop.call(this),this.startObject=null},ui.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,i=null,a=null,r=this.targetPort=this.findTargetPort(this.isForwards);if(null!==r){var o=r.part;o instanceof eu&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),i=o,a=r):(e=o,n=r,null!==this.originalToNode&&(i=this.originalToNode,a=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(i=this.originalToNode,a=this.originalToPort);null!==e||null!==i?null!==(o=this.insertLink(e,n,i,a))?(null===r&&(this.isForwards?o.defaultToPoint=t.lastInput.documentPoint:o.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&t.select(o),this.transactionResult=this.name,t.aa("LinkDrawn",o)):(t.model.Mu(),this.doNoLink(e,n,i,a)):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}this.stopTool()},ui.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof wu)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},ui.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},ui.prototype.doNoLink=function(){},c.Object.defineProperties(ui.prototype,{archetypeLinkData:{get:function(){return this.u},set:function(t){this.u=t}},archetypeLabelNodeData:{get:function(){return this.l},set:function(t){this.l=t}},direction:{get:function(){return this.L},set:function(t){this.L=t}},startObject:{get:function(){return this.Dh},set:function(t){this.Dh=t}}});var di=new X(ui,"Either",0),ci=new X(ui,"ForwardsOnly",0),fi=new X(ui,"BackwardsOnly",0);function gi(){hi.call(this),this.name="Relinking";var t=new Oh;t.figure="Diamond",t.desiredSize=Ct,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.segmentIndex=0,this.u=t,(t=new Oh).figure="Diamond",t.desiredSize=Ct,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.segmentIndex=-1,this.Dh=t,this.l=null,this.Gw=new Et}function pi(t,e,n,i,a){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==i?(t.copyPortProperties(i,a,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function mi(){Cn.call(this),this.name="LinkReshaping";var t=new Oh;t.figure="Rectangle",t.desiredSize=Tt,t.fill="lightblue",t.stroke="dodgerblue",this.u=t,(t=new Oh).figure="Diamond",t.desiredSize=Ct,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.K=t,this.ba=3,this.Gt=this.l=null,this.ul=new ft,this.es=new tt}function vi(t,e,n,i,a,r){return r?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-a.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-a.x)<t.resegmentingDistance}ui.className="LinkingTool",ui.Either=di,ui.ForwardsOnly=ci,ui.BackwardsOnly=fi,d(gi,hi),gi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof wu){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var i=t.selectionObject;null!==i&&t.canRelinkFrom()&&t.actualBounds.o()&&t.isVisible()&&i.actualBounds.o()&&i.tf()&&(null===(n=t.ak(e))&&(n=this.makeAdornment(i,!1),t.qh(e,n)))}null===n&&t.vf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&(null!==(i=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.o()&&t.isVisible()&&i.actualBounds.o()&&i.tf()&&(null===(n=t.ak(e))?(n=this.makeAdornment(i,!0),t.qh(e,n)):n.s())),null===n&&t.vf(e)}},gi.prototype.makeAdornment=function(t,e){var n=new tu;return n.type=ah.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},gi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.ct()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},gi.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&(null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),null===e)return;var n=e.part;if(!(n instanceof tu&&n.adornedPart instanceof wu))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.Aa(this.name),t.isMouseCaptured=!0,t.currentCursor="pointer",this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Gw.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Mt),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Mt),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ra(),t.add(this.temporaryLink)),this.isActive=!0},gi.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;n!==Xu&&n!==Hu||(n=Vu),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},gi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.yg()},gi.prototype.doStop=function(){hi.prototype.doStop.call(this),this.handle=null},gi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,a=this.originalToPort,r=this.originalLink;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var o=this.targetPort.part;o instanceof eu&&(this.isForwards?(i=o,a=this.targetPort):(e=o,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?a=i=null:n=e=null:r=null;null!==r?(this.reconnectLink(r,this.isForwards?i:e,this.isForwards?a:n,this.isForwards),null===this.targetPort&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint,r.Ra()),t.allowSelect&&(r.isSelected=!0),this.transactionResult=this.name,t.aa("LinkRelinked",r,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.cq(this.Gw)}this.stopTool()},gi.prototype.reconnectLink=function(t,e,n,i){return n=null!==n&&null!==n.portId?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},gi.prototype.doNoRelink=function(){},c.Object.defineProperties(gi.prototype,{fromHandleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},toHandleArchetype:{get:function(){return this.Dh},set:function(t){this.Dh=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tu))throw Error("new handle is not in an Adornment: "+t);this.l=t}}}),gi.className="RelinkingTool",j("linkingTool",(function(){return this.findTool("Linking")}),(function(t){On(this,"Linking",t,this.mouseMoveTools)})),j("relinkingTool",(function(){return this.findTool("Relinking")}),(function(t){On(this,"Relinking",t,this.mouseDownTools)})),d(mi,Cn),mi.prototype.ev=function(t){return t&&t.ks&&0!==t.ks.value?t.ks:yi},mi.prototype.wm=function(t,e){t.ks=e},mi.prototype.updateAdornments=function(t){if(null!==t&&t instanceof wu){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.o()&&t.isVisible()&&n.actualBounds.o()&&n.tf()&&(null===(e=t.ak(this.name))||e.Dw!==t.pointsCount||e.Ow!==t.resegmentable)&&(null!==(e=this.makeAdornment(n))&&(e.Dw=t.pointsCount,e.Ow=t.resegmentable,t.qh(this.name,e)))}null===e&&t.vf(this.name)}},mi.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,a=null;if(null!==e.points&&1<n){(a=new tu).type=ah.Link,n=e.firstPickIndex;var r=e.lastPickIndex,o=i?1:0;if(e.resegmentable&&e.computeCurve()!==Yu)for(var s=n+o;s<r-o;s++){var h=this.makeResegmentHandle(t,s);null!==h&&(h.segmentIndex=s,h.segmentFraction=.5,h.fromMaxLinks=999,a.add(h))}for(o=n+1;o<r;o++)if(null!==(s=this.makeHandle(t,o))){if(s.segmentIndex=o,o!==n)if(o===n+1&&i){h=e.i(n);var l=e.i(n+1);qe.w(h.x,l.x)&&qe.w(h.y,l.y)&&(l=e.i(n-1)),qe.w(h.x,l.x)?(this.wm(s,Si),s.cursor="n-resize"):qe.w(h.y,l.y)&&(this.wm(s,wi),s.cursor="w-resize")}else o===r-1&&i?(h=e.i(r-1),l=e.i(r),qe.w(h.x,l.x)&&qe.w(h.y,l.y)&&(h=e.i(r+1)),qe.w(h.x,l.x)?(this.wm(s,Si),s.cursor="n-resize"):qe.w(h.y,l.y)&&(this.wm(s,wi),s.cursor="w-resize")):o!==r&&(this.wm(s,Pi),s.cursor="move");a.add(s)}a.adornedObject=t}return a},mi.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},mi.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},mi.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof wu){if(this.Gt=e,t.isMouseCaptured=!0,this.Aa(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.Ib(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.Ib(this.handle.segmentIndex+1,i),e.points=n,e.Jb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.ul=e.i(this.handle.segmentIndex),this.es=e.points.copy(),this.isActive=!0}}},mi.prototype.doDeactivate=function(){this.yg(),this.Gt=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},mi.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.es),this.stopTool()},mi.prototype.getResegmentingPoint=function(){return this.handle.ma(ue)},mi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},mi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,i=e.i(n-1),a=e.i(n),r=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var o=e.i(n-2);if(Math.abs(i.x-a.x)<this.resegmentingDistance&&Math.abs(i.y-a.y)<this.resegmentingDistance&&(vi(this,o,i,a,r,!0)||vi(this,o,i,a,r,!1))){var s=e.points.copy();vi(this,o,i,a,r,!0)?(s.gd(n-2,new ft(o.x,(r.y+o.y)/2)),s.gd(n+1,new ft(r.x,(r.y+o.y)/2))):(s.gd(n-2,new ft((r.x+o.x)/2,o.y)),s.gd(n+1,new ft((r.x+o.x)/2,r.y))),s.mb(n),s.mb(n-1),e.points=s,e.Jb()}else o=e.i(n+2),Math.abs(a.x-r.x)<this.resegmentingDistance&&Math.abs(a.y-r.y)<this.resegmentingDistance&&(vi(this,i,a,r,o,!0)||vi(this,i,a,r,o,!1))&&(s=e.points.copy(),vi(this,i,a,r,o,!0)?(s.gd(n-1,new ft(i.x,(i.y+o.y)/2)),s.gd(n+2,new ft(o.x,(i.y+o.y)/2))):(s.gd(n-1,new ft((i.x+o.x)/2,i.y)),s.gd(n+2,new ft((i.x+o.x)/2,o.y))),s.mb(n+1),s.mb(n),e.points=s,e.Jb())}}else o=ft.alloc(),qe.Si(i.x,i.y,r.x,r.y,a.x,a.y,o)&&o.Ce(a)<this.resegmentingDistance*this.resegmentingDistance&&((i=e.points.copy()).mb(n),e.points=i,e.Jb()),ft.free(o)}t.Xa(),this.transactionResult=this.name,t.aa("LinkReshaped",this.adornedLink,this.es)}this.stopTool()},mi.prototype.reshape=function(t){var e=this.adornedLink;e.Ch();var n=this.handle.segmentIndex,i=this.ev(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,i===Si?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):i===wi&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,i===Si?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):i===wi&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{i=n;var a=e.i(i),r=e.i(i-1),o=e.i(i+1);qe.w(r.x,a.x)&&qe.w(a.y,o.y)?(qe.w(r.x,e.i(i-2).x)&&!qe.w(r.y,e.i(i-2).y)?(e.m(i,t.x,r.y),n++,i++):e.M(i-1,t.x,r.y),qe.w(o.y,e.i(i+2).y)&&!qe.w(o.x,e.i(i+2).x)?e.m(i+1,o.x,t.y):e.M(i+1,o.x,t.y)):qe.w(r.y,a.y)&&qe.w(a.x,o.x)?(qe.w(r.y,e.i(i-2).y)&&!qe.w(r.x,e.i(i-2).x)?(e.m(i,r.x,t.y),n++,i++):e.M(i-1,r.x,t.y),qe.w(o.x,e.i(i+2).x)&&!qe.w(o.y,e.i(i+2).y)?e.m(i+1,t.x,o.y):e.M(i+1,t.x,o.y)):qe.w(r.x,a.x)&&qe.w(a.x,o.x)?(qe.w(r.x,e.i(i-2).x)&&!qe.w(r.y,e.i(i-2).y)?(e.m(i,t.x,r.y),n++,i++):e.M(i-1,t.x,r.y),qe.w(o.x,e.i(i+2).x)&&!qe.w(o.y,e.i(i+2).y)?e.m(i+1,t.x,o.y):e.M(i+1,t.x,o.y)):qe.w(r.y,a.y)&&qe.w(a.y,o.y)&&(qe.w(r.y,e.i(i-2).y)&&!qe.w(r.x,e.i(i-2).x)?(e.m(i,r.x,t.y),n++,i++):e.M(i-1,r.x,t.y),qe.w(o.y,e.i(i+2).y)&&!qe.w(o.x,e.i(i+2).x)?e.m(i+1,o.x,t.y):e.M(i+1,o.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),i=e.fromNode,a=e.fromPort,null!==i&&(null!==(r=i.findVisibleNode())&&r!==i&&(a=(i=r).port)),1===n&&e.computeSpot(!0,a).jc()&&(r=a.ma(ue,ft.alloc()),i=e.getLinkPointFromPoint(i,a,r,t,!0,ft.alloc()),e.M(0,i.x,i.y),ft.free(r),ft.free(i)),i=e.toNode,a=e.toPort,null!==i&&(null!==(r=i.findVisibleNode())&&r!==i&&(a=(i=r).port)),n===e.pointsCount-2&&e.computeSpot(!1,a).jc()&&(n=a.ma(ue,ft.alloc()),t=e.getLinkPointFromPoint(i,a,n,t,!1,ft.alloc()),e.M(e.pointsCount-1,t.x,t.y),ft.free(n),ft.free(t));e.mf()},mi.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.ev(this.handle)){case Pi:return t;case Si:return new ft(e.i(n).x,t.y);case wi:return new ft(t.x,e.i(n).y);default:case yi:return e.i(n)}},c.Object.defineProperties(mi.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},midHandleArchetype:{get:function(){return this.K},set:function(t){this.K=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.Gt}},resegmentingDistance:{get:function(){return this.ba},set:function(t){this.ba=t}},originalPoint:{get:function(){return this.ul}},originalPoints:{get:function(){return this.es}}}),mi.prototype.setReshapingBehavior=mi.prototype.wm,mi.prototype.getReshapingBehavior=mi.prototype.ev;var yi=new X(mi,"None",0),wi=new X(mi,"Horizontal",1),Si=new X(mi,"Vertical",2),Pi=new X(mi,"All",3);function bi(){Cn.call(this),this.name="Resizing",this.Sf=new jt(1,1).freeze(),this.Rf=new jt(9999,9999).freeze(),this.Eg=new jt(NaN,NaN).freeze(),this.K=!1,this.$d=null;var t=new Oh;t.alignmentFocus=ue,t.figure="Rectangle",t.desiredSize=Tt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.u=t,this.l=null,this.ul=new ft,this.Fw=new jt,this.Ko=new ft,this.Xt=new jt(0,0),this.Wt=new jt(1/0,1/0),this.Vt=new jt(1,1),this.Cw=!0}function xi(){Cn.call(this),this.name="Rotating",this.Ma=45,this.La=2,this.Ko=new ft,this.$d=null;var t=new Oh;t.figure="Ellipse",t.desiredSize=Ct,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.u=t,this.l=null,this.Ew=0,this.qu=new ft(NaN,NaN),this.K=0,this.ba=50}function ki(){Cn.call(this),this.name="ClickSelecting"}function Li(){Cn.call(this),this.name="Action",this.wk=null}function Mi(){Cn.call(this),this.name="ClickCreating",this.aj=null,this.u=!0,this.l=!1,this.ww=new ft(0,0)}function Ni(){Cn.call(this),this.name="DragSelecting",this.Rk=175,this.u=!1;var t=new jl;t.layerName="Tool",t.selectable=!1;var e=new Oh;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}function Ti(){Cn.call(this),this.name="Panning",this.lu=new ft,this.Zx=new ft,this.Dg=!1;var t=this;this.Iw=function(){g.document.removeEventListener("scroll",t.Iw,!1),t.stopTool()}}function Ci(){this.ba=this.K=this.l=this.u=null}function Fi(t,e,n){this.text=t,this.Xw=e,this.visible=n}function Bi(){Cn.call(this),this.name="ContextMenu",this.u=this.Mt=this.l=null,this.Bw=new ft,this.Nt=null,this.cu=!1;var t=this;this.Au=function(){t.stopTool()}}function Oi(t){return t.preventDefault(),!1}function Ai(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof Ci)){var i=e.Rb(e.lastInput.documentPoint,null,null);null!==i&&i.tg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(ji(t,!0),t.isActive||t.stopTool())}function ji(t,e,n){if(void 0===n&&(n=null),!t.cu&&(t.cu=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.cu=!1,!e))if(t.isActive=!0,e=Di,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var i=n.contextMenu;null!==i?(t.currentObject=n instanceof Mo?n:null,t.showContextMenu(i,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null)}mi.className="LinkReshapingTool",mi.None=yi,mi.Horizontal=wi,mi.Vertical=Si,mi.All=Pi,j("linkReshapingTool",(function(){return this.findTool("LinkReshaping")}),(function(t){On(this,"LinkReshaping",t,this.mouseDownTools)})),d(bi,Cn),bi.prototype.updateAdornments=function(t){if(!(null===t||t instanceof wu)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.ak(this.name);if(null!==e&&t.canResize()&&t.actualBounds.o()&&t.isVisible()&&e.actualBounds.o()&&e.tf()&&(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n))return e=e.Li(),Kl(t)&&this.updateResizeHandles(n,e),void t.qh(this.name,n)}t.vf(this.name)}},bi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new tu).type=ah.Spot,e.locationSpot=ue;var n=new yu;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,oe)),e.add(this.makeHandle(t,he)),e.add(this.makeHandle(t,ge)),e.add(this.makeHandle(t,ce)),e.add(this.makeHandle(t,De)),e.add(this.makeHandle(t,Ge)),e.add(this.makeHandle(t,Ee)),e.add(this.makeHandle(t,ze))}else if(yh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},bi.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},bi.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Kb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.jc()&&(n=ue),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof ah)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},bi.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(this.ul.set(this.adornedObject.ma(this.handle.alignment.sv())),this.Ko.set(this.adornedObject.part.location),this.Fw.set(this.adornedObject.desiredSize),this.Vt=this.computeCellSize(),this.Xt=this.computeMinSize(),this.Wt=this.computeMaxSize(),t.isMouseCaptured=!0,this.Cw=t.animationManager.isEnabled,t.animationManager.isEnabled=!1,this.Aa(this.name),this.isActive=!0))},bi.prototype.doDeactivate=function(){var t=this.diagram;this.yg(),this.$d=this.handle=null,this.isActive=t.isMouseCaptured=!1,t.animationManager.isEnabled=this.Cw},bi.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},bi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Xt,n=this.Wt,i=this.Vt,a=this.adornedObject.Vs(t.lastInput.documentPoint,ft.alloc()),r=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,i,r),this.resize(e),t.fd(),ft.free(a)}},bi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Xt,n=this.Wt,i=this.Vt,a=this.adornedObject.Vs(t.lastInput.documentPoint,ft.alloc()),r=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,i,r),this.resize(e),ft.free(a),t.Xa(),this.transactionResult=this.name,t.aa("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},bi.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject,i=n.part;n.desiredSize=t.size,i.$b(),t=this.adornedObject.ma(this.handle.alignment.sv()),i instanceof pu?((n=new tt).add(i),e.moveParts(n,this.ul.copy().Xd(t),!0)):i.location=i.location.copy().Xd(t).add(this.ul)},bi.prototype.computeResize=function(t,e,n,i,a,r){e.jc()&&(e=ue);var o=this.adornedObject.naturalBounds,s=o.x,h=o.y,l=o.x+o.width,u=o.y+o.height,d=1;if(!r){d=o.width;var c=o.height;0>=d&&(d=1),0>=c&&(c=1),d=c/d}return c=ft.alloc(),qe.Wp(t.x,t.y,s,h,a.width,a.height,c),t=o.copy(),0>=e.x?0>=e.y?(t.x=Math.max(c.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.y=Math.max(c.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width),t.x=l-t.width,t.y=u-t.height)):1<=e.y?(t.x=Math.max(c.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.height=Math.max(Math.min(c.y-h,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width),t.x=l-t.width)):(t.x=Math.max(c.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=l-t.x,r||(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d,t.y=h+.5*(u-h-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(c.x-s,i.width),n.width),t.y=Math.max(c.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=Math.max(u-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width),t.y=u-t.height)):1<=e.y?(t.width=Math.max(Math.min(c.x-s,i.width),n.width),t.height=Math.max(Math.min(c.y-h,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d):(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width))):(t.width=Math.max(Math.min(c.x-s,i.width),n.width),r||(t.height=Math.max(Math.min(d*t.width,i.height),n.height),t.width=t.height/d,t.y=h+.5*(u-h-t.height))):0>=e.y?(t.y=Math.max(c.y,u-i.height),t.y=Math.min(t.y,u-n.height),t.height=u-t.y,r||(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width,t.x=s+.5*(l-s-t.width))):1<=e.y&&(t.height=Math.max(Math.min(c.y-h,i.height),n.height),r||(t.width=Math.max(Math.min(t.height/d,i.width),n.width),t.height=d*t.width,t.x=s+.5*(l-s-t.width))),ft.free(c),t},bi.prototype.computeReshape=function(){var t=Or;return this.adornedObject instanceof Oh&&(t=jh(this.adornedObject)),!(t===Ar||this.diagram.lastInput.shift)},bi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},bi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},bi.prototype.computeCellSize=function(){var t=new jt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},c.Object.defineProperties(bi.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.$d},set:function(t){if(null!==t&&t.part instanceof tu)throw Error("new handle must not be in an Adornment: "+t);this.$d=t}},minSize:{get:function(){return this.Sf},set:function(t){if(!this.Sf.A(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Sf.h(e,t)}}},maxSize:{get:function(){return this.Rf},set:function(t){if(!this.Rf.A(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Rf.h(e,t)}}},cellSize:{get:function(){return this.Eg},set:function(t){this.Eg.A(t)||this.Eg.assign(t)}},isGridSnapEnabled:{get:function(){return this.K},set:function(t){this.K=t}},originalDesiredSize:{get:function(){return this.Fw}},originalLocation:{get:function(){return this.Ko}}}),bi.className="ResizingTool",j("resizingTool",(function(){return this.findTool("Resizing")}),(function(t){On(this,"Resizing",t,this.mouseDownTools)})),d(xi,Cn),xi.prototype.updateAdornments=function(t){if(null!==t){if(t.Ah()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.o()&&t.isVisible()&&e.actualBounds.o()&&e.tf())){var n=t.ak(this.name);if(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n)return n.angle=e.Li(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.qh(this.name,n)}t.vf(this.name)}},xi.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new tu).type=ah.Position,e.locationSpot=ue;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(yh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},xi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},xi.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(this.Ew=this.adornedObject.angle,this.qu=this.computeRotationPoint(this.adornedObject),this.Ko=this.adornedObject.part.location.copy(),t.isMouseCaptured=!0,t.delaysLayout=!0,this.Aa(this.name),this.isActive=!0)},xi.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.gb()?t.ma(e.rotationSpot):t===e||t===n?n.ma(e.locationSpot):t.ma(ue)},xi.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.o()||(e=this.computeRotationPoint(t)),e=t.Vs(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+i:45===n?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):90===n?e.y=t.naturalBounds.height+i:135===n?(e.x=-i,e.y=t.naturalBounds.height+i):180===n?e.x=-i:225===n?(e.x=-i,e.y=-i):270===n?e.y=-i:315===n&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ma(e)},xi.prototype.doDeactivate=function(){var t=this.diagram;this.yg(),this.$d=this.handle=null,this.qu=new ft(NaN,NaN),this.isActive=t.isMouseCaptured=!1},xi.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},xi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},xi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Xa(),this.transactionResult=this.name,t.aa("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},xi.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).$b();var n=e.locationObject,i=e.rotateObject;(n===i||n.tg(i))&&(n=this.Ko.copy(),e.location=n.Xd(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint))}},xi.prototype.computeRotate=function(t){t=this.rotationPoint.Wa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.Li()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},c.Object.defineProperties(xi.prototype,{handleArchetype:{get:function(){return this.u},set:function(t){this.u=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tu))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.$d},set:function(t){if(null!==t&&t.part instanceof tu)throw Error("new handle must not be in an Adornment: "+t);this.$d=t}},snapAngleMultiple:{get:function(){return this.Ma},set:function(t){this.Ma=t}},snapAngleEpsilon:{get:function(){return this.La},set:function(t){this.La=t}},originalAngle:{get:function(){return this.Ew}},rotationPoint:{get:function(){return this.qu}},handleAngle:{get:function(){return this.K},set:function(t){this.K=t}},handleDistance:{get:function(){return this.ba},set:function(t){this.ba=t}}}),xi.className="RotatingTool",j("rotatingTool",(function(){return this.findTool("Rotating")}),(function(t){On(this,"Rotating",t,this.mouseDownTools)})),d(ki,Cn),ki.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},ki.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},ki.className="ClickSelectingTool",d(Li,Cn),Li.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Rb(e.documentPoint,(function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t}));return null!==n&&(!!n.isActionable&&(this.wk=n,t.Kk=t.Rb(e.documentPoint,null,null),!0))},Li.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.wk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Li.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.wk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},Li.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.wk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick((function(t){for(;null!==t.panel&&(!t.isActionable||t!==e);)t=t.panel;return t}),(function(t){return t===e}))}this.stopTool()},Li.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.wk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},Li.prototype.doStop=function(){this.wk=null},Li.className="ActionTool",d(Mi,Cn),Mi.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.ww=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.ww))return!1}else if(1!==t.lastInput.clickCount)return!1;return t.currentTool===this||null===t.$l(t.lastInput.documentPoint,!0)},Mi.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},Mi.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;this.Aa(this.name);var i=null;return n instanceof jl?n.bc()&&(yh(n),null!==(i=n.copy())&&e.add(i)):null!==n&&(k(n=e.model.copyNodeData(n))&&(e.model.kf(n),i=e.vc(n))),null!==i&&(n=ft.allocAt(t.x,t.y),this.isGridSnapEnabled&&ar(this.diagram,i,t,n),i.location=n,e.allowSelect&&e.select(i),ft.free(n)),e.Xa(),this.transactionResult=this.name,e.aa("PartCreated",i),this.yg(),i},c.Object.defineProperties(Mi.prototype,{archetypeNodeData:{get:function(){return this.aj},set:function(t){this.aj=t}},isDoubleClick:{get:function(){return this.u},set:function(t){this.u=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),Mi.className="ClickCreatingTool",d(Ni,Cn),Ni.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.$l(e.documentPoint,!0)))},Ni.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},Ni.prototype.doDeactivate=function(){var t=this.diagram;t.xf(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},Ni.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.$a("SHAPE");null===n&&(n=this.box.zb());var i=jt.alloc().h(e.width,e.height);e=ft.alloc().h(e.x,e.y),n.desiredSize=i,this.box.position=e,jt.free(i),ft.free(e),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Ns(t.lastInput.viewPoint)}},Ni.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.aa("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.aa("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},Ni.prototype.computeBoxBounds=function(){var t=this.diagram;return new Et(t.firstInput.documentPoint,t.lastInput.documentPoint)},Ni.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.ix(t,this.isPartialInclusion),_?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new tt,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},c.Object.defineProperties(Ni.prototype,{delay:{get:function(){return this.Rk},set:function(t){this.Rk=t}},isPartialInclusion:{get:function(){return this.u},set:function(t){this.u=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),Ni.className="DragSelectingTool",d(Ti,Cn),Ti.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Ti.prototype.doActivate=function(){var t=this.diagram;this.Dg?(t.lastInput.bubbles=!0,g.document.addEventListener("scroll",this.Iw,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.lu.assign(t.position)),this.isActive=!0},Ti.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Ti.prototype.doCancel=function(){var t=this.diagram;t.position=this.lu,t.isMouseCaptured=!1,this.stopTool()},Ti.prototype.doMouseMove=function(){this.move()},Ti.prototype.doMouseUp=function(){this.move(),this.stopTool()},Ti.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.Dg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,i=t.lastInput.documentPoint,a=e.x+n.x-i.x;n=e.y+n.y-i.y,t.allowHorizontalScroll||(a=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.Zx.h(a,n)}},c.Object.defineProperties(Ti.prototype,{bubbles:{get:function(){return this.Dg},set:function(t){this.Dg=t}},originalPosition:{get:function(){return this.lu}}}),Ti.className="PanningTool",j("clickCreatingTool",(function(){return this.findTool("ClickCreating")}),(function(t){On(this,"ClickCreating",t,this.mouseUpTools)})),j("clickSelectingTool",(function(){return this.findTool("ClickSelecting")}),(function(t){On(this,"ClickSelecting",t,this.mouseUpTools)})),j("panningTool",(function(){return this.findTool("Panning")}),(function(t){On(this,"Panning",t,this.mouseMoveTools)})),j("dragSelectingTool",(function(){return this.findTool("DragSelecting")}),(function(t){On(this,"DragSelecting",t,this.mouseMoveTools)})),j("actionTool",(function(){return this.findTool("Action")}),(function(t){On(this,"Action",t,this.mouseDownTools)})),c.Object.defineProperties(Ci.prototype,{mainElement:{get:function(){return this.K},set:function(t){this.K=t}},show:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.ba},set:function(t){this.ba=t}}}),Ci.className="HTMLInfo",Fi.className="ContextMenuButtonInfo",d(Bi,Cn),Bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right)&&!!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu())},Bi.prototype.doStart=function(){this.Bw.set(this.diagram.firstInput.documentPoint)},Bi.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},Bi.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.lastInput,i=null;if(t instanceof va||(i=t instanceof Mo?t:e.Rb(n.documentPoint,null,(function(t){return!t.layer.isTemporary}))),null!==i){for(t=i;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(null!==e.contextMenu)return e;return null},Bi.prototype.doActivate=function(){},Bi.prototype.doMouseDown=function(){if(Cn.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof tu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&Ai(this)},Bi.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof tu){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}Ai(this)},Bi.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},Bi.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof tu){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var i=t.diagram;null!==i&&i!==n&&i.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.$b(),this.positionContextMenu(t,e)}else t instanceof Ci&&t.show(e,n,this);this.currentContextMenu=t},Bi.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),i=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>a.right&&(n.x-=i.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y+i.height>a.bottom&&(n.y-=i.height+5/e.scale),n.y<a.y&&(n.y=a.y),t.position=n}},Bi.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof tu?(t.remove(e),null!==this.Mt&&this.Mt.vf(e.category),e.data=null,e.adornedObject=null):e instanceof Ci&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},Bi.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Nt&&(this.Nt=function(){var t=new tt;return t.add(new Fi("Copy",(function(t){t.commandHandler.copySelection()}),(function(t){return t.commandHandler.canCopySelection()}))),t.add(new Fi("Cut",(function(t){t.commandHandler.cutSelection()}),(function(t){return t.commandHandler.canCutSelection()}))),t.add(new Fi("Delete",(function(t){t.commandHandler.deleteSelection()}),(function(t){return t.commandHandler.canDeleteSelection()}))),t.add(new Fi("Paste",(function(t){t.commandHandler.pasteSelection(t.lastInput.documentPoint)}),(function(t){return t.commandHandler.canPasteSelection()}))),t.add(new Fi("Select All",(function(t){t.commandHandler.selectAll()}),(function(t){return t.commandHandler.canSelectAll()}))),t.add(new Fi("Undo",(function(t){t.commandHandler.undo()}),(function(t){return t.commandHandler.canUndo()}))),t.add(new Fi("Redo",(function(t){t.commandHandler.redo()}),(function(t){return t.commandHandler.canRedo()}))),t.add(new Fi("Scroll To Part",(function(t){t.commandHandler.scrollToPart()}),(function(t){return t.commandHandler.canScrollToPart()}))),t.add(new Fi("Zoom To Fit",(function(t){t.commandHandler.zoomToFit()}),(function(t){return t.commandHandler.canZoomToFit()}))),t.add(new Fi("Reset Zoom",(function(t){t.commandHandler.resetZoom()}),(function(t){return t.commandHandler.canResetZoom()}))),t.add(new Fi("Group Selection",(function(t){t.commandHandler.groupSelection()}),(function(t){return t.commandHandler.canGroupSelection()}))),t.add(new Fi("Ungroup Selection",(function(t){t.commandHandler.ungroupSelection()}),(function(t){return t.commandHandler.canUngroupSelection()}))),t.add(new Fi("Edit Text",(function(t){t.commandHandler.editTextBlock()}),(function(t){return t.commandHandler.canEditTextBlock()}))),t}()),Ei.innerHTML="",Gi.addEventListener("click",this.Au,!1);var e=this,n=y("ul");n.className="goCXul",Ei.appendChild(n),n.innerHTML="";for(var i=this.Nt.iterator;i.next();){var a=i.value,r=a.visible;if("function"==typeof a.Xw&&("function"!=typeof r||r(t))){(r=y("li")).className="goCXli";var o=y("a");o.className="goCXa",o.href="#",o.Rx=a.Xw,o.addEventListener("click",(function(n){return this.Rx(t),e.stopTool(),n.preventDefault(),!1}),!1),o.textContent=a.text,r.appendChild(o),n.appendChild(r)}}Ei.style.display="block",Gi.style.display="block"},Bi.prototype.hideDefaultContextMenu=function(){null!==this.currentContextMenu&&this.currentContextMenu===Di&&(Ei.style.display="none",Gi.style.display="none",Gi.removeEventListener("click",this.Au,!1),this.currentContextMenu=null)},c.Object.defineProperties(Bi.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.Mt=t instanceof tu?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===zi&&null===Di&&Xr&&function(t){var e=new Ci;e.show=function(t,e,n){n.showDefaultContextMenu()},e.hide=function(t,e){e.hideDefaultContextMenu()},Di=e,t.Au=function(){t.stopTool()},e=y("div");var n=y("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=y("style");g.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),e.addEventListener("contextmenu",Oi,!1),e.addEventListener("selectstart",Oi,!1),n.addEventListener("contextmenu",Oi,!1),e.className="goCXforeground",n.className="goCXbackground",g.document.body&&(g.document.body.appendChild(e),g.document.body.appendChild(n)),Ei=e,Gi=n,zi=!0}(this),Di},set:function(t){null===t&&(zi=!0),Di=t}},currentObject:{get:function(){return this.u},set:function(t){this.u=t}},mouseDownPoint:{get:function(){return this.Bw}}});var Di=null,zi=!1,Gi=null,Ei=null;function Ri(){Cn.call(this),this.name="TextEditing",this.kh=new Vh,this.Ma=null,this.La=Ui,this.xi=null,this.la=Wi,this.K=1,this.ba=!0,this.u=null,this.l=new Ci,this.Ot=null,function(t,e){if(Xr){var n=y("textarea");t.Ot=n,n.addEventListener("input",(function(){if(null!==t.textBlock){var e=t.sx(this.value);this.style.width=20+e.measuredBounds.width*this.Vz+"px",this.rows=e.lineCount}}),!1),n.addEventListener("keydown",(function(e){if(null!==t.textBlock){var n=e.which;13===n?(!1===t.textBlock.isMultiline&&e.preventDefault(),t.acceptText(Hi)):9===n?(t.acceptText(Yi),e.preventDefault()):27===n&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}}),!1),n.addEventListener("focus",(function(){if(null!==t.currentTextEditor&&t.state!==Wi){var e=t.Ot;t.la===Ki&&(t.la=Ji),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}}),!1),n.addEventListener("blur",(function(){if(null!==t.currentTextEditor&&t.state!==Wi){var e=t.Ot;"function"==typeof e.focus&&e.focus(),"function"==typeof e.select&&t.selectsTextOnActivate&&(e.select(),e.setSelectionRange(0,9999))}}),!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(t,e,i){if(t instanceof Vh&&i instanceof Ri)if(i.state===$i)n.style.border="3px solid red",n.focus();else{var a=t.ma(ue),r=e.position,o=e.scale,s=t.De()*o;s<i.minimumEditorScale&&(s=i.minimumEditorScale);var h=t.naturalBounds.width*s+6,l=t.naturalBounds.height*s+2,u=(a.x-r.x)*o;a=(a.y-r.y)*o,n.value=t.text,e.div.style.font=t.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*s+"%",n.style.lineHeight="normal",n.style.width=h+"px",n.style.left=(u-h/2|0)-1+"px",n.style.top=(a-l/2|0)-1+"px",n.style.textAlign=t.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=t.lineCount,n.Vz=s,n.className="goTXarea",e.div.appendChild(n),n.focus(),i.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(t){t.div.removeChild(n)}}}(this,this.l)}function Ii(t){var e=t.textBlock,n=t.diagram,i=t.currentTextEditor;if(null!==e&&null!==i){var a=e.text,r="";null!==i.valueFunction&&(r=i.valueFunction()),t.isValidText(e,a,r)?(t.Aa(t.name),t.la=Qi,t.transactionResult=t.name,e.text=r,null!==e.textEdited&&e.textEdited(e,a,r),null!==n&&n.aa("TextEdited",e,a),t.yg(),t.stopTool(),null!==n&&n.doFocus()):(t.la=$i,null!==e.errorFunction&&e.errorFunction(t,a,r),i.show(e,n,t))}}Bi.className="ContextMenuTool",j("contextMenuTool",(function(){return this.findTool("ContextMenu")}),(function(t){On(this,"ContextMenu",t,this.mouseUpTools)})),d(Ri,Cn),Ri.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Rb(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Vh&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===Ui&&!e.isSelected||this.starting===qi&&2>t.lastInput.clickCount)},Ri.prototype.doStart=function(){this.isActive||null===this.textBlock||this.doActivate()},Ri.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Rb(t.lastInput.documentPoint)),null!==e&&e instanceof Vh&&(this.textBlock=e,null!==e.part)){this.isActive=!0,this.la=Ki;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.kh=this.textBlock.copy();var i=new Et(this.textBlock.ma(oe),this.textBlock.ma(ge));t.Gv(i),n.show(e,t,this),this.currentTextEditor=n}}}},Ri.prototype.doCancel=function(){this.stopTool()},Ri.prototype.doMouseUp=function(){!this.isActive&&this.canStart()&&this.doActivate()},Ri.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Vi)},Ri.prototype.acceptText=function(t){switch(t){case Vi:this.la===Qi?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():this.la!==Ki&&this.la!==$i&&this.la!==Ji||(this.la=Zi,Ii(this));break;case _i:case Hi:case Yi:Hi===t&&!0===this.textBlock.isMultiline||this.la!==Ki&&this.la!==$i&&this.la!==Ji||(this.la=Zi,Ii(this))}},Ri.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.la=Wi,this.textBlock=null,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.isActive=!1)},Ri.prototype.isValidText=function(t,e,n){var i=this.textValidation;return!(null!==i&&!i(t,e,n))&&!(null!==(i=t.textValidation)&&!i(t,e,n))},Ri.prototype.sx=function(t){var e=this.kh;return e.text=t,e.measure(this.textBlock.jl,1/0),e},c.Object.defineProperties(Ri.prototype,{textBlock:{get:function(){return this.Ma},set:function(t){this.Ma=t}},currentTextEditor:{get:function(){return this.u},set:function(t){this.u=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.La},set:function(t){this.La=t}},textValidation:{get:function(){return this.xi},set:function(t){this.xi=t}},minimumEditorScale:{get:function(){return this.K},set:function(t){this.K=t}},selectsTextOnActivate:{get:function(){return this.ba},set:function(t){this.ba=t}},state:{get:function(){return this.la},set:function(t){this.la!==t&&(this.la=t)}}}),Ri.prototype.measureTemporaryTextBlock=Ri.prototype.sx;var _i=new X(Ri,"LostFocus",0),Vi=new X(Ri,"MouseDown",1),Yi=new X(Ri,"Tab",2),Hi=new X(Ri,"Enter",3),Xi=new X(Ri,"SingleClick",0),Ui=new X(Ri,"SingleClickSelected",1),qi=new X(Ri,"DoubleClick",2),Wi=new X(Ri,"StateNone",0),Ki=new X(Ri,"StateActive",1),Ji=new X(Ri,"StateEditing",2),Zi=new X(Ri,"StateValidating",3),$i=new X(Ri,"StateInvalid",4),Qi=new X(Ri,"StateValidated",5);function ta(){var t;ca||((t=new ct).add("position",(function(t,e,n,i,a,r){a!==r?t.vt(i(a,e.x,n.x-e.x,r),i(a,e.y,n.y-e.y,r)):t.position=new ft(i(a,e.x,n.x-e.x,r),i(a,e.y,n.y-e.y,r))})),t.add("position:placeholder",(function(t,e,n,i,a,r){a!==r?t.vt(i(a,e.x,n.x-e.x,r),i(a,e.y,n.y-e.y,r)):t.position=new ft(i(a,e.x,n.x-e.x,r),i(a,e.y,n.y-e.y,r))})),t.add("position:node",(function(t,e,n,i,a,r){var o=t.actualBounds,s=n.actualBounds;n=s.x+s.width/2-o.width/2,o=s.y+s.height/2-o.height/2,a!==r?t.vt(i(a,e.x,n-e.x,r),i(a,e.y,o-e.y,r)):t.position=new ft(i(a,e.x,n-e.x,r),i(a,e.y,o-e.y,r))})),t.add("opacity",(function(t,e,n,i,a,r){t.opacity=i(a,e,n-e,r)})),t.add("scale",(function(t,e,n,i,a,r){t.scale=i(a,e,n-e,r)})),t.add("angle",(function(t,e,n,i,a,r){t.angle=i(a,e,n-e,r)})),t.add("visible",(function(t,e,n,i,a,r){t.visible=a!==r?e:n})),da=t,ca=!0),this.ow=ea,this.C=_r,this.qn=this.rn=null,this.$i=this.sn=this.tn=0,this.Bk=this.ni=this.rb=this.Hr=this.Mf=!1,this.Nf=this.Dc=!0,this.Zq=this.Yq=this.nw=null,this.mw=0,this.ar=new ct,this.Ut=600,this.Tx=new ft(0,0),this.kw=this.jw=this.Lw=!1,this.ae=new nt,this.yj=new ct,this.bs=new nt,this.$q=null}function ea(t,e,n,i){return 1>(t/=i/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function na(t){if(t.Dc)if(t.ae.contains("Model")&&!t.Nf||!t.Bk)t.ae.clear(),t.rb=!1,t.ni=!1;else if(t.ae.clear(),t.rb&&0===t.$i){var e=+new Date;t.$i=e,g.requestAnimationFrame((function(){if(!1!==t.rb&&!t.Mf&&t.$i===e){var n=t.C;n.Ee("temporaryPixelRatio")&&Pa(n),xa(n),t.rb=!1,t.ni=!1,n.aa("AnimationStarting"),function(t,e){function n(){if(!1!==a.Mf&&a.$i===e){var t=+new Date,r=t>p?l:t-f;ra(a),sa(a,i,c,o,r,l),a.Yq&&a.Yq(),Ya(i),oa(a),t>p?ha(a):g.requestAnimationFrame(n)}}var i=t.C;if(null!==i){var a=t,r=t.$q||{},o=r.bA||t.ow,s=r.fA||null,h=r.gA||null,l=r.duration||t.Ut,u=t.Tx;for(r=t.yj.iterator;r.next();){var d=r.value.start.position;d instanceof ft&&(d.o()||d.assign(u))}t.nw=o,t.Yq=s,t.Zq=h,t.mw=l,t.ar=t.yj;var c=t.ar;for(r=c.iterator;r.next();)(s=r.value.end)["position:placeholder"]&&((h=r.key.findVisibleNode())instanceof pu&&null!==h.placeholder&&(u=h.placeholder,h=u.ma(oe),u=u.padding,h.x+=u.left,h.y+=u.top,s["position:placeholder"]=h));t.Mf=!0,ra(t),sa(t,i,c,o,0,l),Ya(t.C,!0),oa(t);var f=+new Date,p=f+l;a.$i===e&&g.requestAnimationFrame((function(){n()}))}}(t,e)}}))}}function ia(t){return t instanceof ft||t instanceof jt?t.copy():t}function aa(t,e){return!!t.Mf&&(null!==(t=t.yj.J(e))&&t.ot)}function ra(t){if(!t.Hr){var e=t.C;t.Lw=e.skipsUndoManager,t.jw=e.skipsModelSourceBindings,t.kw=e.sk,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,e.sk=!0,t.Hr=!0}}function oa(t){var e=t.C;e.skipsUndoManager=t.Lw,e.skipsModelSourceBindings=t.jw,e.sk=t.kw,t.Hr=!1}function sa(t,e,n,i,a,r){for(n=n.iterator;n.next();){var o=n.key,s=n.value,h=s.start,l=s.end,u=da;for(d in l)"position"===d&&(l["position:placeholder"]||l["position:node"])||null===u.get(d)||u.get(d)(o,h[d],l[d],i,a,r,s)}i=e.kv,e.kv=!0;var d=t.ow;0!==t.tn&&0!==t.sn&&(n=t.tn,e.Ca=d(a,n,t.sn-n,r)),null!==t.rn&&null!==t.qn&&(n=t.rn,t=t.qn,e.sa=new ft(d(a,n.x,t.x-n.x,r),d(a,n.y,t.y-n.y,r))),e.kv=i}function ha(t){t.Mf=!1,t.Bk=!1,ra(t);for(var e=t.C,n=t.nw,i=t.mw,a=t.ar,r=t.bs.iterator;r.next();)r.value.s();for(a=a.iterator,r=da;a.next();){var o,s=a.key,h=a.value,l=h.start,u=h.end,d=h.Vu;for(o in u)if(null!==r.get(o)){var c=o;!h.Qu||"position:node"!==c&&"position:placeholder"!==c||(c="position"),r.get(c)(s,l[o],void 0!==d[o]?d[o]:h.Qu?l[o]:u[o],n,i,i)}h.Qu&&void 0!==d.location&&s instanceof jl&&(s.location=d.location),h.ot&&s instanceof jl&&s.Lb(!1)}for(n=t.C.links;n.next();)null!==(i=n.value).bh&&(i.points=i.bh,i.bh=null);e.ft.clear(),ba(e,!1),e.Xa(),e.R(),e.fd(),_a(e),oa(t),t.Zq&&t.Zq(),t.$i=0,t.ar.clear(),t.Zq=null,t.Yq=null,t.rn=null,t.qn=null,t.tn=0,t.sn=0,t.yj.clear(),0<t.bs.count&&t.bs.clear(),t.$q=null,e.aa("AnimationFinished"),e.cc()}function la(t,e,n){t.rb&&!e.A(n)&&(null===t.rn&&e.o()&&null===t.qn&&(t.rn=e.copy()),t.qn=n.copy(),t.Bk=!0)}function ua(t,e,n){t.rb&&t.C.Qi&&(0===t.tn&&0===t.sn&&(t.tn=e),t.sn=n,t.Bk=!0)}Ri.className="TextEditingTool",Ri.LostFocus=_i,Ri.MouseDown=Vi,Ri.Tab=Yi,Ri.Enter=Hi,Ri.SingleClick=Xi,Ri.SingleClickSelected=Ui,Ri.DoubleClick=qi,Ri.StateNone=Wi,Ri.StateActive=Ki,Ri.StateEditing=Ji,Ri.StateValidating=Zi,Ri.StateInvalid=$i,Ri.StateValidated=Qi,j("textEditingTool",(function(){return this.findTool("TextEditing")}),(function(t){On(this,"TextEditing",t,this.mouseUpTools)})),ta.prototype.hb=function(t){this.C=t},ta.prototype.canStart=function(){return!0},(n=ta.prototype).Ti=function(t,e){this.Dc&&(void 0!==e&&(this.$q=e),(this.Nf||this.C.Qi)&&this.canStart(t)&&(this.ae.add(t),this.Mf&&this.vd(),this.ni=this.rb=!0))},n.Gz=function(t,e){this.Dc&&(void 0!==e&&(this.$q=e),this.Nf||this.C.Qi)&&(this.ae.add(t),this.canStart(t)&&(this.Mf&&this.vd(),this.rb=!0))},n.sh=function(t,e,n,i,a,r){if(!(!this.rb||"position"===e&&n.A(i)||t instanceof jl&&!t.isAnimated)){var o=this.yj;if(o.contains(t)){var s=o.J(t);o=s.start;var h=s.end;void 0===o[e]&&(o[e]=ia(n)),h[e]=ia(i)}else h={},(s={})[e]=ia(n),h[e]=ia(i),(i=s.position)instanceof ft&&!i.o()&&this.ae.contains("Expand SubGraph")&&i.assign(h.position),s=new fa(s,h,a),o.add(t,s);a&&0===e.indexOf("position:")&&t instanceof jl?s.Vu.location=ia(t.location):a&&(s.Vu[e]=ia(n)),r&&(s.ot=!0),this.Bk=!0}},n.vd=function(){!0===this.rb&&(this.ni=this.rb=!1,this.ae.clear(),this.$i=0,this.Bk&&this.C.cc()),this.Mf&&this.Dc&&ha(this)},n.Mp=function(t,e){if(this.ni&&(this.ae.contains("Expand Tree")||this.ae.contains("Expand SubGraph"))){var n=e.actualBounds,i=null;if(e instanceof pu&&(i=e.placeholder),null!==i?(n=i.ma(oe),i=i.padding,n.x+=i.left,n.y+=i.top,this.sh(t,"position",n,t.position,!1)):this.sh(t,"position",new ft(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.sh(t,"scale",.01,t.scale,!1),t instanceof pu)for(t=t.memberParts;t.next();)(i=t.value)instanceof eu&&this.Mp(i,e)}},n.Lp=function(t,e){if(t.isVisible()&&this.ni&&(this.ae.contains("Collapse Tree")||this.ae.contains("Collapse SubGraph"))){var n=null;if(e instanceof pu&&(n=e.placeholder),null!==n?this.sh(t,"position:placeholder",t.position,n,!0):this.sh(t,"position:node",t.position,e,!0),this.sh(t,"scale",t.scale,.01,!0),this.rb&&((n=this.yj).contains(t)&&(n.J(t).ot=!0)),t instanceof pu)for(t=t.memberParts;t.next();)(n=t.value)instanceof eu&&this.Lp(n,e)}},c.Object.defineProperties(ta.prototype,{animationReasons:{get:function(){return this.ae}},isEnabled:{get:function(){return this.Dc},set:function(t){this.Dc=t}},duration:{get:function(){return this.Ut},set:function(t){1>t&&P(t,">= 1",ta,"duration"),this.Ut=t}},isAnimating:{get:function(){return this.Mf}},isTicking:{get:function(){return this.Hr}},isInitial:{get:function(){return this.Nf},set:function(t){this.Nf=t}}}),ta.prototype.stopAnimation=ta.prototype.vd,ta.prototype.addToAnimation=ta.prototype.sh,ta.prototype.prepareAnimation=ta.prototype.Gz,ta.prototype.prepareAutomaticAnimation=ta.prototype.Ti;var da=null,ca=!1;function fa(t,e,n){this.start=t,this.end=e,this.Vu={},this.Qu=n,this.ot=!1}function ga(){it(this),this.C=null,this.Fa=new tt,this.Ua="",this.lb=1,this.u=!1,this.Cj=this.K=this.Oh=this.Nh=this.Mh=this.Lh=this.Jh=this.Kh=this.Ih=this.Qh=this.Hh=this.Ph=this.Gh=this.Fh=!0,this.l=!1,this.Lo=[]}function pa(t,e){var n=e.actualBounds,i=e.naturalBounds;if(0!==n.width&&0!==n.height&&!isNaN(n.x)&&!isNaN(n.y)&&e.isVisible()){var a=e.transform;null!==e.areaBackground&&(Ao(e,t,e.areaBackground,!0,!0,i,n),t.fillRect(n.x,n.y,n.width,n.height)),null===e.areaBackground&&null===e.background&&(Ao(e,t,"rgba(0,0,0,0.3)",!0,!1,i,n),t.fillRect(n.x,n.y,n.width,n.height)),null!==e.background&&(t.transform(a.m11,a.m12,a.m21,a.m22,a.dx,a.dy),Ao(e,t,e.background,!0,!1,i,n),t.fillRect(0,0,i.width/2,i.height/2),a.bt()||(e=1/(a.m11*a.m22-a.m12*a.m21),t.transform(a.m22*e,-a.m12*e,-a.m21*e,a.m11*e,e*(a.m21*a.dy-a.m22*a.dx),e*(a.m12*a.dx-a.m11*a.dy))))}}function ma(t,e,n){if(e=function(t,e,n){var i=n.zOrder;if(isNaN(i))return e;var a=(t=t.Fa).count;if(1>=a)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var r=e-1,o=NaN;0<=r&&(o=t.N(r).zOrder,isNaN(o));)r--;for(var s=e+1,h=NaN;s<a&&(h=t.N(s).zOrder,isNaN(h));)s++;if(!isNaN(o)&&o>i)for(;;){if(-1===r||o<=i){if(++r===e)break;return t.mb(e),t.Ib(r,n),r}for(o=NaN;0<=--r&&(o=t.N(r).zOrder,isNaN(o)););}else if(!isNaN(h)&&h<i)for(;;){if(s===a||h>=i){if(--s===e)break;return t.mb(e),t.Ib(s,n),s}for(h=NaN;++s<a&&(h=t.N(s).zOrder,isNaN(h)););}return e}(t,e,n),n instanceof pu&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var i=-1,a=t.Fa.j,r=a.length,o=0;o<r;o++){var s=a[o];if(s===n&&(e=o,0<=i))break;if(0>i&&s.containingGroup===n&&(i=o,0<=e))break}!(0>i)&&i<e&&((a=t.Fa).mb(e),a.Ib(i,n))}null!==(n=n.containingGroup)&&ma(t,-1,n)}}function va(t){function e(){n.removeEventListener(g.document,"DOMContentLoaded",e,!1),n.setRTL()}1<arguments.length&&w("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),co||(fo(),co=!0),it(this),_r=this,H=[],this.ob=!0,this.Ak=new ta,this.Ak.hb(this),this.Gb=17,this.Sn=!1,this.ru="default",this.Ia=null;var n=this;Xr&&(null!==g.document.body?this.setRTL():n.addEventListener(g.document,"DOMContentLoaded",e,!1)),this.Pa=new tt,this.wa=this.xa=0,this.Da=null,this.pu=new ct,this.eg=this.Yc=null,this.Ev(),this.dl=null,this.Dv(),this.sa=new ft(NaN,NaN).freeze(),this.dr=this.Ca=1,this.yr=new ft(NaN,NaN).freeze(),this.zr=NaN,this.Tr=1e-4,this.Rr=100,this.tb=new ae,this.Is=new ft(NaN,NaN).freeze(),this.pr=new Et(NaN,NaN,NaN,NaN).freeze(),this.ti=new $t(0,0,0,0).freeze(),this.Hj=io,this.ss=!1,this.ns=this.js=null,this.bj=Wr,this.dj=Fe,this.bi=Wr,this.Nn=Fe,this.Ar=this.xr=oe,this.nc=!0,this.On=!1,this.Dd=new nt,this.Xh=new ct,this.wn=!0,this.Sm=250,this.Ck=-1,this.Tm=new $t(16,16,16,16).freeze(),this.Sk=this.qd=!1,this.Xk=!0,this.Yh=new wn,this.Yh.diagram=this,this.Ze=new wn,this.Ze.diagram=this,this.rj=new wn,this.rj.diagram=this,this.pe=this.Bf=null,this.Ml=!1,this.Qt=this.Rt=null,this.Lq=g.PointerEvent&&(E||R||I)&&g.navigator&&!1!==g.navigator.msPointerEnabled,Pr(this),this.zi=new nt,this.Ir=!0,this.Ds=ro,this.Vb=!1,this.Fs=Zr,this.Ma=null,Vr.add("Model",Vd),this.ba=this.La=this.Ub=null,this.Xq="",this.pn="auto",this.Tf=this.Wr=this.Vf=this.Wf=this.Yf=this.Df=this.Hf=this.Cf=null,this.ur=!1,this.Ef=this.jg=this.Xf=this.Uf=null,this.ku=!1,this.nu={},this.vl=[null,null],this.K=null,this.Pt=this.wu=this.Dh=this.eh=!1,this.Vc=!0,this.nj=this.Yb=!1,this.Zb=null;var i=this;this.zg=function(t){var e=i.partManager;if(t.model===e.diagram.model&&e.diagram.ea){e.diagram.ea=!1;try{var n=t.change;""===t.modelChange&&n===xn&&e.updateDataBindings(t.object,t.propertyName)}finally{e.diagram.ea=!0}}},this.Cm=function(t){i.partManager.doModelChanged(t)},this.Nw=!0,this.ge=-2,this.Dj=new ct,this.mu=new tt,this.Of=!1,this.Gh=this.Fh=this.Dq=this.Dc=!0,this.Eq=!1,this.Kq=this.Iq=this.Oh=this.Nh=this.Mh=this.Lh=this.Jh=this.Kh=this.Ih=this.Hq=this.Qh=this.Hh=this.Ph=this.Fq=!0,this.Re=this.Kc=!1,this.Jq=this.Gq=this.wr=this.vr=!0,this.rs=this.ps=16,this.tu=this.os=!1,this.hp=this.qs=null,this.uu=this.vu=0,this.eb=new $t(5).freeze(),this.Bq=(new nt).freeze(),this.Sr=999999999,this.zq=(new nt).freeze(),this.ci=this.lj=this.Rg=!0,this.$h=this.Qg=!1,this.gc=null,this.Cg=!0,this.he=!1,this.Aq=new nt,this.yw=new nt,this.Nb=null,this.Jo=1,this.Hw=0,this.ye={scale:1,position:new ft,bounds:new Et,ox:!1},this.Mw=new Et(NaN,NaN,NaN,NaN).freeze(),this.Gp=new jt(NaN,NaN).freeze(),this.un=new Et(NaN,NaN,NaN,NaN).freeze(),this.Jr=!1,this.hr=null,ka(this),this.Or=this.sr=this.Zr=this.qw=this.pw=this.rw=this.Ug=this.Zh=this.Zf=null,Sa(this),this.Eb=null,this.rr=!1,this.Kk=null,this.partManager=new Vd,this.toolManager=new Fn,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.gr=null,this.Mk=new wo,this.ds=this.cs=null,this.xp=!1,this.commandHandler=wa(),this.model=xc(),this.eh=!0,this.layout=new bd,this.eh=!1,this.tw=this.Tt=null,this.Mb=1,this.jh=null,this.oe=1,this.vo=0,this.wo=[0,0,0,0,0],this.xo=0,this.Fd=1,this.kl=0,this.Lr=new ft,this.Bu=500,this.Mq=new ft,this.Se=!1,this.preventDefault=this.nt=this.km=this.lm=this.jm=this.im=this.kk=this.mk=this.lk=this.ik=this.jk=this.$v=this.Sv=this.Tv=this.Uv=this.si=this.bp=this.ri=this.ap=null,this.u=!1,this.ai=new go,this.As=!1,void 0!==t&&mo(this,t),this.ob=!1}function ya(t,e){var n=null;null!==t.Eb&&(n=t.Eb.part),t.animationManager.vd();for(var i=[],a=t.Pa.length,r=0;r<a;r++){var o=t.Pa.j[r];if(e)for(var s=o.parts;s.next();){var h=s.value;h!==n&&null===h.data&&i.push(h)}o.clear()}if(t.partManager.clear(),t.Dd.clear(),t.Xh.clear(),t.zi.clear(),t.Qp(),t.Lu(),t.Kk=null,Y=[],null!==n&&(t.add(n),t.partManager.parts.remove(n)),e)for(e=0;e<i.length;e++)t.add(i[e])}function wa(){return null}function Sa(t){t.Zf=new ct;var e=new eu,n=new Vh;n.bind(new Cc("text","",O)),e.add(n),t.rw=e,t.Zf.add("",e),e=new eu,(n=new Vh).stroke="brown",n.bind(new Cc("text","",O)),e.add(n),t.Zf.add("Comment",e),(e=new eu).selectable=!1,e.avoidable=!1,(n=new Oh).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new jt(3,3).ga(),e.add(n),t.Zf.add("LinkLabel",e),t.Zh=new ct,(e=new pu).selectionObjectName="GROUPPANEL",e.type=ah.Vertical,(n=new Vh).font="bold 12pt sans-serif",n.bind(new Cc("text","",O)),e.add(n),(n=new ah(ah.Auto)).name="GROUPPANEL";var i=new Oh;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),(i=new yu).padding=new $t(5,5,5,5).ga(),n.add(i),e.add(n),t.pw=e,t.Zh.add("",e),t.Ug=new ct,e=new wu,(n=new Oh).isPanelMain=!0,e.add(n),(n=new Oh).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.qw=e,t.Ug.add("",e),e=new wu,(n=new Oh).isPanelMain=!0,n.stroke="brown",e.add(n),t.Ug.add("Comment",e),(e=new tu).type=ah.Auto,(n=new Oh).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new yu).margin=new $t(1.5,1.5,1.5,1.5).ga(),e.add(n),t.Zr=e,t.sr=e,(e=new tu).type=ah.Link,(n=new Oh).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.Or=e}function Pa(t){30<t.vo&&(t.jh=1)}function ba(t,e){null!==t.jh&&(t.jh=null,e&&t.nt(),t.vo=0,t.wo=[0,0,0,0,0],t.xo=0)}function xa(t){if(null!==t.Da){var e=t.Ia;if(0!==e.clientWidth&&0!==e.clientHeight){t.setScrollWidth();var n=t.$h?t.Gb:0,i=t.Qg?t.Gb:0,a=t.Mb;t.Mb=t.computePixelRatio(),t.Mb!==a&&(t.On=!0,t.cc()),e.clientWidth===t.xa+n&&e.clientHeight===t.wa+i||(t.lj=!0,t.nc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Wr&&(t.Sk=!0,e.B()),t.Yb||t.cc())}}}function ka(t){var e=new ga;e.name="Background",t.Ql(e),(e=new ga).name="",t.Ql(e),(e=new ga).name="Foreground",t.Ql(e),(e=new ga).name="Adornment",e.isTemporary=!0,t.Ql(e),(e=new ga).name="Tool",e.isTemporary=!0,e.isBoundsIncluded=!0,t.Ql(e),(e=new ga).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,t.Qw(e,t.Zl("Background"))}function La(t){t.Eb=new ah(ah.Grid),t.Eb.name="GRID";var e=new Oh;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Eb.add(e),(e=new Oh).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Eb.add(e),(e=new Oh).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Eb.add(e),(e=new Oh).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Eb.add(e),(e=new Oh).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Eb.add(e),(e=new Oh).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Eb.add(e),(e=new jl).add(t.Eb),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Eb.visible=!1}function Ma(){this.C.tu?this.C.tu=!1:this.C.isEnabled?this.C.$w(this):Qa(this.C)}function Na(t){this.C.isEnabled?(this.C.vu=t.target.scrollTop,this.C.uu=t.target.scrollLeft):Qa(this.C)}function Ta(t){if(t.fixedBounds.o()){var e=t.fixedBounds.copy();return e.Np(t.eb),e}for(var n=!0,i=t.Pa.j,a=i.length,r=0;r<a;r++){var o=i[r];if(o.visible&&(!o.isTemporary||o.isBoundsIncluded))for(var s=(o=o.Fa.j).length,h=0;h<s;h++){var l=o[h];l.isInDocumentBounds&&l.isVisible()&&((l=l.actualBounds).o()&&(n?(n=!1,e=l.copy()):e.Jc(l)))}}return n&&(e=new Et(0,0,0,0)),e.Np(t.eb),e}function Ca(t,e){if((e||t.he)&&!t.ob&&null!==t.Da&&!t.animationManager.isAnimating&&t.documentBounds.o()){t.ob=!0;var n=t.bj;e&&t.bi!==Wr&&(n=t.bi);var i=n!==Wr?Fa(t,n):t.scale;n=t.viewportBounds.copy();var a=t.xa/i,r=t.wa/i,o=null,s=t.animationManager;s.rb&&(o=t.sa.copy());var h=t.dj,l=t.Nn;e&&!h.gb()&&(l.gb()||l.Kb())&&(h=l.Kb()?ue:l),Ba(t,t.documentBounds,a,r,h,e),null!==o&&la(s,o,t.sa),e=t.scale,t.scale=i,t.ob=!1,(i=t.viewportBounds).Qa(n)||t.lq(n,i,e,!1)}}function Fa(t,e){var n=t.dr;if(null===t.Da)return n;t.Rg&&mr(t,t.computeBounds());var i=t.documentBounds;if(!i.o())return n;var a=i.width;i=i.height;var r=t.xa,o=t.wa,s=r/a,h=o/i;return e===Kr?((e=Math.min(h,s))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Jr?((e=h>s?(o-t.Gb)/i:(r-t.Gb)/a)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Ba(t,e,n,i,a,r){t.sa.ha();var o=t.sa,s=o.x,h=o.y;(r||t.scrollMode===io)&&(a.gb()&&(n>e.width&&(s=e.x+(a.x*e.width+a.offsetX)-(a.x*n-a.offsetX)),i>e.height&&(h=e.y+(a.y*e.height+a.offsetY)-(a.y*i-a.offsetY))),a=t.ti,r=n-e.width,n<e.width+a.left+a.right?(s=Math.min(s+n/2,e.right+Math.max(r,a.right)-n/2),s=Math.max(s,e.left-Math.max(r,a.left)+n/2),s-=n/2):s>e.left?s=e.left:s<e.right-n&&(s=e.right-n),n=i-e.height,i<e.height+a.top+a.bottom?(h=Math.min(h+i/2,e.bottom+Math.max(n,a.bottom)-i/2),h=Math.max(h,e.top-Math.max(n,a.top)+i/2),h-=i/2):h>e.top?h=e.top:h<e.bottom-i&&(h=e.bottom-i)),o.x=isFinite(s)?s:-t.eb.left,o.y=isFinite(h)?h:-t.eb.top,null!==t.positionComputation&&(e=t.positionComputation(t,o),o.x=e.x,o.y=e.y),t.sa.freeze()}function Oa(t,e,n,i){for(void 0===n&&(n=null),void 0===i&&(i=null),Ha(t),t=t.Pa.iteratorBackwards;t.next();){var a=t.value;if(a.visible&&!a.isTemporary&&null!==(a=a.Rb(e,n,i)))return a}return null}function Aa(t,e,n){var i=t.Ze;return t.Ze=t.rj,t.rj=i,i.diagram=t,i.event=e,n?Ra(t,e,i):(i.viewPoint=t.Ze.viewPoint,i.documentPoint=t.Ze.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,void 0===e.buttons||G||(i.buttons=e.buttons),_&&0===e.button&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=ja(e),i.targetObject=null,i}function ja(t){var e=t.target.C;if(!e){var n=t.path;n||"function"!=typeof t.composedPath||(n=t.composedPath()),n&&n[0]&&(e=n[0].C)}return e||null}function Da(t,e,n,i){var a=Ga(t,e,!0,!1,!0,i);return Ra(t,n,a),a.targetDiagram=ja(e),a.targetObject=null,i||a.clone(t.Yh),a}function za(t,e,n,i){var a;return i=Ga(t,e,!1,!1,!1,i),null!==n?((a=g.document.elementFromPoint(n.clientX,n.clientY))&&a.C?(e=n,n=a.C):(e=void 0!==e.targetTouches?e.targetTouches[0]:e,n=t),i.targetDiagram=n,Ra(t,e,i)):null!==t.Ze?(i.documentPoint=t.Ze.documentPoint,i.viewPoint=t.Ze.viewPoint,i.targetDiagram=t.Ze.targetDiagram):null!==t.Yh&&(i.documentPoint=t.Yh.documentPoint,i.viewPoint=t.Yh.viewPoint,i.targetDiagram=t.Yh.targetDiagram),i.targetObject=null,i}function Ga(t,e,n,i,a,r){var o=t.Ze;t.Ze=t.rj,t.rj=o,o.diagram=t,o.clickCount=1;var s=o.delta=0;return e.ctrlKey&&(s+=1),e.altKey&&(s+=2),e.shiftKey&&(s+=4),e.metaKey&&(s+=8),o.modifiers=s,o.button=0,o.buttons=1,o.event=e,o.timestamp=e.timeStamp,t.Lq&&e instanceof g.PointerEvent&&"touch"!==e.pointerType&&(o.button=e.button,void 0===e.buttons||G||(o.buttons=e.buttons),_&&0===e.button&&e.ctrlKey&&(o.button=2)),o.down=n,o.up=i,o.handled=!1,o.bubbles=a,o.isMultiTouch=r,o}function Ea(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function Ra(t,e,n){var i=t.Da,a=t.xa,r=t.wa,o=0,s=0;null!==i&&(i=i.getBoundingClientRect(),o=e.clientX-a/i.width*i.left,s=e.clientY-r/i.height*i.top),n.viewPoint.h(o,s),null!==t.tb?(e=ft.allocAt(o,s),t.tb.Ud(e),n.documentPoint.assign(e),ft.free(e)):n.documentPoint.h(o,s)}function Ia(t,e,n,i){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.vl[0])return;e=t.vl[n]}null!==(n=t.Da)&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.xa/n.width*n.left,e.clientY-t.wa/n.height*n.top))}function _a(t){t.Yb||Ha(t),t.Rg&&mr(t,t.computeBounds())}function Va(t,e){t.animationManager.isAnimating||t.ob||!t.lj||Qa(t)||(e&&Ha(t),Ca(t,!1))}function Ya(t,e){if(!t.Yb&&(t.qd=!1,null!==t.Ia||t.Gp.o())){t.Yb=!0;var n=t.animationManager,i=t.mu;if(!n.isTicking&&0!==i.length){for(var a=i.j,r=a.length,o=0;o<r;o++){var s=a[o];Uo(s,!1),s.s()}i.clear()}0<(i=t.yw).count&&(i.each((function(t){t.Zv()})),i.clear()),a=i=!1,n.isAnimating&&(a=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.rb||xa(t),Va(t,!1),null!==t.Eb&&(t.Eb.visible&&!t.rr&&(ur(t),t.rr=!0),!t.Eb.visible&&t.rr&&(t.rr=!1)),Ha(t),r=!1,t.he&&!t.Cg||(t.he?wr(t,!t.Sk):(t.Aa("Initial Layout"),!1===n.isEnabled&&n.vd(),wr(t,!1)),r=!0),t.Sk=!1,Ha(t),t.wu||n.isAnimating||_a(t),Va(t,!0),r&&(t.he||function(t){var e=t.Pa.j;if(t.hd(e,e.length,t),t.bi!==Wr?t.scale=Fa(t,t.bi):t.bj!==Wr?t.scale=Fa(t,t.bj):(e=t.initialScale,isFinite(e)&&0<e&&(t.scale=e)),(e=t.initialPosition).o())t.position=e;else{(e=ft.alloc()).Vi(t.documentBounds,t.initialDocumentSpot);var n=t.viewportBounds;n=Et.allocAt(0,0,n.width,n.height);var i=ft.alloc();i.Vi(n,t.initialViewportSpot),i.h(e.x-i.x,e.y-i.y),t.position=i,Et.free(n),ft.free(i),ft.free(e),Ka(t),Va(t,!0),Ca(t,!0)}t.aa("InitialLayoutCompleted"),ur(t)}(t),t.aa("LayoutCompleted")),Ha(t),r&&!t.he&&(t.he=!0,t.Za("Initial Layout"),t.skipsUndoManager||t.undoManager.clear(),v((function(){t.isModified=!1}),1)),t.Ku(),na(n),e||t.hc(t.Yc),a&&(t.skipsUndoManager=i),t.Yb=!1}}function Ha(t){if((t.Yb||!t.animationManager.isAnimating)&&0!==t.Dd.count){for(var e=0;23>e;e++){var n=t.Dd.iterator;if(null===n||0===t.Dd.count)break;t.Dd=new nt,t.Zv(n,t.Dd)}t.nodes.each((function(t){t instanceof pu&&0!=(65536&t.S)!=!1&&(t.S=65536^t.S)}))}}function Xa(t,e){for(var n=C(),i=C(),a=e.memberParts;a.next();){var r=a.value;r.isVisible()&&(r instanceof pu?(Xo(r)||qo(r)||Ul(r))&&Xa(t,r):r instanceof wu?r.fromNode===e||r.toNode===e?i.push(r):n.push(r):(r.measure(1/0,1/0),r.arrange()))}for(t=n.length,a=0;a<t;a++)(r=n[a]).measure(1/0,1/0),r.arrange();for(F(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)(n=i[e]).measure(1/0,1/0),n.arrange();F(i)}function Ua(t,e,n,i,a,r,o,s,h,l){if(null!==t.Ia){null===t.Da&&w("No canvas specified"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===h&&(h=!1),void 0===l&&(l=!1),Za(t),t.Yc.Rc(!0),Ja(t),t.nj=!0;var u=t.Ca;t.Ca=a;var d=t.Pa.j,c=d.length;try{var f=new Et(r.x,r.y,i.width/a,i.height/a),g=f.copy();g.Np(n),ur(t,g),Ha(t),t.hd(d,c,t,f);var p=t.Mb;e.setTransform(1,0,0,1,0,0),e.scale(p,p),e.clearRect(0,0,i.width,i.height),null!==s&&""!==s&&(e.fillStyle=s,e.fillRect(0,0,i.width,i.height));var m=ae.alloc();if(m.reset(),m.translate(n.left,n.top),m.scale(a),0===r.x&&0===r.y||m.translate(-r.x,-r.y),e.setTransform(m.m11,m.m12,m.m21,m.m22,m.dx,m.dy),ae.free(m),qa(t,e),null!==o){var v=new nt,y=o.iterator;for(y.reset();y.next();){var S=y.value;!1===l&&"Grid"===S.layer.name||null===S||v.add(S)}var P=function(n){var i=h;if(n.visible&&0!==n.lb&&(void 0===i&&(i=!0),i||!n.isTemporary)){var a=(i=n.Fa.j).length;if(0!==a){1!==n.lb&&(e.globalAlpha=n.lb),(n=n.Lo).length=0;for(var r=t.scale,o=0;o<a;o++){var s=i[o];if(Kl(s)&&v.contains(s)){if(s instanceof wu&&(s.isOrthogonal&&n.push(s),!1===s.Lc))continue;var l=s.actualBounds;l.width*r>t.oe||l.height*r>t.oe?s.hc(e,t):pa(e,s)}}e.globalAlpha=1}}}}else if(!h&&l){var b=t.grid.part,x=b.layer;P=function(n){n===x?b.hc(e,t):n.hc(e,t,h)}}else P=function(n){n.hc(e,t,h)};for(n=0;n<c;n++)P(d[n]);t.nj=!1,t.ai&&po(t.ai,t)&&t.hr()}finally{t.Ca=u,t.Yc.Rc(!0),Ja(t),t.hd(d,c,t),ur(t)}}}function qa(t,e){null!==(t=t.eg)&&(void 0!==t.imageSmoothingEnabled&&e.Fx(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function Wa(t,e){var n,i=t instanceof ah,a=t instanceof va;for(n in e){""===n&&w("Setting properties requires non-empty property names");var r=t,o=n;if(i||a){var s=n.indexOf(".");if(0<s){var h=n.substring(0,s);i?r=t.$a(h):null==(r=t[h])&&(r=t.toolManager[h]),k(r)?o=n.substr(s+1):w("Unable to find object named: "+h+" in "+t.toString()+" when trying to set property: "+n)}}if("_"!==o[0]&&!A(r,o)){if(a&&"ModelChanged"===o){t.Sw(e[o]);continue}if(a&&"Changed"===o){t.rh(e[o]);continue}if(a&&A(t.toolManager,o))r=t.toolManager;else{if(a&&br(t,o)){t.Oj(o,e[o]);continue}if(t instanceof rc&&"Changed"===o){t.rh(e[o]);continue}w('Trying to set undefined property "'+o+'" on object: '+r.toString())}}r[o]=e[n],"_"===o[0]&&r instanceof Mo&&r.Pw(o)}}function Ka(t){!1===t.lj&&(t.lj=!0)}function Ja(t){!1===t.ci&&(t.ci=!0)}function Za(t){!1!==t.On&&(t.On=!1,$a(t,t.xa,t.wa))}function $a(t,e,n){var i=t.Mb;t.Da.resize(e*i,n*i,e,n)&&(t.nc=!0,t.Yc.Rc(!0))}function Qa(t){var e=t.Da;if(null===e)return!0;var n=t.Ia,i=t.xa,a=t.wa,r=t.Mw.copy();if(!r.o())return!0;var o=!1,s=t.$h?t.Gb:0,h=t.Qg?t.Gb:0,l=n.clientWidth||i+s;n=n.clientHeight||a+h,l===i+s&&n===a+h||(t.$h=!1,t.Qg=!1,h=s=0,t.xa=l,t.wa=n,o=t.On=!0),t.lj=!1;var u=t.documentBounds,d=0,c=0,f=0,g=0;l=r.width,n=r.height;var p=t.ti;t.contentAlignment.gb()?(u.width>l&&(d=p.left,c=p.right),u.height>n&&(f=p.top,g=p.bottom)):(d=p.left,c=p.right,f=p.top,g=p.bottom),p=u.width+d+c;var m=u.height+f+g;d=u.x-d;var v=r.x;c=u.right+c;var y=r.right+s;f=u.y-f;var w=r.y;g=u.bottom+g;var S=r.bottom+h,P="1px",b="1px";u=t.scale;var x=!(p<l+s),k=!(m<n+h);if(t.scrollMode===io&&(x||k)&&(x&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(P=1,d+1<v&&(P=Math.max((v-d)*u+t.xa,P)),c>y+1&&(P=Math.max((c-y)*u+t.xa,P)),l+s+1<p&&(P=Math.max((p-l+s)*u+t.xa,P)),P=P.toString()+"px"),k&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(b=1,f+1<w&&(b=Math.max((w-f)*u+t.wa,b)),g>S+1&&(b=Math.max((g-S)*u+t.wa,b)),n+h+1<m&&(b=Math.max((m-n+h)*u+t.wa,b)),b=b.toString()+"px")),x="1px"!==b,(k="1px"!==P)&&x||!k&&!x||(x&&(y-=t.Gb),k&&(S-=t.Gb),p<l+s||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(s=1,d+1<v&&(s=Math.max((v-d)*u+t.xa,s)),c>y+1&&(s=Math.max((c-y)*u+t.xa,s)),l+1<p&&(s=Math.max((p-l)*u+t.xa,s)),P=s.toString()+"px"),k="1px"!==P,s=t.wa,k!==t.Qg&&(s=k?t.wa-t.Gb:t.wa+t.Gb),m<n+h||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(h=1,f+1<w&&(h=Math.max((w-f)*u+s,h)),g>S+1&&(h=Math.max((g-S)*u+s,h)),n+1<m&&(h=Math.max((m-n)*u+s,h)),b=h.toString()+"px"),x="1px"!==b),t.os&&k===t.Qg&&x===t.$h)return i===t.xa&&a===t.wa||t.fd(),!1;if(k!==t.Qg&&(t.wa="1px"===P?t.wa+t.Gb:Math.max(t.wa-t.Gb,1),o=!0),t.Qg=k,t.hp.style.width=P,x!==t.$h&&(t.xa="1px"===b?t.xa+t.Gb:Math.max(t.xa-t.Gb,1),o=!0,t.Sn&&(h=ft.alloc(),x?(e.style.left=t.Gb+"px",t.position=h.h(t.sa.x+t.Gb/t.scale,t.sa.y)):(e.style.left="0px",t.position=h.h(t.sa.x-t.Gb/t.scale,t.sa.y)),ft.free(h))),t.$h=x,t.hp.style.height=b,t.tu=!0,o&&(t.On=!0),h=(e=t.qs).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(l+1<p?h=(t.position.x-d)*u:d+1<v?h=e.scrollWidth-e.clientWidth:c>y+1&&(h=t.position.x*u)),t.Sn)switch(t.ru){case"negative":h=-(e.scrollWidth-h-e.clientWidth);break;case"reverse":h=e.scrollWidth-h-e.clientWidth}return e.scrollLeft=h,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(n+1<m?e.scrollTop=(t.position.y-f)*u:f+1<w?e.scrollTop=e.scrollHeight-e.clientHeight:g>S+1&&(e.scrollTop=t.position.y*u)),l=t.xa,n=t.wa,e.style.width=l+(t.$h?t.Gb:0)+"px",e.style.height=n+(t.Qg?t.Gb:0)+"px",i===l&&a===n&&!t.animationManager.rb||(t.lq(r,t.viewportBounds,u,o),!1)}function tr(t,e,n){var i=e.layer;null!==i&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.B(2),n&&e.Zj(),0<=(n=i.xc(-1,e,!1))&&t.ab(Ln,"parts",i,e,null,n,null),null!==(t=e.layerChanged)&&t(e,i,null))}function er(t,e,n,i,a,r){if(!e.contains(n)&&(void 0===r&&(r=!1),!i||r||n.canMove()||n.canCopy()))if(void 0===a&&(a=ir(t)),n instanceof eu){if(e.add(n,t.pd(a,n,n.location)),n instanceof pu)for(r=n.memberParts;r.next();)er(t,e,r.value,i,a,a.hz);for(r=n.linksConnected;r.next();){var o=r.value;if(!e.contains(o)){var s=o.fromNode,h=o.toNode;null!==s&&e.contains(s)&&null!==h&&e.contains(h)&&er(t,e,o,i,a)}}if(a.dragsTree)for(n=n.av();n.next();)er(t,e,n.value,i,a)}else if(n instanceof wu)for(e.add(n,t.pd(a,n)),n=n.labelNodes;n.next();)er(t,e,n.value,i,a);else n instanceof tu||e.add(n,t.pd(a,n,n.location))}function nr(t,e,n,i,a){if(null!==e&&0!==e.count){var r=ft.alloc(),o=ft.alloc();o.assign(n),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(n=t.xp)||rr(t,e);for(var s=C(),h=C(),l=e.iterator,u=ft.alloc();l.next();){var d=l.key,c=l.value;if(d.bc()){var f=sr(t,d,e);null!==f?s.push(new yo(d,c,f)):a&&!d.canMove()||(f=c.point,r.assign(f),t.computeMove(d,r.add(o),i,u),d.location=u,void 0===c.shifted&&(c.shifted=new ft),c.shifted.assign(u.Xd(f)))}else l.key instanceof wu&&h.push(l.na)}for(ft.free(u),a=s.length,l=0;l<a;l++)d=s[l],r.assign(d.info.point),void 0===d.fv.shifted&&(d.fv.shifted=new ft),d.node.location=r.add(d.fv.shifted);for(a=ft.alloc(),l=ft.alloc(),d=h.length,c=0;c<d;c++){var g=h[c];if((f=g.key)instanceof wu)if(f.suspendsRouting){f.bh=null,u=f.fromNode;var p=f.toNode;if(null!==t.draggedLink&&i.dragsLink)if(p=g.value.point,null===f.dragComputation)e.add(f,t.pd(i,f,o)),bu(f,o.x-p.x,o.y-p.y);else{g=ft.allocAt(0,0),(u=f.i(0))&&u.o()&&g.assign(u);var m=u=ft.alloc().assign(g).add(o);i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&ar(t,f,u,m=ft.alloc(),i),u.assign(f.dragComputation(f,u,m)).Xd(g),e.add(f,t.pd(i,f,u)),bu(f,u.x-p.x,u.y-p.y),ft.free(g),ft.free(u),m!==u&&ft.free(m)}else null!==u&&(a.assign(u.location),null!==(m=e.J(u))&&a.Xd(m.point)),null!==p&&(l.assign(p.location),null!==(m=e.J(p))&&l.Xd(m.point)),null!==u&&null!==p?a.Qa(l)?(u=g.value.point,(p=r).assign(a),p.Xd(u),e.add(f,t.pd(i,f,a)),bu(f,p.x,p.y)):(f.suspendsRouting=!1,f.Ra()):(g=g.value.point,u=null!==u?a:null!==p?l:o,e.add(f,t.pd(i,f,u)),bu(f,u.x-g.x,u.y-g.y))}else null!==f.fromNode&&null!==f.toNode||(u=g.value.point,e.add(f,t.pd(i,f,o)),bu(f,o.x-u.x,o.y-u.y))}ft.free(r),ft.free(o),ft.free(a),ft.free(l),F(s),F(h),n||(Ha(t),or(t,e))}}function ir(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.Mk}function ar(t,e,n,i,a){if(void 0===a&&(a=ir(t)),i.assign(n),null!==e){var r=t.grid;t=(e=a.gridSnapCellSize).width,e=e.height;var o=a.gridSnapOrigin,s=o.x;if(o=o.y,a=a.gridSnapCellSpot,null!==r){var h=r.gridCellSize;isNaN(t)&&(t=h.width),isNaN(e)&&(e=h.height),r=r.gridOrigin,isNaN(s)&&(s=r.x),isNaN(o)&&(o=r.y)}(r=ft.allocAt(0,0)).rk(0,0,t,e,a),qe.Wp(n.x,n.y,s+r.x,o+r.y,t,e,i),ft.free(r)}}function rr(t,e){if(null!==e)for(t.xp=!0,t=e.iterator;t.next();)(e=t.key)instanceof wu&&(e.suspendsRouting=!0)}function or(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof wu&&(n.suspendsRouting=!1,Nu(n)&&n.Ra())}t.xp=!1}}function sr(t,e,n){if(null!==(e=e.containingGroup)){if(null!==(t=sr(t,e,n)))return t;if(null!==(t=n.J(e)))return t}return null}function hr(t,e,n){if(null!==e.diagram&&e.diagram!==t&&w("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&w("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&w("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&w("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.Pa).count;for(var i=0;i<n;i++)t.N(i).name===e&&w("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function lr(t,e,n){var i=t.animationManager;if(t.ob||t.Yb)t.Ca=n,ua(i,e,t.Ca);else if(t.ob=!0,null===t.Da)t.Ca=n;else{var a=t.viewportBounds.copy(),r=t.xa,o=t.wa;a.width=t.xa/e,a.height=t.wa/e;var s=t.zoomPoint.x,h=t.zoomPoint.y,l=t.contentAlignment;isNaN(s)&&(l.sf()?l.rf(me)?s=0:l.rf(ve)&&(s=r-1):s=l.gb()?l.x*(r-1):r/2),isNaN(h)&&(l.sf()?l.rf(pe)?h=0:l.rf(ye)&&(h=o-1):h=l.gb()?l.y*(o-1):o/2),null!==t.scaleComputation&&(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),r=ft.allocAt(t.sa.x+s/e-s/n,t.sa.y+h/e-h/n),t.position=r,ft.free(r),t.Ca=n,t.lq(a,t.viewportBounds,e,!1),t.ob=!1,Ca(t,!1),ua(i,e,t.Ca),t.R(),Ka(t)}}function ur(t,e){void 0===e&&(e=null);var n=t.Eb;if(null!==n&&n.visible){for(var i=jt.alloc(),a=1,r=1,o=n.Y.j,s=o.length,h=0;h<s;h++){var l=o[h],u=l.interval;2>u||(lh(l.figure)?r=r*u/qe.jx(r,u):a=a*u/qe.jx(a,u))}if(o=n.gridCellSize,i.h(r*o.width,a*o.height),null!==e)a=e.width,r=e.height,t=e.x,o=e.y;else{if(e=Et.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.o())return void Et.free(e);a=e.width,r=e.height,t=e.x,o=e.y,Et.free(e)}n.width=a+2*i.width,n.height=r+2*i.height,e=ft.alloc(),qe.Wp(t,o,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),jt.free(i),n.part.location=e,ft.free(e)}}function dr(t){if(0<(t=t.selection).count){for(var e=t.Na(),n=e.length,i=0;i<n;i++)e[i].isSelected=!1;t.ha(),t.clear(),t.freeze()}}function cr(t){var e=t.isModified;t.Nw!==e&&(t.Nw=e,t.aa("Modified"))}function fr(t,e){for(var n=(e=e.Y.j).length,i=0;i<n;i++)gr(t,e[i])}function gr(t,e){if(e instanceof pl){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){var i=e.Lg;if(null!==i&&(i.Zk instanceof Event&&null!==e.Cc&&e.Cc(e,i.Zk),!0===i.Dr&&(null!==e.ff&&e.ff(e,i.su),null!==e.diagram&&e.diagram.mu.add(e))),n=n.getAttribute("src"),null===(i=t.Dj.J(n)))(i=[]).push(e),t.Dj.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function pr(t,e){if(e instanceof pl){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n=n.getAttribute("src");var i=t.Dj.J(n);if(null!==i)for(var a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1),0===i.length&&(t.Dj.remove(n),ml(n));break}}}}function mr(t,e){t.Rg=!1;var n=t.un;n.A(e)||(e=e.I(),t.un=e,Ca(t,!1),t.aa("DocumentBoundsChanged",null,n.copy()),Ka(t))}function vr(t,e){for(var n=t.zi.iterator;n.next();)yr(t,n.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.B())}function yr(t,e,n){if(null!==e){for(var i=e.rl.iterator;i.next();)yr(t,i.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.B())}}function wr(t,e){if(t.Cg&&!t.Pt){var n=t.ea;t.ea=!0;var i=t.undoManager.transactionLevel,a=t.layout;try{0===i&&t.Aa("Layout");var r=t.animationManager;1>=i&&!r.isAnimating&&!r.rb&&(e||r.Ti("Layout")),t.Cg=!1;for(var o=t.zi.iterator;o.next();)Sr(t,o.value,e,i);a.isValidLayout||(!e||a.isRealtime||null===a.isRealtime||0===i?(a.doLayout(t),Ha(t),a.isValidLayout=!0):t.Cg=!0)}finally{0===i&&t.Za("Layout"),t.Cg=!a.isValidLayout,t.ea=n}}}function Sr(t,e,n,i){if(null!==e){for(var a=e.rl.iterator;a.next();)Sr(t,a.value,n,i);null===(a=e.layout)||a.isValidLayout||(!n||a.isRealtime||0===i?(e.nk=!e.location.o(),a.doLayout(e),e.B(32),Xa(t,e),a.isValidLayout=!0):t.Cg=!0)}}function Pr(t){function e(t){var e=t.toLowerCase(),a=new tt;n.add(t,a),n.add(e,a),i.add(t,t),i.add(e,t)}var n=new ct,i=new ct;e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Rt=n,t.Qt=i}function br(t,e){var n=t.Qt.J(e);return null!==n?n:t.Qt.J(e.toLowerCase())}function xr(t,e){var n=t.Rt.J(e);return null!==n||null!==(n=t.Rt.J(e.toLowerCase()))?n:(w("Unknown DiagramEvent name: "+e),null)}function kr(t){if(t.animationManager.isAnimating)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||(!t.xp||e.isComplexRoutingRealtime)}function Lr(t,e,n,i){if(null===t.Nb&&(t.Nb=new ad),t.Nb.$s||t.Nb.group!==n||t.Nb.Jx!==i){if(null===n){(e=t.computeOccupiedArea()).Uc(100,100),t.Nb.initialize(e),e=Et.alloc();for(var a=t.nodes;a.next();){var r=a.value,o=r.layer;null!==o&&o.visible&&!o.isTemporary&&Mr(t,r,i,e)}Et.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Uc(20,20),t.Nb.initialize(e)),e=Et.alloc(),a=n.memberParts;a.next();)(r=a.value)instanceof eu&&Mr(t,r,i,e);Et.free(e)}t.Nb.group=n,t.Nb.Jx=i,t.Nb.$s=!1}else e&&hd(t.Nb);return t.Nb}function Mr(t,e,n,i){if(e!==n)if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){var a=e.getAvoidableRect(i),r=t.Nb.Ul;n=t.Nb.Tl,i=a.x+a.width,e=a.y+a.height;for(var o=a.x;o<i;o+=r){for(var s=a.y;s<e;s+=n)sd(t.Nb,o,s);sd(t.Nb,o,e)}for(a=a.y;a<e;a+=n)sd(t.Nb,i,a);sd(t.Nb,i,e)}else if(e instanceof pu)for(e=e.memberParts;e.next();)(a=e.value)instanceof eu&&Mr(t,a,n,i)}function Nr(t,e){null!==t.Nb&&!t.Nb.$s&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Nb.$s=!0)}function Tr(t,e){var n=t.position,i=t.Tm;if(0>=i.top&&0>=i.left&&0>=i.right&&0>=i.bottom)return n;var a=t.viewportBounds,r=t.scale;a=Et.allocAt(0,0,a.width*r,a.height*r);var o=ft.allocAt(0,0);if(e.x>=a.x&&e.x<a.x+i.left){var s=Math.max(t.scrollHorizontalLineChange,1);s|=0,o.x-=s,e.x<a.x+i.left/2&&(o.x-=s),e.x<a.x+i.left/4&&(o.x-=4*s)}else e.x<=a.x+a.width&&e.x>a.x+a.width-i.right&&(s=Math.max(t.scrollHorizontalLineChange,1),s|=0,o.x+=s,e.x>a.x+a.width-i.right/2&&(o.x+=s),e.x>a.x+a.width-i.right/4&&(o.x+=4*s));return e.y>=a.y&&e.y<a.y+i.top?(t=Math.max(t.scrollVerticalLineChange,1),t|=0,o.y-=t,e.y<a.y+i.top/2&&(o.y-=t),e.y<a.y+i.top/4&&(o.y-=4*t)):e.y<=a.y+a.height&&e.y>a.y+a.height-i.bottom&&(t=Math.max(t.scrollVerticalLineChange,1),t|=0,o.y+=t,e.y>a.y+a.height-i.bottom/2&&(o.y+=t),e.y>a.y+a.height-i.bottom/4&&(o.y+=4*t)),o.Qa(Pt)||(n=new ft(n.x+o.x/r,n.y+o.y/r)),Et.free(a),ft.free(o),n}function Cr(t,e,n){function i(){var t=+new Date;for(r=!0,o.reset();o.next();)if(!o.value[0].nl){r=!1;break}r||t-l>h?e(n,a,s):g.requestAnimationFrame(i)}for(var a=n.callback,r=!0,o=t.Dj.iterator;o.next();)if(!o.value[0].nl){r=!1;break}if("function"!=typeof a||r)return e(n,a,t);var s=t,h=n.callbackTimeout||300,l=+new Date;return g.requestAnimationFrame((function(){i()})),null}function Fr(t,e,n,i){if(t.animationManager.vd(),t.fd(),null===t.Da)return null;"object"!=typeof e&&w("properties argument must be an Object.");var a=e.size||null,r=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(r="NaN");var o=e.maxSize;void 0===e.maxSize&&(o="SVG"===n?new jt(1/0,1/0):new jt(2e3,2e3));var s=e.position||null,h=e.parts||null,l=void 0===e.padding?1:e.padding,u=e.background||null,d=e.omitTemporary;void 0===d&&(d=!0);var c=e.document||document,f=e.elementFinished||null,g=e.showTemporary;void 0===g&&(g=!d),void 0===(e=e.showGrid)&&(e=g),null!==a&&isNaN(a.width)&&isNaN(a.height)&&(a=null),"number"==typeof l?l=new $t(l):l instanceof $t||w("MakeImage padding must be a Margin or a number."),l.left=Math.max(l.left,0),l.right=Math.max(l.right,0),l.top=Math.max(l.top,0),l.bottom=Math.max(l.bottom,0),t.Yc.Rc(!0);var p=(d=new cs(null,c)).context;if(!(a||r||h||s))return d.width=t.xa+Math.ceil(l.left+l.right),d.height=t.wa+Math.ceil(l.top+l.bottom),"SVG"===n?null===i?null:(i.resize(d.width,d.height,d.width,d.height),i.ownerDocument=c,i.Tp=f,Ua(t,i.context,l,new jt(d.width,d.height),t.Ca,t.sa,h,u,g,e),i.context):(t.wn=!1,Ua(t,p,l,new jt(d.width,d.height),t.Ca,t.sa,h,u,g,e),t.wn=!0,d.context);var m=t.dr,v=t.documentBounds.copy();if(v.Pv(t.eb),g)for(var y=t.Pa.j,S=y.length,P=0;P<S;P++){var b=y[P];if(b.visible&&b.isTemporary)for(var x=(b=b.Fa.j).length,k=0;k<x;k++){var L=b[k];L.isInDocumentBounds&&L.isVisible()&&((L=L.actualBounds).o()&&v.Jc(L))}}if(y=new ft(v.x,v.y),null!==h){for(S=!0,(P=h.iterator).reset();P.next();)if((b=P.value)instanceof jl&&((null===(x=b.layer)||x.visible)&&(null===x||g||!x.isTemporary)&&b.isVisible()&&(b=b.actualBounds).o()))if(S){S=!1;var M=b.copy()}else M.Jc(b);S&&(M=new Et(0,0,0,0)),v.width=M.width,v.height=M.height,y.x=M.x,y.y=M.y}return null!==s&&s.o()&&(y=s,r||(r=m)),M=s=0,null!==l&&(s=l.left+l.right,M=l.top+l.bottom),S=P=0,null!==a&&(P=a.width,S=a.height,isFinite(P)&&(P=Math.max(0,P-s)),isFinite(S)&&(S=Math.max(0,S-M))),null!==a&&null!==r?("NaN"===r&&(r=m),a.o()?(a=P,v=S):isNaN(S)?(a=P,v=v.height*r):(a=v.width*r,v=S)):null!==a?a.o()?(r=Math.min(P/v.width,S/v.height),a=P,v=S):isNaN(S)?(r=P/v.width,a=P,v=v.height*r):(r=S/v.height,a=v.width*r,v=S):null!==r?"NaN"===r&&o.o()?(r=Math.min((o.width-s)/v.width,(o.height-M)/v.height))>m?(r=m,a=v.width,v=v.height):(a=o.width,v=o.height):(a=v.width*r,v=v.height*r):(r=m,a=v.width,v=v.height),null!==l?(a+=s,v+=M):l=new $t(0),null!==o&&(m=o.width,o=o.height,isNaN(m)&&(m=2e3),isNaN(o)&&(o=2e3),isFinite(m)&&(a=Math.min(a,m)),isFinite(o)&&(v=Math.min(v,o))),d.width=Math.ceil(a),d.height=Math.ceil(v),"SVG"===n?null===i?null:(i.resize(d.width,d.height,d.width,d.height),i.ownerDocument=c,i.Tp=f,Ua(t,i.context,l,new jt(Math.ceil(a),Math.ceil(v)),r,y,h,u,g,e),i.context):(t.wn=!1,Ua(t,p,l,new jt(Math.ceil(a),Math.ceil(v)),r,y,h,u,g,e),t.wn=!0,d.context)}ta.className="AnimationManager",fa.className="AnimationStates",(n=ga.prototype).hb=function(t){this.C=t},n.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,i=0,a=0,r=0,o=0,s=this.Fa.iterator;s.next();){var h=s.value;h instanceof pu?a++:h instanceof eu?i++:h instanceof wu?r++:h instanceof tu?o++:n++}if(s="",0<n&&(s+=n+" Parts "),0<i&&(s+=i+" Nodes "),0<a&&(s+=a+" Groups "),0<r&&(s+=r+" Links "),0<o&&(s+=o+" Adornments "),1<t)for(t=this.Fa.iterator;t.next();)s+="\n    "+(n=t.value).toString(),null!==(i=n.data)&&rt(i)&&(s+=" #"+rt(i)),n instanceof eu?s+=" "+O(i):n instanceof wu&&(s+=" "+O(n.fromNode)+" "+O(n.toNode));return e+" "+this.Fa.count+": "+s},n.Rb=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Cj)return null;var i=!1;null!==this.diagram&&this.diagram.viewportBounds.da(t)&&(i=!0);for(var a=ft.alloc(),r=this.Fa.j,o=r.length;o--;){var s=r[o];if((!0!==i||!1!==Kl(s))&&s.isVisible()&&(a.assign(t),vt(a,s.rd),null!==(s=s.Rb(a,e,n))&&(null!==e&&(s=e(s)),null!==s&&(null===n||n(s)))))return ft.free(a),s}return ft.free(a),null},n.Hi=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=null),i instanceof tt||i instanceof nt||(i=new nt),!1===this.Cj)return i;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.da(t)&&(a=!0);for(var r=ft.alloc(),o=this.Fa.j,s=o.length;s--;){var h=o[s];if((!0!==a||!1!==Kl(h))&&h.isVisible()){r.assign(t),vt(r,h.rd);var l=h;h.Hi(r,e,n,i)&&(null!==e&&(l=e(l)),null===l||null!==n&&!n(l)||i.add(l))}}return ft.free(r),i},n.pg=function(t,e,n,i,a){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof tt||a instanceof nt||(a=new nt),!1===this.Cj)return a;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.nf(t)&&(r=!0);for(var o=this.Fa.j,s=o.length;s--;){var h=o[s];if((!0!==r||!1!==Kl(h))&&h.isVisible()){var l=h;h.pg(t,e,n,i,a)&&(null!==e&&(l=e(l)),null===l||null!==n&&!n(l)||a.add(l))}}return a},n.qg=function(t,e,n,i,a,r){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof tt||a instanceof nt)&&(r=a),a=!0),r instanceof tt||r instanceof nt||(r=new nt),!1===this.Cj)return r;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.da(t)&&(o=!0);for(var s=ft.alloc(),h=ft.alloc(),l=this.Fa.j,u=l.length;u--;){var d=l[u];if((!0!==o||!1!==Kl(d))&&d.isVisible()){s.assign(t),vt(s,d.rd),h.h(t.x+e,t.y),vt(h,d.rd);var c=d;d.qg(s,h,n,i,a,r)&&(null!==n&&(c=n(c)),null===c||null!==i&&!i(c)||r.add(c))}}return ft.free(s),ft.free(h),r},n.hd=function(t,e){if(this.visible){var n=void 0===e?t.viewportBounds:e,i=this.Fa.j,a=i.length;t=C(),e=C();for(var r=0;r<a;r++){var o=i[r];o.Aw=r,o instanceof wu&&!1===o.Lc||o instanceof tu&&null!==o.adornedPart||(Xt(o.actualBounds,n,10)?(o.hd(!0),t.push(o)):(o.hd(!1),null!==o.adornments&&0<o.adornments.count&&e.push(o)))}for(n=0;n<t.length;n++)for(Dl(i=t[n]),i=i.adornments;i.next();)(a=i.value).measure(1/0,1/0),a.arrange(),a.hd(!0);for(n=0;n<e.length;n++)(i=e[n]).updateAdornments(),Xl(i,!0);F(t),F(e)}},n.hc=function(t,e,n){if(this.visible&&0!==this.lb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var i=(n=this.Fa.j).length;if(0!==i){1!==this.lb&&(t.globalAlpha=this.lb);var a=this.Lo;a.length=0;for(var r=e.scale,o=0;o<i;o++){var s=n[o];if(Kl(s)){if(s instanceof wu&&(s.isOrthogonal&&a.push(s),!1===s.Lc))continue;var h=s.actualBounds;h.width*r>e.oe||h.height*r>e.oe?s.hc(t,e):pa(t,s)}}t.globalAlpha=1}}},n.g=function(t,e,n,i,a){var r=this.diagram;null!==r&&r.ab(xn,t,this,e,n,i,a)},n.Pi=function(t,e,n){var i=this.Fa;if(e.gi=this,t>=i.count)t=i.count;else if(i.N(t)===e)return-1;return i.Ib(t,e),e.aq(n),null!==(i=this.diagram)&&(n?i.R():i.Pi(e)),ma(this,t,e),t},n.xc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.xc(t,e,n);var i=this.Fa;if(0>t||t>=i.length){if(0>(t=i.indexOf(e)))return-1}else if(i.N(t)!==e&&0>(t=i.indexOf(e)))return-1;return e.bq(n),i.mb(t),null!==(i=this.diagram)&&(n?i.R():i.xc(e)),e.gi=null,t},n.clear=function(){for(var t=this.Fa.Na(),e=t.length,n=0;n<e;n++)t[n].hd(!1),this.xc(-1,t[n],!1);this.Lo.length=0},c.Object.defineProperties(ga.prototype,{parts:{get:function(){return this.Fa.iterator}},partsBackwards:{get:function(){return this.Fa.iteratorBackwards}},diagram:{get:function(){return this.C}},name:{get:function(){return this.Ua},set:function(t){var e=this.Ua;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&w("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&w("Layer.name is already present in this diagram: "+t);for(this.Ua=t,this.g("name",e,t),t=this.Fa.iterator;t.next();)t.value.layerName=this.Ua}}},opacity:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&((0>t||1<t)&&P(t,"0 <= value <= 1",ga,"opacity"),this.lb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.R())}},isTemporary:{get:function(){return this.u},set:function(t){var e=this.u;e!==t&&(this.u=t,this.g("isTemporary",e,t))}},visible:{get:function(){return this.K},set:function(t){var e=this.K;if(e!==t){for(this.K=t,this.g("visible",e,t),e=this.Fa.iterator;e.next();)e.value.Lb(t);null!==(t=this.diagram)&&t.R()}}},pickable:{get:function(){return this.Cj},set:function(t){var e=this.Cj;e!==t&&(this.Cj=t,this.g("pickable",e,t))}},isBoundsIncluded:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==this.diagram&&this.diagram.Xa())}},allowCopy:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("allowSelect",e,t))}}}),ga.prototype.findObjectsNear=ga.prototype.qg,ga.prototype.findObjectsIn=ga.prototype.pg,ga.prototype.findObjectsAt=ga.prototype.Hi,ga.prototype.findObjectAt=ga.prototype.Rb,ga.className="Layer",va.prototype.clear=function(){this.model.clear(),Ur=null,qr="",ya(this,!1),this.un=new Et(NaN,NaN,NaN,NaN).freeze(),this.R()},va.prototype.reset=function(){this.ob=!0,this.clear(),this.Ak=new ta,this.Ak.hb(this),this.Pa=new tt,this.Ev(),this.Dv(),this.sa=new ft(NaN,NaN).freeze(),this.Ca=1,this.yr=new ft(NaN,NaN).freeze(),this.zr=NaN,this.Tr=1e-4,this.Rr=100,this.Is=new ft(NaN,NaN).freeze(),this.pr=new Et(NaN,NaN,NaN,NaN).freeze(),this.ti=new $t(0,0,0,0).freeze(),this.Hj=io,this.ss=!1,this.ns=this.js=null,this.bj=Wr,this.dj=Fe,this.bi=Wr,this.Nn=Fe,this.Ar=this.xr=oe,this.Sm=250,this.Tm=new $t(16,16,16,16).freeze(),this.Ir=!0,this.Ds=ro,this.Fs=Zr,this.pn="auto",this.Tf=this.Wr=this.Vf=this.Wf=this.Yf=this.Df=this.Hf=this.Cf=null,this.ur=!1,this.Ef=this.jg=this.Xf=this.Uf=null,this.Of=!1,this.Gh=this.Fh=this.Dq=this.Dc=!0,this.Eq=!1,this.Jq=this.Gq=this.wr=this.vr=this.Kq=this.Iq=this.Oh=this.Nh=this.Mh=this.Lh=this.Jh=this.Kh=this.Ih=this.Hq=this.Qh=this.Hh=this.Ph=this.Fq=!0,this.rs=this.ps=16,this.eb=new $t(5).freeze(),this.Sr=999999999,this.gc=null,this.Jr=!1,this.Mb=1,this.jh=null,this.vo=0,this.wo=[0,0,0,0,0],this.xo=0,Sa(this),this.Eb=null,this.partManager=new Vd,this.toolManager=new Fn,this.toolManager.initializeStandardTools(),this.ds=this.cs=this.gr=null,this.xp=!1,this.Mk.reset(),this.pu=new ct,this.pu.clear(),this.currentTool=this.defaultTool=this.toolManager,this.commandHandler=wa(),this.eh=!0,ka(this),this.layout=new bd,this.eh=!1,this.model=xc(),this.model.undoManager=new Nn,this.he=!1,this.Xk=!0,this.ob=this.qd=!1,this.R(),this.pe=this.Bf=null,Pr(this),this.Xq=""},va.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=g.document.body);var e=y("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.ru=n},va.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=g.document.body);var e=0;if(Xr){var n=Hr;e=Yr,null===n&&((n=Hr=y("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=Yr=y("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var i=n.offsetWidth;e.style.overflow="scroll",i===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!==(e=i-n)||V||(e=11)}this.Gb=e},va.prototype.fb=function(t){t.classType===va&&(this.autoScale=t)},va.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Pa.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},va.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,i)},va.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,i)},va.prototype.computePixelRatio=function(){return null!==this.jh?this.jh:g.devicePixelRatio||1},va.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},va.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},va.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},va.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},va.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},va.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},va.prototype.doFocus=function(){this.focus()},va.prototype.focus=function(){if(this.Da)if(this.scrollsPageOnFocus)this.Da.focus();else{var t=g.scrollX||g.pageXOffset,e=g.scrollY||g.pageYOffset;this.Da.focus(),g.scrollTo(t,e)}},va.prototype.py=function(){this.C.aa("GainedFocus")},va.prototype.oy=function(){this.C.aa("LostFocus")},va.prototype.$w=function(t){if(null!==this.Da){this.os=!0;var e=this.documentBounds,n=this.viewportBounds,i=this.ti,a=e.x-i.left,r=e.y-i.top,o=e.width+i.left+i.right,s=e.height+i.top+i.bottom,h=e.right+i.right;i=e.bottom+i.bottom;var l=n.x;e=n.y;var u=n.width,d=n.height,c=n.right,f=n.bottom;n=this.scale;var g=t.scrollLeft;if(this.Sn)switch(this.ru){case"negative":g=g+t.scrollWidth-t.clientWidth;break;case"reverse":g=t.scrollWidth-g-t.clientWidth}var p=g;u<o||d<s?(g=ft.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.uu!==p&&(g.x=p/n+a,this.uu=p),this.allowVerticalScroll&&this.vu!==t.scrollTop&&(g.y=t.scrollTop/n+r,this.vu=t.scrollTop),this.position=g,ft.free(g),this.lj=this.os=!1):(g=ft.alloc(),t.Vx&&this.allowHorizontalScroll&&(a<l&&(this.position=g.h(p+a,this.position.y)),h>c&&(this.position=g.h(-(this.qs.scrollWidth-this.xa)+p-this.xa/n+h,this.position.y))),t.Wx&&this.allowVerticalScroll&&(r<e&&(this.position=g.h(this.position.x,t.scrollTop+r)),i>f&&(this.position=g.h(this.position.x,-(this.qs.scrollHeight-this.wa)+t.scrollTop-this.wa/n+i))),ft.free(g),Ja(this),this.lj=this.os=!1,e=this.documentBounds,n=this.viewportBounds,h=e.right,c=n.right,i=e.bottom,f=n.bottom,a=e.x,l=n.x,r=e.y,e=n.y,u>=o&&a>=l&&h<=c&&(this.hp.style.width="1px"),d>=s&&r>=e&&i<=f&&(this.hp.style.height="1px"))}},va.prototype.computeBounds=function(){return 0<this.Dd.count&&Ha(this),Ta(this)},va.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(L(t))for(var i=0;i<t.length;i++){var a=t[i];!e&&a instanceof wu||(a.$b(),null===n?n=a.actualBounds.copy():n.Jc(a.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof wu||(i.$b(),null===n?n=i.actualBounds.copy():n.Jc(i.actualBounds));return null===n?new Et(NaN,NaN,0,0):n},va.prototype.zoomToFit=function(){var t=this.Hj;this.Hj=io,this.scale=Fa(this,Kr),t!==io&&(Ca(this,!1),Ba(this,this.documentBounds,this.xa/this.Ca,this.wa/this.Ca,this.dj,!1)),this.Hj=t},(n=va.prototype).$z=function(t,e){void 0===e&&(e=Kr);var n=t.width,i=t.height;if(!(0===n||0===i||isNaN(n)&&isNaN(i))){var a=1;if(e===Kr||e===Jr)if(isNaN(n))a=this.viewportBounds.height*this.scale/i;else if(isNaN(i))a=this.viewportBounds.width*this.scale/n;else{a=this.xa;var r=this.wa;a=e===Jr?r/i>a/n?(r-(this.Qg?this.Gb:0))/i:(a-(this.$h?this.Gb:0))/n:Math.min(r/i,a/n)}this.scale=a,this.position=new ft(t.x,t.y)}},n.jy=function(t,e){this.Rg&&mr(this,this.computeBounds());var n=this.documentBounds,i=this.viewportBounds;this.position=new ft(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},n.$l=function(t,e){if(void 0===e&&(e=!0),e){if((t=Oa(this,t,(function(t){return t.part}),(function(t){return t.canSelect()})))instanceof jl)return t}else if((t=Oa(this,t,(function(t){return t.part})))instanceof jl)return t;return null},n.Rb=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),Ha(this);for(var i=this.Pa.iteratorBackwards;i.next();){var a=i.value;if(a.visible&&null!==(a=a.Rb(t,e,n)))return a}return null},n.My=function(t,e,n){return void 0===e&&(e=!0),function(t,e,n,i,a){for(void 0===n&&(n=null),void 0===i&&(i=null),a instanceof tt||a instanceof nt||(a=new nt),Ha(t),t=t.Pa.iteratorBackwards;t.next();){var r=t.value;r.visible&&!r.isTemporary&&r.Hi(e,n,i,a)}return a}(this,t,(function(t){return t.part}),e?function(t){return t instanceof jl&&t.canSelect()}:null,n)},n.Hi=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),i instanceof tt||i instanceof nt||(i=new nt),Ha(this);for(var a=this.Pa.iteratorBackwards;a.next();){var r=a.value;r.visible&&r.Hi(t,e,n,i)}return i},n.ix=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),function(t,e,n,i,a){var r=null;for(void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof tt||a instanceof nt||(a=new nt),Ha(t),t=t.Pa.iteratorBackwards;t.next();){var o=t.value;o.visible&&!o.isTemporary&&o.pg(e,r,n,i,a)}return a}(this,t,(function(t){return t instanceof jl&&(!n||t.canSelect())}),e,i)},n.pg=function(t,e,n,i,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),a instanceof tt||a instanceof nt||(a=new nt),Ha(this);for(var r=this.Pa.iteratorBackwards;r.next();){var o=r.value;o.visible&&o.pg(t,e,n,i,a)}return a},n.Ny=function(t,e,n,i,a){return void 0===n&&(n=!0),void 0===i&&(i=!0),function(t,e,n,i,a,r){var o=null;void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof tt||a instanceof nt)&&(r=a),a=!0);for(r instanceof tt||r instanceof nt||(r=new nt),Ha(t),t=t.Pa.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.qg(e,n,o,i,a,r)}return r}(this,t,e,(function(t){return t instanceof jl&&(!i||t.canSelect())}),n,a)},n.qg=function(t,e,n,i,a,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof tt||a instanceof nt)&&(r=a),a=!0),r instanceof tt||r instanceof nt||(r=new nt),Ha(this);for(var o=this.Pa.iteratorBackwards;o.next();){var s=o.value;s.visible&&s.qg(t,e,n,i,a,r)}return r},va.prototype.acceptEvent=function(t){return Aa(this,t,t instanceof MouseEvent)},va.prototype.sz=function(t){var e=this.C;if(!this.C.isEnabled)return!1;var n=Aa(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),Ea(n,t)},va.prototype.uz=function(t){var e=this.C;if(!e.isEnabled)return!1;var n=Aa(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),Ea(n,t)},va.prototype.Cy=function(t){var e=this.C;if(!e.isEnabled)return!1;var n=Aa(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),Ea(n,t)},va.prototype.Dy=function(t){var e=this.C;if(!e.isEnabled)return!1;var n=Aa(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),Ea(n,t)},va.prototype.getMouse=function(t){var e=this.Da;if(null===e)return new ft(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.xa/n.width*n.left,t=t.clientY-this.wa/n.height*n.top,null!==this.tb?vt(new ft(e,t),this.tb):new ft(e,t)},(n=va.prototype).Xa=function(){this.Rg||(this.Rg=!0,this.cc(!0))},n.uf=function(){this.ob||this.Yb||(this.R(),Ka(this),Ja(this),this.Xa(),this.fd())},n.rz=function(){return this.qd},n.xy=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.vd(),e.isEnabled=!1,Ya(this),this.he=!1,e.isEnabled=n,null!==t&&v(t,1)},n.cc=function(t){if(void 0===t&&(t=!1),!0!==this.qd&&!(this.ob||!1===t&&this.Yb)){this.qd=!0;var e=this;g.requestAnimationFrame((function(){e.qd&&e.fd()}))}},n.fd=function(){this.Xk&&!this.qd||(this.Xk&&(this.Xk=!1),Ya(this))},n.Zv=function(t,e){for(t.reset();t.next();){var n=t.value;!n.bc()||n instanceof pu||(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof pu&&n.isVisible()&&Xa(this,n);for(t.reset();t.next();)(n=t.value)instanceof wu&&n.isVisible()&&(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof tu&&n.isVisible()&&(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},n.hd=function(t,e,n,i){if(this.ci||this.animationManager.isAnimating)for(var a=0;a<e;a++)t[a].hd(n,i)},n.hc=function(t,e){if(void 0===e&&(e=null),null!==this.Ia){null===this.Da&&w("No canvas specified");var n=this.animationManager;if(!n.rb){var i=new Date;if(Za(this),"0"!==this.Ia.style.opacity){var a=t!==this.Yc,r=this.Pa.j,o=r.length,s=this;if(this.hd(r,o,s),a)t.Rc(!0),Ja(this);else if(!this.nc&&null===e&&!n.isAnimating)return;o=this.sa;var h=this.Ca,l=Math.round(o.x*h)/h,u=Math.round(o.y*h)/h;for((n=this.tb).reset(),1!==h&&n.scale(h),0===o.x&&0===o.y||n.translate(-l,-u),h=this.Mb,t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.clearRect(0,0,this.xa,this.wa),t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),l=null!==e?function(n){var i=e;if(n.visible&&0!==n.lb){var a=n.Fa.j,r=a.length;if(0!==r){1!==n.lb&&(t.globalAlpha=n.lb),(n=n.Lo).length=0;for(var o=s.scale,h=0;h<r;h++){var l=a[h];if(Kl(l)&&!i.contains(l)){if(l instanceof wu&&(l.isOrthogonal&&n.push(l),!1===l.Lc))continue;var u=l.actualBounds;u.width*o>s.oe||u.height*o>s.oe?l.hc(t,s):pa(t,l)}}t.globalAlpha=1}}}:function(e){e.hc(t,s)},qa(this,t),o=r.length,u=0;u<o;u++)t.setTransform(1,0,0,1,0,0),t.scale(h,h),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),l(r[u]);if(this.ai&&po(this.ai,this)&&this.hr(),a?(this.Yc.Rc(!0),Ja(this)):this.nc=this.ci=!1,a=+new Date-+i,null===this.jh){for((i=this.wo)[this.xo]=a,this.xo=(this.xo+1)%i.length,r=a=0;r<this.wo.length;r++)a+=this.wo[r];this.vo=a/i.length}}}}},n.Ee=function(t){return this.eg[t]},n.Gx=function(t,e){"minDrawingLength"===t&&(this.oe=e),this.eg[t]=e,this.uf()},n.Ev=function(){this.eg=new W,this.eg.drawShadows=!0,this.eg.textGreeking=!0,this.eg.viewportOptimizations=!(V||E||R),this.eg.temporaryPixelRatio=!0,this.eg.pictureRatioOptimization=!0,this.oe=this.eg.minDrawingLength=1},n.bm=function(t){return this.dl[t]},n.Qz=function(t,e){this.dl[t]=e},n.Dv=function(){this.dl=new W,this.dl.extraTouchArea=10,this.dl.extraTouchThreshold=10,this.dl.hasGestureZoom=!0},n.Nv=function(t){Wa(this,t)},n.Ku=function(){if(0===this.undoManager.transactionLevel&&0!==this.Xh.count){for(;0<this.Xh.count;){var t=this.Xh;for(this.Xh=new ct,t=t.iterator;t.next();){var e=t.key;e.cq(t.value),e.ac()}}this.R()}},n.R=function(t){if(void 0===t&&(t=null),null===t)this.nc=!0,this.cc();else{var e=this.viewportBounds;null!==t&&t.o()&&e.Ic(t)&&(this.nc=!0,this.cc())}this.aa("InvalidateDraw")},n.mx=function(t,e){if(!0!==this.nc){this.nc=!0;var n=!0===this.Ee("temporaryPixelRatio");if(!0===this.Ee("viewportOptimizations")&&this.scrollMode!==ao&&this.ti.Fi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,a=Math.max(t.x,e.x),r=Math.max(t.y,e.y);if(i=Et.allocAt(a,r,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-a)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-r)*i),!this.As&&0<i.width&&0<i.height){if(!(this.Yb||(this.qd=!1,null===this.Ia||(this.Yb=!0,this.Ku(),this.documentBounds.o()||mr(this,this.computeBounds()),a=this.Da,null===a||a instanceof rs)))){var o=this.Mb;r=this.xa*o;var s=this.wa*o,h=this.scale*o,l=Math.round(Math.round(e.x*h)-Math.round(t.x*h));e=Math.round(Math.round(e.y*h)-Math.round(t.y*h)),h=this.Tt,t=this.tw,h.width!==r&&(h.width=r),h.height!==s&&(h.height=s),t.clearRect(0,0,r,s),h=190*o;var u=70*o,d=Math.max(l,0),c=Math.max(e,0),f=Math.floor(r-d),g=Math.floor(s-c);t.drawImage(a.Ga,d,c,f,g,0,0,f,g),po(this.ai,this)&&t.clearRect(0,0,h,u),a=C(),t=C(),g=Math.abs(l),f=Math.abs(e);var p=0===d?0:r-g;d=ft.allocAt(p,0),g=ft.allocAt(g+p,s),t.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y)));var m=this.tb;if(m.reset(),m.scale(o,o),1!==this.Ca&&m.scale(this.Ca),(0!==(o=this.sa).x||0!==o.y)&&isFinite(o.x)&&isFinite(o.y)&&m.translate(-o.x,-o.y),vt(d,m),vt(g,m),a.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y))),p=0===c?0:s-f,d.h(0,p),g.h(r,f+p),t.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y))),vt(d,m),vt(g,m),a.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y))),po(this.ai,this)&&(r=0<l?0:-l,s=0<e?0:-e,d.h(r,s),g.h(h+r,u+s),t.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y))),vt(d,m),vt(g,m),a.push(new Et(Math.min(d.x,g.x),Math.min(d.y,g.y),Math.abs(d.x-g.x),Math.abs(d.y-g.y)))),ft.free(d),ft.free(g),Va(this,!1),null===this.Ia&&w("No div specified"),null===this.Da&&w("No canvas specified"),!this.animationManager.rb&&(r=this.Yc,this.nc)){for(Za(this),s=this.Mb,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.xa*s,this.wa*s),r.drawImage(this.Tt.Ga,0<l?0:Math.round(-l),0<e?0:Math.round(-e)),l=this.sa,o=this.Ca,h=Math.round(l.x*o)/o,u=Math.round(l.y*o)/o,(e=this.tb).reset(),1!==o&&e.scale(o),0===l.x&&0===l.y||e.translate(-h,-u),r.save(),r.beginPath(),l=t.length,o=0;o<l;o++)0!==(h=t[o]).width&&0!==h.height&&r.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(r.clip(),r.setTransform(1,0,0,1,0,0),r.scale(s,s),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),l=(e=this.Pa.j).length,this.hd(e,l,this),qa(this,r),s=0;s<l;s++)if(o=a,(c=e[s]).visible&&0!==c.lb){for(1!==c.lb&&(r.globalAlpha=c.lb),(h=c.Lo).length=0,u=this.scale,d=(c=c.Fa.j).length,f=o.length,g=0;g<d;g++)if(Kl(m=c[g])){if(m instanceof wu&&(m.isOrthogonal&&h.push(m),!1===m.Lc))continue;p=El(m,m.actualBounds);t:{for(var v=2/u,y=4/u,S=0;S<f;S++){var P=o[S];if(0!==P.width&&0!==P.height&&p.iv(P.x-v,P.y-v,P.width+y,P.height+y)){v=!0;break t}}v=!1}v&&(p.width*u>this.oe||p.height*u>this.oe?m.hc(r,this):pa(r,m))}r.globalAlpha=1}r.restore(),r.Rc(!0),this.ai&&po(this.ai,this)&&this.hr(),this.nc=this.ci=!1,this.nt()}F(a),F(t),this.Yb=!1}}else this.fd();Et.free(i),n&&(Pa(this),this.fd(),ba(this,!0))}else n?(Pa(this),this.fd(),ba(this,!0)):this.fd()}},n.add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&w("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Zl(t.layerName))&&(e=this.Zl("")),null===e&&w('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.Pi(99999999,t,t.diagram===this);0<=n&&this.ab(kn,"parts",e,null,t,null,n),e.isTemporary||this.Xa(),t.B(1),null!==(n=t.layerChanged)&&n(t,null,e)}},n.Pi=function(t){this.partManager.Pi(t);var e=this;dh(t,(function(t){fr(e,t)})),(t instanceof tu||t instanceof pu&&null!==t.placeholder)&&t.s(),null!==t.data&&dh(t,(function(t){qd(e.partManager,t)})),!0!==qo(t)&&!0!==Ul(t)||this.Dd.add(t),Yl(t,!0,this),Zl(t)?(t.actualBounds.o()&&this.R(El(t,t.actualBounds)),this.Xa()):t.isVisible()&&t.actualBounds.o()&&this.R(El(t,t.actualBounds)),this.cc()},n.xc=function(t){t.Tj(),this.partManager.xc(t);var e=this;null!==t.data&&dh(t,(function(t){Wd(e.partManager,t,e)})),this.Dd.remove(t),Zl(t)?(t.actualBounds.o()&&this.R(El(t,t.actualBounds)),this.Xa()):t.isVisible()&&t.actualBounds.o()&&this.R(El(t,t.actualBounds)),this.cc()},n.remove=function(t){tr(this,t,!0)},n.qt=function(t,e){if(L(t))for(var n=t.length,i=0;i<n;i++){var a=t[i];e&&!a.canDelete()||this.remove(a)}else for((n=new nt).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},n.Yj=function(t,e,n){return this.partManager.Yj(t,e,n)},va.prototype.moveParts=function(t,e,n,i){if(void 0===i&&(i=ir(this)),null!==this.toolManager){var a=new ct;if(null!==t)if(L(t))for(var r=0;r<t.length;r++)er(this,a,t[r],n,i);else for(t=t.iterator;t.next();)er(this,a,t.value,n,i);else{for(t=this.parts;t.next();)er(this,a,t.value,n,i);for(t=this.nodes;t.next();)er(this,a,t.value,n,i);for(t=this.links;t.next();)er(this,a,t.value,n,i)}nr(this,a,e,i,n)}},va.prototype.computeMove=function(t,e,n,i){if(void 0===i&&(i=new ft),i.assign(e),null===t)return i;var a=e,r=n.isGridSnapEnabled;r&&(n.isGridSnapRealtime||this.lastInput.up)&&ar(this,t,e,a=ft.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,a):a;var o=t.minLocation,s=o.x;isNaN(s)&&(s=r?Math.round(t.location.x):t.location.x),o=o.y,isNaN(o)&&(o=r?Math.round(t.location.y):t.location.y);var h=t.maxLocation,l=h.x;return isNaN(l)&&(l=r?Math.round(t.location.x):t.location.x),h=h.y,isNaN(h)&&(h=r?Math.round(t.location.y):t.location.y),i.h(Math.max(s,Math.min(n.x,l)),Math.max(o,Math.min(n.y,h))),a!==e&&ft.free(a),i},(n=va.prototype).pd=function(t,e,n){if(void 0===n)return new vo(Pt);var i=t.isGridSnapEnabled;return t.iz||null===e.containingGroup||(i=!1),new vo(i?new ft(Math.round(n.x),Math.round(n.y)):n.copy())},n.Ql=function(t){hr(this,t,null),t.hb(this);var e=this.Pa,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.N(n).isTemporary;)n--;e.Ib(n+1,t),null!==this.Zb&&this.ab(kn,"layers",this,null,t,null,n+1),this.R(),this.Xa()},n.Qw=function(t,e){hr(this,t,e),t.hb(this);var n=this.Pa,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.Zb&&this.ab(Ln,"layers",this,t,null,i,null));var a,r=n.count;for(a=0;a<r;a++)if(n.N(a)===e){n.Ib(a,t);break}null!==this.Zb&&this.ab(kn,"layers",this,null,t,null,a),this.R(),0>i&&this.Xa()},n.by=function(t,e){hr(this,t,e),t.hb(this);var n=this.Pa,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.Zb&&this.ab(Ln,"layers",this,t,null,i,null));var a,r=n.count;for(a=0;a<r;a++)if(n.N(a)===e){n.Ib(a+1,t);break}null!==this.Zb&&this.ab(kn,"layers",this,null,t,null,a+1),this.R(),0>i&&this.Xa()},n.Kz=function(t){if(t.diagram!==this&&w("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Pa,n=e.indexOf(t);if(e.remove(t)){for(e=t.Fa.copy().iterator;e.next();){var i=e.value,a=i.layerName;a!==t.name?i.layerName=a:i.layerName=""}null!==this.Zb&&this.ab(Ln,"layers",this,t,null,n,null),this.R(),this.Xa()}}},n.Zl=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},n.Sw=function(t){null===this.pe&&(this.pe=new tt),this.pe.add(t),this.model.rh(t)},n.Mz=function(t){null!==this.pe&&(this.pe.remove(t),0===this.pe.count&&(this.pe=null)),this.model.qk(t)},n.rh=function(t){null===this.Bf&&(this.Bf=new tt),this.Bf.add(t)},n.qk=function(t){null!==this.Bf&&(this.Bf.remove(t),0===this.Bf.count&&(this.Bf=null))},n.Ks=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.gv(t),t.change!==bn&&(this.isModified=!0),null!==this.Bf)for(var e=this.Bf,n=e.length,i=0;i<n;i++)e.N(i)(t)},n.ab=function(t,e,n,i,a,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var s=new Pn;s.diagram=this,s.change=t,s.propertyName=e,s.object=n,s.oldValue=i,s.oldParam=r,s.newValue=a,s.newParam=o,this.Ks(s)},n.g=function(t,e,n,i,a){this.ab(xn,t,this,e,n,i,a)},n.Sj=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i=t.change;if(i===xn){var a=t.object;if(Mc(a,t.propertyName,t.J(e)),a instanceof Mo){var r=a.part;null!==r&&r.Jb()}this.isModified=!0}else if(i===kn){var o=t.object,s=t.newParam,h=t.newValue;if(o instanceof ah){if("number"==typeof s&&h instanceof Mo){e?o.xc(s):o.Ib(s,h);var l=o.part;null!==l&&l.Jb()}else if("number"==typeof s&&h instanceof Nh)if(e)h.isRow?o.Bv(s):o.zv(s);else{var u=h.isRow?o.getRowDefinition(h.index):o.getColumnDefinition(h.index);u.Vl(h)}}else if(o instanceof ga){var d=!0===t.oldParam;"number"==typeof s&&h instanceof jl&&(e?(h.isSelected=!1,h.isHighlighted=!1,h.Jb(),o.xc(d?s:-1,h,d)):o.Pi(s,h,d))}else o instanceof va?"number"==typeof s&&h instanceof ga&&(e?this.Pa.mb(s):(h.hb(this),this.Pa.Ib(s,h))):w("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(i===Ln){var c=t.object,f=t.oldParam,g=t.oldValue;if(c instanceof ah)"number"==typeof f&&g instanceof Mo?e?c.Ib(f,g):c.xc(f):"number"==typeof f&&g instanceof Nh&&(e?(u=g.isRow?c.getRowDefinition(g.index):c.getColumnDefinition(g.index)).Vl(g):g.isRow?c.Bv(f):c.zv(f));else if(c instanceof ga){var p=!0===t.newParam;"number"==typeof f&&g instanceof jl&&(e?0>c.Fa.indexOf(g)&&c.Pi(f,g,p):(g.isSelected=!1,g.isHighlighted=!1,g.Jb(),c.xc(p?f:-1,g,p)))}else c instanceof va?"number"==typeof f&&g instanceof ga&&(e?(g.hb(this),this.Pa.Ib(f,g)):this.Pa.mb(f)):w("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else i!==bn&&w("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},n.Aa=function(t){return this.undoManager.Aa(t)},n.Za=function(t){return this.undoManager.Za(t)},n.wf=function(){return this.undoManager.wf()},va.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Aa(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Za(e):this.undoManager.wf(),this.skipsUndoManager=n}},va.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},(n=va.prototype).wq=function(){this.partManager.wq()},n.lq=function(t,e,n,i){if(!t.A(e)){void 0===i&&(i=!1),i||Ka(this),Ja(this);var a=this.layout;null===a||!a.isViewportSized||this.autoScale!==Wr||i||t.width===e.width&&t.height===e.height||a.B(),a=this.currentTool,!0===this.Re&&a instanceof Fn&&(this.lastInput.documentPoint=this.xt(this.lastInput.viewPoint),Bn(a,this)),this.ob||this.mx(t,e),ur(this),this.ye.scale=n,this.ye.position.x=t.x,this.ye.position.y=t.y,this.ye.bounds.assign(t),this.ye.ox=i,this.aa("ViewportBoundsChanged",this.ye,t),this.isVirtualized&&this.links.each((function(t){t.isAvoiding&&t.actualBounds.Ic(e)&&t.Ra()}))}},n.Qp=function(){var t=0<this.selection.count;t&&this.aa("ChangingSelection",this.selection),dr(this),t&&this.aa("ChangedSelection",this.selection)},n.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.aa("ChangingSelection",this.selection),dr(this),t.isSelected=!0,this.aa("ChangedSelection",this.selection))},n.Hv=function(t){if(this.aa("ChangingSelection",this.selection),dr(this),L(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof jl||w("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof jl||w("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.aa("ChangedSelection",this.selection)},n.Lu=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.Na(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ha(),t.clear(),t.freeze()}},n.kz=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.Lu(),t.isHighlighted=!0)},n.lz=function(t){t=(new nt).addAll(t);for(var e=this.highlighteds.copy().oq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof jl||w("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},n.scroll=function(t,e,n){void 0===n&&(n=1);var i="up"===e||"down"===e,a=0;if("pixel"===t)a=n;else if("line"===t)a=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=i?this.viewportBounds.height:this.viewportBounds.width,0!==(t*=this.scale)&&(a=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return a=this.documentBounds,n=this.viewportBounds,i=ft.alloc(),"up"===e?this.position=i.h(n.x,a.y):"left"===e?this.position=i.h(a.x,n.y):"down"===e?this.position=i.h(n.x,a.bottom-n.height):"right"===e&&(this.position=i.h(a.right-n.width,n.y)),void ft.free(i);w("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}a/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-a:"down"===e?n.y=this.position.y+a:"left"===e?n.x=this.position.x-a:"right"===e?n.x=this.position.x+a:w("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},n.Gv=function(t){var e=this.viewportBounds;e.nf(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},n.Ju=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},n.wt=function(t){var e=this.tb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var n=this.sa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.tb)},n.Xz=function(t){var e=this.tb,n=t.x,i=t.y,a=n+t.width,r=i+t.height,o=e.m11,s=e.m12,h=e.m21,l=e.m22,u=e.dx,d=e.dy,c=n*o+i*h+u;e=n*s+i*l+d;var f=a*o+i*h+u;return t=a*s+i*l+d,i=n*o+r*h+u,n=n*s+r*l+d,o=a*o+r*h+u,a=a*s+r*l+d,r=Math.min(c,f),c=Math.max(c,f),f=Math.min(e,t),e=Math.max(e,t),r=Math.min(r,i),c=Math.max(c,i),f=Math.min(f,n),e=Math.max(e,n),r=Math.min(r,o),c=Math.max(c,o),new Et(r,f=Math.min(f,a),c-r,(e=Math.max(e,a))-f)},n.xt=function(t){var e=this.tb;e.reset(),1!==this.Ca&&e.scale(this.Ca);var n=this.sa;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),vt(t.copy(),this.tb)},va.prototype.doModelChanged=function(t){if(t.model===this.model){var e=t.change,n=t.propertyName;if(e===bn&&"S"===n[0])if("StartingFirstTransaction"===n){var i=this;(t=this.toolManager).mouseDownTools.each((function(t){t.hb(i)})),t.mouseMoveTools.each((function(t){t.hb(i)})),t.mouseUpTools.each((function(t){t.hb(i)})),this.Yb||this.he||(this.Sk=!0,this.Xk&&(this.qd=!0))}else"StartingUndo"===n||"StartingRedo"===n?((t=this.animationManager).isAnimating&&!this.skipsUndoManager&&t.vd(),this.aa("ChangingSelection",this.selection)):"StartedTransaction"===n&&((t=this.animationManager).isAnimating&&!this.skipsUndoManager&&t.vd());else if(this.ea){this.ea=!1;try{if(""===t.modelChange&&e===bn){"FinishedUndo"!==n&&"FinishedRedo"!==n||(this.aa("ChangedSelection",this.selection),Ha(this));var a=this.animationManager;"RolledBackTransaction"===n&&a.vd(),this.Sk=!0,this.fd(),0===this.undoManager.transactionLevel&&na(a),"CommittedTransaction"===n&&this.undoManager.du&&(this.ge=Math.min(this.ge,this.undoManager.historyIndex-1));var r=t.isTransactionFinished;if(r&&(cr(this),this.ft.clear()),!this.ku&&r){this.ku=!0;var o=this;v((function(){o.currentTool.standardMouseOver(),o.ku=!1}),10)}}}finally{this.ea=!0}}}},va.prototype.ud=function(){this.partManager.ud()},va.prototype.Lp=function(t,e){this.Ak.Lp(t,e)},va.prototype.Mp=function(t,e){this.Ak.Mp(t,e)},va.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},(n=va.prototype).Hb=function(t){return this.partManager.Hb(t)},n.vc=function(t){return this.partManager.vc(t)},n.Gi=function(t){return this.partManager.Gi(t)},n.uc=function(t){return this.partManager.uc(t)},n.Rs=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Rs.apply(this.partManager,e instanceof Array?e:r(a(e)))},n.Qs=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Qs.apply(this.partManager,e instanceof Array?e:r(a(e)))},n.Ry=function(){for(var t=new nt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},n.Qy=function(){return this.zi.iterator},n.wz=function(t){Ha(this),t&&vr(this,!0),this.Sk=!0,Ya(this)},n.Xy=function(){for(var t=new tt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.Ji()&&t.add(n)}return t.iterator},n.Oj=function(t,e){null!==(t=xr(this,t))&&t.add(e)},n.mm=function(t,e){null!==(t=xr(this,t))&&t.remove(e)},n.aa=function(t,e,n){var i=xr(this,t),a=new Sn;if(a.diagram=this,null!==(t=br(this,t))&&(a.name=t),void 0!==e&&(a.subject=e),void 0!==n&&(a.parameter=n),1===(e=i.length))i.N(0)(a);else if(0!==e)for(i=i.Na(),n=0;n<e;n++)(0,i[n])(a)},n.fk=function(t,e){return void 0===e&&(e=null),Lr(this,!1,null,e).fk(t.x,t.y,t.width,t.height)},va.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.Rg?Ta(this):this.documentBounds.copy()},(n=va.prototype).Ns=function(t){this.Mq.assign(t),Tr(this,this.Mq).Qa(this.position)?this.xf():function t(e){-1===e.Ck&&(e.Ck=v((function(){if(-1!==e.Ck&&(e.xf(),null!==e.lastInput.event)){var n=Tr(e,e.Mq);n.Qa(e.position)||(e.position=n,e.lastInput.documentPoint=e.xt(e.Mq),e.doMouseMove(),e.Rg=!0,mr(e,e.documentBounds.copy().Jc(e.computeBounds())),e.nc=!0,e.fd(),t(e))}}),e.Sm))}(this)},n.xf=function(){-1!==this.Ck&&(g.clearTimeout(this.Ck),this.Ck=-1)},n.ht=function(){return null},n.nv=function(){return null},n.iy=function(t,e){this.pu.add(t,e)},n.yz=function(t){return Xr?(void 0===t&&(t=new W),t.returnType="Image",this.px(t)):null},n.px=function(t){return void 0===t&&(t=new W),Cr(this,this.zz,t)},n.zz=function(t,e,n){var i=Fr(n,t,"canvas",null);if(null===i)return null;var a=null;if(null!==(n=i.W.canvas))switch(a=t.returnType,a=void 0===a?"string":a.toLowerCase(),a){case"imagedata":a=i.getImageData(0,0,n.width,n.height);break;case"image":(i=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),a=i;break;case"blob":return"function"!=typeof e&&w('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:a=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(a),null):a},c.Object.defineProperties(va.prototype,{div:{get:function(){return this.Ia},set:function(t){if(this.Ia!==t){H=[];var e=this.Ia;null!==e?(e.C=void 0,e.innerHTML="",null!==this.Da&&(e=this.Da.Ga,this.removeEventListener(e,"touchstart",this.Uv,!1),this.removeEventListener(e,"touchmove",this.Tv,!1),this.removeEventListener(e,"touchend",this.Sv,!1),this.Da.ax()),null!==(e=this.toolManager)&&(e.mouseDownTools.each((function(t){t.cancelWaitAfter()})),e.mouseMoveTools.each((function(t){t.cancelWaitAfter()})),e.mouseUpTools.each((function(t){t.cancelWaitAfter()}))),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Yc=this.Da=null,this.removeEventListener(g,"resize",this.$v,!1),this.removeEventListener(g,"mousemove",this.jk,!0),this.removeEventListener(g,"mousedown",this.ik,!0),this.removeEventListener(g,"mouseup",this.lk,!0),this.removeEventListener(g,"wheel",this.mk,!0),this.removeEventListener(g,"mouseout",this.kk,!0),_r===this&&(_r=null)):this.he=!1,this.Ia=null,null!==t&&((e=t.C)&&(e.div=null),mo(this,t),this.uf())}}},Uw:{get:function(){return this.vo}},kv:{get:function(){return this.ob},set:function(t){this.ob=t}},Qi:{get:function(){return this.he}},draggedLink:{get:function(){return this.gr},set:function(t){this.gr!==t&&(this.gr=t,null!==t&&(this.cs=t.fromPort,this.ds=t.toPort))}},tx:{get:function(){return this.cs},set:function(t){this.cs=t}},ux:{get:function(){return this.ds},set:function(t){this.ds=t}},animationManager:{get:function(){return this.Ak}},undoManager:{get:function(){return this.Zb.undoManager}},skipsUndoManager:{get:function(){return this.eh},set:function(t){this.eh=t,this.Zb.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Pt},set:function(t){this.Pt=t}},validCycle:{get:function(){return this.Fs},set:function(t){var e=this.Fs;e!==t&&(this.Fs=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Pa.iterator}},isModelReadOnly:{get:function(){var t=this.Zb;return null!==t&&t.isReadOnly},set:function(t){var e=this.Zb;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.Dc},set:function(t){var e=this.Dc;e!==t&&(this.Dc=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.Dq},set:function(t){var e=this.Dq;e!==t&&(this.Dq=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.Fh},set:function(t){var e=this.Fh;e!==t&&(this.Fh=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.Gh},set:function(t){var e=this.Gh;e!==t&&(this.Gh=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.Eq},set:function(t){var e=this.Eq;e!==t&&(this.Eq=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.Fq},set:function(t){var e=this.Fq;e!==t&&(this.Fq=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Hh},set:function(t){var e=this.Hh;e!==t&&(this.Hh=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Qh},set:function(t){var e=this.Qh;e!==t&&(this.Qh=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.Hq},set:function(t){var e=this.Hq;e!==t&&(this.Hq=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ih},set:function(t){var e=this.Ih;e!==t&&(this.Ih=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Kh},set:function(t){var e=this.Kh;e!==t&&(this.Kh=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Jh},set:function(t){var e=this.Jh;e!==t&&(this.Jh=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Lh},set:function(t){var e=this.Lh;e!==t&&(this.Lh=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.Mh},set:function(t){var e=this.Mh;e!==t&&(this.Mh=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Nh},set:function(t){var e=this.Nh;e!==t&&(this.Nh=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Oh},set:function(t){var e=this.Oh;e!==t&&(this.Oh=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Iq},set:function(t){var e=this.Iq;e!==t&&(this.Iq=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Kq},set:function(t){var e=this.Kq;e!==t&&(this.Kq=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.wr},set:function(t){var e=this.wr;e!==t&&(this.wr=t,Ka(this),this.R(),this.g("hasVerticalScrollbar",e,t),Ca(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.vr},set:function(t){var e=this.vr;e!==t&&(this.vr=t,Ka(this),this.R(),this.g("hasHorizontalScrollbar",e,t),Ca(this,!1))}},allowHorizontalScroll:{get:function(){return this.Gq},set:function(t){var e=this.Gq;e!==t&&(this.Gq=t,this.g("allowHorizontalScroll",e,t),Ca(this,!1))}},allowVerticalScroll:{get:function(){return this.Jq},set:function(t){var e=this.Jq;e!==t&&(this.Jq=t,this.g("allowVerticalScroll",e,t),Ca(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.ps},set:function(t){var e=this.ps;e!==t&&(0>t&&P(t,">= 0",va,"scrollHorizontalLineChange"),this.ps=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.rs},set:function(t){var e=this.rs;e!==t&&(0>t&&P(t,">= 0",va,"scrollVerticalLineChange"),this.rs=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.rj},set:function(t){this.rj=t}},firstInput:{get:function(){return this.Yh},set:function(t){this.Yh=t}},currentCursor:{get:function(){return this.Xq},set:function(t){if(""===t&&(t=this.pn),this.Xq!==t){var e=this.Da,n=this.Ia;if(null!==e){this.Xq=t;var i=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.pn},set:function(t){""===t&&(t="auto");var e=this.pn;e!==t&&(this.pn=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Cf},set:function(t){var e=this.Cf;e!==t&&(this.Cf=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Hf},set:function(t){var e=this.Hf;e!==t&&(this.Hf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Df},set:function(t){var e=this.Df;e!==t&&(this.Df=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e!==t&&(this.Yf=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.Wf},set:function(t){var e=this.Wf;e!==t&&(this.Wf=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Vf},set:function(t){var e=this.Vf;e!==t&&(this.Vf=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Wr},set:function(t){var e=this.Wr;e!==t&&(this.Wr=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e!==t&&(this.Tf=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.ur},set:function(t){var e=this.ur;e!==t&&(this.ur=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Uf},set:function(t){var e=this.Uf;e!==t&&(this.Uf=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.Xf},set:function(t){var e=this.Xf;e!==t&&(this.Xf=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.jg},set:function(t){var e=this.jg;e!==t&&(this.jg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Ef},set:function(t){var e=this.Ef;e!==t&&(this.Ef=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t,t.hb(this))}},toolManager:{get:function(){return this.Ub},set:function(t){this.Ub!==t&&(this.Ub=t,t.hb(this))}},defaultTool:{get:function(){return this.La},set:function(t){var e=this.La;e!==t&&(this.La=t,t.hb(this),this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.ba},set:function(t){var e=this.ba;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.ba=t,t.hb(this),t.doStart())}},selection:{get:function(){return this.Bq}},maxSelectionCount:{get:function(){return this.Sr},set:function(t){var e=this.Sr;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Sr=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.aa("ChangingSelection",this.selection),e=this.selection.Na();for(var n=0;n<t;n++)e[n].isSelected=!1;this.aa("ChangedSelection",this.selection)}}else P(t,">= 0",va,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.Zr},set:function(t){var e=this.Zr;e!==t&&(this.Zr=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.sr},set:function(t){var e=this.sr;e!==t&&(this.sr=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Or},set:function(t){var e=this.Or;e!==t&&(this.Or=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.zq}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.u&&this.ge!==t.historyIndex:this.u},set:function(t){if(this.u!==t){this.u=t;var e=this.undoManager;!t&&e.isEnabled&&(this.ge=e.historyIndex),t||cr(this)}}},model:{get:function(){return this.Zb},set:function(t){var e=this.Zb;if(e!==t){this.currentTool.doCancel(),null!==e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&w("Do not replace a Diagram.model while a transaction is in progress."),ya(this,!0),this.he=!1,this.Xk=!0,this.ge=-2,this.qd=!1;var n=this.Yb;this.Yb=!0,this.animationManager.Ti("Model"),null!==e&&(null!==this.pe&&this.pe.each((function(t){e.qk(t)})),e.qk(this.Cm)),this.Zb=t,this.partManager=function(t){return null!==(t=Vr.get(t))?new t:new Vd}(this.Zb.constructor.type),t.rh(this.zg),this.partManager.addAllModeledParts(),t.qk(this.zg),t.rh(this.Cm),null!==this.pe&&this.pe.each((function(e){t.rh(e)})),this.Yb=n,this.ob||this.R(),null!==e&&t.undoManager.copyProperties(e.undoManager)}}},ea:{get:function(){return this.Vc},set:function(t){this.Vc=t}},ft:{get:function(){return this.Aq}},skipsModelSourceBindings:{get:function(){return this.Dh},set:function(t){this.Dh=t}},sk:{get:function(){return this.wu},set:function(t){this.wu=t}},nodeTemplate:{get:function(){return this.Zf.J("")},set:function(t){var e=this.Zf.J("");e!==t&&(this.Zf.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.ud())}},nodeTemplateMap:{get:function(){return this.Zf},set:function(t){var e=this.Zf;e!==t&&(this.Zf=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.ud())}},groupTemplate:{get:function(){return this.Zh.J("")},set:function(t){var e=this.Zh.J("");e!==t&&(this.Zh.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.ud())}},groupTemplateMap:{get:function(){return this.Zh},set:function(t){var e=this.Zh;e!==t&&(this.Zh=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.ud())}},linkTemplate:{get:function(){return this.Ug.J("")},set:function(t){var e=this.Ug.J("");e!==t&&(this.Ug.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.ud())}},linkTemplateMap:{get:function(){return this.Ug},set:function(t){var e=this.Ug;e!==t&&(this.Ug=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.ud())}},isMouseOverDiagram:{get:function(){return this.Re},set:function(t){this.Re=t}},isMouseCaptured:{get:function(){return this.Kc},set:function(t){var e=this.Da;null!==e&&((e=e.Ga)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.Lq?(this.removeEventListener(e,"pointermove",this.jm,!1),this.removeEventListener(e,"pointerdown",this.im,!1),this.removeEventListener(e,"pointerup",this.lm,!1),this.removeEventListener(e,"pointerout",this.km,!1),this.addEventListener(g,"pointermove",this.jm,!0),this.addEventListener(g,"pointerdown",this.im,!0),this.addEventListener(g,"pointerup",this.lm,!0),this.addEventListener(g,"pointerout",this.km,!0)):(this.removeEventListener(e,"mousemove",this.jk,!1),this.removeEventListener(e,"mousedown",this.ik,!1),this.removeEventListener(e,"mouseup",this.lk,!1),this.removeEventListener(e,"mouseout",this.kk,!1),this.addEventListener(g,"mousemove",this.jk,!0),this.addEventListener(g,"mousedown",this.ik,!0),this.addEventListener(g,"mouseup",this.lk,!0),this.addEventListener(g,"mouseout",this.kk,!0)),this.removeEventListener(e,"wheel",this.mk,!1),this.addEventListener(g,"wheel",this.mk,!0),this.addEventListener(g,"selectstart",this.preventDefault,!1)):(this.Lq?(this.removeEventListener(g,"pointermove",this.jm,!0),this.removeEventListener(g,"pointerdown",this.im,!0),this.removeEventListener(g,"pointerup",this.lm,!0),this.removeEventListener(g,"pointerout",this.km,!0),this.addEventListener(e,"pointermove",this.jm,!1),this.addEventListener(e,"pointerdown",this.im,!1),this.addEventListener(e,"pointerup",this.lm,!1),this.addEventListener(e,"pointerout",this.km,!1)):(this.removeEventListener(g,"mousemove",this.jk,!0),this.removeEventListener(g,"mousedown",this.ik,!0),this.removeEventListener(g,"mouseup",this.lk,!0),this.removeEventListener(g,"mouseout",this.kk,!0),this.addEventListener(e,"mousemove",this.jk,!1),this.addEventListener(e,"mousedown",this.ik,!1),this.addEventListener(e,"mouseup",this.lk,!1),this.addEventListener(e,"mouseout",this.kk,!1)),this.removeEventListener(g,"wheel",this.mk,!0),this.removeEventListener(g,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.mk,!1)),this.Kc=t))}},position:{get:function(){return this.sa},set:function(t){var e=ft.alloc().assign(this.sa);if(!e.A(t)){var n=this.viewportBounds.copy();this.sa.assign(t),this.ob||null===this.Da&&!this.Gp.o()||(this.ob=!0,t=this.scale,Ba(this,this.un,this.xa/t,this.wa/t,this.dj,!1),this.ob=!1),la(this.animationManager,e,this.sa),this.ob||this.lq(n,this.viewportBounds,this.Ca,!1)}ft.free(e)}},initialPosition:{get:function(){return this.yr},set:function(t){this.yr.A(t)||(this.yr=t.I())}},initialScale:{get:function(){return this.zr},set:function(t){this.zr!==t&&(this.zr=t)}},grid:{get:function(){return null===this.Eb&&La(this),this.Eb},set:function(t){var e=this.Eb;if(e!==t){null===e&&(La(this),e=this.Eb),t.type!==ah.Grid&&w("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Eb=t,t.name="GRID",null!==n&&n.add(t),ur(this),this.R(),this.g("grid",e,t)}}},viewportBounds:{get:function(){var t=this.Mw,e=this.sa,n=this.Ca;return null===this.Da?(this.Gp.o()&&t.h(e.x,e.y,this.xa/n,this.wa/n),t):(t.h(e.x,e.y,Math.max(this.xa,0)/n,Math.max(this.wa,0)/n),t)}},viewSize:{get:function(){return this.Gp},set:function(t){var e=this.viewSize;e.A(t)||(this.Gp=t=t.I(),this.xa=t.width,this.wa=t.height,this.Xa(),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.pr},set:function(t){var e=this.pr;e.A(t)||(-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||w("fixedBounds width/height must not be Infinity"),this.pr=t=t.I(),this.Xa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.ti},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.ti;e.A(t)||(this.ti=t=t.I(),this.g("scrollMargin",e,t),this.uf())}},scrollMode:{get:function(){return this.Hj},set:function(t){var e=this.Hj;e!==t&&(this.Hj=t,t===io&&Ca(this,!1),this.g("scrollMode",e,t),this.uf())}},scrollsPageOnFocus:{get:function(){return this.ss},set:function(t){var e=this.ss;e!==t&&(this.ss=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.js},set:function(t){var e=this.js;e!==t&&(this.js=t,Ca(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.ns},set:function(t){var e=this.ns;e!==t&&(this.ns=t,lr(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.un}},isVirtualized:{get:function(){return this.Jr},set:function(t){var e=this.Jr;e!==t&&(this.Jr=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&lr(this,e,t)}},defaultScale:{get:function(){return this.dr},set:function(t){this.dr=t}},autoScale:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("autoScale",e,t),t!==Wr&&Ca(this,!1))}},initialAutoScale:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.Ar},set:function(t){var e=this.Ar;e!==t&&(t.gb()||w("initialViewportSpot must be a specific Spot: "+t),this.Ar=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.xr},set:function(t){var e=this.xr;e!==t&&(t.gb()||w("initialViewportSpot must be a specific Spot: "+t),this.xr=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.Tr},set:function(t){var e=this.Tr;e!==t&&(0<t?(this.Tr=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):P(t,"> 0",va,"minScale"))}},maxScale:{get:function(){return this.Rr},set:function(t){var e=this.Rr;e!==t&&(0<t?(this.Rr=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):P(t,"> 0",va,"maxScale"))}},zoomPoint:{get:function(){return this.Is},set:function(t){this.Is.A(t)||(this.Is=t=t.I())}},contentAlignment:{get:function(){return this.dj},set:function(t){var e=this.dj;e.A(t)||(this.dj=t=t.I(),this.g("contentAlignment",e,t),Ca(this,!1))}},initialContentAlignment:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e.A(t)||(this.Nn=t=t.I(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.eb},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.eb;e.A(t)||(this.eb=t=t.I(),this.Xa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(null!==t.diagram&&w("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.hb(null),this.Ma=t,t.hb(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.gc},set:function(t){var e=this.gc;e!==t&&(this.gc=t,t.diagram=this,t.group=null,this.Cg=!0,this.g("layout",e,t),this.cc())}},isTreePathToChildren:{get:function(){return this.Ir},set:function(t){var e=this.Ir;if(e!==t&&(this.Ir=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)hu(t.value)}},treeCollapsePolicy:{get:function(){return this.Ds},set:function(t){var e=this.Ds;e!==t&&(t!==ro&&t!==oo&&t!==so&&w("Unknown Diagram.treeCollapsePolicy: "+t),this.Ds=t,this.g("treeCollapsePolicy",e,t))}},Fe:{get:function(){return this.Vb},set:function(t){this.Vb=t}},autoScrollInterval:{get:function(){return this.Sm},set:function(t){var e=this.Sm;e!==t&&(this.Sm=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.Tm},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.Tm;e.A(t)||(this.Tm=t=t.I(),this.Xa(),this.g("autoScrollRegion",e,t))}}}),c.Object.defineProperties(va,{licenseKey:{get:function(){return ho.Sb()},set:function(t){ho.add(t)}},version:{get:function(){return lo}}}),va.prototype.makeImageData=va.prototype.px,va.prototype.makeImage=va.prototype.yz,va.prototype.addRenderer=va.prototype.iy,va.prototype.makeSVG=va.prototype.nv,va.prototype.makeSvg=va.prototype.ht,va.prototype.stopAutoScroll=va.prototype.xf,va.prototype.doAutoScroll=va.prototype.Ns,va.prototype.isUnoccupied=va.prototype.fk,va.prototype.raiseDiagramEvent=va.prototype.aa,va.prototype.removeDiagramListener=va.prototype.mm,va.prototype.addDiagramListener=va.prototype.Oj,va.prototype.findTreeRoots=va.prototype.Xy,va.prototype.layoutDiagram=va.prototype.wz,va.prototype.findTopLevelGroups=va.prototype.Qy,va.prototype.findTopLevelNodesAndLinks=va.prototype.Ry,va.prototype.findLinksByExample=va.prototype.Qs,va.prototype.findNodesByExample=va.prototype.Rs,va.prototype.findLinkForData=va.prototype.uc,va.prototype.findNodeForData=va.prototype.Gi,va.prototype.findPartForData=va.prototype.vc,va.prototype.findNodeForKey=va.prototype.Hb,va.prototype.findPartForKey=va.prototype.findPartForKey,va.prototype.rebuildParts=va.prototype.ud,va.prototype.transformViewToDoc=va.prototype.xt,va.prototype.transformRectDocToView=va.prototype.Xz,va.prototype.transformDocToView=va.prototype.wt,va.prototype.centerRect=va.prototype.Ju,va.prototype.scrollToRect=va.prototype.Gv,va.prototype.scroll=va.prototype.scroll,va.prototype.highlightCollection=va.prototype.lz,va.prototype.highlight=va.prototype.kz,va.prototype.clearHighlighteds=va.prototype.Lu,va.prototype.selectCollection=va.prototype.Hv,va.prototype.select=va.prototype.select,va.prototype.clearSelection=va.prototype.Qp,va.prototype.updateAllRelationshipsFromData=va.prototype.wq,va.prototype.updateAllTargetBindings=va.prototype.updateAllTargetBindings,va.prototype.commit=va.prototype.commit,va.prototype.rollbackTransaction=va.prototype.wf,va.prototype.commitTransaction=va.prototype.Za,va.prototype.startTransaction=va.prototype.Aa,va.prototype.raiseChanged=va.prototype.g,va.prototype.raiseChangedEvent=va.prototype.ab,va.prototype.removeChangedListener=va.prototype.qk,va.prototype.addChangedListener=va.prototype.rh,va.prototype.removeModelChangedListener=va.prototype.Mz,va.prototype.addModelChangedListener=va.prototype.Sw,va.prototype.findLayer=va.prototype.Zl,va.prototype.removeLayer=va.prototype.Kz,va.prototype.addLayerAfter=va.prototype.by,va.prototype.addLayerBefore=va.prototype.Qw,va.prototype.addLayer=va.prototype.Ql,va.prototype.moveParts=va.prototype.moveParts,va.prototype.copyParts=va.prototype.Yj,va.prototype.removeParts=va.prototype.qt,va.prototype.remove=va.prototype.remove,va.prototype.add=va.prototype.add,va.prototype.clearDelayedGeometries=va.prototype.Ku,va.prototype.setProperties=va.prototype.Nv,va.prototype.resetInputOptions=va.prototype.Dv,va.prototype.setInputOption=va.prototype.Qz,va.prototype.getInputOption=va.prototype.bm,va.prototype.resetRenderingHints=va.prototype.Ev,va.prototype.setRenderingHint=va.prototype.Gx,va.prototype.getRenderingHint=va.prototype.Ee,va.prototype.maybeUpdate=va.prototype.fd,va.prototype.requestUpdate=va.prototype.cc,va.prototype.delayInitialization=va.prototype.xy,va.prototype.isUpdateRequested=va.prototype.rz,va.prototype.redraw=va.prototype.uf,va.prototype.invalidateDocumentBounds=va.prototype.Xa,va.prototype.findObjectsNear=va.prototype.qg,va.prototype.findPartsNear=va.prototype.Ny,va.prototype.findObjectsIn=va.prototype.pg,va.prototype.findPartsIn=va.prototype.ix,va.prototype.findObjectsAt=va.prototype.Hi,va.prototype.findPartsAt=va.prototype.My,va.prototype.findObjectAt=va.prototype.Rb,va.prototype.findPartAt=va.prototype.$l,va.prototype.alignDocument=va.prototype.jy,va.prototype.zoomToRect=va.prototype.$z,va.prototype.zoomToFit=va.prototype.zoomToFit,va.prototype.diagramScroll=va.prototype.$w,va.prototype.focus=va.prototype.focus,va.prototype.reset=va.prototype.reset,va.useDOM=function(t){Xr=!!t&&void 0!==g.document},va.isUsingDOM=function(){return Xr};var Br,Or,Ar,jr,Dr,zr,Gr,Er,Rr,Ir,_r=null,Vr=new ct,Yr=null,Hr=null,Xr=void 0!==g.document,Ur=null,qr="",Wr=new X(va,"None",0),Kr=new X(va,"Uniform",1),Jr=new X(va,"UniformToFill",2),Zr=new X(va,"CycleAll",10),$r=new X(va,"CycleNotDirected",11),Qr=new X(va,"CycleNotDirectedFast",12),to=new X(va,"CycleNotUndirected",13),eo=new X(va,"CycleDestinationTree",14),no=new X(va,"CycleSourceTree",15),io=new X(va,"DocumentScroll",1),ao=new X(va,"InfiniteScroll",2),ro=new X(va,"TreeParentCollapsed",21),oo=new X(va,"AllParentsCollapsed",22),so=new X(va,"AnyParentsCollapsed",23),ho=new tt,lo="2.0.15",uo=null,co=!1;function fo(){if(Xr){var t=g.document.createElement("canvas"),e=t.getContext("2d"),n=z("7ca11abfd022028846");e[n]=z("398c3597c01238");for(var i=["5da73c80a36455d4038e4972187c3cae51fd22",p.Dx+"4ae6247590da4bb21c324ba3a84e385776",ae.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",qe.za],a=1;5>a;a++)e[z("7ca11abfd7330390")](z(i[a-1]),10,15*a);for(e[n]=z("39f046ebb36e4b"),n=1;5>n;n++)e[z("7ca11abfd7330390")](z(i[n-1]),10,15*n);uo=t}}function go(){this.Xx=null,this.l="zz@orderNum","63ad05bbe23a1786468a4c741b6d2"===this._tk?this.Oe=this.l=!0:this.Oe=null}function po(t,e){if(e.Yc.setTransform(e.Mb,0,0,e.Mb,0,0),null===t.Oe){e="f";var n=g[z("76a715b2f73f148a")][z("72ba13b5")];if(t.Oe=!0,Xr){var i=va[z("76a115b6ed251eaf4692")];if(i)for(var a=ho.iterator;a.next()&&!(6>(i=z(i=a.value).split(z("39e9"))).length);){var r=z(i[1]).split(".");if("7da71ca0"!==i[4])break;var o=z(p[z("6cae19")]).split(".");if(r[0]>o[0]||r[0]===o[0]&&r[1]>=o[1]){for(r=n[z("76ad18b4f73e")],o=n[z("73a612b6fb191d")](z("35e7"))+2;o<r;o++)e+=n[o];if(0>(r=e[z("73a612b6fb191d")](z(i[2])))&&z(i[2])!==z("7da71ca0ad381e90")&&(r=e[z("73a612b6fb191d")](z("76a715b2ef3e149757"))),0>r&&(r=e[z("73a612b6fb191d")](z("76a715b2ef3e149757"))),t.Oe=!(0<=r&&r<e[z("73a612b6fb191d")](z("35"))),!t.Oe)break;if("#"!==(r=z(i[2]))[0])break;o=g.document.createElement("div");for(var s=i[0].replace(/[A-Za-z]/g,"");4>s.length;)s+="9";if(s=s.substr(s.length-4),i="",i+=["gsh","gsf"][parseInt(s.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(s.substr(0,1),10)%4],o[z("79a417a0f0181a8946")]=i,g.document[z("78a712aa")]){if(g.document[z("78a712aa")][z("7bb806b6ed32388c4a875b")](o),s=g.getComputedStyle(o).getPropertyValue(z("78a704b7e62456904c9b12701b6532a8")),g.document[z("78a712aa")][z("68ad1bbcf533388c4a875b")](o),!s)break;if(-1!==s.indexOf(parseInt(r[1]+r[2],16))&&-1!==s.indexOf(parseInt(r[3]+r[4],16))){t.Oe=!1;break}if(G||E||R||I)for(i="."+i,r=0;r<document.styleSheets.length;r++)for(var h in o=document.styleSheets[r].rules||document.styleSheets[r].cssRules)if(i===o[h].selectorText){t.Oe=!1;break}}else t.Oe=null,t.Oe=!1}}else{for(h=n[z("76ad18b4f73e")],a=n[z("73a612b6fb191d")](z("35e7"))+2;a<h;a++)e+=n[a];n=e[z("73a612b6fb191d")](z("7da71ca0ad381e90")),t.Oe=!(0<=n&&n<e[z("73a612b6fb191d")](z("35")))}}}return 0<t.Oe&&t!==t.Xx}function mo(t,e){if(Xr){null!=e||w("Diagram setup requires an argument DIV."),null!==t.Ia&&w("Diagram has already completed setup."),"string"==typeof e?t.Ia=g.document.getElementById(e):e instanceof HTMLDivElement?t.Ia=e:w("No DIV or DIV id supplied: "+e),null===t.Ia&&w("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ia.C&&w("Invalid div id; div already has a Diagram associated with it."),"static"===g.getComputedStyle(t.Ia,null).position&&(t.Ia.style.position="relative"),t.Ia.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.Ia.style["-ms-touch-action"]="none",t.Ia.innerHTML="",t.Ia.C=t;var n=t.As?new rs(t):new cs(t);if(void 0!==n.style&&(n.style.position="absolute",n.style.top="0px",n.style.left="0px","rtl"===g.getComputedStyle(t.Ia,null).getPropertyValue("direction")&&(t.Sn=!0),n.style.zIndex="2",n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none"),t.Da=n,t.Yc=n.context,e=t.Yc,t.Mb=t.computePixelRatio(),t.xa=t.Ia.clientWidth||1,t.wa=t.Ia.clientHeight||1,$a(t,t.xa,t.wa),t.hr=e.W[z("7eba17a4ca3b1a8346")][z("78a118b7")](e.W,uo,4,4),t.Ia.insertBefore(n.Ga,t.Ia.firstChild),(n=new cs(null)).width=1,n.height=1,t.Tt=n,t.tw=n.context,Xr){n=y("div");var i=y("div");n.style.position="absolute",n.style.overflow="auto",n.style.width=t.xa+"px",n.style.height=t.wa+"px",n.style.zIndex="1",i.style.position="absolute",i.style.width="1px",i.style.height="1px",t.Ia.appendChild(n),n.appendChild(i),n.onscroll=Ma,n.onmousedown=Na,n.ontouchstart=Na,n.C=t,n.Vx=!0,n.Wx=!0,t.qs=n,t.hp=i}t.nt=m((function(){t.jh=null,t.R()}),300),t.$v=m((function(){xa(t)}),250),t.preventDefault=function(t){return t.preventDefault(),!1},t.jk=function(e){if(t.isEnabled){t.Re=!0;var n=Aa(t,e,!0);t.doMouseMove(),t.currentTool.isBeyondDragSize()&&(t.Fd=0),Ea(n,e)}},t.ik=function(e){if(t.isEnabled)if(t.Re=!0,t.Se)e.preventDefault();else{var n=Aa(t,e,!0);n.down=!0,n.clickCount=e.detail,(E||R)&&(e.timeStamp-t.kl<t.Bu&&!t.currentTool.isBeyondDragSize()?t.Fd++:t.Fd=1,t.kl=e.timeStamp,n.clickCount=t.Fd),n.clone(t.firstInput),t.doMouseDown(),1===e.button?e.preventDefault():Ea(n,e)}},t.lk=function(e){if(t.isEnabled)if(t.Se&&2===e.button)e.preventDefault();else if(t.Se&&0===e.button&&(t.Se=!1),t.Ml)e.preventDefault();else{t.Re=!0;var n=Aa(t,e,!0);n.up=!0,n.clickCount=e.detail,(E||R)&&(n.clickCount=t.Fd),n.bubbles=e.bubbles,n.targetDiagram=ja(e),t.doMouseUp(),t.xf(),Ea(n,e)}},t.mk=function(e){if(t.isEnabled){var n=Aa(t,e,!0);n.bubbles=!0;var i=0,a=0;n.delta=0,void 0!==e.deltaX?(0!==e.deltaX&&(i=0<e.deltaX?1:-1),0!==e.deltaY&&(a=0<e.deltaY?1:-1),n.delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-i:-a):void 0!==e.wheelDeltaX?(0!==e.wheelDeltaX&&(i=0<e.wheelDeltaX?-1:1),0!==e.wheelDeltaY&&(a=0<e.wheelDeltaY?-1:1),n.delta=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?-i:-a):void 0!==e.wheelDelta&&0!==e.wheelDelta&&(n.delta=0<e.wheelDelta?1:-1),t.doMouseWheel(),Ea(n,e)}},t.kk=function(e){t.isEnabled&&(t.Re=!1,Aa(t,e,!0),(e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())},t.Uv=function(e){if(t.isEnabled){t.Ml=!1,t.Se=!0;var n=Da(t,e,e.targetTouches[0],1<e.touches.length),i=null;if(0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]),null!==i){var a=i.screenX;i=i.screenY;var r=t.Lr;e.timeStamp-t.kl<t.Bu&&!(25<Math.abs(r.x-a)||25<Math.abs(r.y-i))?t.Fd++:t.Fd=1,n.clickCount=t.Fd,t.kl=e.timeStamp,t.Lr.h(a,i)}t.doMouseDown(),Ea(n,e)}},t.Tv=function(e){if(t.isEnabled){var n=null;0<e.targetTouches.length?n=e.targetTouches[0]:0<e.changedTouches.length&&(n=e.changedTouches[0]),n=za(t,e,n,1<e.touches.length),t.doMouseMove(),Ea(n,e)}},t.Sv=function(e){if(t.isEnabled)if(t.Ml)e.preventDefault();else if(!(1<e.touches.length)){var n=null,i=null;0<e.targetTouches.length?i=e.targetTouches[0]:0<e.changedTouches.length&&(i=e.changedTouches[0]);var a=Ga(t,e,!1,!0,!1,!1);null!==i&&(null!==(n=g.document.elementFromPoint(i.clientX,i.clientY))&&n.C instanceof va&&n.C!==t&&Ra(n.C,i,a),Ra(t,i,a),a.clickCount=t.Fd),null===n?a.targetDiagram=ja(e):n.C?a.targetDiagram=n.C:a.targetDiagram=null,a.targetObject=null,t.doMouseUp(),Ea(a,e),t.Se=!1}},t.im=function(e){if(t.isEnabled){t.Re=!0;var n=t.nu;void 0===n[e.pointerId]&&(n[e.pointerId]=e);var i=!1;if(null!==(n=t.vl)[0]&&n[0].pointerId===e.pointerId)n[0]=e;else if(null!==n[1]&&n[1].pointerId===e.pointerId)n[1]=e,i=!0;else if(null===n[0])n[0]=e;else{if(null!==n[1])return void e.preventDefault();n[1]=e,i=!0}"touch"!==e.pointerType&&"pen"!==e.pointerType||(t.Ml=!1,t.Se=!0),n=Da(t,e,e,i),i=t.Lr;var a="touch"===e.pointerType||"pen"===e.pointerType?25:10;e.timeStamp-t.kl<t.Bu&&!(Math.abs(i.x-e.screenX)>a||Math.abs(i.y-e.screenY)>a)?t.Fd++:t.Fd=1,n.clickCount=t.Fd,t.kl=e.timeStamp,t.Lr.wg(e.screenX,e.screenY),t.doMouseDown(),1===e.button?e.preventDefault():Ea(n,e)}},t.jm=function(e){if(t.isEnabled){t.Re=!0;var n=t.vl;if(null!==n[0]&&n[0].pointerId===e.pointerId)n[0]=e;else{if(null!==n[1]&&n[1].pointerId===e.pointerId)return void(n[1]=e);if(null!==n[0])return;n[0]=e}n[0].pointerId===e.pointerId&&(n=za(t,e,e,null!==n[1]),t.doMouseMove(),Ea(n,e))}},t.lm=function(e){if(t.isEnabled){t.Re=!0;var n="touch"===e.pointerType||"pen"===e.pointerType,i=t.nu;if(n&&t.Ml)delete i[e.pointerId],e.preventDefault();else if(null!==(i=t.vl)[0]&&i[0].pointerId===e.pointerId){i[0]=null,i=Ga(t,e,!1,!0,!0,!1);var a=g.document.elementFromPoint(e.clientX,e.clientY);null!==a&&a.C instanceof va&&a.C!==t&&Ra(a.C,e,i),Ra(t,e,i),i.clickCount=t.Fd,null===a?i.targetDiagram=ja(e):a.C?i.targetDiagram=a.C:i.targetDiagram=null,i.targetObject=null,t.doMouseUp(),Ea(i,e),n&&(t.Se=!1)}else null!==i[1]&&i[1].pointerId===e.pointerId&&(i[1]=null)}},t.km=function(e){if(t.isEnabled){t.Re=!1;var n=t.nu;n[e.pointerId]&&delete n[e.pointerId],null!==(n=t.vl)[0]&&n[0].pointerId===e.pointerId&&(n[0]=null),null!==n[1]&&n[1].pointerId===e.pointerId&&(n[1]=null),"touch"!==e.pointerType&&"pen"!==e.pointerType&&((e=t.currentTool).cancelWaitAfter(),e.standardMouseOver())}},e.Rc(!0),function(t){var e=t.Da.Ga;e instanceof HTMLCanvasElement&&(t.Lq?(t.addEventListener(e,"pointerdown",t.im,!1),t.addEventListener(e,"pointermove",t.jm,!1),t.addEventListener(e,"pointerup",t.lm,!1),t.addEventListener(e,"pointerout",t.km,!1)):(t.addEventListener(e,"touchstart",t.Uv,!1),t.addEventListener(e,"touchmove",t.Tv,!1),t.addEventListener(e,"touchend",t.Sv,!1),t.addEventListener(e,"mousemove",t.jk,!1),t.addEventListener(e,"mousedown",t.ik,!1),t.addEventListener(e,"mouseup",t.lk,!1),t.addEventListener(e,"mouseout",t.kk,!1)),t.addEventListener(e,"mouseenter",t.Cy,!1),t.addEventListener(e,"mouseleave",t.Dy,!1),t.addEventListener(e,"wheel",t.mk,!1),t.addEventListener(e,"keydown",t.sz,!1),t.addEventListener(e,"keyup",t.uz,!1),t.addEventListener(e,"blur",t.oy,!1),t.addEventListener(e,"focus",t.py,!1),t.addEventListener(e,"selectstart",(function(t){return t.preventDefault(),!1}),!1),t.addEventListener(e,"contextmenu",(function(t){return t.preventDefault(),!1}),!1),t.addEventListener(e,"gesturestart",(function(e){t.toolManager.gestureBehavior!==En&&(t.toolManager.gestureBehavior===Gn?e.preventDefault():t.Se&&t.lastInput.handled||(e.preventDefault(),t.Jo=t.scale,t.currentTool.doCancel()))}),!1),t.addEventListener(e,"gesturechange",(function(e){if(t.toolManager.gestureBehavior!==En)if(t.toolManager.gestureBehavior===Gn)e.preventDefault();else if(!t.Se||!t.lastInput.handled){e.preventDefault();var n=e.scale;if(null!==t.Jo){var i=t.Da.getBoundingClientRect();if(e=new ft(e.pageX-window.scrollX-t.xa/i.width*i.left,e.pageY-window.scrollY-t.wa/i.height*i.top),n=t.Jo*n,i=t.commandHandler,n!==t.scale&&i.canResetZoom(n)){var a=t.zoomPoint;t.zoomPoint=e,i.resetZoom(n),t.zoomPoint=a}}}}),!1),t.addEventListener(g,"resize",t.$v,!1))}(t)}}function vo(t){this.l=void 0===t?new ft:t,this.u=new ft}function yo(t,e,n){this.node=t,this.info=e,this.fv=n}function wo(){this.reset()}function So(t){1<arguments.length&&w("Palette constructor can only take one optional argument, the DIV HTML element or its id."),va.call(this,t),this.allowDragOut=!0,this.allowMove=!1,this.isReadOnly=!0,this.contentAlignment=se,this.layout=new Od}function Po(t){1<arguments.length&&w("Overview constructor can only take one optional argument, the DIV HTML element or its id."),va.call(this,t),this.animationManager.isEnabled=!1,this.ob=!0,this.$f=null,this.ir=!0,this.Gx("drawShadows",!1);var e=new jl,n=new Oh;n.stroke="magenta",n.strokeWidth=2,n.fill="transparent",n.name="BOXSHAPE",e.selectable=!0,e.selectionAdorned=!1,e.selectionObjectName="BOXSHAPE",e.locationObjectName="BOXSHAPE",e.resizeObjectName="BOXSHAPE",e.cursor="move",e.add(n),this.l=e,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new $t(0,0,0,0),this.yu=new cs(null),this.Yx=this.yu.context,On(this.toolManager,"Dragging",new xo,this.toolManager.mouseMoveTools);var i=this;this.click=function(){var t=i.$f;if(null!==t){var e=t.viewportBounds,n=i.lastInput.documentPoint;t.position=new ft(n.x-e.width/2,n.y-e.height/2)}},this.Gm=function(){i.Xa(),bo(i)},this.Em=function(){null!==i.$f&&(i.Xa(),i.R())},this.Fm=function(){i.R()},this.Dm=function(){null!==i.$f&&bo(i)},this.autoScale=Kr,this.ob=!1}function bo(t){var e=t.box;if(null!==e){var n=t.$f;if(null!==n){t.nc=!0,n=n.viewportBounds;var i=e.selectionObject,a=jt.alloc();a.h(n.width,n.height),i.desiredSize=a,jt.free(a),t=2/t.scale,i instanceof Oh&&(i.strokeWidth=t),e.location=new ft(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function xo(){Rn.call(this),this.l=null}function ko(){it(this),this.C=_r,this.Ub=this.K=this.u=!0,this.ba=this.La=this.Vb=this.Ma=!1,this.ki=this.l=null,this.Vc=1.05,this.eu=NaN,this.zw=null,this.Eu=NaN,this.Du=Kt,this.fg=null,this.Kc=200}function Lo(t){var e=C();for(t=t.iterator;t.next();){var n=t.value;n instanceof wu||e.push(n)}t=new nt,n=e.length;for(var i=0;i<n;i++){for(var a=e[i],r=!0,o=0;o<n;o++)if(a.Vd(e[o])){r=!1;break}r&&t.add(a)}return F(e),t}function Mo(){it(this),this.H=4225027,this.lb=1,this.cg=null,this.Ua="",this.dc=this.ib=null,this.sa=new ft(NaN,NaN).freeze(),this.Nc=Ot,this.Sf=Mt,this.Rf=Bt,this.tb=new ae,this.Eh=new ae,this.Qf=new ae,this.Ca=this.Tk=1,this.zc=0,this.we=jr,this.Vg=ee,this.pc=new Et(NaN,NaN,NaN,NaN).freeze(),this.vb=new Et(NaN,NaN,NaN,NaN).freeze(),this.qc=new Et(0,0,NaN,NaN).freeze(),this.P=this.Qo=this.Ro=null,this.yk=this.wb=Fe,this.cp=0,this.ep=1,this.Fg=0,this.Ym=1,this.tp=null,this.ip=-1/0,this.yl=0,this.zl=Pt,this.Al=Vu,this.hn="",this.bb=this.O=null,this.Ek=-1,this.Cl=this.kd=this.Th=this.Fl=null,this.ks=Or,this.Bj=null}function No(t){null===t.O&&(t.O=new ns)}function To(t,e,n){var i=t.Ii();if(null!==i)for(var a=t.bb.iterator;a.next();){var r=a.value,o=null;if(null!==r.sourceName){if(null===(o=Fc(r,i,t)))continue;r.xq(t,o,n,null)}else if(r.isToModel){var s=e.diagram;null===s||s.skipsModelSourceBindings||r.xq(t,s.model.modelData,n,i)}else{if(null===(s=i.data))continue;var h=e.diagram;null===h||h.skipsModelSourceBindings||r.xq(t,s,n,i)}o===t&&(null!==(s=i.Ps(r.Yi))&&r.Yv(s,o,n))}}function Co(t,e,n,i,a){var r=t.pc,o=t.Qf;o.reset(),Do(t,o,e,n,i,a),t.Qf=o,r.h(e,n,i,a),o.bt()||o.Vv(r)}function Fo(t,e,n,i){return!1!==t.pickable&&(i.multiply(t.transform),n?t.Ic(e,i):t.vh(e,i))}function Bo(t,e,n,i,a){if(t.vb.h(e,n,i,a),!t.desiredSize.o()){var r=t.pc;e=(n=t.Vg).right+n.left;var o=n.top+n.bottom;switch(n=r.width+e,r=r.height+o,i+=e,a+=o,e=Go(t,!0),n===i&&r===a&&(e=Or),e){case Or:(n>i||r>a)&&(Uo(t,!0),t.measure(n>i?i:n,r>a?a:r,0,0));break;case Br:Uo(t,!0),t.measure(i,a,0,0);break;case Dr:Uo(t,!0),t.measure(i,r,0,0);break;case zr:Uo(t,!0),t.measure(n,a,0,0)}}}function Oo(t,e,n){var i=t.vb,a=t.qc;null!==t.dc&&(Ao(t,e,t.dc,!0,!0,a,i),t.dc instanceof ms&&t.dc.type===Bs?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Td(t.dc)):e.fillRect(i.x,i.y,i.width,i.height)),null!==t.ib&&(Ao(t,e,t.ib,!0,!1,a,i),t.ib instanceof ms&&t.ib.type===Bs?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Td(t.ib)):e.fillRect(i.x,i.y,i.width,i.height)),t.Ei(e,n)}function Ao(t,e,n,i,a,r,o){if(null!==n){var s=1,h=1;if("string"==typeof n)i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===Cs)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{if(s=r.width,h=r.height,a&&(s=o.width,h=o.height),(r=e instanceof fs)&&n.de&&(n.type===Os||n.Hk===s&&n.Kt===h))var l=n.de;else{var u=0,d=0,c=0,f=0,g=0,p=0;if(p=g=0,a&&(g=o.x,p=o.y),u=n.start.x*s+n.start.offsetX,d=n.start.y*h+n.start.offsetY,c=n.end.x*s+n.end.offsetX,f=n.end.y*h+n.end.offsetY,u+=g,c+=g,d+=p,f+=p,n.type===Fs)l=e.createLinearGradient(u,d,c,f);else if(n.type===Bs)p=isNaN(n.endRadius)?Math.max(s,h)/2:n.endRadius,isNaN(n.startRadius)?(g=0,p=Math.max(s,h)/2):g=n.startRadius,l=e.createRadialGradient(u,d,g,c,f,p);else if(n.type===Os)try{l=e.createPattern(n.pattern,"repeat")}catch(t){l=null}if(n.type!==Os&&null!==(a=n.colorStops))for(a=a.iterator;a.next();)l.addColorStop(a.key,a.value);if(r&&(n.de=l,null!==l&&(n.Hk=s,n.Kt=h),null===l&&n.type===Os&&-1!==n.Hk)){n.Hk=-1;var m=t.diagram;null!==m&&-1===n.Hk&&v((function(){m.uf()}),600)}}i?e.fillStyle=l:e.strokeStyle=l}}}function jo(t){if(0!=(2048&t.H)==!0){var e=t.tb;if(e.reset(),!t.vb.o()||!t.pc.o())return void Yo(t,!1);if(e.translate(t.vb.x-t.pc.x,t.vb.y-t.pc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;Do(t,e,n.x,n.y,n.width,n.height)}Yo(t,!1),Ho(t,!0)}0!=(4096&t.H)==!0&&(null===(e=t.panel)?(t.Eh.set(t.tb),t.Tk=t.scale,Ho(t,!1)):null!==e.rd&&((n=t.Eh).reset(),e.Zd()?n.multiply(e.Eh):null!==e.panel&&n.multiply(e.panel.Eh),n.multiply(t.tb),t.Tk=t.scale*e.Tk,Ho(t,!1)))}function Do(t,e,n,i,a,r){if(1!==t.scale&&e.scale(t.scale),0!==t.angle){var o=ue;t.vg()&&t.locationSpot.gb()&&(o=t.locationSpot);var s=ft.alloc();if(t instanceof jl&&t.locationObject!==t)for(i=(n=t.locationObject).naturalBounds,s.rk(i.x,i.y,i.width,i.height,o),n.Qf.ta(s),s.offset(-n.measuredBounds.x,-n.measuredBounds.y),o=n.panel;null!==o&&o!==t;)o.Qf.ta(s),s.offset(-o.measuredBounds.x,-o.measuredBounds.y),o=o.panel;else s.rk(n,i,a,r,o);e.rotate(t.angle,s.x,s.y),ft.free(s)}}function zo(t){if(!1===qo(t)){var e=t.panel;null!==e?e.s():t.vg()&&(null!==(e=t.diagram)&&(e.Dd.add(t),t instanceof eu&&t.ed(),e.cc())),Wo(t,!0)}}function Go(t,e){var n=t.stretch,i=t.panel;return null!==i&&i.type===ah.Table?Eo(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):null!==i&&i.type===ah.Auto&&i.zb()===t?Ro(t,Br,e):n===jr?null!==i?i.type===ah.Spot&&i.zb()===t?Ro(t,Br,e):Ro(t,(n=i.defaultStretch)===jr?Or:n,e):Ro(t,Or,e):Ro(t,n,e)}function Eo(t,e,n,i){var a=t.stretch;if(a!==jr)return Ro(t,a,i);var r=a=null;switch(e.stretch){case zr:r=!0;break;case Br:r=!0}switch(n.stretch){case Dr:a=!0;break;case Br:a=!0}return e=t.panel.defaultStretch,null===a&&(a=e===Dr||e===Br),null===r&&(r=e===zr||e===Br),Ro(t,!0===a&&!0===r?Br:!0===a?Dr:!0===r?zr:Or,i)}function Ro(t,e,n){if(n)return e;if(e===Or)return Or;if((n=t.desiredSize).o())return Or;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===Dr)return Or;if(e===Br)return zr}else{if(e===zr)return Or;if(e===Br)return Dr}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===zr)return Or;if(e===Br)return Dr}else{if(e===Dr)return Or;if(e===Br)return zr}return e}function Io(t,e){t.H=e?512|t.H:-513&t.H}function _o(t){return 0!=(1024&t.H)}function Vo(t,e){t.H=e?1024|t.H:-1025&t.H}function Yo(t,e){t.H=e?2048|t.H:-2049&t.H}function Ho(t,e){t.H=e?4096|t.H:-4097&t.H}function Xo(t){return 0!=(8192&t.H)}function Uo(t,e){t.H=e?8192|t.H:-8193&t.H}function qo(t){return 0!=(16384&t.H)}function Wo(t,e){t.H=e?16384|t.H:-16385&t.H}function Ko(t){var e=t.part;if(e instanceof eu&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||au(e,t)}}function Jo(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof ah?t instanceof eu?t.ed():t.ym(t,(function(t){Ko(t)})):Ko(t))}function Zo(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i=null,a=null;if("function"==typeof t)a=t;else if("string"==typeof t){var r=es.J(t);"function"==typeof r?k(i=r(n=M(arguments)))||w('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):a=g.go[t]}if(null===i&&(null!=a&&a.constructor||w("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),i=new a),a=1,i instanceof va&&1<n.length){r=i;var o=n[1];("string"==typeof o||o instanceof HTMLDivElement)&&(mo(r,o),a++)}for(;a<n.length;a++)void 0===(r=n[a])?w("Undefined value at argument "+a+" for object being constructed by GraphObject.make: "+i):$o(i,r);return i}function $o(t,e){if("string"==typeof e)if(t instanceof Vh)t.text=e;else if(t instanceof Oh)t.figure=e;else if(t instanceof pl)t.source=e;else if(t instanceof ah)null!==(e=Mh.J(e))&&(t.type=e);else if(t instanceof ms){var n=U(ms,e);null!==n?t.type=n:w("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof We?null!==(e=U(We,e))&&(t.type=e):t instanceof un&&(null!==(e=U(un,e))&&(t.type=e));else if(e instanceof Mo)t instanceof ah||w("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof Nh){var i;e.isRow&&"function"==typeof t.getRowDefinition?i=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(i=t.getColumnDefinition(e.index)),i instanceof Nh?i.Vl(e):w("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof X)"function"==typeof t.fb&&t.fb(e);else if(e instanceof Hs)t.type=e;else if(e instanceof Cc)t instanceof Mo||t instanceof Nh?t.bind(e):w("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof ln)t instanceof We?t.figures.add(e):w("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof un)t instanceof ln?t.segments.add(e):w("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof bd)t instanceof va||t instanceof pu?t.layout=e:w("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)$o(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof ms){for(var a in n=new W,e)i=parseFloat(a),isNaN(i)?n[a]=e[a]:t.addColorStop(i,e[a]);Wa(t,n)}else if(t instanceof Nh){for(n in void 0!==e.row?((null==(a=e.row)||1/0===a||isNaN(a)||0>a)&&w("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+a),t.isRow=!0,t.index=a):void 0!==e.column&&((null==(a=e.column)||1/0===a||isNaN(a)||0>a)&&w("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+a),t.isRow=!1,t.index=a),a=new W,e)"row"!==n&&"column"!==n&&(a[n]=e[n]);Wa(t,a)}else Wa(t,e);else w('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Qo(t,e){es.add(t,e)}function ts(t,e,n){void 0===n&&(n=null);var i=t[1];if("function"==typeof n?n(i):"string"==typeof i)return t.splice(1,1),i;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}va.className="Diagram",va.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=g.document.getElementById(t)),e instanceof HTMLDivElement&&e.C instanceof va?e.C:null},va.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},va.None=Wr,va.Uniform=Kr,va.UniformToFill=Jr,va.CycleAll=Zr,va.CycleNotDirected=$r,va.CycleNotDirectedFast=Qr,va.CycleNotUndirected=to,va.CycleDestinationTree=eo,va.CycleSourceTree=no,va.DocumentScroll=io,va.InfiniteScroll=ao,va.TreeParentCollapsed=ro,va.AllParentsCollapsed=oo,va.AnyParentsCollapsed=so,go.className="DiagramHelper",c.Object.defineProperties(vo.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.u},set:function(t){this.u=t}}}),vo.className="DraggingInfo",yo.className="DraggingNodeInfoPair",wo.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new jt(NaN,NaN).freeze(),this.gridSnapCellSpot=oe,this.gridSnapOrigin=new ft(NaN,NaN).freeze(),this.iz=this.dragsTree=this.dragsLink=!1,this.hz=!0},d(So,va),So.className="Palette",d(Po,va),Po.prototype.computePixelRatio=function(){return 1},Po.prototype.hc=function(){if(null===this.Ia&&w("No div specified"),null===this.Da&&w("No canvas specified"),!(this.Da instanceof rs)&&(Dl(this.box),this.nc)){var t=this.$f;if(null!==t&&!t.animationManager.isAnimating){Za(this);var e=t.grid;null===e||!e.visible||isNaN(e.width)||isNaN(e.height)||(ur(t,e=Et.alloc().assign(this.viewportBounds).Jc(t.viewportBounds)),Et.free(e),Ha(t));var n=this.Da;e=this.Yc;var i=this.yu,a=this.Yx;i.width=n.width,i.height=n.height,e.Rc(!0),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),(i=this.tb).reset(),1!==this.scale&&i.scale(this.scale),0===this.position.x&&0===this.position.y||i.translate(-this.position.x,-this.position.y),e.scale(this.Mb,this.Mb),e.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),i=this.ir;for(var r=this.viewportBounds,o=(t=t.Pa.j).length,s=0;s<o;s++){var h=t[s],l=i;if(h.visible&&0!==h.lb&&(void 0===l&&(l=!0),l||!h.isTemporary)){1!==h.lb&&(e.globalAlpha=h.lb),l=this.scale;for(var u=(h=h.Fa.j).length,d=0;d<u;d++){var c=h[d],f=c.actualBounds;f.Ic(r)&&(f.width*l>this.oe||f.height*l>this.oe?c.hc(e,this):pa(e,c))}e.globalAlpha=1}}for(a.drawImage(n.Ga,0,0),a=(n=this.Pa.j).length,i=0;i<a;i++)n[i].hc(e,this);this.nc=this.ci=!1}}},Po.prototype.computeBounds=function(){var t=this.$f;if(null===t)return Kt;var e=t.documentBounds.copy();return e.Jc(t.viewportBounds),e},Po.prototype.mx=function(){var t;!0!==this.nc&&(this.nc=!0,(t=this).ob||t.Yb||!1!==t.qd||(t.qd=!0,g.requestAnimationFrame((function(){if(t.qd&&!t.Yb&&(t.qd=!1,null!==t.Ia)){if(t.Yb=!0,Ha(t),t.documentBounds.o()||mr(t,t.computeBounds()),null===t.Ia&&w("No div specified"),null===t.Da&&w("No canvas specified"),Dl(t.box),t.nc){var e=t.$f;if(null!==e&&!e.animationManager.isAnimating&&!e.animationManager.rb){e=t.Yc;var n=t.yu;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.Da.width,t.Da.height),e.drawImage(n.Ga,0,0),(n=t.tb).reset(),1!==t.scale&&n.scale(t.scale),0===t.position.x&&0===t.position.y||n.translate(-t.position.x,-t.position.y),e.scale(t.Mb,t.Mb),e.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy);for(var i=(n=t.Pa.j).length,a=0;a<i;a++)n[a].hc(e,t);t.ci=!1,t.nc=!1}}t.Yb=!1}}))))},Po.prototype.lq=function(t,e,n,i){this.ob||(Ja(this),this.R(),Ka(this),this.Xa(),bo(this),this.ye.scale=n,this.ye.position.x=t.x,this.ye.position.y=t.y,this.ye.bounds.assign(t),this.ye.ox=i,this.aa("ViewportBoundsChanged",this.ye,t))},c.Object.defineProperties(Po.prototype,{observed:{get:function(){return this.$f},set:function(t){var e=this.$f;t instanceof Po&&w("Overview.observed Diagram may not be an Overview itself: "+t),e!==t&&(null!==e&&(this.remove(this.box),e.mm("ViewportBoundsChanged",this.Gm),e.mm("DocumentBoundsChanged",this.Em),e.mm("InvalidateDraw",this.Fm),e.mm("AnimationFinished",this.Dm)),this.$f=t,null!==t&&(t.Oj("ViewportBoundsChanged",this.Gm),t.Oj("DocumentBoundsChanged",this.Em),t.Oj("InvalidateDraw",this.Fm),t.Oj("AnimationFinished",this.Dm),this.add(this.box),bo(this)),this.Xa(),this.g("observed",e,t))}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),bo(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.ir},set:function(t){this.ir!==t&&(this.ir=t,this.uf())}}}),Po.className="Overview",d(xo,Rn),xo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay))&&(null===this.findDraggablePart()&&(n=e.viewportBounds,this.l=new ft(n.width/2,n.height/2),t=t.firstInput.documentPoint,e.position=new ft(t.x-this.l.x,t.y-this.l.y)),!0)},xo.prototype.doActivate=function(){this.l=null,Rn.prototype.doActivate.call(this)},xo.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.l){var i=t.firstInput.documentPoint;n=n.location,this.l=new ft(i.x-n.x,i.y-n.y)}t=t.lastInput.documentPoint,e.position=new ft(t.x-this.l.x,t.y-this.l.y)}}},xo.className="OverviewDraggingTool",ko.prototype.toString=function(){return"CommandHandler"},ko.prototype.hb=function(t){this.C=t},ko.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=_?e.meta:e.control,i=e.shift,a=e.alt,r=e.key;!n||"C"!==r&&"Insert"!==r?n&&"X"===r||i&&"Del"===r?this.canCutSelection()&&this.cutSelection():n&&"V"===r||i&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===r||a&&i&&"Backspace"===r?this.canRedo()&&this.redo():n&&"Z"===r||a&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===r?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===r?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===r?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===r?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===r?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===r?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===r?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===r?this.canScrollToPart()&&this.scrollToPart():"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===r?this.canResetZoom()&&this.resetZoom():i&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():n&&!i&&"G"===r?this.canGroupSelection()&&this.groupSelection():n&&i&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},ko.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},ko.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof Fn&&t.allowSelect&&t.Qp(),null!==e&&e.doCancel()},ko.prototype.canStopCommand=function(){return!0},ko.prototype.selectAll=function(){var t=this.diagram;t.R();try{t.currentCursor="wait",t.aa("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.aa("ChangedSelection",t.selection),t.currentCursor=""}},ko.prototype.canSelectAll=function(){return this.diagram.allowSelect},ko.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.Aa("Delete"),t.aa("ChangingSelection",t.selection),t.aa("SelectionDeleting",t.selection);for(var e=new nt,n=t.selection.iterator;n.next();)$l(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,(function(t){return t.canDelete()}));t.qt(e,!0),t.aa("SelectionDeleted",e)}finally{t.aa("ChangedSelection",t.selection),t.Za("Delete"),t.currentCursor=""}},ko.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},ko.prototype.copySelection=function(){var t=this.diagram,e=new nt;for(t=t.selection.iterator;t.next();)$l(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,(function(t){return t.canCopy()}));this.copyToClipboard(e)},ko.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},ko.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},ko.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},ko.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)Ur=null,qr="";else{n=e.model;var i=!1,a=!1,r=null;try{n.fm()&&(i=n.Xj,n.Xj=this.copiesParentKey),n.dk()&&(a=n.Wj,n.Wj=this.copiesGroupKey),r=e.Yj(t,null,!0)}finally{n.fm()&&(n.Xj=i),n.dk()&&(n.Wj=a),(n=new tt).addAll(r),Ur=n,qr=e.model.dataFormat}}e.aa("ClipboardChanged",n)},ko.prototype.pasteFromClipboard=function(){var t=new nt,e=Ur;if(null===e)return t;var n=this.diagram;if(qr!==n.model.dataFormat)return t;var i=n.model,a=!1,r=!1,o=null;try{i.fm()&&(a=i.Xj,i.Xj=this.copiesParentKey),i.dk()&&(r=i.Wj,i.Wj=this.copiesGroupKey),o=n.Yj(e,n,!1)}finally{for(i.fm()&&(i.Xj=a),i.dk()&&(i.Wj=r),e=o.iterator;e.next();)n=e.value,i=e.key,n.location.o()||(i.location.o()?n.location=i.location:!n.position.o()&&i.position.o()&&(n.position=i.position)),t.add(n)}return t},ko.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.Aa("Paste"),e.aa("ChangingSelection",e.selection);var n=this.pasteFromClipboard();0<n.count&&dr(e);for(var i=n.iterator;i.next();)i.value.isSelected=!0;if(e.aa("ChangedSelection",e.selection),null!==t){var a=e.computePartsBounds(e.selection);if(a.o())nr(e,this.computeEffectiveCollection(e.selection,e.Mk),new ft(t.x-a.centerX,t.y-a.centerY),e.Mk,!1)}e.aa("ClipboardPasted",n)}finally{e.Za("Paste"),e.currentCursor=""}},ko.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Ur||0===Ur.count||qr!==t.model.dataFormat)},ko.prototype.undo=function(){this.diagram.undoManager.undo()},ko.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canUndo())},ko.prototype.redo=function(){this.diagram.undoManager.redo()},ko.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canRedo())},ko.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Wr&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},ko.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Wr&&(!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom)},ko.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Wr&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},ko.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Wr&&(!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom)},ko.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},ko.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},ko.prototype.zoomToFit=function(){var t=this.diagram,e=t.scale,n=t.position;e===this.Eu&&!isNaN(this.eu)&&t.documentBounds.A(this.Du)?(t.scale=this.eu,t.position=this.zw,this.Eu=NaN,this.Du=Kt):(this.eu=e,this.zw=n.copy(),t.zoomToFit(),this.Eu=t.scale,this.Du=t.documentBounds.copy())},ko.prototype.canZoomToFit=function(){return this.diagram.allowZoom},ko.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(null===t){try{null!==this.fg&&(this.fg.next()?t=this.fg.value:this.fg=null)}catch(t){this.fg=null}null===t&&(0<e.highlighteds.count?this.fg=e.highlighteds.iterator:0<e.selection.count&&(this.fg=e.selection.iterator),null!==this.fg&&this.fg.next()&&(t=this.fg.value))}if(null!==t){var n=e.animationManager;n.Ti("Scroll To Part");var i=this.scrollToPartPause;if(0<i){var a=function t(e,n,i){if(n.isVisible())return i;if(n instanceof tu)t(e,n.adornedPart,i);else if(n instanceof wu){var a=n.fromNode;null!==a&&t(e,a,i),null!==(n=n.toNode)&&t(e,n,i)}else n instanceof eu&&(null!==(a=n.labeledLink)&&t(e,a,i),null!==(a=n.rg())&&(a.isTreeExpanded||a.wasTreeExpanded||i.push(a),t(e,a,i))),null!==(n=n.containingGroup)&&(n.isSubGraphExpanded||n.wasSubGraphExpanded||i.push(n),t(e,n,i));return i}(this,t,[t]),r=function(){e.Aa();for(var t=a.pop();0<a.length&&t instanceof eu&&t.isTreeExpanded&&(!(t instanceof pu)||t.isSubGraphExpanded);)t=a.pop();0<a.length?(t instanceof jl&&e.Gv(t.actualBounds),t instanceof eu&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof pu&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof jl&&e.Ju(t.actualBounds),e.mm("LayoutCompleted",o)),e.Za("Scroll To Part")},o=function(){v(r,(n.isEnabled?n.duration:0)+i)};e.Oj("LayoutCompleted",o),r()}else{var s=e.position.copy();e.Ju(t.actualBounds),s.Qa(e.position)&&n.vd()}}},ko.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof jl)&&((0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&(t.allowHorizontalScroll&&t.allowVerticalScroll))},ko.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Aa("Collapse Tree"),e.animationManager.Ti("Collapse Tree");var n=new tt;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof eu&&a.isTreeExpanded&&(a.collapseTree(),n.add(a))}e.aa("TreeCollapsed",n)}finally{e.Za("Collapse Tree")}},ko.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof eu&&t.isTreeExpanded))return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof eu&&e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},ko.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Aa("Expand Tree"),e.animationManager.Ti("Expand Tree");var n=new tt;if(null===t||t.isTreeExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof eu&&!a.isTreeExpanded&&(a.expandTree(),n.add(a))}}else t.expandTree(),n.add(t);e.aa("TreeExpanded",n)}finally{e.Za("Expand Tree")}},ko.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof eu)||t.isTreeExpanded)return!1;if(0<t.Xp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof eu&&!e.isTreeExpanded&&0<e.Xp().count)return!0;return!1},ko.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.ek()){var n=this.archetypeGroupData;if(null!==n){var i=null;try{t.currentCursor="wait",t.Aa("Group"),t.aa("ChangingSelection",t.selection);for(var a=new tt,r=t.selection.iterator;r.next();){var o=r.value;o.bc()&&o.canGroup()&&a.add(o)}for(var s=new tt,h=a.iterator;h.next();){var l=h.value;r=!1;for(var u=a.iterator;u.next();)if(l.Vd(u.value)){r=!0;break}r||s.add(l)}if(0<s.count){var d=s.first().containingGroup;if(null!==d)for(;null!==d;){a=!1;for(var c=s.iterator;c.next();)if(!c.value.Vd(d)){a=!0;break}if(!a)break;d=d.containingGroup}if(n instanceof pu)yh(n),null!==(i=n.copy())&&t.add(i);else if(e.lv(n)){var f=e.copyNodeData(n);k(f)&&(e.kf(f),i=t.Gi(f))}if(null!==i){null!==d&&this.isValidMember(d,i)&&(i.containingGroup=d);for(var g=s.iterator;g.next();){var p=g.value;this.isValidMember(i,p)&&(p.containingGroup=i)}t.select(i)}}t.aa("ChangedSelection",t.selection),t.aa("SelectionGrouped",i)}finally{t.Za("Group"),t.currentCursor=""}}}},ko.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.ek()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.bc()&&e.canGroup())return!0}return!1},ko.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof wu)return!1;if(null!==t){if(t===e||t.Vd(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},ko.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.ek())try{e.currentCursor="wait",e.Aa("Ungroup"),e.aa("ChangingSelection",e.selection);var i=new tt;if(null!==t)i.add(t);else for(var a=e.selection.iterator;a.next();){var r=a.value;r instanceof pu&&r.canUngroup()&&i.add(r)}var o=new tt;if(0<i.count){e.Qp();for(var s=i.iterator;s.next();){var h=s.value;h.expandSubGraph();var l=h.containingGroup,u=null!==l&&null!==l.data?n.pa(l.data):void 0;o.addAll(h.memberParts);for(var d=o.iterator;d.next();){var c=d.value;if(c.isSelected=!0,!(c instanceof wu)){var f=c.data;null!==f?n.tt(f,u):c.containingGroup=l}}e.remove(h)}}e.aa("ChangedSelection",e.selection),e.aa("SelectionUngrouped",i,o)}finally{e.Za("Ungroup"),e.currentCursor=""}},ko.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.ek())return!1;if(null!==t){if(!(t instanceof pu))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pu&&e.canUngroup())return!0;return!1},ko.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=Lo(t).iterator;t.next();){var i=t.value;null!==i.containingGroup&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},ko.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Aa("Collapse SubGraph"),e.animationManager.Ti("Collapse SubGraph");var n=new tt;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof pu&&a.isSubGraphExpanded&&(a.collapseSubGraph(),n.add(a))}e.aa("SubGraphCollapsed",n)}finally{e.Za("Collapse SubGraph")}},ko.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof pu&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pu&&e.isSubGraphExpanded)return!0;return!1},ko.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.Aa("Expand SubGraph"),e.animationManager.Ti("Expand SubGraph");var n=new tt;if(null===t||t.isSubGraphExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var a=i.value;a instanceof pu&&!a.isSubGraphExpanded&&(a.expandSubGraph(),n.add(a))}}else t.expandSubGraph(),n.add(t);e.aa("SubGraphExpanded",n)}finally{e.Za("Expand SubGraph")}},ko.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof pu&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pu&&!e.isSubGraphExpanded)return!0;return!1},ko.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var i=e.selection.iterator;i.next();){var a=i.value;if(a.canEdit()){t=a;break}}if(null===t)return;t=t.Yl((function(t){return t instanceof Vh&&t.editable}))}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},ko.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Vh))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.Yl((function(t){return t instanceof Vh&&t.editable}))))return!0;return!1},ko.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var i=e.lastInput,a=null;t instanceof Mo?a=t.ma(ue):e.isMouseOverDiagram||(a=new ft((a=e.viewportBounds).x+a.width/2,a.y+a.height/2)),null!==a&&(i.viewPoint=e.wt(a),i.documentPoint=a,i.left=!1,i.right=!0,i.up=!0),e.currentTool=n,ji(n,!1,t)}},ko.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},ko.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),a=n.currentTool===i;if(void 0===e&&(e=a?i.dragOptions:n.Mk),i=new ct,null===t)return i;for(var r=t.iterator;r.next();)er(n,i,r.value,a,e);if(null!==n.draggedLink&&e.dragsLink)return i;for(r=t.iterator;r.next();)(t=r.value)instanceof wu&&(null===(e=t.fromNode)||i.contains(e)?null===(e=t.toNode)||i.contains(e)||i.remove(t):i.remove(t));return i},c.Object.defineProperties(ko.prototype,{diagram:{get:function(){return this.C}},copiesClipboardData:{get:function(){return this.u},set:function(t){this.u=t}},copiesConnectedLinks:{get:function(){return this.K},set:function(t){this.K=t}},deletesConnectedLinks:{get:function(){return this.Ub},set:function(t){this.Ub=t}},copiesTree:{get:function(){return this.Ma},set:function(t){this.Ma=t}},deletesTree:{get:function(){return this.Vb},set:function(t){this.Vb=t}},copiesParentKey:{get:function(){return this.La},set:function(t){this.La=t}},copiesGroupKey:{get:function(){return this.ba},set:function(t){this.ba=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.ki},set:function(t){this.ki=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Vc},set:function(t){1<t||w("zoomFactor must be larger than 1.0, not: "+t),this.Vc=t}},scrollToPartPause:{get:function(){return this.Kc},set:function(t){this.Kc=t}}}),ko.className="CommandHandler",wa=function(){return new ko},Mo.prototype.cloneProtected=function(t){t.H=6144|this.H,t.lb=this.lb,t.Ua=this.Ua,t.ib=this.ib,t.dc=this.dc,t.sa.assign(this.sa),t.Nc=this.Nc.I(),t.Sf=this.Sf.I(),t.Rf=this.Rf.I(),t.Qf=this.Qf.copy(),t.Ca=this.Ca,t.zc=this.zc,t.we=this.we,t.Vg=this.Vg.I(),t.pc.assign(this.pc),t.vb.assign(this.vb),t.qc.assign(this.qc),t.Qo=this.Qo,null!==this.P&&(t.P=this.P.copy()),t.wb=this.wb.I(),t.yk=this.yk.I(),t.cp=this.cp,t.ep=this.ep,t.Fg=this.Fg,t.Ym=this.Ym,t.tp=this.tp,t.ip=this.ip,t.yl=this.yl,t.zl=this.zl.I(),t.Al=this.Al,t.hn=this.hn,null!==this.O&&(t.O=this.O.copy()),t.bb=this.bb,t.Ek=this.Ek,null!==this.Th&&(t.Th=M(this.Th)),null!==this.kd&&(t.kd=this.kd.copy()),t.Cl=this.Cl},Mo.prototype.Pw=function(t){var e=this.Th;if(L(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.Th=e=[];e.push(t)},Mo.prototype.pf=function(t){t.Ro=null,t.Bj=null,t.s()},Mo.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Th)for(var e=0;e<this.Th.length;e++){var n=this.Th[e];t[n]=this[n]}return t},Mo.prototype.copy=function(){return this.clone()},(n=Mo.prototype).fb=function(t){t.classType===wu?0===t.name.indexOf("Orient")?this.segmentOrientation=t:w("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===Mo&&(this.stretch=t)},n.toString=function(){return B(this.constructor)+"#"+rt(this)},n.Hc=function(){if(null===this.P){var t=new Pd;t.Og=re,t.nh=re,t.Mg=10,t.lh=10,t.Ng=0,t.mh=0,this.P=t}},n.ab=function(t,e,n,i,a,r,o){var s=this.part;if(null!==s&&(s.pk(t,e,n,i,a,r,o),n===this&&t===xn&&_o(this)&&To(this,s,e),this instanceof ah&&n===s&&0!=(16777216&s.H)&&null!==s.data))for(n=(t=this.Y.j).length,i=0;i<n;i++)(a=t[i])instanceof ah&&dh(a,(function(t){null!==t.data&&0!=(16777216&t.H)&&t.Ea(e)}))},n.Ps=function(t){return this.Ek===t?this:null},n.g=function(t,e,n){this.ab(xn,t,this,e,n)},n.hx=function(t,e,n){if(!1===this.pickable)return!1;var i=this.naturalBounds;return e=t.Ce(e),n?yt(t.x,t.y,0,0,0,i.height)<=e||yt(t.x,t.y,0,i.height,i.width,i.height)<=e||yt(t.x,t.y,i.width,i.height,i.width,0)<=e||yt(t.x,t.y,i.width,0,0,0)<=e:t.cd(0,0)<=e&&t.cd(0,i.height)<=e&&t.cd(i.width,0)<=e&&t.cd(i.width,i.height)<=e},n.Zd=function(){return!0},n.da=function(t){var e=ft.alloc();e.assign(t),this.transform.ta(e);var n=this.actualBounds;if(!n.o())return ft.free(e),!1;var i=this.diagram;if(null!==i&&i.Se){var a=i.bm("extraTouchThreshold"),r=i.bm("extraTouchArea"),o=r/2,s=this.naturalBounds,h=1/(i=this.De()*i.scale);if(s.width*i<a&&s.height*i<a)return t=qt(n.x-o*h,n.y-o*h,n.width+r*h,n.height+r*h,e.x,e.y),ft.free(e),t}return a=!1,(this instanceof tu||this instanceof Oh?qt(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.da(e))&&(a=!(this.kd&&!this.kd.da(e))&&(!(null===this.dc||!n.da(e))||(!(null===this.ib||!this.qc.da(t))||this.wh(t)))),ft.free(e),a},n.wh=function(t){var e=this.naturalBounds;return qt(0,0,e.width,e.height,t.x,t.y)},n.nf=function(t){if(0===this.angle)return this.actualBounds.nf(t);var e=this.naturalBounds;e=Et.allocAt(0,0,e.width,e.height);var n=this.transform,i=!1,a=ft.allocAt(t.x,t.y);return e.da(n.Ud(a))&&(a.h(t.x,t.bottom),e.da(n.Ud(a))&&(a.h(t.right,t.bottom),e.da(n.Ud(a))&&(a.h(t.right,t.y),e.da(n.Ud(a))&&(i=!0)))),ft.free(a),Et.free(e),i},n.vh=function(t,e){if(void 0===e)return t.nf(this.actualBounds);var n=this.naturalBounds,i=!1,a=ft.allocAt(0,0);return t.da(e.ta(a))&&(a.h(0,n.height),t.da(e.ta(a))&&(a.h(n.width,n.height),t.da(e.ta(a))&&(a.h(n.width,0),t.da(e.ta(a))&&(i=!0)))),ft.free(a),i},n.Ic=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Ic(this.actualBounds);var n=this.naturalBounds,i=ft.allocAt(0,0),a=ft.allocAt(0,n.height),r=ft.allocAt(n.width,n.height),o=ft.allocAt(n.width,0),s=!1;if(t.da(e.ta(i))||t.da(e.ta(a))||t.da(e.ta(r))||t.da(e.ta(o)))s=!0;else{n=Et.allocAt(0,0,n.width,n.height);var h=ft.allocAt(t.x,t.y);n.da(e.Ud(h))?s=!0:(h.h(t.x,t.bottom),n.da(e.Ud(h))?s=!0:(h.h(t.right,t.bottom),n.da(e.Ud(h))?s=!0:(h.h(t.right,t.y),n.da(e.Ud(h))&&(s=!0)))),ft.free(h),Et.free(n),!s&&(qe.Zs(t,i,a)||qe.Zs(t,a,r)||qe.Zs(t,r,o)||qe.Zs(t,o,i))&&(s=!0)}return ft.free(i),ft.free(a),ft.free(r),ft.free(o),s},n.ma=function(t,e){if(void 0===e&&(e=new ft),t instanceof Ve){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.rd.ta(e),e},n.Yp=function(t){void 0===t&&(t=new Et);var e=this.naturalBounds,n=this.rd,i=ft.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),Ut(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),Ut(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),Ut(t,i.x,i.y,0,0),ft.free(i),t},n.Li=function(){var t=this.rd;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},n.De=function(){if(0!=(4096&this.H)==!1)return this.Tk;var t=this.Ca;return null!==this.panel?t*this.panel.De():t},n.Vs=function(t,e){return void 0===e&&(e=new ft),e.assign(t),this.rd.Ud(e),e},n.Tc=function(t,e,n){return this.ck(t.x,t.y,e.x,e.y,n)},n.ck=function(t,e,n,i,a){var r=this.transform,o=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*o,h=-r.m12*o,l=-r.m21*o,u=r.m11*o,d=o*(r.m21*r.dy-r.m22*r.dx),c=o*(r.m12*r.dx-r.m11*r.dy);return null!==this.areaBackground?(r=this.actualBounds,qe.Tc(r.left,r.top,r.right,r.bottom,t,e,n,i,a)):(o=t*s+e*l+d,t=t*h+e*u+c,e=n*s+i*l+d,n=n*h+i*u+c,a.h(0,0),i=this.naturalBounds,n=qe.Tc(0,0,i.width,i.height,o,t,e,n,a),a.transform(r),n)},Mo.prototype.measure=function(t,e,n,i){if(!1!==Xo(this)){var a=this.Vg,r=a.right+a.left;a=a.top+a.bottom,t=Math.max(t-r,0),e=Math.max(e-a,0),n=Math.max((n||0)-r,0),i=Math.max((i||0)-a,0),r=this.angle,a=this.desiredSize;var o=0;this instanceof Oh&&(o=this.strokeWidth),90===r||270===r?(t=isFinite(a.height)?a.height+o:t,e=isFinite(a.width)?a.width+o:e):(t=isFinite(a.width)?a.width+o:t,e=isFinite(a.height)?a.height+o:e),a=n||0,o=i||0;var s=this instanceof ah;switch(Go(this,!0)){case Or:o=a=0,s&&(e=t=1/0);break;case Br:isFinite(t)&&t>n&&(a=t),isFinite(e)&&e>i&&(o=e);break;case Dr:isFinite(t)&&t>n&&(a=t),o=0,s&&(e=1/0);break;case zr:isFinite(e)&&e>i&&(o=e),a=0,s&&(t=1/0)}s=this.maxSize;var h=this.minSize;a>s.width&&h.width<s.width&&(a=s.width),o>s.height&&h.height<s.height&&(o=s.height),n=Math.max(a/this.scale,h.width),i=Math.max(o/this.scale,h.height),s.width<n&&(n=Math.min(h.width,n)),s.height<i&&(i=Math.min(h.height,i)),t=Math.min(s.width,t),e=Math.min(s.height,e),t=Math.max(n,t),e=Math.max(i,e),90!==r&&270!==r||(r=t,t=e,e=r,r=n,n=i,i=r),this.pc.ha(),this.hm(t,e,n,i),this.pc.freeze(),this.pc.o()||w("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.pc.toString()),Uo(this,!1)}},Mo.prototype.hm=function(){},Mo.prototype.vg=function(){return!1},Mo.prototype.arrange=function(t,e,n,i,a){this.fl();var r=Et.alloc();r.assign(this.vb),this.vb.ha(),!1===qo(this)?this.vb.h(t,e,n,i):this.uh(t,e,n,i),this.vb.freeze(),this.kd=void 0===a?null:a,n=!1,void 0!==a?n=!0:(null===(a=this.panel)||a.type!==ah.TableRow&&a.type!==ah.TableColumn||(a=a.panel),null!==a&&(a=a.qc,i=this.measuredBounds,null!==this.areaBackground&&(i=this.vb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=a.width+.05&&0<=e+.05&&n<=a.height+.05),this instanceof Vh&&(t=this.naturalBounds,this.Qr>t.height||this.metrics.maxLineWidth>t.width))&&(n=!0)),this.H=n?256|this.H:-257&this.H,this.vb.o()||w("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.vb.toString()),this.kt(r,this.vb),Wo(this,!1),Et.free(r)},(n=Mo.prototype).uh=function(){},n.kt=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||Wl(n,!0),this.R(),Vt(t,e)||(n.zh(),this.Fo(n)))},n.Fo=function(t){null!==this.portId&&(Wl(t,!0),t instanceof eu&&au(t,this))},n.hc=function(t,e){if(this.visible){var n=this instanceof ah&&(this.type===ah.TableRow||this.type===ah.TableColumn),i=this.vb;if(n||0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)){var a=this.opacity;if(0!==a){var r=1;if(1!==a&&(r=t.globalAlpha,t.globalAlpha=r*a),!this.bx(t,e))if(n)Oo(this,t,e);else{this instanceof wu&&this.hk(!1),n=this.transform;var o=this.panel;0!=(4096&this.H)==!0&&jo(this);var s=this.part,h=!1,l=0;if(s&&e.Ee("drawShadows")&&(h=s.isShadowed)){var u=s.ui;l=Math.max(u.y,u.x)*e.scale*e.Mb}if(!(u=e.nj)){var d,c=this.naturalBounds,f=(u=this.Eh).m11,g=u.m21,p=u.dx,m=u.m12,v=u.m22,y=u.dy,w=d=0;u=d*f+w*g+p;var S=d*m+w*v+y,P=(d=c.width+l)*f+(w=0)*g+p;d=d*m+w*v+y,w=Math.min(u,P);var b=Math.min(S,d),x=Math.max(u+0,P)-w,k=Math.max(S+0,d)-b;u=w,S=b,P=(d=c.width+l)*f+(w=c.height+l)*g+p,d=d*m+w*v+y,w=Math.min(u,P),b=Math.min(S,d),x=Math.max(u+x,P)-w,k=Math.max(S+k,d)-b,u=w,S=b,P=(d=0)*f+(w=c.height+l)*g+p,d=d*m+w*v+y,w=Math.min(u,P),b=Math.min(S,d),x=Math.max(u+x,P)-w,k=Math.max(S+k,d)-b,u=w,S=b,c=(l=e.viewportBounds).x,f=l.y,u=!(u>l.$+c||c>x+u||S>l.Z+f||f>k+S)}if(u){if(u=0!=(256&this.H),t.clipInsteadOfFill&&(u=!1),this instanceof Vh&&(t.font=this.font),u){if(S=o.Zd()?o.naturalBounds:o.actualBounds,null!==this.kd?(x=(c=this.kd).x,k=c.y,l=c.width,c=c.height):(x=Math.max(i.x,S.x),k=Math.max(i.y,S.y),l=Math.min(i.right,S.right)-x,c=Math.min(i.bottom,S.bottom)-k),x>i.width+i.x||i.x>S.width+S.x)return void(1!==a&&(t.globalAlpha=r));t.save(),t.beginPath(),t.rect(x,k,l,c),t.clip()}if(this.vg()){if(!s.isVisible())return void(1!==a&&(t.globalAlpha=r));h&&(S=s.ui,t.Ov(S.x*e.scale*e.Mb,S.y*e.scale*e.Mb,s.Od),ds(t),t.shadowColor=s.Jj)}!0===this.shadowVisible?ds(t):!1===this.shadowVisible&&us(t),s=this.naturalBounds,null!==this.dc&&(Ao(this,t,this.dc,!0,!0,s,i),this.dc instanceof ms&&this.dc.type===Bs?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.Td(this.dc)):t.fillRect(i.x,i.y,i.width,i.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),h&&(null!==o&&0!=(512&o.H)||null!==o&&(o.type===ah.Auto||o.type===ah.Spot)&&o.zb()!==this)&&null===this.shadowVisible&&us(t),null!==this.ib&&(x=S=0,k=(l=this.naturalBounds).width,l=l.height,c=0,this instanceof Oh&&(S=(l=this.qa.bounds).x,x=l.y,k=l.width,l=l.height,c=this.strokeWidth),Ao(this,t,this.ib,!0,!1,s,i),this.ib instanceof ms&&this.ib.type===Bs?(t.beginPath(),t.rect(S-c/2,x-c/2,k+c,l+c),t.Td(this.ib)):t.fillRect(S-c/2,x-c/2,k+c,l+c)),h&&(null!==this.ib||null!==this.dc||null!==o&&0!=(512&o.H)||null!==o&&(o.type===ah.Auto||o.type===ah.Spot)&&o.zb()!==this)?(Io(this,!0),null===this.shadowVisible&&us(t)):Io(this,!1),this.Ei(t,e),h&&0!=(512&this.H)==!0&&ds(t),this.vg()&&h&&us(t),u?(t.restore(),this instanceof ah?t.Rc(!0):t.Rc(!1)):n.bt()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))}}1!==a&&(t.globalAlpha=r)}}}},n.bx=function(){return!1},n.Ei=function(){},n.tg=function(t){if(t instanceof ah)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},n.tf=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.tf()},n.ug=function(){for(var t=this instanceof ah?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},n.s=function(t){if(void 0===t&&(t=!1),!0!==Xo(this)){Uo(this,!0),Wo(this,!0);var e=this.panel;null===e||t||e.s()}},n.dm=function(){!0!==Xo(this)&&(Uo(this,!0),Wo(this,!0))},n.fl=function(){0!=(2048&this.H)==!1&&(Yo(this,!0),Ho(this,!0))},n.jv=function(){Ho(this,!0)},n.R=function(){var t=this.part;null!==t&&t.R()},n.Ui=function(t){this.cg=t},n.Mv=function(){},n.Lv=function(t){return this.sa=t,zo(this),!0},n.vt=function(t,e){this.sa.h(t,e),this.fl()},n.bind=function(t){t.Qd=this;var e=this.Ii();null!==e&&vh(e)&&w("Cannot add a Binding to a template that has already been copied: "+t),null===this.bb&&(this.bb=new tt),this.bb.add(t)},n.Ii=function(){for(var t=this instanceof ah?this:this.panel;null!==t;){if(null!==t.Rh)return t;t=t.panel}return null},n.Nv=function(t){Wa(this,t)},c.Object.defineProperties(Mo.prototype,{shadowVisible:{get:function(){return this.Cl},set:function(t){var e=this.Cl;e!==t&&(this.Cl=t,this.R(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.O?this.O.An:null},set:function(t){No(this);var e=this.O.An;e!==t&&(this.O.An=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Al},set:function(t){var e=this.Al;e!==t&&(this.Al=t,this.s(),this.g("segmentOrientation",e,t),t===Vu&&(this.angle=0))}},segmentIndex:{get:function(){return this.ip},set:function(t){t=Math.round(t);var e=this.ip;e!==t&&(this.ip=t,this.s(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.yl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.yl;e!==t&&(this.yl=t,this.s(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.zl},set:function(t){var e=this.zl;e.A(t)||(this.zl=t=t.I(),this.s(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(this.we=t,this.s(),this.g("stretch",e,t))}},name:{get:function(){return this.Ua},set:function(t){var e=this.Ua;e!==t&&(this.Ua=t,null!==this.part&&(this.part.wj=null),this.g("name",e,t))}},opacity:{get:function(){return this.lb},set:function(t){var e=this.lb;e!==t&&((0>t||1<t)&&P(t,"0 <= value <= 1",Mo,"opacity"),this.lb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,null!==t&&null!==e&&t.R(El(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.H)},set:function(t){var e=0!=(1&this.H);e!==t&&(this.H^=1,this.g("visible",e,t),null!==(e=this.panel)?e.s():this.vg()&&this.Lb(t),this.R(),Jo(this))}},pickable:{get:function(){return 0!=(2&this.H)},set:function(t){var e=0!=(2&this.H);e!==t&&(this.H^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.H)},set:function(t){var e=0!=(4&this.H);e!==t&&(this.H^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.H)},set:function(t){var e=0!=(8&this.H);e!==t&&(this.H^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.H)},set:function(t){var e=0!=(16&this.H);e!==t&&(this.H^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.H)},set:function(t){var e=0!=(32&this.H);e!==t&&(this.H^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.H)},set:function(t){var e=0!=(64&this.H);e!==t&&(this.H^=64,this.s(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.H)},set:function(t){var e=0!=(128&this.H);e!==t&&(this.H^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.dc},set:function(t){var e=this.dc;e!==t&&(null!==t&&Ns(t,"GraphObject.areaBackground"),t instanceof ms&&t.freeze(),this.dc=t,this.R(),this.g("areaBackground",e,t))}},background:{get:function(){return this.ib},set:function(t){var e=this.ib;e!==t&&(null!==t&&Ns(t,"GraphObject.background"),t instanceof ms&&t.freeze(),this.ib=t,this.R(),this.g("background",e,t))}},part:{get:function(){if(this.vg())return this;if(null!==this.Bj)return this.Bj;var t;for(t=this.panel;t;){if(t instanceof jl)return this.Bj=t;t=t.panel}return null}},svg:{get:function(){return this.As},set:function(t){this.As=t}},panel:{get:function(){return this.cg}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.sa},set:function(t){var e=t.x,n=t.y,i=this.sa,a=i.x,r=i.y;(a===e||isNaN(a)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))?this.Mv():(t=t.I(),this.Lv(t,i)&&this.g("position",i,t))}},actualBounds:{get:function(){return this.vb}},scale:{get:function(){return this.Ca},set:function(t){var e=this.Ca;e!==t&&(0>=t&&w("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.Ca=t,this.s(),this.g("scale",e,t))}},angle:{get:function(){return this.zc},set:function(t){var e=this.zc;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.zc=t,Jo(this),this.s(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Nc},set:function(t){var e=t.width,n=t.height,i=this.Nc,a=i.width,r=i.height;(a===e||isNaN(a)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))||(this.Nc=t=t.I(),this.s(),this instanceof Oh&&this.ac(),this.g("desiredSize",i,t),_o(this)&&(null!==(t=this.part)&&(To(this,t,"width"),To(this,t,"height"))))}},width:{get:function(){return this.Nc.width},set:function(t){var e=this.Nc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Nc,this.Nc=t=new jt(t,this.Nc.height).freeze(),this.s(),this instanceof Oh&&this.ac(),this.g("desiredSize",e,t),_o(this)&&(null!==(t=this.part)&&To(this,t,"width")))}},height:{get:function(){return this.Nc.height},set:function(t){var e=this.Nc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Nc,this.Nc=t=new jt(this.Nc.width,t).freeze(),this.s(),this instanceof Oh&&this.ac(),this.g("desiredSize",e,t),_o(this)&&(null!==(t=this.part)&&To(this,t,"height")))}},minSize:{get:function(){return this.Sf},set:function(t){var e=this.Sf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Sf=t,this.s(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.Rf},set:function(t){var e=this.Rf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Rf=t,this.s(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.pc}},naturalBounds:{get:function(){return this.qc}},margin:{get:function(){return this.Vg},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.Vg;e.A(t)||(this.Vg=t=t.I(),this.s(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.H)==!0&&jo(this),this.tb}},rd:{get:function(){return 0!=(4096&this.H)==!0&&jo(this),this.Eh}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.A(t)||(t.jc()&&!t.Kb()&&w("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.wb=t=t.I(),zo(this),this.g("alignment",e,t))}},column:{get:function(){return this.Fg},set:function(t){t=Math.round(t);var e=this.Fg;e!==t&&(0>t&&P(t,">= 0",Mo,"column"),this.Fg=t,this.s(),this.g("column",e,t))}},columnSpan:{get:function(){return this.Ym},set:function(t){t=Math.round(t);var e=this.Ym;e!==t&&(1>t&&P(t,">= 1",Mo,"columnSpan"),this.Ym=t,this.s(),this.g("columnSpan",e,t))}},row:{get:function(){return this.cp},set:function(t){t=Math.round(t);var e=this.cp;e!==t&&(0>t&&P(t,">= 0",Mo,"row"),this.cp=t,this.s(),this.g("row",e,t))}},rowSpan:{get:function(){return this.ep},set:function(t){t=Math.round(t);var e=this.ep;e!==t&&(1>t&&P(t,">= 1",Mo,"rowSpan"),this.ep=t,this.s(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.tp},set:function(t){var e=this.tp;e!==t&&(this.tp=t,this.s(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.yk},set:function(t){var e=this.yk;e.A(t)||(this.yk=t=t.I(),this.s(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Qo},set:function(t){var e=this.Qo;if(e!==t){var n=this.part;null===n||n instanceof eu||(w("Cannot set portID on a Link: "+t),n=null),null!==e&&null!==n&&du(n,this),this.Qo=t,null!==t&&null!==n&&(n.yh=!0,uu(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.P?this.P.nh:re},set:function(t){this.Hc();var e=this.P.nh;e.A(t)||(t=t.I(),this.P.nh=t,this.g("toSpot",e,t),Ko(this))}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.lh:10},set:function(t){this.Hc();var e=this.P.lh;e!==t&&(0>t&&P(t,">= 0",Mo,"toEndSegmentLength"),this.P.lh=t,this.g("toEndSegmentLength",e,t),Ko(this))}},toShortLength:{get:function(){return null!==this.P?this.P.mh:0},set:function(t){this.Hc();var e=this.P.mh;e!==t&&(this.P.mh=t,this.g("toShortLength",e,t),Ko(this))}},toLinkable:{get:function(){return null!==this.P?this.P.Bp:null},set:function(t){this.Hc();var e=this.P.Bp;e!==t&&(this.P.Bp=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.P?this.P.Cp:1/0},set:function(t){this.Hc();var e=this.P.Cp;e!==t&&(0>t&&P(t,">= 0",Mo,"toMaxLinks"),this.P.Cp=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Og:re},set:function(t){this.Hc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g("fromSpot",e,t),Ko(this))}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Mg:10},set:function(t){this.Hc();var e=this.P.Mg;e!==t&&(0>t&&P(t,">= 0",Mo,"fromEndSegmentLength"),this.P.Mg=t,this.g("fromEndSegmentLength",e,t),Ko(this))}},fromShortLength:{get:function(){return null!==this.P?this.P.Ng:0},set:function(t){this.Hc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.g("fromShortLength",e,t),Ko(this))}},fromLinkable:{get:function(){return null!==this.P?this.P.Cn:null},set:function(t){this.Hc();var e=this.P.Cn;e!==t&&(this.P.Cn=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.P?this.P.Dn:1/0},set:function(t){this.Hc();var e=this.P.Dn;e!==t&&(0>t&&P(t,">= 0",Mo,"fromMaxLinks"),this.P.Dn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.O?this.O.Cf:null},set:function(t){No(this);var e=this.O.Cf;e!==t&&(this.O.Cf=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.O?this.O.Hf:null},set:function(t){No(this);var e=this.O.Hf;e!==t&&(this.O.Hf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.O?this.O.Df:null},set:function(t){No(this);var e=this.O.Df;e!==t&&(this.O.Df=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.O?this.O.Uf:null},set:function(t){No(this);var e=this.O.Uf;e!==t&&(this.O.Uf=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.O?this.O.Xf:null},set:function(t){No(this);var e=this.O.Xf;e!==t&&(this.O.Xf=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.O?this.O.Yf:null},set:function(t){No(this);var e=this.O.Yf;e!==t&&(this.O.Yf=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.O?this.O.Wf:null},set:function(t){No(this);var e=this.O.Wf;e!==t&&(this.O.Wf=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.O?this.O.Vf:null},set:function(t){No(this);var e=this.O.Vf;e!==t&&(this.O.Vf=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.O?this.O.so:null},set:function(t){No(this);var e=this.O.so;e!==t&&(this.O.so=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.O?this.O.to:null},set:function(t){No(this);var e=this.O.to;e!==t&&(this.O.to=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.O?this.O.Tf:null},set:function(t){No(this);var e=this.O.Tf;e!==t&&(this.O.Tf=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.O?this.O.Im:null},set:function(t){No(this);var e=this.O.Im;e!==t&&(this.O.Im=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.O?this.O.Jm:null},set:function(t){No(this);var e=this.O.Jm;e!==t&&(this.O.Jm=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.O?this.O.Km:null},set:function(t){No(this);var e=this.O.Km;e!==t&&(this.O.Km=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.O?this.O.Hm:null},set:function(t){No(this);var e=this.O.Hm;e!==t&&(this.O.Hm=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.O?this.O.jg:null},set:function(t){No(this);var e=this.O.jg;e!==t&&(this.O.jg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.O?this.O.Ef:null},set:function(t){No(this);var e=this.O.Ef;e!==t&&(this.O.Ef=t,this.g("contextMenu",e,t))}}}),Mo.prototype.setProperties=Mo.prototype.Nv,Mo.prototype.findTemplateBinder=Mo.prototype.Ii,Mo.prototype.bind=Mo.prototype.bind,Mo.prototype.isEnabledObject=Mo.prototype.ug,Mo.prototype.isVisibleObject=Mo.prototype.tf,Mo.prototype.isContainedBy=Mo.prototype.tg,Mo.prototype.getNearestIntersectionPoint=Mo.prototype.Tc,Mo.prototype.getLocalPoint=Mo.prototype.Vs,Mo.prototype.getDocumentScale=Mo.prototype.De,Mo.prototype.getDocumentAngle=Mo.prototype.Li,Mo.prototype.getDocumentBounds=Mo.prototype.Yp,Mo.prototype.getDocumentPoint=Mo.prototype.ma,Mo.prototype.intersectsRect=Mo.prototype.Ic,Mo.prototype.containedInRect=Mo.prototype.vh,Mo.prototype.containsRect=Mo.prototype.nf,Mo.prototype.containsPoint=Mo.prototype.da,Mo.prototype.raiseChanged=Mo.prototype.g,Mo.prototype.raiseChangedEvent=Mo.prototype.ab,Mo.prototype.addCopyProperty=Mo.prototype.Pw;var es=null;function ns(){this.An=this.Ef=this.jg=this.Hm=this.Km=this.Jm=this.Im=this.Tf=this.to=this.so=this.Vf=this.Wf=this.Yf=this.Xf=this.Uf=this.Df=this.Hf=this.Cf=null}function is(){this.Oa=[1,0,0,1,0,0]}function as(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Ww=[],this.pattern=null}function rs(t,e){this.ownerDocument=t=void 0===e?g.document:e,this.Dz="http://www.w3.org/2000/svg",void 0!==t&&(this.Ga=this.ub("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.Tp=null,this.context=new os(this)}function os(t){this.tk=t,this.svg=t.Ga,this.stack=[],this.wc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Od=this.pp=this.op=0,this.eq=null,this.path=[],this.bu=!1,this.gh=null,this.hh=0,this.Sd=new is,ls(this,1,0,0,1,0,0);var e=ot++,n=this.ub("clipPath",{id:"mainClip"+e});n.appendChild(this.ub("rect",{x:0,y:0,width:t.width,height:t.height})),this.gu=n,this.tk.Ga.appendChild(n),this.wc[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.Fz={}}function ss(t,e,n,i,a){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof as?n.fill=hs(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+e[1]+","+e[2]+","+e[3]+")",n["fill-opacity"]=e[4]),n.fill=t.fillStyle),n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof as?n.stroke=hs(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]),n.stroke=t.strokeStyle),n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),t="matrix("+(t=i.Oa)[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",void 0!==a&&(t+=a),n.transform=t}function hs(t,e){var n="GRAD"+ot++;if("linear"===e.type)var i=t.ub("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.ub("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var a=e.Ww;e=a.length;for(var r=[],o=0;o<e;o++){var s=a[o],h=s.color;s={offset:s.offset,"stop-color":h},/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),s["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",s["stop-opacity"]=h[4]),r.push(s)}for(r.sort((function(t,e){return t.offset>e.offset?1:-1})),a=0;a<e;a++)i.appendChild(t.ub("stop",r[a]));return t.svg.appendChild(i),"url(#"+n+")"}function ls(t,e,n,i,a,r,o){var s=new is;s.Oa=[e,n,i,a,r,o],ss(t,"g",e={},s),s=t.addElement("g",e),t.wc.push(s)}function us(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function ds(t){t.shadowOffsetX=t.op,t.shadowOffsetY=t.pp,t.shadowBlur=t.Od}function cs(t,e){this.ownerDocument=e=void 0===e?g.document:e,this.Tp=null,(e=e.createElement("canvas")).tabIndex=0,this.Ga=e,this.Ga.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new fs(e),e.C=t}function fs(t){t.getContext&&t.getContext("2d")||w("Browser does not support HTML Canvas Element"),this.W=t.getContext("2d"),this.Ht=this.Jt=this.It="",this.Xm=!1,this.Od=this.pp=this.op=0}Mo.className="GraphObject",es=new ct,Qo("Button",(function(){function t(t,e){return null!==t.diagram.Rb(t.documentPoint,(function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t}),(function(t){return t===e}))}var e=Zo(ah,ah.Auto,{isActionable:!0,enabledChanged:function(t,e){if(t instanceof ah){var n=t.$a("ButtonBorder");null!==n&&(n.fill=e?t._buttonFillNormal:t._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},Zo(Oh,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new Ve(0,0,2.76142374915397,2.761423749153969),spot2:new Ve(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(t,e){if(e.ug()&&e instanceof ah&&(t=e.$a("ButtonBorder"))instanceof Oh){var n=e._buttonFillOver;e._buttonFillNormal=t.fill,t.fill=n,n=e._buttonStrokeOver,e._buttonStrokeNormal=t.stroke,t.stroke=n}},e.mouseLeave=function(t,e){e.ug()&&e instanceof ah&&((t=e.$a("ButtonBorder"))instanceof Oh&&(t.fill=e._buttonFillNormal,t.stroke=e._buttonStrokeNormal))},e.actionDown=function(t,e){if(e.ug()&&e instanceof ah&&null!==e._buttonFillPressed&&0===t.button){var n=e.$a("ButtonBorder");if(n instanceof Oh){var i=(t=t.diagram).skipsUndoManager;t.skipsUndoManager=!0;var a=e._buttonFillPressed;e._buttonFillOver=n.fill,n.fill=a,a=e._buttonStrokePressed,e._buttonStrokeOver=n.stroke,n.stroke=a,t.skipsUndoManager=i}}},e.actionUp=function(e,n){if(n.ug()&&n instanceof ah&&null!==n._buttonFillPressed&&0===e.button){var i=n.$a("ButtonBorder");if(i instanceof Oh){var a=e.diagram,r=a.skipsUndoManager;a.skipsUndoManager=!0,t(e,n)?(i.fill=n._buttonFillOver,i.stroke=n._buttonStrokeOver):(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal),a.skipsUndoManager=r}}},e.actionCancel=function(e,n){if(n.ug()&&n instanceof ah&&null!==n._buttonFillPressed){var i=n.$a("ButtonBorder");if(i instanceof Oh){var a=e.diagram,r=a.skipsUndoManager;a.skipsUndoManager=!0,t(e,n)?(i.fill=n._buttonFillOver,i.stroke=n._buttonStrokeOver):(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal),a.skipsUndoManager=r}}},e.actionMove=function(e,n){if(n.ug()&&n instanceof ah&&null!==n._buttonFillPressed){var i=e.diagram;if(0===i.firstInput.button&&(i.currentTool.standardMouseOver(),t(e,n)&&(e=n.$a("ButtonBorder"))instanceof Oh)){var a=i.skipsUndoManager;i.skipsUndoManager=!0;var r=n._buttonFillPressed;e.fill!==r&&(e.fill=r),r=n._buttonStrokePressed,e.stroke!==r&&(e.stroke=r),i.skipsUndoManager=a}}},e})),Qo("TreeExpanderButton",(function(){var t=Zo("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Zo(Oh,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Ct},new Cc("figure","isTreeExpanded",(function(t,e){return e=e.panel,t?e._treeExpandedFigure:e._treeCollapsedFigure})).kq()),{visible:!1},new Cc("visible","isTreeLeaf",(function(t){return!t})).kq());return t.click=function(t,e){if((e=e.part)instanceof tu&&(e=e.adornedPart),e instanceof eu){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isTreeExpanded){if(!n.canCollapseTree(e))return}else if(!n.canExpandTree(e))return;t.handled=!0,e.isTreeExpanded?n.collapseTree(e):n.expandTree(e)}}},t})),Qo("SubGraphExpanderButton",(function(){var t=Zo("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Zo(Oh,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:Ct},new Cc("figure","isSubGraphExpanded",(function(t,e){return e=e.panel,t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure})).kq()));return t.click=function(t,e){if((e=e.part)instanceof tu&&(e=e.adornedPart),e instanceof pu){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isSubGraphExpanded){if(!n.canCollapseSubGraph(e))return}else if(!n.canExpandSubGraph(e))return;t.handled=!0,e.isSubGraphExpanded?n.collapseSubGraph(e):n.expandSubGraph(e)}}},t})),Qo("ToolTip",(function(){return Zo(tu,ah.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new ft(0,3),shadowBlur:5},Zo(Oh,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new Ve(0,0,4,6),spot2:new Ve(1,1,-4,-4)}))})),Qo("ContextMenu",(function(){return Zo(tu,ah.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new ft(0,3),shadowBlur:5},new Cc("background","",(function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"})))})),Qo("ContextMenuButton",(function(){var t=Zo("Button");t.stretch=Dr;var e=t.$a("ButtonBorder");return e instanceof Oh&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new Ve(0,0,2,3),e.spot2=new Ve(1,1,-2,-2)),t})),Qo("PanelExpanderButton",(function(t){var e=ts(t,"COLLAPSIBLE"),n=Zo("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},Zo(Oh,{name:"ButtonIcon",strokeWidth:2},new Cc("geometryString","visible",(function(t){return t?n._buttonExpandedFigure:n._buttonCollapsedFigure})).kq(e)));return(t=n.$a("ButtonBorder"))instanceof Oh&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(t,n){if(null!==(t=n.diagram)&&!t.isReadOnly){var i=n.Ii();null===i&&(i=n.part),null!==i&&(null!==(n=i.$a(e))&&(t.Aa("Collapse/Expand Panel"),n.visible=!n.visible,t.Za("Collapse/Expand Panel")))}},n})),Qo("CheckBoxButton",(function(t){var e=ts(t);return(t=Zo("Button",{desiredSize:new jt(14,14)},Zo(Oh,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Br,geometryStretch:Ar,visible:!1},""!==e?new Cc("visible",e).qx():[]))).click=function(t,n){if(n instanceof ah){var i=t.diagram;if(!(null===i||i.isReadOnly||""!==e&&i.model.isReadOnly)){t.handled=!0;var a=n.$a("ButtonIcon");i.Aa("checkbox"),a.visible=!a.visible,"function"==typeof n._doClick&&n._doClick(t,n),i.Za("checkbox")}}},t})),Qo("CheckBox",(function(t){t=Zo("CheckBoxButton",t=ts(t),{name:"Button",isActionable:!1,margin:new $t(0,1,0,0)});var e=Zo(ah,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e})),Mo.None=Or=new X(Mo,"None",0),Mo.Default=jr=new X(Mo,"Default",0),Mo.Vertical=zr=new X(Mo,"Vertical",4),Mo.Horizontal=Dr=new X(Mo,"Horizontal",5),Mo.Fill=Br=new X(Mo,"Fill",3),Mo.Uniform=Ar=new X(Mo,"Uniform",1),Mo.UniformToFill=Gr=new X(Mo,"UniformToFill",2),Mo.FlipVertical=Er=new X(Mo,"FlipVertical",1),Mo.FlipHorizontal=Rr=new X(Mo,"FlipHorizontal",2),Mo.FlipBoth=Ir=new X(Mo,"FlipBoth",3),Mo.make=Zo,Mo.getBuilders=function(){var t,e=new ct;for(t in es)if(t!==t.toLowerCase()){var n=es.J(t);"function"==typeof n&&e.add(t,n)}return e.freeze(),e},Mo.defineBuilder=Qo,Mo.takeBuilderArgument=ts,ns.prototype.copy=function(){var t=new ns;return t.Cf=this.Cf,t.Hf=this.Hf,t.Df=this.Df,t.Uf=this.Uf,t.Xf=this.Xf,t.Yf=this.Yf,t.Wf=this.Wf,t.Vf=this.Vf,t.so=this.so,t.to=this.to,t.Tf=this.Tf,t.Im=this.Im,t.Jm=this.Jm,t.Km=this.Km,t.Hm=this.Hm,t.jg=this.jg,t.Ef=this.Ef,t.An=this.An,t},ns.className="GraphObjectEventHandlers",is.prototype.copy=function(){var t=new is;return t.Oa[0]=this.Oa[0],t.Oa[1]=this.Oa[1],t.Oa[2]=this.Oa[2],t.Oa[3]=this.Oa[3],t.Oa[4]=this.Oa[4],t.Oa[5]=this.Oa[5],t},is.prototype.translate=function(t,e){this.Oa[4]+=this.Oa[0]*t+this.Oa[2]*e,this.Oa[5]+=this.Oa[1]*t+this.Oa[3]*e},is.prototype.scale=function(t,e){this.Oa[0]*=t,this.Oa[1]*=t,this.Oa[2]*=e,this.Oa[3]*=e},is.className="STransform",as.prototype.addColorStop=function(t,e){this.Ww.push({offset:t,color:e})},as.className="SGradient",rs.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=i+"px",this.Ga.setAttributeNS(null,"width",n+"px"),this.Ga.setAttributeNS(null,"height",i+"px"),this.Ga.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.gu.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.gu.firstElementChild.setAttributeNS(null,"height",i+"px"),!0)},rs.prototype.ub=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.Dz,t),k(e))for(var i in e)t.setAttributeNS("href"===i?"http://www.w3.org/1999/xlink":"",i,e[i]);return void 0!==n&&(t.textContent=n),t},rs.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},rs.prototype.focus=function(){this.Ga.focus()},rs.prototype.ax=function(){this.ownerDocument=null},c.Object.defineProperties(rs.prototype,{width:{get:function(){return this.Ga.width.baseVal.value},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height.baseVal.value},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),rs.className="SVGSurface",(n=os.prototype).reset=function(){this.stack=[],this.wc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.Od=this.pp=this.op=0,this.eq=null,this.path=[],this.Sd=new is,ls(this,1,0,0,1,0,0);var t=ot++,e=this.ub("clipPath",{id:"mainClip"+t});e.appendChild(this.ub("rect",{x:0,y:0,width:this.tk.width,height:this.tk.height})),this.gu=e,this.tk.Ga.appendChild(e),this.wc[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},n.arc=function(t,e,n,i,a,r,o,s){var h=2*Math.PI,l=h-1e-6,u=n*Math.cos(i),d=n*Math.sin(i),c=t+u,f=e+d,g=r?0:1;i=r?i-a:a-i,(1e-6<Math.abs(o-c)||1e-6<Math.abs(s-f))&&this.path.push(["L",c,+f]),0>i&&(i=i%h+h),i>l?(this.path.push(["A",n,n,0,1,g,t-u,e-d]),this.path.push(["A",n,n,0,1,g,c,f])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),g,t+n*Math.cos(a),e+n*Math.sin(a)])},n.beginPath=function(){this.path=[]},n.bezierCurveTo=function(t,e,n,i,a,r){this.path.push(["C",t,e,n,i,a,r])},n.clearRect=function(){},n.clip=function(){this.addPath("clipPath",this.path,this.Sd),this.addPath("clipPath",this.path,new is)},n.closePath=function(){this.path.push(["z"])},n.createLinearGradient=function(t,e,n,i){var a=new as("linear");return a.x1=t,a.y1=e,a.x2=n,a.y2=i,a},n.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.Fz;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+ot++,a={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.ub("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"})).appendChild(this.ub("image",a)),this.svg.appendChild(t),n[e]=i,"url(#"+i+")"},n.createRadialGradient=function(t,e,n,i,a,r){var o=new as("radial");return o.x1=t,o.y1=e,o.r1=n,o.x2=i,o.y2=a,o.r2=r,o},n.drawImage=function(t,e,n,i,a,r,o,s,h){var l="";t instanceof HTMLCanvasElement&&(l=t.toDataURL()),t instanceof HTMLImageElement&&(l=t.getAttribute("src"));var u=t instanceof HTMLImageElement?t.naturalWidth:t.width,d=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===i&&(r=e,o=n,s=i=u,h=a=d),i=i||0,a=a||0,r=r||0,o=o||0,s=s||0,h=h||0,l={x:0,y:0,width:u||i,height:d||a,href:l,preserveAspectRatio:"xMidYMid slice"},qe.ca(i,s)&&qe.ca(a,h)||(l.preserveAspectRatio="none"),t="",h/=a,0===r&&0===o||(t+=" translate("+r+", "+o+")"),1===(s/=i)&&1===h||(t+=" scale("+s+", "+h+")"),0===e&&0===n||(t+=" translate("+-e+", "+-n+")"),0===e&&0===n&&i===u&&a===d||(r="CLIP"+ot++,(o=this.ub("clipPath",{id:r})).appendChild(this.ub("rect",{x:e,y:n,width:i,height:a})),this.svg.appendChild(o),l["clip-path"]="url(#"+r+")"),ss(this,"image",l,this.Sd,t),this.addElement("image",l)},n.fill=function(){this.addPath("fill",this.path,this.Sd)},n.Td=function(){this.clipInsteadOfFill?this.clip():this.fill()},n.fillRect=function(t,e,n,i){ss(this,"fill",t={x:(t=[t,e,n,i])[0],y:t[1],width:t[2],height:t[3]},this.Sd),this.addElement("rect",t)},n.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),ss(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Sd),this.addElement("text",e,t[0])},n.lineTo=function(t,e){this.path.push(["L",t,e])},n.moveTo=function(t,e){this.path.push(["M",t,e])},n.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},n.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},n.restore=function(){this.Sd=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},n.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Sd.copy())},n.setTransform=function(t,e,n,i,a,r){1===t&&0===e&&0===n&&1===i&&0===a&&0===r||ls(this,t,e,n,i,a,r)},n.scale=function(t,e){this.Sd.scale(t,e)},n.translate=function(t,e){this.Sd.translate(t,e)},n.transform=function(){},n.stroke=function(){this.addPath("stroke",this.path,this.Sd)},n.Xi=function(){this.clipInsteadOfFill||this.stroke()},n.ub=function(t,e,n){return this.tk.ub(t,e,n)},n.addElement=function(t,e,n){return t=this.ub(t,e,n),0<this.wc.length?this.wc[this.wc.length-1].appendChild(t):this.svg.appendChild(t),this.eq=t},n.addPath=function(t,e,n){for(var i=[],a=0;a<e.length;a++){var r=M(e[a]),o=[r.shift()];if("A"===o[0])o.push(r.shift()+","+r.shift(),r.shift(),r.shift()+","+r.shift(),r.shift()+","+r.shift());else for(;r.length;)o.push(r.shift()+","+r.shift());i.push(o.join(" "))}e={d:i.join(" ")},"stroke"===t&&this.bu&&(e["stroke-dasharray"]=this.gh.toString(),e["stroke-dashoffset"]=this.hh),ss(this,t,e,n),"clipPath"===t?(t="CLIP"+ot++,(n=this.ub("clipPath",{id:t})).appendChild(this.ub("path",e)),this.svg.appendChild(n),0<this.wc.length&&this.wc[this.wc.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},n.tq=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t="SHADOW"+ot++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n=this.ub("feGaussianBlur",{in:"SourceAlpha",result:"blur",iA:this.shadowBlur/2}),i=this.ub("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),a=this.ub("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),r=this.ub("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),o=this.ub("feMerge",{});o.appendChild(this.ub("feMergeNode",{in:"offsetBlur"})),o.appendChild(this.ub("feMergeNode",{in:"SourceGraphic"})),e.appendChild(n),e.appendChild(i),e.appendChild(a),e.appendChild(r),e.appendChild(o),0<this.wc.length&&this.wc[this.wc.length-1].setAttributeNS(null,"filter","url(#"+t+")")}},n.Ov=function(t,e,n){this.op=t,this.pp=e,this.Od=n},n.Os=function(t,e){this.bu=!0,this.gh=t,this.hh=e},n.Ms=function(){this.bu=!1},n.Rc=function(){},n.Fx=function(){},os.prototype.rotate=function(){},os.prototype.getImageData=function(){return null},os.prototype.measureText=function(){return null},os.className="SVGContext",va.prototype.ht=function(t){var e=new rs(this,g.document);void 0===t&&(t=new W);var n=this;return Cr(this,(function(t,i){return t=null!==(t=Fr(n,t,"SVG",e))?t.svg:null,"function"==typeof i?(i(t),null):t}),t)},va.prototype.makeSvg=va.prototype.ht,va.prototype.nv=function(t){return this.ht(t)},va.prototype.makeSVG=va.prototype.nv,Mo.prototype.bx=function(t,e){if(!(t instanceof os))return!1;if(!this.visible)return!0;var n=null,i=t.eq;if(this instanceof ah&&(this.type===ah.TableRow||this.type===ah.TableColumn))return Oo(this,t,e),!0;var a=this.vb;if(0===a.width||0===a.height||isNaN(a.x)||isNaN(a.y))return!0;var r=this.transform,o=this.panel;0!=(4096&this.H)==!0&&jo(this);var s=0!=(256&this.H),h=!1;if(this instanceof Vh&&(t.font=this.font),s){if(h=o.Zd()?o.naturalBounds:o.actualBounds,null!==this.kd){var l=this.kd,u=l.x,d=l.y,c=l.width;l=l.height}else u=Math.max(a.x,h.x),d=Math.max(a.y,h.y),c=Math.min(a.right,h.right)-u,l=Math.min(a.bottom,h.bottom)-d;if(u>a.width+a.x||a.x>h.width+h.x||d>a.height+a.y||a.y>h.height+h.y)return!0;h=!0,ls(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(u,d,c,l),t.clip()}if(this.vg()&&!this.isVisible())return!0;if(t.Sd.Oa=[1,0,0,1,0,0],(this instanceof Vh&&1<this.lineCount||this instanceof Oh&&1<this.geometry.figures.length)&&ls(t,1,0,0,1,0,0),u=!1,this.vg()&&this.isShadowed&&e.Ee("drawShadows")&&(d=this.ui,t.Ov(d.x*e.scale*e.Mb,d.y*e.scale*e.Mb,this.Od),ds(t),t.shadowColor=this.Jj),d=!1,this.part&&e.Ee("drawShadows")&&(d=this.part.isShadowed),!0===this.shadowVisible?(ds(t),!1===u&&d&&(ls(t,1,0,0,1,0,0),t.tq(),u=!0)):!1===this.shadowVisible&&us(t),c=this.naturalBounds,null!==this.areaBackground&&(Ao(this,t,this.areaBackground,!0,!0,c,a),!1===u&&d&&(ls(t,1,0,0,1,0,0),t.tq(),u=!0),this.areaBackground instanceof ms&&this.areaBackground.type===Bs?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.Td(this.areaBackground)):t.fillRect(a.x,a.y,a.width,a.height)),this instanceof ah?ls(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):t.Sd.Oa=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],null!==this.background){!1===u&&d&&(ls(t,1,0,0,1,0,0),t.tq(),u=!0);var f=this.naturalBounds;l=r=0;var g=f.width;f=f.height;var p=0;this instanceof Oh&&(r=(f=this.geometry.bounds).x,l=f.y,g=f.width,f=f.height,p=this.strokeWidth),Ao(this,t,this.background,!0,!1,c,a),this.background instanceof ms&&this.background.type===Bs?(t.beginPath(),t.rect(r-p/2,l-p/2,g+p,f+p),t.Td(this.background)):t.fillRect(r-p/2,l-p/2,g+p,f+p)}return d&&(null!==this.background||null!==this.areaBackground||null!==o&&0!=(512&o.H)||null!==o&&(o.type===ah.Auto||o.type===ah.Spot)&&o.zb()!==this)?(Io(this,!0),null===this.shadowVisible&&us(t)):Io(this,!1),this.Ei(t,e),d&&0!=(512&this.H)==!0&&ds(t),this.vg()&&d&&us(t),s&&(t.restore(),h&&t.wc.pop()),this instanceof ah&&(n=t.wc.pop()),!0===u&&t.wc.pop(),(this instanceof Vh&&1<this.lineCount||this instanceof Oh&&1<this.geometry.figures.length)&&(n=t.wc.pop()),null!==t.tk.Tp&&(null===n&&(i===t.eq?(ls(t,1,0,0,1,0,0),n=t.wc.pop()):n=t.eq),t.tk.Tp(this,n)),this.svg=n,!0},cs.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0)},cs.prototype.toDataURL=function(t,e){return this.Ga.toDataURL(t,e)},cs.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},cs.prototype.focus=function(){this.Ga.focus()},cs.prototype.ax=function(){this.ownerDocument=this.Ga.C=null},c.Object.defineProperties(cs.prototype,{width:{get:function(){return this.Ga.width},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),cs.className="CanvasSurface",(n=fs.prototype).Fx=function(t){this.W.imageSmoothingEnabled=t},n.arc=function(t,e,n,i,a,r){this.W.arc(t,e,n,i,a,r)},n.beginPath=function(){this.W.beginPath()},n.bezierCurveTo=function(t,e,n,i,a,r){this.W.bezierCurveTo(t,e,n,i,a,r)},n.clearRect=function(t,e,n,i){this.W.clearRect(t,e,n,i)},n.clip=function(){this.W.clip()},n.closePath=function(){this.W.closePath()},n.createLinearGradient=function(t,e,n,i){return this.W.createLinearGradient(t,e,n,i)},n.createPattern=function(t,e){return this.W.createPattern(t,e)},n.createRadialGradient=function(t,e,n,i,a,r){return this.W.createRadialGradient(t,e,n,i,a,r)},n.drawImage=function(t,e,n,i,a,r,o,s,h){void 0===i?this.W.drawImage(t,e,n):this.W.drawImage(t,e,n,i,a,r,o,s,h)},n.fill=function(){this.W.fill()},n.fillRect=function(t,e,n,i){this.W.fillRect(t,e,n,i)},n.fillText=function(t,e,n){this.W.fillText(t,e,n)},n.getImageData=function(t,e,n,i){return this.W.getImageData(t,e,n,i)},n.lineTo=function(t,e){this.W.lineTo(t,e)},n.measureText=function(t){return this.W.measureText(t)},n.moveTo=function(t,e){this.W.moveTo(t,e)},n.quadraticCurveTo=function(t,e,n,i){this.W.quadraticCurveTo(t,e,n,i)},n.rect=function(t,e,n,i){this.W.rect(t,e,n,i)},n.restore=function(){this.W.restore()},fs.prototype.rotate=function(t){this.W.rotate(t)},(n=fs.prototype).save=function(){this.W.save()},n.setTransform=function(t,e,n,i,a,r){this.W.setTransform(t,e,n,i,a,r)},n.scale=function(t,e){this.W.scale(t,e)},n.stroke=function(){this.W.stroke()},n.transform=function(t,e,n,i,a,r){1===t&&0===e&&0===n&&1===i&&0===a&&0===r||this.W.transform(t,e,n,i,a,r)},n.translate=function(t,e){this.W.translate(t,e)},n.Td=function(t){if(t instanceof ms&&t.type===Bs){var e=t.Hk;(t=t.Kt)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Xm?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Xm?this.clip():this.fill()},n.Xi=function(){this.Xm||this.stroke()},n.Ov=function(t,e,n){this.op=t,this.pp=e,this.Od=n},n.Os=function(t,e){var n=this.W;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},n.Ms=function(){var t=this.W;void 0!==t.setLineDash&&(t.setLineDash(gs),t.lineDashOffset=0)},n.Rc=function(t){t&&(this.It=""),this.Ht=this.Jt=""},c.Object.defineProperties(fs.prototype,{fillStyle:{get:function(){return this.W.fillStyle},set:function(t){this.Ht!==t&&(this.Ht=this.W.fillStyle=t)}},font:{get:function(){return this.W.font},set:function(t){this.It!==t&&(this.It=this.W.font=t)}},globalAlpha:{get:function(){return this.W.globalAlpha},set:function(t){this.W.globalAlpha=t}},lineCap:{get:function(){return this.W.lineCap},set:function(t){this.W.lineCap=t}},lineDashOffset:{get:function(){return this.W.lineDashOffset},set:function(t){this.W.lineDashOffset=t}},lineJoin:{get:function(){return this.W.lineJoin},set:function(t){this.W.lineJoin=t}},lineWidth:{get:function(){return this.W.lineWidth},set:function(t){this.W.lineWidth=t}},miterLimit:{get:function(){return this.W.miterLimit},set:function(t){this.W.miterLimit=t}},shadowBlur:{get:function(){return this.W.shadowBlur},set:function(t){this.W.shadowBlur=t}},shadowColor:{get:function(){return this.W.shadowColor},set:function(t){this.W.shadowColor=t}},shadowOffsetX:{get:function(){return this.W.shadowOffsetX},set:function(t){this.W.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.W.shadowOffsetY},set:function(t){this.W.shadowOffsetY=t}},strokeStyle:{get:function(){return this.W.strokeStyle},set:function(t){this.Jt!==t&&(this.Jt=this.W.strokeStyle=t)}},textAlign:{get:function(){return this.W.textAlign},set:function(t){this.W.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.W.imageSmoothingEnabled},set:function(t){this.W.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.Xm},set:function(t){this.Xm=t}}});var gs=Object.freeze([]);function ps(){this.ba=this.u=this.K=this.l=0}function ms(t){Ys||(Ts(),Ys=!0),it(this),this.v=!1,void 0===t?(this.va=Cs,this.Gk="black"):"string"==typeof t?(this.va=Cs,this.Gk=t):(this.va=t,this.Gk="black"),(t=this.va)===Fs?(this.Gl=se,this.Uk=fe):this.Uk=this.Gl=t===Bs?ue:re,this.ys=0,this.kr=NaN,this.de=this.gs=this.ce=null,this.Kt=this.Hk=0}function vs(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?As:n,bs(t),Ps(e,n)}function ys(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?As:n,bs(t),Ps(-e,n)}function ws(t,e,n){bs(t),t=Rs.l;var i=Rs.K,a=Rs.u,r=Rs.ba;return bs(e),void 0===n&&(n=.5),"rgba("+Math.round((Rs.l-t)*n+t)+", "+Math.round((Rs.K-i)*n+i)+", "+Math.round((Rs.u-a)*n+a)+", "+Math.round((Rs.ba-r)*n+r)+")"}function Ss(t){return null===t?null:t instanceof ms?t.nx():(bs(t),128>(299*Rs.l+587*Rs.K+114*Rs.u)/1e3)}function Ps(t,e){switch(e){case As:var n=100*xs(Rs.l);e=100*xs(Rs.K);var i=100*xs(Rs.u);return _s.l=.4124564*n+.3575761*e+.1804375*i,_s.K=.2126729*n+.7151522*e+.072175*i,_s.u=.0193339*n+.119192*e+.9503041*i,_s.ba=Rs.ba,n=Ls(_s.l/Gs[0]),e=Ls(_s.K/Gs[1]),i=Ls(_s.u/Gs[2]),Vs.l=116*e-16,Vs.K=500*(n-e),Vs.u=200*(e-i),Vs.ba=_s.ba,Vs.l=Math.min(100,Math.max(0,Vs.l+100*t)),n=(t=(Vs.l+16)/116)-Vs.u/200,_s.l=Gs[0]*Ms(Vs.K/500+t),_s.K=Gs[1]*(Vs.l>zs*Ds?Math.pow(t,3):Vs.l/zs),_s.u=Gs[2]*Ms(n),_s.ba=Vs.ba,t=-.969266*_s.l+1.8760108*_s.K+.041556*_s.u,n=.0556434*_s.l+-.2040259*_s.K+1.0572252*_s.u,Rs.l=255*ks((3.2404542*_s.l+-1.5371385*_s.K+-.4985314*_s.u)/100),Rs.K=255*ks(t/100),Rs.u=255*ks(n/100),Rs.ba=_s.ba,Rs.l=Math.round(Rs.l),255<Rs.l?Rs.l=255:0>Rs.l&&(Rs.l=0),Rs.K=Math.round(Rs.K),255<Rs.K?Rs.K=255:0>Rs.K&&(Rs.K=0),Rs.u=Math.round(Rs.u),255<Rs.u?Rs.u=255:0>Rs.u&&(Rs.u=0),"rgba("+Rs.l+", "+Rs.K+", "+Rs.u+", "+Rs.ba+")";case js:e=Rs.l/255,i=Rs.K/255;var a=Rs.u/255,r=Math.max(e,i,a),o=Math.min(e,i,a),s=r-o;if(o=(r+o)/2,0===s)n=e=0;else{switch(r){case e:n=(i-a)/s%6;break;case i:n=(a-e)/s+2;break;case a:n=(e-i)/s+4}0>(n*=60)&&(n+=360),e=s/(1-Math.abs(2*o-1))}return Is.l=Math.round(n),Is.K=Math.round(100*e),Is.u=Math.round(100*o),Is.ba=Rs.ba,Is.u=Math.min(100,Math.max(0,Is.u+100*t)),"hsla("+Is.l+", "+Is.K+"%, "+Is.u+"%, "+Is.ba+")";default:return w("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function bs(t){Ys||(Ts(),Ys=!0);var e=Es;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,Rs.l=t[0],Rs.K=t[1],Rs.u=t[2],Rs.ba=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,Rs.l=0,Rs.K=0,Rs.u=0,Rs.ba=1)}}function xs(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ks(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Ls(t){return t>Ds?Math.pow(t,1/3):(zs*t+16)/116}function Ms(t){var e=t*t*t;return e>Ds?e:(116*t-16)/zs}function Ns(t,e){"string"!=typeof t&&(t instanceof ms||w("Value for "+e+" must be a color string or a Brush, not "+t))}function Ts(){Es=Xr?new cs(null).context:null}fs.className="CanvasSurfaceContext",ps.className="ColorNumbers",ms.prototype.copy=function(){var t=new ms;return t.va=this.va,t.Gk=this.Gk,t.Gl=this.Gl.I(),t.Uk=this.Uk.I(),t.ys=this.ys,t.kr=this.kr,null!==this.ce&&(t.ce=this.ce.copy()),t.gs=this.gs,t},(n=ms.prototype).freeze=function(){return this.v=!0,null!==this.ce&&this.ce.freeze(),this},n.ha=function(){return Object.isFrozen(this)&&w("cannot thaw constant: "+this),this.v=!1,null!==this.ce&&this.ce.ha(),this},n.fb=function(t){t.classType===ms&&(this.type=t)},n.toString=function(){var t="Brush(";if(this.type===Cs)t+=this.color;else if(t=this.type===Fs?t+"Linear ":this.type===Bs?t+"Radial ":this.type===Os?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},n.addColorStop=function(t,e){return this.v&&S(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&P(t,"0 <= loc <= 1",ms,"addColorStop:loc"),null===this.ce&&(this.ce=new ct),this.ce.add(t,e),this.va===Cs&&(this.type=Fs),this.de=null,this},n.xz=function(t,e){if(this.v&&S(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?As:e,this.type===Cs)bs(this.color),this.color=Ps(t,e);else if((this.type===Fs||this.type===Bs)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)bs(n.value),this.addColorStop(n.key,Ps(t,e));return this},n.wy=function(t,e){if(this.v&&S(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?As:e,this.type===Cs)bs(this.color),this.color=Ps(-t,e);else if((this.type===Fs||this.type===Bs)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)bs(n.value),this.addColorStop(n.key,Ps(-t,e));return this},n.nx=function(){if(this.type===Cs)return Ss(this.color);if((this.type===Fs||this.type===Bs)&&null!==this.colorStops){var t=this.colorStops;if(this.type===Bs)return Ss(t.first().value);if(null!==t.get(.5))return Ss(t.get(.5));if(2===t.count)return Ss(ws((t=t.Na())[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,a=1,r=1;e.next();){var o=e.key,s=Math.abs(.5-e.key);a>r&&s<a?(n=o,a=s):r>=a&&s<r&&(i=o,r=s)}return n>i&&(n=[i,i=n][0]),e=i-n,Ss(ws(t.get(n),t.get(i),1-a/e))}return!1},c.Object.defineProperties(ms.prototype,{type:{get:function(){return this.va},set:function(t){this.v&&S(this,t),this.va=t,this.start.jc()&&(t===Fs?this.start=se:t===Bs&&(this.start=ue)),this.end.jc()&&(t===Fs?this.end=fe:t===Bs&&(this.end=ue)),this.de=null}},color:{get:function(){return this.Gk},set:function(t){this.v&&S(this,t),this.Gk=t,this.de=null}},start:{get:function(){return this.Gl},set:function(t){this.v&&S(this,t),this.Gl=t.I(),this.de=null}},end:{get:function(){return this.Uk},set:function(t){this.v&&S(this,t),this.Uk=t.I(),this.de=null}},startRadius:{get:function(){return this.ys},set:function(t){this.v&&S(this,t),0>t&&P(t,">= zero",ms,"startRadius"),this.ys=t,this.de=null}},endRadius:{get:function(){return this.kr},set:function(t){this.v&&S(this,t),0>t&&P(t,">= zero",ms,"endRadius"),this.kr=t,this.de=null}},colorStops:{get:function(){return this.ce},set:function(t){this.v&&S(this,t),this.ce=t,this.de=null}},pattern:{get:function(){return this.gs},set:function(t){this.v&&S(this,t),this.gs=t,this.de=null}}}),ms.prototype.isDark=ms.prototype.nx,ms.prototype.darkenBy=ms.prototype.wy,ms.prototype.lightenBy=ms.prototype.xz,ms.prototype.addColorStop=ms.prototype.addColorStop;var Cs,Fs,Bs,Os,As,js,Ds=216/24389,zs=24389/27,Gs=[95.047,100,108.883],Es=null,Rs=new ps,Is=new ps,_s=new ps,Vs=new ps,Ys=!1;function Hs(){this.name="Base"}function Xs(){this.name="Base",this.name="Position"}function Us(){this.name="Base",this.name="Horizontal"}function qs(){this.name="Base",this.name="Vertical"}function Ws(){this.name="Base",this.name="Spot"}function Ks(){this.name="Base",this.name="Auto"}function Js(){this.name="Base",this.name="Table"}function Zs(){this.name="Base",this.name="TableRow"}function $s(){this.name="Base",this.name="TableColumn"}function Qs(){this.name="Base",this.name="Viewbox"}function th(){this.name="Base",this.name="Grid"}function eh(){this.name="Base",this.name="Link"}function nh(t,e,n,i){if(!1!==Xo(i)){var a=i.strokeWidth;0===a&&t instanceof tu&&t.type===ah.Link&&t.adornedObject instanceof Oh&&(a=t.adornedObject.strokeWidth),a*=i.Ca,t instanceof wu&&null!==t.qa?Co(i,(t=t.qa.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):t instanceof tu&&null!==t.adornedPart.qa?Co(i,(t=t.adornedPart.qa.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):Co(i,-a/2,-a/2,e+a,n+a),Uo(i,!1)}}function ih(){this.name="Base",this.name="Graduated"}function ah(t){Mo.call(this),this.va=void 0===t?ah.Position:t,null===this.va&&w("Panel type not specified or PanelLayout not loaded: "+t),this.Y=new tt,this.eb=ee,this.va===ah.Grid&&(this.isAtomic=!0),this.mn=Fe,this.Ff=jr,this.va===ah.Table&&rh(this),this.Hp=Ar,this.Kn=Ft,this.Ln=Pt,this.Hn=0,this.Gn=100,this.Jn=10,this.In=0,this.Rh=this.jb=this.Pg=this.ij=this.kj=null,this.Yn=NaN,this.je=this.fi=null,this.gl="category",this.Ed=null,this.kg=new Et(NaN,NaN,NaN,NaN),this.kh=this.fp=this.vi=null,this.Bg=""}function rh(t){t.ej=ee,t.Jg=1,t.Wh=null,t.Vh=null,t.Ig=1,t.Hg=null,t.Uh=null,t.sb=[],t.nb=[],t.Gj=Bh,t.cj=Bh,t.yi=0,t.hi=0}function oh(t,e,n,i){for(var a=i.length,r=t.actualBounds,o=t.naturalBounds,s=!0,h=0;h<a;h++){var l=i[h];if(void 0!==l)if(s)s=!1;else if(0!==l.actual){if(n){if(l.position>r.height)continue}else if(l.position>r.width)continue;var u=l.separatorStrokeWidth;isNaN(u)&&(u=n?t.Jg:t.Ig);var d=l.separatorStroke;if(null===d&&(d=n?t.Wh:t.Hg),0!==u&&null!==d){Ao(t,e,d,!1,!1,o,r),d=!1;var c=l.separatorDashArray;null===c&&(c=n?t.Vh:t.Uh),null!==c&&(d=!0,e.Os(c,0)),e.beginPath(),c=l.position+u,n?c>r.height&&(u-=c-r.height):c>r.width&&(u-=c-r.width),l=l.position+u/2,e.lineWidth=u,u=t.eb,n?(l+=u.top,c=r.width-u.right,e.moveTo(u.left,l),e.lineTo(c,l)):(l+=u.left,c=r.height-u.bottom,e.moveTo(l,u.top),e.lineTo(l,c)),e.stroke(),d&&e.Ms()}}}}function sh(t,e,n,i,a){for(var r=i.length,o=t.actualBounds,s=t.naturalBounds,h=0;h<r;h++){var l=i[h];if(void 0!==l&&null!==l.background&&l.coversSeparators!==a&&0!==l.actual){var u=n?o.height:o.width;if(!(l.position>u)){var d=l.tc(),c=l.separatorStrokeWidth;isNaN(c)&&(c=n?t.Jg:t.Ig);var f=l.separatorStroke;null===f&&(f=n?t.Wh:t.Hg),null===f&&(c=0),d-=c,(c=l.position+c)+(d+=l.actual)>u&&(d=u-c),0>=d||(u=t.eb,Ao(t,e,l.background,!0,!1,s,o),n?e.fillRect(u.left,c+u.top,o.width-(u.left+u.right),d):e.fillRect(c+u.left,u.top,d,o.height-(u.top+u.bottom)))}}}}function hh(t,e,n){if(0!=t%e)return!1;e=n.length;for(var i=0;i<e;i++)if(0==t%n[i])return!1;return!0}function lh(t){return"LineV"===t||"BarV"===t}function uh(t){return null!==t.part?t.part.locationObject:null}function dh(t,e){!function t(e,n,i){i(n);for(var a=(n=n.Y.j).length,r=0;r<a;r++){var o=n[r];o instanceof ah&&t(e,o,i)}}(t,t,e)}function ch(t,e){!function t(e,n,i){if(i(n),n instanceof ah)for(var a=(n=n.Y.j).length,r=0;r<a;r++)t(e,n[r],i)}(t,t,e)}function fh(t,e,n,i){for(var a=t.Y.j,r=a.length;r--;){var o=a[r];if(o.visible){var s=o.actualBounds,h=t.naturalBounds;s.x>h.width||s.y>h.height||0>s.x+s.width||0>s.y+s.height||(o instanceof ah&&fh(o,e,n,i),null!==e&&(o=e(o)),null===o||null!==n&&!n(o)||i.add(o))}}}function gh(t){var e=null;return t instanceof Oh&&((e=t.spot1)===Fe&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=oe),e}function ph(t){var e=null;return t instanceof Oh&&((e=t.spot2)===Fe&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=ge),e}function mh(t,e){t.H=e?16777216|t.H:-16777217&t.H}function vh(t){return null!==(t=t.Rh)&&t.v}function yh(t){var e=t.Rh;if(null===e)null!==t.data&&w("Template cannot have .data be non-null: "+t),t.Rh=e=new tt;else if(e.v)return;var n=new tt;mh(t,!1),t.ym(t,(function(t,i){var a=i.bb;if(null!==a)for(Vo(i,!1),a=a.iterator;a.next();){var r=a.value;r.mode===Oc&&Vo(i,!0);var o=r.sourceName;null!==o&&("/"===o&&mh(t,!0),null!==(o=Fc(r,t,i))&&(n.add(o),null===o.Fl&&(o.Fl=new tt),o.Fl.add(r))),e.add(r)}if(i instanceof ah&&i.type===ah.Table){if(0<i.sb.length)for(a=(t=i.sb).length,r=0;r<a;r++)if(void 0!==(o=t[r])&&null!==o.bb)for(var s=o.bb.iterator;s.next();){var h=s.value;h.Qd=o,h.yp=2,h.Nl=o.index,e.add(h)}if(0<i.nb.length)for(t=(i=i.nb).length,a=0;a<t;a++)if(void 0!==(r=i[a])&&null!==r.bb)for(o=r.bb.iterator;o.next();)(s=o.value).Qd=r,s.yp=1,s.Nl=r.index,e.add(s)}}));for(var i=n.iterator;i.next();){var a=i.value;if(null!==a.Fl){Vo(a,!0);for(var r=a.Fl.iterator;r.next();){var o=r.value;null===a.bb&&(a.bb=new tt),a.bb.add(o)}}a.Fl=null}for(i=e.iterator;i.next();)if(null!==(r=(a=i.value).Qd)){a.Qd=null;var s=a.targetProperty,h=s.indexOf(".");0<h&&r instanceof ah&&(o=s.substring(0,h),s=s.substr(h+1),null!==(h=r.$a(o))?(r=h,a.targetProperty=s):b('Warning: unable to find GraphObject named "'+o+'" for Binding: '+a.toString())),r instanceof Nh?(o=rt(r.panel),a.Yi=void 0===o?-1:o,r.panel.Ek=a.Yi):r instanceof Mo?(o=rt(r),a.Yi=void 0===o?-1:o,r.Ek=a.Yi):w("Unknown type of binding target: "+r)}e.freeze(),t instanceof jl&&t.bc()&&t.$b()}function wh(t){if(t.type===ah.Spot||t.type===ah.Auto)return Math.min(t.Y.length,1);if(t.type===ah.Link){for(var e=(t=t.Y).length,n=0;n<e;n++){var i=t.N(n);if(!(i instanceof Oh&&i.isPanelMain))break}return n}return t.type===ah.Table&&0<t.Y.length&&((t=t.Y.N(0)).isPanelMain&&t instanceof ah&&(t.type===ah.TableRow||t.type===ah.TableColumn))?1:0}function Sh(t,e,n){if(!(null==e||0>n)){var i=function(t,e){if(null===e)return"";if("function"==typeof(t=t.gl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Lc(e,t)}return void 0===t?"":"string"==typeof t?t:(w("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}(t,e),a=t.itemTemplateMap,r=null;null!==a&&(r=a.J(i)),null===r&&(kh||(kh=!0,b('No item template Panel found for category "'+i+'" on '+t),b("  Using default item template."),i=new ah,(a=new Vh).bind(new Cc("text","",O)),i.add(a),Lh=i),r=Lh),null!==(i=r)&&(yh(i),0!=(16777216&(i=i.copy()).H)&&(null!==(a=t.Ii())&&mh(a,!0)),"object"==typeof e&&(null===t.Ed&&(t.Ed=new ct),t.Ed.add(e,i)),a=n+wh(t),t.Ib(a,i),i.jb=e,Ph(t,a,n),i.jb=null,i.data=e)}}function Ph(t,e,n){for(t=t.Y;e<t.length;){var i=t.N(e);if(i instanceof ah){var a=e,r=n;i.type===ah.TableRow?i.row=a:i.type===ah.TableColumn&&(i.column=a),i.itemIndex=r}e++,n++}}function bh(t,e,n){var i=e.enabledChanged;if(null!==i&&i(e,n),e instanceof ah){i=(e=e.Y.j).length;for(var a=0;a<i;a++){var r=e[a];n&&r instanceof ah&&!r.isEnabled||bh(t,r,n)}}}function xh(t,e){Mh.add(t,e)}ms.className="Brush",ms.Solid=Cs=new X(ms,"Solid",0),ms.Linear=Fs=new X(ms,"Linear",1),ms.Radial=Bs=new X(ms,"Radial",2),ms.Pattern=Os=new X(ms,"Pattern",4),ms.Lab=As=new X(ms,"Lab",5),ms.HSL=js=new X(ms,"HSL",6),ms.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>i.length&&(i="0"+i),2>t.length&&(t="0"+t),"#"+e+i+t},ms.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;Ys||(Ts(),Ys=!0);var e=Es;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},ms.lighten=function(t){return vs(t)},ms.lightenBy=vs,ms.darken=function(t){return ys(t)},ms.darkenBy=ys,ms.mix=ws,ms.isDark=Ss,Hs.prototype.measure=function(){},Hs.prototype.Az=function(t,e,n,i,a){t.measure(e,n,i,a)},Hs.prototype.arrange=function(){},Hs.prototype.ly=function(t,e,n,i,a,r){t.arrange(e,n,i,a,r)},c.Object.defineProperties(Hs.prototype,{classType:{get:function(){return ah}}}),Hs.prototype.arrangeElement=Hs.prototype.ly,Hs.prototype.measureElement=Hs.prototype.Az,Hs.className="PanelLayout",d(Xs,Hs),Xs.prototype.measure=function(t,e,n,i,a,r,o){var s=i.length;t=uh(t);for(var h=0;h<s;h++){var l=i[h];if(l.visible||l===t){var u=l.margin,d=u.right+u.left;u=u.top+u.bottom,l.measure(e,n,r,o);var c=l.measuredBounds;d=Math.max(c.width+d,0),u=Math.max(c.height+u,0),c=l.position.x;var f=l.position.y;isFinite(c)||(c=0),isFinite(f)||(f=0),l instanceof Oh&&l.isGeometryPositioned&&(c-=l=l.strokeWidth/2,f-=l),Ut(a,c,f,d,u)}}},Xs.prototype.arrange=function(t,e,n){var i=e.length,a=t.padding;for(t=n.x-a.left,n=n.y-a.top,a=0;a<i;a++){var r=e[a],o=r.measuredBounds,s=r.margin,h=r.position.x,l=r.position.y;if(h=isNaN(h)?-t:h-t,l=isNaN(l)?-n:l-n,r instanceof Oh&&r.isGeometryPositioned){var u=r.strokeWidth/2;h-=u,l-=u}r.visible&&r.arrange(h+s.left,l+s.top,o.width,o.height)}},d(Us,Hs),Us.prototype.measure=function(t,e,n,i,a,r,o){var s=i.length;e=C(),r=uh(t);for(var h=0;h<s;h++){var l=i[h];if(l.visible||l===r){var u=Go(l,!1);if(u!==Or&&u!==Dr)e.push(l);else{l.measure(1/0,n,0,o),u=l.margin,l=l.measuredBounds;var d=Math.max(l.height+u.top+u.bottom,0);a.width+=Math.max(l.width+u.right+u.left,0),a.height=Math.max(a.height,d)}}}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==a.height&&(n=Math.min(a.height,t.maxSize.height)),t=0;t<i;t++)((h=e[t]).visible||h===r)&&(s=(u=h.margin).right+u.left,u=u.top+u.bottom,h.measure(1/0,n,0,o),h=h.measuredBounds,u=Math.max(h.height+u,0),a.width+=Math.max(h.width+s,0),a.height=Math.max(a.height,u));F(e)},Us.prototype.arrange=function(t,e,n){for(var i=e.length,a=t.padding,r=a.top,o=t.isOpposite,s=o?n.width:a.left,h=0;h<i;h++){var l=r,u=e[h];if(u.visible){var d=u.measuredBounds,c=u.margin,f=c.top+c.bottom,g=r+a.bottom,p=d.height,m=Go(u,!1);(isNaN(u.desiredSize.height)&&m===Br||m===zr)&&(p=Math.max(n.height-f-g,0)),f=p+f+g,(g=u.alignment).Kb()&&(g=t.defaultAlignment),g.gb()||(g=ue),o&&(s-=d.width+c.left+c.right),u.arrange(s+g.offsetX+c.left,l+g.offsetY+c.top+(n.height*g.y-f*g.y),d.width,p),o||(s+=d.width+c.left+c.right)}}},d(qs,Hs),qs.prototype.measure=function(t,e,n,i,a,r){var o=i.length;n=C();for(var s=uh(t),h=0;h<o;h++){var l=i[h];if(l.visible||l===s){var u=Go(l,!1);if(u!==Or&&u!==zr)n.push(l);else{var d=l.margin;u=d.right+d.left,d=d.top+d.bottom,l.measure(e,1/0,r,0),l=l.measuredBounds,Rt(a,Math.max(a.width,Math.max(l.width+u,0)),a.height+Math.max(l.height+d,0))}}}if(0!==(i=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==a.width&&(e=Math.min(a.width,t.maxSize.width)),t=0;t<i;t++)((h=n[t]).visible||h===s)&&(o=(l=h.margin).right+l.left,l=l.top+l.bottom,h.measure(e,1/0,r,0),h=h.measuredBounds,l=Math.max(h.height+l,0),a.width=Math.max(a.width,Math.max(h.width+o,0)),a.height+=l);F(n)}},qs.prototype.arrange=function(t,e,n){for(var i=e.length,a=t.padding,r=a.left,o=t.isOpposite,s=o?n.height:a.top,h=0;h<i;h++){var l=r,u=e[h];if(u.visible){var d=u.measuredBounds,c=u.margin,f=c.left+c.right,g=r+a.right,p=d.width,m=Go(u,!1);(isNaN(u.desiredSize.width)&&m===Br||m===Dr)&&(p=Math.max(n.width-f-g,0)),f=p+f+g,(g=u.alignment).Kb()&&(g=t.defaultAlignment),g.gb()||(g=ue),o&&(s-=d.height+c.bottom+c.top),u.arrange(l+g.offsetX+c.left+(n.width*g.x-f*g.x),s+g.offsetY+c.top,p,d.height),o||(s+=d.height+c.bottom+c.top)}}},d(Ws,Hs),Ws.prototype.measure=function(t,e,n,i,a,r,o){var s=i.length,h=t.zb(),l=h.margin,u=l.right+l.left,d=l.top+l.bottom;h.measure(e,n,r,o);var c=h.measuredBounds;r=c.width,o=c.height;for(var f=Math.max(r+u,0),g=Math.max(o+d,0),p=t.isClipping,m=Et.allocAt(-l.left,-l.top,f,g),v=!0,y=uh(t),w=0;w<s;w++){var S=i[w];if(S!==h&&(S.visible||S===y)){switch(f=(l=S.margin).right+l.left,g=l.top+l.bottom,c=Go(S,!1)){case Br:e=r,n=o;break;case Dr:e=r;break;case zr:n=o}S.measure(e,n,0,0),c=S.measuredBounds,f=Math.max(c.width+f,0),g=Math.max(c.height+g,0);var P=S.alignment;P.Kb()&&(P=t.defaultAlignment),P.gb()||(P=ue);var b=S.alignmentFocus;b.Kb()&&(b=ue);var x=null;if(S instanceof ah&&""!==S.Bg&&(S.arrange(0,0,c.width,c.height),(x=S.$a(S.Bg))===S&&(x=null)),null!==x){for(l=x.naturalBounds,c=x.margin,l=ft.allocAt(b.x*l.width-b.offsetX-c.left,b.y*l.height-b.offsetY-c.top);x!==S;)x.transform.ta(l),x=x.panel;S=P.x*r+P.offsetX-l.x,c=P.y*o+P.offsetY-l.y,ft.free(l)}else S=P.x*r+P.offsetX-(b.x*c.width+b.offsetX)-l.left,c=P.y*o+P.offsetY-(b.y*c.height+b.offsetY)-l.top;v?(v=!1,a.h(S,c,f,g)):Ut(a,S,c,f,g)}}switch(v?a.assign(m):p?a.hv(m.x,m.y,m.width,m.height):Ut(a,m.x,m.y,m.width,m.height),Et.free(m),(c=h.stretch)===jr&&(c=Go(h,!1)),c){case Or:return;case Br:if(!isFinite(e)&&!isFinite(n))return;break;case Dr:if(!isFinite(e))return;break;case zr:if(!isFinite(n))return}for(r=(c=h.measuredBounds).width,o=c.height,f=Math.max(r+u,0),g=Math.max(o+d,0),l=h.margin,m=Et.allocAt(-l.left,-l.top,f,g),e=0;e<s;e++)(n=i[e])===h||!n.visible&&n!==y||(f=(l=n.margin).right+l.left,g=l.top+l.bottom,c=n.measuredBounds,f=Math.max(c.width+f,0),g=Math.max(c.height+g,0),(u=n.alignment).Kb()&&(u=t.defaultAlignment),u.gb()||(u=ue),(n=n.alignmentFocus).Kb()&&(n=ue),v?(v=!1,a.h(u.x*r+u.offsetX-(n.x*c.width+n.offsetX)-l.left,u.y*o+u.offsetY-(n.y*c.height+n.offsetY)-l.top,f,g)):Ut(a,u.x*r+u.offsetX-(n.x*c.width+n.offsetX)-l.left,u.y*o+u.offsetY-(n.y*c.height+n.offsetY)-l.top,f,g));v?a.assign(m):p?a.hv(m.x,m.y,m.width,m.height):Ut(a,m.x,m.y,m.width,m.height),Et.free(m)},Ws.prototype.arrange=function(t,e,n){var i=e.length,a=t.zb(),r=a.measuredBounds,o=r.width;r=r.height;var s=t.padding,h=s.left;s=s.top;var l=h-n.x,u=s-n.y;a.arrange(l,u,o,r);for(var d=0;d<i;d++){var c=e[d];if(c!==a){var f=c.measuredBounds,g=f.width;f=f.height,(u=c.alignment).Kb()&&(u=t.defaultAlignment),u.gb()||(u=ue);var p=c.alignmentFocus;if(p.Kb()&&(p=ue),l=null,c instanceof ah&&""!==c.Bg&&((l=c.$a(c.Bg))===c&&(l=null)),null!==l){var m=l.naturalBounds;for(p=ft.allocAt(p.x*m.width-p.offsetX,p.y*m.height-p.offsetY);l!==c;)l.transform.ta(p),l=l.panel;l=u.x*o+u.offsetX-p.x,u=u.y*r+u.offsetY-p.y,ft.free(p)}else l=u.x*o+u.offsetX-(p.x*g+p.offsetX),u=u.y*r+u.offsetY-(p.y*f+p.offsetY);l-=n.x,u-=n.y,c.visible&&c.arrange(h+l,s+u,g,f)}}},d(Ks,Hs),Ks.prototype.measure=function(t,e,n,i,a,r,o){var s=i.length,h=t.zb(),l=h.margin,u=e,d=n,c=l.right+l.left,f=l.top+l.bottom;h.measure(e,n,r,o),l=h.measuredBounds;var g=0,p=null;h instanceof Oh&&(g=(p=h).strokeWidth*p.scale);var m=Math.max(l.width+c,0);l=Math.max(l.height+f,0);var v=gh(h),y=v.x*m+v.offsetX;v=v.y*l+v.offsetY;var w=ph(h),S=w.x*m+w.offsetX;for(w=w.y*l+w.offsetY,isFinite(e)&&(u=Math.max(Math.abs(y-S)-g,0)),isFinite(n)&&(d=Math.max(Math.abs(v-w)-g,0)),(g=jt.alloc()).h(0,0),t=uh(t),w=0;w<s;w++)(v=i[w])===h||!v.visible&&v!==t||(m=(l=v.margin).right+l.left,y=l.top+l.bottom,v.measure(u,d,0,0),l=v.measuredBounds,m=Math.max(l.width+m,0),l=Math.max(l.height+y,0),g.h(Math.max(m,g.width),Math.max(l,g.height)));if(1===s)a.width=m,a.height=l,jt.free(g);else{switch(v=gh(h),s=i=0,(w=ph(h)).x!==v.x&&w.y!==v.y&&(i=g.width/Math.abs(w.x-v.x),s=g.height/Math.abs(w.y-v.y)),jt.free(g),g=0,null!==p&&(g=p.strokeWidth*p.scale,jh(p)===Ar&&(i=s=Math.max(i,s))),i+=Math.abs(v.offsetX)+Math.abs(w.offsetX)+g,s+=Math.abs(v.offsetY)+Math.abs(w.offsetY)+g,(p=h.stretch)===jr&&(p=Go(h,!1)),p){case Or:o=r=0;break;case Br:isFinite(e)&&(i=e),isFinite(n)&&(s=n);break;case Dr:isFinite(e)&&(i=e),o=0;break;case zr:r=0,isFinite(n)&&(s=n)}h.dm(),h.measure(i,s,r,o),a.width=h.measuredBounds.width+c,a.height=h.measuredBounds.height+f}},Ks.prototype.arrange=function(t,e){var n=e.length,i=t.zb(),a=i.measuredBounds,r=Et.alloc();r.h(0,0,1,1);var o=i.margin,s=o.left;o=o.top;var h=t.padding,l=h.left;h=h.top,i.arrange(l+s,h+o,a.width,a.height);var u=gh(i),d=ph(i),c=u.y*a.height+u.offsetY,f=d.x*a.width+d.offsetX;for(d=d.y*a.height+d.offsetY,r.x=u.x*a.width+u.offsetX,r.y=c,Ut(r,f,d,0,0),r.x+=s+l,r.y+=o+h,a=0;a<n;a++)(s=e[a])!==i&&(l=s.measuredBounds,o=s.margin,h=Math.max(l.width+o.right+o.left,0),u=Math.max(l.height+o.top+o.bottom,0),(c=s.alignment).Kb()&&(c=t.defaultAlignment),c.gb()||(c=ue),h=r.width*c.x+c.offsetX-h*c.x+o.left+r.x,o=r.height*c.y+c.offsetY-u*c.y+o.top+r.y,s.visible&&(qt(r.x,r.y,r.width,r.height,h,o,l.width,l.height)?s.arrange(h,o,l.width,l.height):s.arrange(h,o,l.width,l.height,new Et(r.x,r.y,r.width,r.height))));Et.free(r)},d(Js,Hs),Js.prototype.measure=function(t,e,n,i,a,r,o){for(var s=i.length,h=C(),l=C(),u=0;u<s;u++){var d=i[u],c=d instanceof ah?d:null;if(null===c||c.type!==ah.TableRow&&c.type!==ah.TableColumn||!d.visible)h.push(d);else{l.push(c);for(var f=c.Y.j,g=f.length,p=0;p<g;p++){var m=f[p];c.type===ah.TableRow?m.row=d.row:c.type===ah.TableColumn&&(m.column=d.column),h.push(m)}}}0===(s=h.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var v=[],y=0;y<s;y++){var w=h[y];Uo(w,!0),Wo(w,!0),v[w.row]||(v[w.row]=[]),v[w.row][w.column]||(v[w.row][w.column]=[]),v[w.row][w.column].push(w)}F(h);var S=C(),P=C(),b=C(),x={count:0},k={count:0},L=e,M=n,N=t.sb;s=N.length;for(var T=0;T<s;T++){var B=N[T];void 0!==B&&(B.actual=0)}s=(N=t.nb).length;for(var O=0;O<s;O++)void 0!==(B=N[O])&&(B.actual=0);for(var A=v.length,j=0,D=0;D<A;D++)v[D]&&(j=Math.max(j,v[D].length));var z=Math.min(t.topIndex,A-1),G=Math.min(t.leftIndex,j-1),E=0;A=v.length;for(var R=uh(t),I=0;I<A;I++)if(v[I]){j=v[I].length;for(var _=t.getRowDefinition(I),V=_.actual=0;V<j;V++)if(v[I][V]){var Y=t.getColumnDefinition(V);void 0===S[V]&&(Y.actual=0,S[V]=!0);for(var H=v[I][V],X=H.length,U=0;U<X;U++){var q=H[U];if(q.visible||q===R){var W=1<q.rowSpan||1<q.columnSpan;W&&(I<z||V<G||P.push(q));var K=q.margin,J=K.right+K.left,Z=K.top+K.bottom,$=Eo(q,_,Y,!1),Q=q.desiredSize,tt=!isNaN(Q.height),et=!isNaN(Q.width)&&tt;if(W||$===Or||et||I<z||V<G||(void 0!==x[V]||$!==Br&&$!==Dr||(x[V]=-1,x.count++),void 0!==k[I]||$!==Br&&$!==zr||(k[I]=-1,k.count++),b.push(q)),q.measure(1/0,1/0,0,0),!(I<z||V<G)){var nt=q.measuredBounds,it=Math.max(nt.width+J,0),at=Math.max(nt.height+Z,0);if(1===q.rowSpan&&($===Or||$===Dr)){var rt=(B=t.getRowDefinition(I)).tc();(E=Math.max(at-B.actual,0))+rt>M&&(E=Math.max(M-rt,0));var ot=0===B.actual;B.actual=B.actual+E,M=Math.max(M-(E+(ot?rt:0)),0)}if(1===q.columnSpan&&($===Or||$===zr)){var st=(B=t.getColumnDefinition(V)).tc();(E=Math.max(it-B.actual,0))+st>L&&(E=Math.max(L-st,0));var ht=0===B.actual;B.actual=B.actual+E,L=Math.max(L-(E+(ht?st:0)),0)}W&&q.dm()}}}}}F(S);var lt=0,ut=0;s=t.columnCount;for(var dt=0;dt<s;dt++){var ct=t.nb[dt];void 0!==ct&&(lt+=ct.ka,0!==ct.ka&&(lt+=ct.tc()))}s=t.rowCount;for(var ft=0;ft<s;ft++){var gt=t.sb[ft];void 0!==gt&&(ut+=gt.ka,0!==gt.ka&&(ut+=gt.tc()))}L=Math.max(e-lt,0);var pt=M=Math.max(n-ut,0),mt=L;s=b.length;for(var vt=0;vt<s;vt++){var yt=b[vt],wt=t.getRowDefinition(yt.row),St=t.getColumnDefinition(yt.column),Pt=yt.measuredBounds,bt=yt.margin,xt=bt.right+bt.left,kt=bt.top+bt.bottom;x[yt.column]=0===St.actual&&void 0!==x[yt.column]?Math.max(Pt.width+xt,x[yt.column]):null,k[yt.row]=0===wt.actual&&void 0!==k[yt.row]?Math.max(Pt.height+kt,k[yt.row]):null}var Lt,Mt=0,Nt=0;for(Lt in k)"count"!==Lt&&(Mt+=k[Lt]);for(Lt in x)"count"!==Lt&&(Nt+=x[Lt]);for(var Tt=jt.alloc(),Ct=0;Ct<s;Ct++){var Ft=b[Ct];if(Ft.visible||Ft===R){var Bt=t.getRowDefinition(Ft.row),Ot=t.getColumnDefinition(Ft.column),At=0;isFinite(Ot.width)?At=Ot.width:(At=isFinite(L)&&null!==x[Ft.column]?0===Nt?Ot.actual+L:x[Ft.column]/Nt*mt:null!==x[Ft.column]?L:Ot.actual||L,At=Math.max(0,At-Ot.tc()));var Dt=0;switch(isFinite(Bt.height)?Dt=Bt.height:(Dt=isFinite(M)&&null!==k[Ft.row]?0===Mt?Bt.actual+M:k[Ft.row]/Mt*pt:null!==k[Ft.row]?M:Bt.actual||M,Dt=Math.max(0,Dt-Bt.tc())),Tt.h(Math.max(Ot.minimum,Math.min(At,Ot.maximum)),Math.max(Bt.minimum,Math.min(Dt,Bt.maximum))),$=Eo(Ft,Bt,Ot,!1)){case Dr:Tt.height=Math.max(Tt.height,Bt.actual+M);break;case zr:Tt.width=Math.max(Tt.width,Ot.actual+L)}var zt=Ft.margin,Gt=zt.right+zt.left,Et=zt.top+zt.bottom;Ft.dm(),Ft.measure(Tt.width,Tt.height,Ot.minimum,Bt.minimum);var Rt=Ft.measuredBounds,It=Math.max(Rt.width+Gt,0),_t=Math.max(Rt.height+Et,0);isFinite(L)&&(It=Math.min(It,Tt.width)),isFinite(M)&&(_t=Math.min(_t,Tt.height));var Vt=0;Vt=Bt.actual,Bt.actual=Math.max(Bt.actual,_t),E=Bt.actual-Vt,M=Math.max(M-E,0),Vt=Ot.actual,Ot.actual=Math.max(Ot.actual,It),E=Ot.actual-Vt,L=Math.max(L-E,0)}}F(b);var Yt=jt.alloc(),Ht=C(),Xt=C();if(0!==(s=P.length))for(var Ut=0;Ut<A;Ut++)if(v[Ut]){j=v[Ut].length;var qt=t.getRowDefinition(Ut);Ht[Ut]=qt.actual;for(var Wt=0;Wt<j;Wt++)if(v[Ut][Wt]){var Kt=t.getColumnDefinition(Wt);Xt[Wt]=Kt.actual}}for(var Jt=0;Jt<s;Jt++){var Zt=P[Jt];if(Zt.visible||Zt===R){var $t=t.getRowDefinition(Zt.row),Qt=t.getColumnDefinition(Zt.column);switch(Tt.h(Math.max(Qt.minimum,Math.min(e,Qt.maximum)),Math.max($t.minimum,Math.min(n,$t.maximum))),$=Eo(Zt,$t,Qt,!1)){case Br:0!==Xt[Qt.index]&&(Tt.width=Math.min(Tt.width,Xt[Qt.index])),0!==Ht[$t.index]&&(Tt.height=Math.min(Tt.height,Ht[$t.index]));break;case Dr:0!==Xt[Qt.index]&&(Tt.width=Math.min(Tt.width,Xt[Qt.index]));break;case zr:0!==Ht[$t.index]&&(Tt.height=Math.min(Tt.height,Ht[$t.index]))}isFinite(Qt.width)&&(Tt.width=Qt.width),isFinite($t.height)&&(Tt.height=$t.height),Yt.h(0,0);for(var te=1;te<Zt.rowSpan&&!(Zt.row+te>=t.rowCount);te++)B=t.getRowDefinition(Zt.row+te),E=0,E=$===Br||$===zr?Math.max(B.minimum,0===Ht[Zt.row+te]?B.maximum:Math.min(Ht[Zt.row+te],B.maximum)):Math.max(B.minimum,isNaN(B.Pc)?B.maximum:Math.min(B.Pc,B.maximum)),Yt.height+=E;for(var ee=1;ee<Zt.columnSpan&&!(Zt.column+ee>=t.columnCount);ee++)B=t.getColumnDefinition(Zt.column+ee),E=0,E=$===Br||$===Dr?Math.max(B.minimum,0===Xt[Zt.column+ee]?B.maximum:Math.min(Xt[Zt.column+ee],B.maximum)):Math.max(B.minimum,isNaN(B.Pc)?B.maximum:Math.min(B.Pc,B.maximum)),Yt.width+=E;Tt.width+=Yt.width,Tt.height+=Yt.height;var ne=Zt.margin,ie=ne.right+ne.left,ae=ne.top+ne.bottom;Zt.measure(Tt.width,Tt.height,r,o);for(var re=Zt.measuredBounds,oe=Math.max(re.width+ie,0),se=Math.max(re.height+ae,0),he=0,le=0;le<Zt.rowSpan&&!(Zt.row+le>=t.rowCount);le++)he+=(B=t.getRowDefinition(Zt.row+le)).total||0;if(he<se){var ue=se-he,de=se-he;if(null!==Zt.spanAllocation)for(var ce=Zt.spanAllocation,fe=0;fe<Zt.rowSpan&&!(0>=ue)&&!(Zt.row+fe>=t.rowCount);fe++){var ge=(B=t.getRowDefinition(Zt.row+fe)).ka||0,pe=ce(Zt,B,de);B.actual=Math.min(B.maximum,ge+pe),B.ka!==ge&&(ue-=B.ka-ge)}for(;0<ue;){var me=B.ka||0;if(isNaN(B.height)&&B.maximum>me&&(B.actual=Math.min(B.maximum,me+ue),B.ka!==me&&(ue-=B.ka-me)),0===B.index)break;B=t.getRowDefinition(B.index-1)}}for(var ve=0,ye=0;ye<Zt.columnSpan&&!(Zt.column+ye>=t.columnCount);ye++)ve+=(B=t.getColumnDefinition(Zt.column+ye)).total||0;if(ve<oe){var we=oe-ve,Se=oe-ve;if(null!==Zt.spanAllocation)for(var Pe=Zt.spanAllocation,be=0;be<Zt.columnSpan&&!(0>=we)&&!(Zt.column+be>=t.columnCount);be++){var xe=(B=t.getColumnDefinition(Zt.column+be)).ka||0,ke=Pe(Zt,B,Se);B.actual=Math.min(B.maximum,xe+ke),B.ka!==xe&&(we-=B.ka-xe)}for(;0<we;){var Le=B.ka||0;if(isNaN(B.width)&&B.maximum>Le&&(B.actual=Math.min(B.maximum,Le+we),B.ka!==Le&&(we-=B.ka-Le)),0===B.index)break;B=t.getColumnDefinition(B.index-1)}}}}F(P),jt.free(Yt),jt.free(Tt),void 0!==Ht&&F(Ht),void 0!==Xt&&F(Xt);var Me=0,Ne=0,Te=t.desiredSize,Ce=t.maxSize;$=Go(t,!0);var Fe=ut=lt=0,Be=0;s=t.columnCount;for(var Oe=0;Oe<s;Oe++)void 0!==t.nb[Oe]&&(B=t.getColumnDefinition(Oe),isFinite(B.width)?(Fe+=B.width,Fe+=B.tc()):Th(B)===Fh?(Fe+=B.ka,Fe+=B.tc()):0!==B.ka&&(lt+=B.ka,lt+=B.tc()));Me=isFinite(Te.width)?Math.min(Te.width,Ce.width):$!==Or&&isFinite(e)?e:lt,Me=Math.max(Me,t.minSize.width),Me=Math.max(Me-Fe,0);for(var Ae=0===lt?1:Math.max(Me/lt,1),je=0;je<s;je++)void 0!==t.nb[je]&&(B=t.getColumnDefinition(je),isFinite(B.width)||Th(B)===Fh||(B.actual=B.ka*Ae),B.position=a.width,0!==B.ka&&(a.width+=B.ka,a.width+=B.tc()));s=t.rowCount;for(var De=0;De<s;De++)void 0!==t.sb[De]&&(B=t.getRowDefinition(De),isFinite(B.height)?(Be+=B.height,Be+=B.tc()):Th(B)===Fh?(Be+=B.ka,Be+=B.tc()):0!==B.ka&&(ut+=B.ka,0!==B.ka&&(ut+=B.tc())));Ne=isFinite(Te.height)?Math.min(Te.height,Ce.height):$!==Or&&isFinite(n)?n:ut,Ne=Math.max(Ne,t.minSize.height),Ne=Math.max(Ne-Be,0);for(var ze=0===ut?1:Math.max(Ne/ut,1),Ge=0;Ge<s;Ge++)void 0!==t.sb[Ge]&&(B=t.getRowDefinition(Ge),isFinite(B.height)||Th(B)===Fh||(B.actual=B.ka*ze),B.position=a.height,0!==B.ka&&(a.height+=B.ka,0!==B.ka&&(a.height+=B.tc())));s=l.length;for(var Ee=0;Ee<s;Ee++){var Re=l[Ee],Ie=0,_e=0;Re.type===ah.TableRow?(Ie=a.width,_e=(B=t.getRowDefinition(Re.row)).actual):(Ie=(B=t.getColumnDefinition(Re.column)).actual,_e=a.height),Re.measuredBounds.h(0,0,Ie,_e),Uo(Re,!1),v[Re.row]||(v[Re.row]=[]),v[Re.row][Re.column]||(v[Re.row][Re.column]=[]),v[Re.row][Re.column].push(Re)}F(l),t.fp=v},Js.prototype.arrange=function(t,e,n){var i=e.length,a=t.padding,r=a.left;a=a.top;for(var o,s,h=t.fp,l=h.length,u=0,d=0;d<l;d++)h[d]&&(u=Math.max(u,h[d].length));for(d=Math.min(t.topIndex,l-1);d!==l&&(void 0===t.sb[d]||0===t.sb[d].ka);)d++;for(d=Math.min(d,l-1),d=-t.sb[d].position,o=Math.min(t.leftIndex,u-1);o!==u&&(void 0===t.nb[o]||0===t.nb[o].ka);)o++;o=Math.min(o,u-1);for(var c=-t.nb[o].position,f=jt.alloc(),g=0;g<l;g++)if(h[g]){u=h[g].length;var p=t.getRowDefinition(g);s=p.position+d+a,0!==p.ka&&(s+=p.Ou());for(var m=0;m<u;m++)if(h[g][m]){var v=t.getColumnDefinition(m);o=v.position+c+r,0!==v.ka&&(o+=v.Ou());for(var y=h[g][m],w=y.length,S=0;S<w;S++){var P=y[S],b=P.measuredBounds,x=P instanceof ah?P:null;if(null===x||x.type!==ah.TableRow&&x.type!==ah.TableColumn){f.h(0,0);for(var k=1;k<P.rowSpan&&!(g+k>=t.rowCount);k++)x=t.getRowDefinition(g+k),f.height+=x.total;for(k=1;k<P.columnSpan&&!(m+k>=t.columnCount);k++)x=t.getColumnDefinition(m+k),f.width+=x.total;var L=v.ka+f.width,M=p.ka+f.height;k=o,x=s;var N=L,T=M,C=o,F=s,B=L,O=M;o+L>n.width&&(B=Math.max(n.width-o,0)),s+M>n.height&&(O=Math.max(n.height-s,0));var A=P.alignment;if(A.Kb()){(A=t.defaultAlignment).gb()||(A=ue);var j=A.x,D=A.y,z=A.offsetX;A=A.offsetY;var G=v.alignment,E=p.alignment;G.gb()&&(j=G.x,z=G.offsetX),E.gb()&&(D=E.y,A=E.offsetY)}else j=A.x,D=A.y,z=A.offsetX,A=A.offsetY;(isNaN(j)||isNaN(D))&&(D=j=.5,A=z=0),G=b.width,E=b.height;var R=P.margin,I=R.left+R.right,_=R.top+R.bottom,V=Eo(P,p,v,!1);!isNaN(P.desiredSize.width)||V!==Br&&V!==Dr||(G=Math.max(L-I,0)),!isNaN(P.desiredSize.height)||V!==Br&&V!==zr||(E=Math.max(M-_,0)),L=P.maxSize,M=P.minSize,G=Math.min(L.width,G),E=Math.min(L.height,E),G=Math.max(M.width,G),L=(E=Math.max(M.height,E))+_,k+=N*j-(G+I)*j+z+R.left,x+=T*D-L*D+A+R.top,P.visible&&(qt(C,F,B,O,k,x,b.width,b.height)?P.arrange(k,x,G,E):P.arrange(k,x,G,E,new Et(C,F,B,O)))}else P.fl(),P.actualBounds.ha(),N=P.actualBounds,k=Et.allocAt(N.x,N.y,N.width,N.height),N.x=x.type===ah.TableRow?r:o,N.y=x.type===ah.TableColumn?a:s,N.width=b.width,N.height=b.height,P.actualBounds.freeze(),Wo(P,!1),Vt(k,N)||null!==(b=P.part)&&(b.zh(),P.Fo(b)),Et.free(k)}}}for(jt.free(f),t=0;t<i;t++)null===(r=(n=e[t])instanceof ah?n:null)||r.type!==ah.TableRow&&r.type!==ah.TableColumn||(r=n.actualBounds,n.naturalBounds.ha(),n.naturalBounds.h(0,0,r.width,r.height),n.naturalBounds.freeze())},d(Zs,Hs),Zs.prototype.measure=function(){},Zs.prototype.arrange=function(){},d($s,Hs),$s.prototype.measure=function(){},$s.prototype.arrange=function(){},d(Qs,Hs),Qs.prototype.measure=function(t,e,n,i,a,r,o){1<i.length&&w("Viewbox Panel cannot contain more than one GraphObject."),(i=i[0]).Ca=1,i.dm(),i.measure(1/0,1/0,r,o);var s=i.measuredBounds,h=i.margin,l=h.right+h.left;if(h=h.top+h.bottom,isFinite(e)||isFinite(n)){var u=i.scale,d=s.width;s=s.height;var c=Math.max(e-l,0),f=Math.max(n-h,0),g=1;t.viewboxStretch===Ar?0!==d&&0!==s&&(g=Math.min(c/d,f/s)):0!==d&&0!==s&&(g=Math.max(c/d,f/s)),0===g&&(g=1e-4),i.Ca*=g,u!==i.scale&&(Uo(i,!0),i.measure(1/0,1/0,r,o))}s=i.measuredBounds,a.width=isFinite(e)?e:Math.max(s.width+l,0),a.height=isFinite(n)?n:Math.max(s.height+h,0)},Qs.prototype.arrange=function(t,e,n){var i=(e=e[0]).measuredBounds,a=e.margin,r=Math.max(i.width+(a.right+a.left),0);a=Math.max(i.height+(a.top+a.bottom),0);var o=e.alignment;o.Kb()&&(o=t.defaultAlignment),o.gb()||(o=ue),e.arrange(n.width*o.x-r*o.x+o.offsetX,n.height*o.y-a*o.y+o.offsetY,i.width,i.height)},d(th,Hs),th.prototype.measure=function(){},th.prototype.arrange=function(){},d(eh,Hs),eh.prototype.measure=function(t,e,n,i,a){if(n=i.length,t instanceof tu||t instanceof wu){var r=null,o=null,s=null;if(t instanceof wu&&(o=r=t),t instanceof tu&&(r=(s=t).adornedPart),r instanceof wu){var h=r;if(0===n)Rt(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var l=t instanceof tu?null:r.path,u=r.routeBounds;(e=t.kg).h(0,0,u.width,u.height);var d=h.points;r=r.pointsCount,null!==s?s.hk(!1):null!==o&&o.hk(!1);var c=u.width,f=u.height;t.location.h(u.x,u.y),t.l.length=0,null!==l&&(nh(t,c,f,l),s=l.measuredBounds,e.Jc(s),t.l.push(s)),s=ae.alloc();for(var g=ft.alloc(),p=ft.alloc(),m=0;m<n;m++){var v=i[m];if(v!==l)if(v.isPanelMain&&v instanceof Oh){nh(t,c,f,v);var y=v.measuredBounds;e.Jc(y),t.l.push(y)}else if(2>r)v.measure(1/0,1/0,0,0),y=v.measuredBounds,e.Jc(y),t.l.push(y);else{var w=v.segmentIndex;y=v.segmentFraction;var S=v.alignmentFocus;S.jc()&&(S=ue);var P=v.segmentOrientation,b=v.segmentOffset;if(w<-r||w>=r){y=h.midPoint;var x=h.midAngle;if(P!==Vu){var k=h.computeAngle(v,P,x);v.zc=k}k=y.x-u.x;var L=y.y-u.y}else{if(k=0,0<=w){L=d.N(w);var M=w<r-1?d.N(w+1):L}else k=r+w,L=d.N(k),M=0<k?d.N(k-1):L;if(L.Qa(M)){0<=w?(x=0<w?d.N(w-1):L,k=w<r-2?d.N(w+2):M):(x=k<r-1?d.N(k+1):L,k=1<k?d.N(k-2):M);var N=x.Ce(L),T=M.Ce(k);x=N>T+10?0<=w?x.Wa(L):L.Wa(x):T>N+10?0<=w?M.Wa(k):k.Wa(M):0<=w?x.Wa(k):k.Wa(x)}else x=0<=w?L.Wa(M):M.Wa(L);P!==Vu&&(k=h.computeAngle(v,P,x),v.zc=k),k=L.x+(M.x-L.x)*y-u.x,L=L.y+(M.y-L.y)*y-u.y}v.measure(1/0,1/0,0,0),y=v.measuredBounds,M=v.naturalBounds;var C=0;v instanceof Oh&&(C=v.strokeWidth),N=M.width+C,T=M.height+C,s.reset(),s.translate(-y.x,-y.y),s.scale(v.scale,v.scale),s.rotate(P===Vu?v.angle:x,N/2,T/2),P!==Ju&&P!==td||s.rotate(90,N/2,T/2),P!==Zu&&P!==ed||s.rotate(-90,N/2,T/2),P===nd&&(45<x&&135>x||225<x&&315>x)&&s.rotate(-x,N/2,T/2),M=new Et(0,0,N,T),g.Vi(M,S),s.ta(g),S=-g.x+C/2*v.scale,v=-g.y+C/2*v.scale,p.assign(b),C=isNaN(b.x);var F=isNaN(b.y);if(C||F){N=N/2+3,T=T/2+3;var B=45<=x&&135>=x,O=225<=x&&315>=x;P===Vu&&(B||O)?(p.x=F?N:b.y,p.y=C?T:b.x,B?0<=w||!C||(p.y=-T):O&&(0<=w&&C&&(p.y=-T),F&&(p.x=-N))):(C&&(p.x=0<=w?N:-N),F&&(p.y=-T),p.rotate(x))}else p.rotate(x);k+=p.x,L+=p.y,M.set(y),M.h(k+S,L+v,y.width,y.height),t.l.push(M),e.Jc(M)}}if(null!==o)for(i=o.labelNodes;i.next();)i.value.measure(1/0,1/0);t.kg=e,(t=t.location).h(t.x+e.x,t.y+e.y),Rt(a,e.width||0,e.height||0),ae.free(s),ft.free(g),ft.free(p)}}}},eh.prototype.arrange=function(t,e){var n=e.length;if(t instanceof tu||t instanceof wu){var i=null,a=null,r=null;t instanceof wu&&(a=i=t),t instanceof tu&&(i=(r=t).adornedPart);var o=t instanceof tu?null:i.path;if(0!==t.l.length){var s=t.l,h=0;if(null!==o&&h<t.l.length){var l=s[h];h++,o.arrange(l.x-t.kg.x,l.y-t.kg.y,l.width,l.height)}for(l=0;l<n;l++){var u=e[l];if(u!==o&&h<t.l.length){var d=s[h];h++,u.arrange(d.x-t.kg.x,d.y-t.kg.y,d.width,d.height)}}}if(2<=(n=(e=i.points).count)&&t instanceof wu)for(i=t.labelNodes;i.next();){d=t,s=(o=i.value).segmentIndex;var c=o.segmentFraction;l=o.alignmentFocus;var f=o.segmentOrientation;if(h=o.segmentOffset,s<-n||s>=n){var g=d.midPoint;u=d.midAngle,f!==Vu&&(d=d.computeAngle(o,f,u),o.angle=d),d=g.x;var p=g.y}else{var m=0;if(0<=s?(p=e.j[s],g=s<n-1?e.j[s+1]:p):(m=n+s,p=e.j[m],g=0<m?e.j[m-1]:p),p.Qa(g)){0<=s?(u=0<s?e.j[s-1]:p,m=s<n-2?e.j[s+2]:g):(u=m<n-1?e.j[m+1]:p,m=1<m?e.j[m-2]:g);var v=u.Ce(p),y=g.Ce(m);u=v>y+10?0<=s?u.Wa(p):p.Wa(u):y>v+10?0<=s?g.Wa(m):m.Wa(g):0<=s?u.Wa(m):m.Wa(u)}else u=0<=s?p.Wa(g):g.Wa(p);f!==Vu&&(d=d.computeAngle(o,f,u),o.angle=d),d=p.x+(g.x-p.x)*c,p=p.y+(g.y-p.y)*c}l.dt()?o.location=new ft(d,p):(l.jc()&&(l=ue),(g=ae.alloc()).reset(),g.scale(o.scale,o.scale),g.rotate(o.angle,0,0),c=o.naturalBounds,c=Et.allocAt(0,0,c.width,c.height),(f=ft.alloc()).Vi(c,l),g.ta(f),l=-f.x,m=-f.y,h=h.copy(),isNaN(h.x)&&(h.x=0<=s?f.x+3:-(f.x+3)),isNaN(h.y)&&(h.y=-(f.y+3)),h.rotate(u),d+=h.x,p+=h.y,g.Vv(c),l+=c.x,m+=c.y,s=ft.allocAt(d+l,p+m),o.move(s),ft.free(s),ft.free(f),Et.free(c),ae.free(g))}null!==r?r.hk(!1):null!==a&&a.hk(!1)}},d(ih,Hs),ih.prototype.measure=function(t,e,n,i,a,r,o){var s=t.zb();t.ij=[];var h=s.margin,l=h.right+h.left,u=h.top+h.bottom;s.measure(e,n,r,o);var d=s.measuredBounds,c=new Et(-h.left,-h.top,Math.max(d.width+l,0),Math.max(d.height+u,0));t.ij.push(c),a.assign(c);for(var f=s.geometry,g=s.strokeWidth,p=f.flattenedSegments,m=f.flattenedLengths,v=f.flattenedTotalLength,y=p.length,w=0,S=0,P=C(),b=0;b<y;b++){var x=p[b],k=[];S=w=0;for(var L=x.length,M=0;M<L;M+=2){var N=x[M],T=x[M+1];if(0!==M){var B=180*Math.atan2(T-S,N-w)/Math.PI;0>B&&(B+=360),k.push(B)}w=N,S=T}P.push(k)}if(null===t.Pg){for(var O=[],A=t.Y.j,j=A.length,D=0;D<j;D++){var z=A[D],G=[];if(O.push(G),z.visible)for(var E=z.interval,R=0;R<j;R++){var I=A[R];if(I.visible&&z!==I&&!(z instanceof Oh&&!(I instanceof Oh)||z instanceof Vh&&!(I instanceof Vh))){var _=I.interval;_>E&&G.push(_)}}}t.Pg=O}var V=t.Pg,Y=t.Y.j,H=Y.length,X=0,U=0,q=v;t.kj=[];for(var W,K=0;K<H;K++){var J=Y[K];if(W=[],J.visible&&J!==s){var Z=J.interval,$=t.graduatedTickUnit;if(!(2>$*Z*v/t.graduatedRange)){var Q=m[0][0],tt=0,et=0;U=v*J.graduatedStart-1e-4,q=v*J.graduatedEnd+1e-4;var nt=$*Z,it=t.graduatedTickBase;if(it<t.graduatedMin){var at=(t.graduatedMin-it)/nt;it+=(at=0==at%1?at:Math.floor(at+1))*nt}else it>t.graduatedMin+nt&&(it-=Math.floor((it-t.graduatedMin)/nt)*nt);for(var rt=V[K];it<=t.graduatedMax;){t:{for(var ot=rt.length,st=0;st<ot;st++)if(qe.ca((it-t.graduatedTickBase)%(rt[st]*t.graduatedTickUnit),0)){var ht=!1;break t}ht=!0}if(ht&&(null===J.graduatedSkip||!J.graduatedSkip(it))&&((X=(it-t.graduatedMin)*v/t.graduatedRange)>v&&(X=v),U<=X&&X<=q)){for(var lt=P[tt][et],ut=m[tt][et];tt<m.length;){for(;X>Q&&et<m[tt].length-1;)et++,lt=P[tt][et],Q+=ut=m[tt][et];if(X<=Q)break;et=0,lt=P[++tt][et],Q+=ut=m[tt][et]}var dt=p[tt],ct=dt[2*et],gt=dt[2*et+1],pt=(X-(Q-ut))/ut,mt=new ft(ct+(dt[2*et+2]-ct)*pt+g/2-f.bounds.x,gt+(dt[2*et+3]-gt)*pt+g/2-f.bounds.y);mt.scale(s.scale,s.scale);var vt=lt,yt=P[tt];if(1e-4>pt?0<et?vt=yt[et-1]:qe.ca(dt[0],dt[dt.length-2])&&qe.ca(dt[1],dt[dt.length-1])&&(vt=yt[yt.length-1]):.9999<pt&&(et+1<yt.length?vt=yt[et+1]:qe.ca(dt[0],dt[dt.length-2])&&qe.ca(dt[1],dt[dt.length-1])&&(vt=yt[0])),lt!==vt&&(180<Math.abs(lt-vt)&&(lt<vt?lt+=360:vt+=360),lt=(lt+vt)/2%360),J instanceof Vh){var wt="";null!==J.graduatedFunction?wt=null!=(wt=J.graduatedFunction(it))?wt.toString():"":wt=(+it.toFixed(2)).toString(),""!==wt&&W.push([mt,lt,wt])}else W.push([mt,lt])}it+=nt}}}t.kj.push(W)}F(P);for(var St=t.kj,Pt=i.length,bt=0;bt<Pt;bt++){var xt=i[bt],kt=St[bt];if(xt.visible&&xt!==s&&0!==kt.length){if(xt instanceof Oh){var Lt=t,Mt=a,Nt=xt.alignmentFocus;Nt.jc()&&(Nt=se);var Tt=xt.angle;xt.zc=0,xt.measure(1/0,1/0,0,0),xt.zc=Tt;var Ct=xt.measuredBounds,Ft=Ct.width,Bt=Ct.height,Ot=Et.allocAt(0,0,Ft,Bt),At=ft.alloc();At.Vi(Ot,Nt),Et.free(Ot);for(var jt=-At.x,Dt=-At.y,zt=new Et,Gt=kt.length,Rt=0;Rt<Gt;Rt++)for(var It=kt[Rt],_t=It[0].x,Vt=It[0].y,Yt=It[1],Ht=0;4>Ht;Ht++){switch(Ht){case 0:At.h(jt,Dt);break;case 1:At.h(jt+Ft,Dt);break;case 2:At.h(jt,Dt+Bt);break;case 3:At.h(jt+Ft,Dt+Bt)}At.rotate(Yt+xt.angle),At.offset(_t,Vt),0===Rt&&0===Ht?zt.h(At.x,At.y,0,0):zt.Je(At),At.offset(-_t,-Vt),At.rotate(-Yt-xt.angle)}ft.free(At),Lt.ij.push(zt),Ut(Mt,zt.x,zt.y,zt.width,zt.height)}else if(xt instanceof Vh){var Xt=t,qt=a;null===Xt.kh&&(Xt.kh=new Vh);var Wt=Xt.kh;Yh(Wt,xt);var Kt=xt.alignmentFocus;Kt.jc()&&(Kt=se);for(var Jt=xt.segmentOrientation,Zt=xt.segmentOffset,$t=null,Qt=0,te=0,ee=0,ne=0,ie=kt.length,re=0;re<ie;re++){var oe=kt[re];Qt=oe[0].x,te=oe[0].y,ee=oe[1],Jt!==Vu&&(ne=wu.computeAngle(Jt,ee),Wt.zc=ne),Wt.text=oe[2],Wt.measure(1/0,1/0,0,0);var he=Wt.measuredBounds,le=Wt.naturalBounds,ue=le.width,de=le.height,ce=ae.alloc();ce.reset(),ce.translate(-he.x,-he.y),ce.scale(Wt.scale,Wt.scale),ce.rotate(Jt===Vu?Wt.angle:ee,ue/2,de/2),Jt!==Ju&&Jt!==td||ce.rotate(90,ue/2,de/2),Jt!==Zu&&Jt!==ed||ce.rotate(-90,ue/2,de/2),Jt===nd&&(45<ee&&135>ee||225<ee&&315>ee)&&ce.rotate(-ee,ue/2,de/2);var fe=Et.allocAt(0,0,ue,de),ge=ft.alloc();ge.Vi(fe,Kt),ce.ta(ge);var pe=-ge.x,me=-ge.y,ve=ft.alloc();ve.assign(Zt),isNaN(ve.x)&&(ve.x=ue/2+3),isNaN(ve.y)&&(ve.y=-(de/2+3)),ve.rotate(ee);var ye=new Et(Qt+=ve.x+pe,te+=ve.y+me,he.width,he.height),we=new Et(he.x,he.y,he.width,he.height),Se=new Et(le.x,le.y,le.width,le.height),Pe=new gl;Pe.Vl(Wt.metrics),oe.push(ne),oe.push(Wt.lineCount),oe.push(Pe),oe.push(ye),oe.push(we),oe.push(Se),0===re?$t=ye.copy():$t.Jc(ye),ft.free(ve),ft.free(ge),Et.free(fe),ae.free(ce)}Xt.ij.push($t),Ut(qt,$t.x,$t.y,$t.width,$t.height)}Uo(xt,!1)}}},ih.prototype.arrange=function(t,e,n){if(null!==t.ij){var i=t.zb(),a=t.kj,r=t.ij,o=0,s=r[o];o++,i.arrange(s.x-n.x,s.y-n.y,s.width,s.height);for(var h=e.length,l=0;l<h;l++){var u=e[l];s=a[l],u.visible&&u!==i&&0!==s.length&&(s=r[o],o++,u.arrange(s.x-n.x,s.y-n.y,s.width,s.height))}t.ij=null}},d(ah,Mo),ah.prototype.cloneProtected=function(t){if(Mo.prototype.cloneProtected.call(this,t),t.va=this.va,t.eb=this.eb.I(),t.mn=this.mn.I(),t.Ff=this.Ff,t.va===ah.Table){t.ej=this.ej.I(),t.Jg=this.Jg,t.Wh=this.Wh,t.Vh=this.Vh,t.Ig=this.Ig,t.Hg=this.Hg,t.Uh=this.Uh;var e=[];if(0<this.sb.length)for(var n=this.sb,i=n.length,a=0;a<i;a++)if(void 0!==n[a]){var r=n[a].copy();r.Ui(t),e[a]=r}if(t.sb=e,e=[],0<this.nb.length)for(i=(n=this.nb).length,a=0;a<i;a++)void 0!==n[a]&&((r=n[a].copy()).Ui(t),e[a]=r);t.nb=e,t.Gj=this.Gj,t.cj=this.cj,t.yi=this.yi,t.hi=this.hi}t.Hp=this.Hp,t.Kn=this.Kn.I(),t.Ln=this.Ln.I(),t.Hn=this.Hn,t.Gn=this.Gn,t.Jn=this.Jn,t.In=this.In,t.kj=this.kj,t.Pg=this.Pg,t.jb=this.jb,t.Rh=this.Rh,t.Yn=this.Yn,t.fi=this.fi,t.je=this.je,t.gl=this.gl,t.kg.assign(this.kg),t.Bg=this.Bg,null!==this.fp&&(t.fp=this.fp)},ah.prototype.pf=function(t){Mo.prototype.pf.call(this,t),t.Y=this.Y;for(var e=t.Y.j,n=e.length,i=0;i<n;i++)e[i].cg=t;t.vi=null},ah.prototype.copy=function(){var t=Mo.prototype.copy.call(this);if(null!==t){for(var e=this.Y.j,n=e.length,i=0;i<n;i++){var a=e[i].copy();a.Ui(t),a.Bj=null;var r=t.Y,o=r.count;if(r.Ib(o,a),null!==(r=t.part)){r.wj=null,null!==a.portId&&r instanceof eu&&(r.yh=!0);var s=t.diagram;null!==s&&s.undoManager.isUndoingRedoing||r.ab(kn,"elements",t,null,a,null,o)}}return t}return null},(n=ah.prototype).toString=function(){return"Panel("+this.type+")#"+rt(this)},n.Fo=function(t){Mo.prototype.Fo.call(this,t);for(var e=this.Y.j,n=e.length,i=0;i<n;i++)e[i].Fo(t)},n.Ei=function(t,e){if(this.va===ah.Grid){0>=(e=this.De()*e.scale)&&(e=1);var n=this.gridCellSize,i=n.width;n=n.height;var a=this.naturalBounds,r=this.actualBounds,o=a.width,s=a.height,h=Math.ceil(o/i),l=Math.ceil(s/n),u=this.gridOrigin;t.save(),t.beginPath(),t.rect(0,0,o,s),t.clip();for(var d=[],c=this.Y.j,f=c.length,g=0;g<f;g++){var p=c[g],m=[];if(d.push(m),p.visible){p=lh(p.figure);for(var v=g+1;v<f;v++){var y=c[v];y.visible&&lh(y.figure)===p&&(2<=(y=y.interval)&&m.push(y))}}}for(f=(c=this.Y.j).length,g=0;g<f;g++){var w=c[g];if(w.visible&&!(2>i*(m=w.interval)*e)){if(v=1,1!==(p=w.opacity)){if(0===p)continue;v=t.globalAlpha,t.globalAlpha=v*p}y=d[g];var S=!1,P=w.strokeDashArray;if(null!==P&&(S=!0,t.Os(P,w.strokeDashOffset)),"LineV"===w.figure&&null!==w.stroke){for(t.lineWidth=w.strokeWidth,Ao(this,t,w.stroke,!1,!1,a,r),t.beginPath(),P=w=Math.floor(-u.x/i);P<=w+h;P++){var b=P*i+u.x;0<=b&&b<=o&&hh(P,m,y)&&(t.moveTo(b,0),t.lineTo(b,s))}t.stroke()}else if("LineH"===w.figure&&null!==w.stroke){for(t.lineWidth=w.strokeWidth,Ao(this,t,w.stroke,!1,!1,a,r),t.beginPath(),P=w=Math.floor(-u.y/n);P<=w+l;P++)0<=(b=P*n+u.y)&&b<=s&&hh(P,m,y)&&(t.moveTo(0,b),t.lineTo(o,b));t.stroke()}else if("BarV"===w.figure&&null!==w.fill)for(Ao(this,t,w.fill,!0,!1,a,r),w=w.width,isNaN(w)&&(w=i),b=P=Math.floor(-u.x/i);b<=P+h;b++){var x=b*i+u.x;0<=x&&x<=o&&hh(b,m,y)&&t.fillRect(x,0,w,s)}else if("BarH"===w.figure&&null!==w.fill)for(Ao(this,t,w.fill,!0,!1,a,r),w=w.height,isNaN(w)&&(w=n),b=P=Math.floor(-u.y/n);b<=P+l;b++)0<=(x=b*n+u.y)&&x<=s&&hh(b,m,y)&&t.fillRect(0,x,o,w);S&&t.Ms(),1!==p&&(t.globalAlpha=v)}}t.restore(),t.Rc(!1)}else if(this.va===ah.Graduated){for(i=e.nj,e.nj=!0,n=(a=this.naturalBounds).width,a=a.height,t.save(),t.beginPath(),t.rect(-1,-1,n+1,a+1),t.clip(),(n=this.zb()).hc(t,e),0>=(a=this.De()*e.scale)&&(a=1),r=n.actualBounds,o=this.Y.j,s=this.kj,h=o.length,l=0;l<h;l++)if(c=o[l],d=(u=s[l]).length,c.visible&&c!==n&&0!==u.length)if(c instanceof Oh){if(!(2>this.graduatedTickUnit*c.interval*n.geometry.flattenedTotalLength/this.graduatedRange*a))for(f=c.measuredBounds,g=c.strokeWidth*c.scale,(m=c.alignmentFocus).jc()&&(m=se),p=0;p<d;p++)v=u[p][0],y=u[p][1],S=m,(w=c.tb).reset(),w.translate(v.x+r.x,v.y+r.y),w.rotate(y+c.angle,0,0),w.translate(-f.width*S.x+S.offsetX+g/2,-f.height*S.y+S.offsetY+g/2),w.scale(c.scale,c.scale),Yo(c,!1),c.Eh.set(c.tb),c.Tk=c.scale,Ho(c,!1),c.hc(t,e),c.tb.reset()}else if(c instanceof Vh)for(null===this.kh&&(this.kh=new Vh),Yh(f=this.kh,c),c=0;c<d;c++)3<(p=u[c]).length&&(g=p[6],f.Ob=p[2],f.zc=p[3],f.oc=p[4],f.nd=p[5],f.qc=p[8],f.arrange(g.x,g.y,g.width,g.height),g=p[6],f.arrange(g.x,g.y,g.width,g.height),m=p[7],p=p[8],(v=f.tb).reset(),v.translate(g.x+r.x,g.y+r.y),v.translate(-m.x,-m.y),Do(f,v,p.x,p.y,p.width,p.height),Yo(f,!1),f.Eh.set(f.tb),f.Tk=f.scale,Ho(f,!1),f.hc(t,e));e.nj=i,t.restore(),t.Rc(!0)}else{for(this.va===ah.Table&&(t.lineCap="butt",sh(this,t,!0,this.sb,!0),sh(this,t,!1,this.nb,!0),oh(this,t,!0,this.sb),oh(this,t,!1,this.nb),sh(this,t,!0,this.sb,!1),sh(this,t,!1,this.nb,!1)),(i=this.isClipping)&&t.save(),n=this.zb(),r=(a=this.Y.j).length,o=0;o<r;o++)s=a[o],i&&s===n&&(t.clipInsteadOfFill=!0),s.hc(t,e),i&&s===n&&(t.clipInsteadOfFill=!1);i&&(t.restore(),t.Rc(!0))}},n.ck=function(t,e,n,i,a){var r=this.Zd(),o=this.transform,s=1/(o.m11*o.m22-o.m12*o.m21),h=o.m22*s,l=-o.m12*s,u=-o.m21*s,d=o.m11*s,c=s*(o.m21*o.dy-o.m22*o.dx),f=s*(o.m12*o.dx-o.m11*o.dy);if(null!==this.areaBackground)return o=this.actualBounds,qe.Tc(o.left,o.top,o.right,o.bottom,t,e,n,i,a);if(null!==this.background)return r=t*h+e*u+c,s=t*l+e*d+f,t=n*h+i*u+c,h=n*l+i*d+f,a.h(0,0),n=this.naturalBounds,r=qe.Tc(0,0,n.width,n.height,r,s,t,h,a),a.transform(o),r;r||(h=1,u=l=0,d=1,f=c=0),s=t*h+e*u+c,t=t*l+e*d+f,h=n*h+i*u+c,n=n*l+i*d+f,a.h(h,n),i=(h-s)*(h-s)+(n-t)*(n-t),l=!1,f=(d=this.Y.j).length,u=ft.alloc(),c=null,e=1/0;var g=null;this.isClipping&&(g=ft.alloc(),(l=(c=this.zb()).ck(s,t,h,n,g))&&(e=(s-g.x)*(s-g.x)+(t-g.y)*(t-g.y)));for(var p=0;p<f;p++){var m=d[p];m.visible&&m!==c&&m.ck(s,t,h,n,u)&&(l=!0,(m=(s-u.x)*(s-u.x)+(t-u.y)*(t-u.y))<i&&(i=m,a.set(u)))}return this.isClipping&&(e>i&&a.set(g),ft.free(g)),ft.free(u),r&&a.transform(o),l},n.s=function(t){Mo.prototype.s.call(this,t),t=null,this.va!==ah.Auto&&this.va!==ah.Link||(t=this.zb());for(var e=this.Y.j,n=e.length,i=0;i<n;i++){var a=e[i];if((a===t||a.isPanelMain)&&a.s(!0),!a.desiredSize.o()){var r=Go(a,!1);(a instanceof yu||a instanceof ah||a instanceof Vh||r!==Or)&&a.s(!0)}}},n.dm=function(){if(!1===Xo(this)){Uo(this,!0),Wo(this,!0);for(var t=this.Y.j,e=t.length,n=0;n<e;n++)t[n].dm()}},n.fl=function(){if(0!=(2048&this.H)==!1){Yo(this,!0),Ho(this,!0);for(var t=this.Y.j,e=t.length,n=0;n<e;n++)t[n].jv()}},n.jv=function(){Ho(this,!0);for(var t=this.Y.j,e=t.length,n=0;n<e;n++)t[n].jv()},n.hm=function(t,e,n,i){var a=this.kg;a.h(0,0,0,0);var r=this.desiredSize,o=this.minSize;void 0===n&&(n=o.width,i=o.height),n=Math.max(n,o.width),i=Math.max(i,o.height);var s=this.maxSize;isNaN(r.width)||(t=Math.min(r.width,s.width)),isNaN(r.height)||(e=Math.min(r.height,s.height)),t=Math.max(n,t),e=Math.max(i,e);var h=this.eb;t=Math.max(t-h.left-h.right,0),e=Math.max(e-h.top-h.bottom,0);var l=this.Y.j;0!==l.length&&this.va.measure(this,t,e,l,a,n,i),t=a.width+h.left+h.right,h=a.height+h.top+h.bottom,isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(h=r.height),t=Math.min(s.width,t),h=Math.min(s.height,h),t=Math.max(o.width,t),h=Math.max(o.height,h),Rt(a,t=Math.max(n,t),h=Math.max(i,h)),Rt(this.naturalBounds,t,h),Co(this,0,0,t,h)},n.zb=function(){if(null===this.vi){var t=this.Y.j,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(!0===i.isPanelMain)return this.vi=i}this.vi=t[0]}return this.vi},n.uh=function(t,e,n,i){var a=this.Y.j;if(this.actualBounds.h(t,e,n,i),0!==a.length){if(!this.desiredSize.o()){t=Go(this,!0);var r=this.measuredBounds;e=r.width,r=r.height;var o=this.Vg,s=o.left+o.right;switch(o=o.top+o.bottom,e===n&&r===i&&(t=Or),t){case Or:(e>n||r>i)&&(this.s(),this.measure(e>n?n:e,r>i?i:r,0,0));break;case Br:this.s(!0),this.measure(n+s,i+o,0,0);break;case Dr:this.s(!0),this.measure(n+s,r+o,0,0);break;case zr:this.s(!0),this.measure(e+s,i+o,0,0)}}this.va.arrange(this,a,this.kg)}},n.wh=function(t){var e=this.naturalBounds,n=uh(this);if(qt(0,0,e.width,e.height,t.x,t.y)){for(var i=(e=this.Y.j).length,a=ft.allocAt(0,0);i--;){var r=e[i];if((r.visible||r===n)&&(vt(a.set(t),r.transform),r.da(a)))return ft.free(a),!0}return ft.free(a),null!==this.ib||null!==this.dc}return!1},n.Ps=function(t){if(this.Ek===t)return this;for(var e=this.Y.j,n=e.length,i=0;i<n;i++){var a=e[i].Ps(t);if(null!==a)return a}return null},n.ym=function(t,e){if(e(this,t),t instanceof ah)for(var n=(t=t.Y.j).length,i=0;i<n;i++)this.ym(t[i],e)},n.Yl=function(t){return function t(e,n,i){if(i(n))return n;if(n instanceof ah)for(var a=(n=n.Y.j).length,r=0;r<a;r++){var o=t(e,n[r],i);if(null!==o)return o}return null}(this,this,t)},n.$a=function(t){if(this.name===t)return this;var e=this.Y.j,n=e.length;null===this.fi&&null===this.je||(n=wh(this));for(var i=0;i<n;i++){var a=e[i];if(a instanceof ah){var r=a.$a(t);if(null!==r)return r}if(a.name===t)return a}return null},n.Zd=function(){return!(this.type===ah.TableRow||this.type===ah.TableColumn)},n.Rb=function(t,e,n){if(!1===this.pickable)return null;if(void 0===e&&(e=null),void 0===n&&(n=null),qo(this))return null;var i=this.naturalBounds,a=1/this.De(),r=this.Zd(),o=r?t:vt(ft.allocAt(t.x,t.y),this.transform),s=this.diagram,h=10,l=5;if(null!==s&&(l=(h=s.bm("extraTouchArea"))/2),qt(-l*a,-l*a,i.width+h*a,i.height+h*a,o.x,o.y)){if(!this.isAtomic){var u=(a=this.Y.j).length;if(s=ft.alloc(),l=(h=this.isClipping)?this.zb():null,h&&(l.Zd()?vt(s.set(t),l.transform):s.set(t),!l.da(s)))return ft.free(s),r||ft.free(o),null;for(var d=uh(this);u--;){var c=a[u];if((c.visible||c===d)&&(c.Zd()?vt(s.set(t),c.transform):s.set(t),!h||c!==l)){var f=null;if(c instanceof ah?f=c.Rb(s,e,n):!0===c.pickable&&c.da(s)&&(f=c),null!==f&&(null!==e&&(f=e(f)),null!==f&&(null===n||n(f))))return ft.free(s),r||ft.free(o),f}}ft.free(s)}return null===this.background&&null===this.areaBackground?(r||ft.free(o),null):(t=qt(0,0,i.width,i.height,o.x,o.y)?this:null,r||ft.free(o),t)}return r||ft.free(o),null},n.Hi=function(t,e,n,i){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=this.naturalBounds,r=this.Zd(),o=r?t:vt(ft.allocAt(t.x,t.y),this.transform);if(a=qt(0,0,a.width,a.height,o.x,o.y),this.type===ah.TableRow||this.type===ah.TableColumn||a){if(!this.isAtomic){for(var s=this.Y.j,h=s.length,l=ft.alloc(),u=uh(this);h--;){var d=s[h];if(d.visible||d===u){d.Zd()?vt(l.set(t),d.transform):l.set(t);var c=d;(null!==(d=d instanceof ah?d:null)?d.Hi(l,e,n,i):c.da(l))&&!1!==c.pickable&&(null!==e&&(c=e(c)),null===c||null!==n&&!n(c)||i.add(c))}}ft.free(l)}return r||ft.free(o),a&&(null!==this.background||null!==this.areaBackground)}return r||ft.free(o),!1},n.pg=function(t,e,n,i,a,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var o=r;if(void 0===r&&(o=ae.alloc()).reset(),o.multiply(this.transform),this.vh(t,o))return fh(this,e,n,a),void 0===r&&ae.free(o),!0;if(this.Ic(t,o)){if(!this.isAtomic)for(var s=uh(this),h=this.Y.j,l=h.length;l--;){var u=h[l];if(u.visible||u===s){var d=u.actualBounds,c=this.naturalBounds;d.x>c.width||d.y>c.height||0>d.x+d.width||0>d.y+d.height||(d=u,u=u instanceof ah?u:null,(c=ae.alloc()).set(o),(null!==u?u.pg(t,e,n,i,a,c):Fo(d,t,i,c))&&(null!==e&&(d=e(d)),null===d||null!==n&&!n(d)||a.add(d)),ae.free(c))}}return void 0===r&&ae.free(o),i}return void 0===r&&ae.free(o),!1},n.qg=function(t,e,n,i,a,r){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var o=this.naturalBounds,s=this.Zd(),h=s?t:vt(ft.allocAt(t.x,t.y),this.transform),l=s?e:vt(ft.allocAt(e.x,e.y),this.transform),u=h.Ce(l),d=0<h.x&&h.x<o.width&&0<h.y&&h.y<o.height||yt(h.x,h.y,0,0,0,o.height)<=u||yt(h.x,h.y,0,o.height,o.width,o.height)<=u||yt(h.x,h.y,o.width,o.height,o.width,0)<=u||yt(h.x,h.y,o.width,0,0,0)<=u;if(o=h.cd(0,0)<=u&&h.cd(0,o.height)<=u&&h.cd(o.width,0)<=u&&h.cd(o.width,o.height)<=u,s||(ft.free(h),ft.free(l)),d){if(!this.isAtomic){h=ft.alloc(),l=ft.alloc(),u=uh(this);for(var c=this.Y.j,f=c.length;f--;){var g=c[f];if(g.visible||g===u){var p=g.actualBounds,m=this.naturalBounds;s&&(p.x>m.width||p.y>m.height||0>p.x+p.width||0>p.y+p.height)||(g.Zd()?(p=g.transform,vt(h.set(t),p),vt(l.set(e),p)):(h.set(t),l.set(e)),p=g,(null!==(g=g instanceof ah?g:null)?g.qg(h,l,n,i,a,r):p.hx(h,l,a))&&(null!==n&&(p=n(p)),null===p||null!==i&&!i(p)||r.add(p)))}}ft.free(h),ft.free(l)}return a?d:o}return!1},n.add=function(t){this.Ib(this.Y.count,t)},n.N=function(t){return this.Y.N(t)},n.Ib=function(t,e){e instanceof jl&&w("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.tg(e))&&(this===e&&w("Cannot make a Panel contain itself: "+this.toString()),w("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&w("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.va!==ah.Grid||e instanceof Oh||w("Can only add Shapes to a Grid Panel, not: "+e),this.va!==ah.Graduated||e instanceof Oh||e instanceof Vh||w("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.Ui(this),e.Bj=null,null!==this.itemArray){var i=e.data;null!==i&&"object"==typeof i&&(null===this.Ed&&(this.Ed=new ct),this.Ed.add(i,e))}var a=this.Y;if(i=-1,n===this){for(var r=-1,o=this.Y.j,s=o.length,h=0;h<s;h++)if(o[h]===e){r=h;break}if(-1!==r){if(r===t||r+1>=a.count&&t>=a.count)return;a.mb(r),i=r}else w("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>a.count)&&(t=a.count),a.Ib(t,e),(0===t||e.isPanelMain)&&(this.vi=null),Xo(this)||this.s(),e.s(!1),(null!==e.portId||e instanceof ah&&!0===e.yh)&&(this.yh=!0),this.Pg=null,null!==(n=this.part)&&(n.wj=null,n.Wg=NaN,this.yh&&n instanceof eu&&(n.yh=!0),n.yh&&n instanceof eu&&(n.rc=null),null!==(a=this.diagram)&&a.undoManager.isUndoingRedoing||(-1!==i&&n.ab(Ln,"elements",this,e,null,i,null),n.ab(kn,"elements",this,null,e,null,t),this.ug()||bh(this,e,!1)))},n.remove=function(t){for(var e=this.Y.j,n=e.length,i=-1,a=0;a<n;a++)if(e[a]===t){i=a;break}-1!==i&&this.xc(i,!0)},n.mb=function(t){0<=t&&this.xc(t,!0)},n.xc=function(t,e){var n=this.Y,i=n.N(t);if(i.Bj=null,i.Ui(null),null!==this.Ed){var a=i.data;"object"==typeof a&&this.Ed.remove(a)}n.mb(t),Uo(this,!1),this.s(),this.vi===i&&(this.vi=null),this.Pg=null;var r=this.part;null!==r&&(r.wj=null,r.Wg=NaN,r.Jb(),r instanceof eu&&(i instanceof ah?i.ym(i,(function(t,n){du(r,n,e)})):du(r,i,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||r.ab(Ln,"elements",this,i,null,t,null))},ah.prototype.getRowDefinition=function(t){0>t&&P(t,">= 0",ah,"getRowDefinition:idx"),t=Math.round(t);var e=this.sb;if(void 0===e)return null;if(void 0===e[t]){var n=new Nh;n.Ui(this),n.isRow=!0,n.index=t,e[t]=n}return e[t]},ah.prototype.Bv=function(t){0>t&&P(t,">= 0",ah,"removeRowDefinition:idx"),t=Math.round(t);var e=this.sb;void 0!==e&&(this.ab(Ln,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.s())},ah.prototype.getColumnDefinition=function(t){0>t&&P(t,">= 0",ah,"getColumnDefinition:idx"),t=Math.round(t);var e=this.nb;if(void 0===e)return null;if(void 0===e[t]){var n=new Nh;n.Ui(this),n.isRow=!1,n.index=t,e[t]=n}return e[t]},(n=ah.prototype).zv=function(t){0>t&&P(t,">= 0",ah,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.nb;void 0!==e&&(this.ab(Ln,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.s())},n.Oy=function(t){if(0>t||this.type!==ah.Table)return-1;for(var e=0,n=this.sb,i=n.length,a=this.yi;a<i;a++){var r=n[a];if(void 0!==r&&t<(e+=r.total))break}return a},n.Gy=function(t){if(0>t||this.type!==ah.Table)return-1;for(var e=0,n=this.nb,i=n.length,a=this.hi;a<i;a++){var r=n[a];if(void 0!==r&&t<(e+=r.total))break}return a},n.fz=function(t,e){if(void 0===e&&(e=new ft(NaN,NaN)),this.type!==ah.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.zb();return n.geometry.dv((t-this.graduatedMin)/this.graduatedRange,e),n.transform.ta(e)},n.gz=function(t){if(this.type!==ah.Graduated)return NaN;var e=this.zb();return e.transform.Ud(t),e.geometry.kx(t)*this.graduatedRange+this.graduatedMin},n.uy=function(){var t=this.copy();return ch(t,(function(t){t instanceof ah&&(t.Rh=null,t.jb=null);var e=t.bb;null!==e&&(t.bb=null,e.each((function(e){t.bind(e.copy())})))})),t},n.Ea=function(t){var e=this.Rh;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((""===t||""===i||i===t)&&(i=n.targetProperty,null!==n.converter||""!==i)){i=this.data;var a=n.sourceName;if(null!==a)i=""===a||"/"===a||"."===a||".."===a?this:this.$a(a);else{var r=this.diagram;null!==r&&n.isToModel&&(i=r.model.modelData)}if(null!==i){r=this;var o=n.Yi;if(-1!==o){if(null===(r=this.Ps(o)))continue}else null!==n.Qd&&(r=n.Qd);if("/"===a?i=r.part:"."===a?i=r:".."===a&&(i=r.panel),0!==(a=n.yp)){if(!(r instanceof ah))continue;1===a?r=r.getColumnDefinition(n.Nl):2===a&&(r=r.getRowDefinition(n.Nl))}void 0!==r&&n.Yv(r,i)}}}},n.mt=function(){for(var t=wh(this);this.Y.length>t;)this.xc(this.Y.length-1,!1);if(null!==(t=this.itemArray))for(var e=t.length,n=0;n<e;n++)Sh(this,t[n],n)},n.gx=function(t){return null==t||null===this.Ed?null:this.Ed.J(t)},c.Object.defineProperties(ah.prototype,{type:{get:function(){return this.va},set:function(t){var e=this.va;e!==t&&(this.va=t,this.va===ah.Grid?this.isAtomic=!0:this.va===ah.Table&&rh(this),this.s(),this.g("type",e,t))}},elements:{get:function(){return this.Y.iterator}},naturalBounds:{get:function(){return this.qc}},padding:{get:function(){return this.eb},set:function(t){"number"==typeof t?(0>t&&P(t,">= 0",ah,"padding"),t=new $t(t)):(0>t.left&&P(t.left,">= 0",ah,"padding:value.left"),0>t.right&&P(t.right,">= 0",ah,"padding:value.right"),0>t.top&&P(t.top,">= 0",ah,"padding:value.top"),0>t.bottom&&P(t.bottom,">= 0",ah,"padding:value.bottom"));var e=this.eb;e.A(t)||(this.eb=t=t.I(),this.s(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.mn},set:function(t){var e=this.mn;e.A(t)||(this.mn=t=t.I(),this.s(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Ff},set:function(t){var e=this.Ff;e!==t&&(this.Ff=t,this.s(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.ej?ee:this.ej},set:function(t){if(void 0!==this.ej){"number"==typeof t&&(t=new $t(t));var e=this.ej;e.A(t)||(this.ej=t=t.I(),this.s(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.Wh?null:this.Wh},set:function(t){var e=this.Wh;e!==t&&(null===t||"string"==typeof t||t instanceof ms)&&(t instanceof ms&&t.freeze(),this.Wh=t,this.R(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Jg?1:this.Jg},set:function(t){if(void 0!==this.Jg){var e=this.Jg;e!==t&&isFinite(t)&&0<=t&&(this.Jg=t,this.s(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.Vh?null:this.Vh},set:function(t){if(void 0!==this.Vh){var e=this.Vh;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var r=t[a];"number"==typeof r&&0<=r&&isFinite(r)||w("defaultRowSeparatorDashArray value "+r+" at index "+a+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.Vh=t,this.R(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Hg?null:this.Hg},set:function(t){if(void 0!==this.Hg){var e=this.Hg;e!==t&&(null===t||"string"==typeof t||t instanceof ms)&&(t instanceof ms&&t.freeze(),this.Hg=t,this.R(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Ig?1:this.Ig},set:function(t){if(void 0!==this.Ig){var e=this.Ig;e!==t&&isFinite(t)&&0<=t&&(this.Ig=t,this.s(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.Uh?null:this.Uh},set:function(t){if(void 0!==this.Uh){var e=this.Uh;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var r=t[a];"number"==typeof r&&0<=r&&isFinite(r)||w("defaultColumnSeparatorDashArray value "+r+" at index "+a+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.Uh=t,this.R(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.Hp},set:function(t){var e=this.Hp;e!==t&&(this.Hp=t,this.s(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Kn},set:function(t){var e=this.Kn;if(!e.A(t)){t.o()&&0!==t.width&&0!==t.height||w("Invalid Panel.gridCellSize: "+t),this.Kn=t.I();var n=this.diagram;null!==n&&this===n.grid&&ur(n),this.R(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Ln},set:function(t){var e=this.Ln;if(!e.A(t)){t.o()||w("Invalid Panel.gridOrigin: "+t),this.Ln=t.I();var n=this.diagram;null!==n&&this===n.grid&&ur(n),this.R(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.s(),this.g("graduatedMin",e,t),_o(this)&&(null!==(t=this.part)&&To(this,t,"graduatedRange")))}},graduatedMax:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.s(),this.g("graduatedMax",e,t),_o(this)&&(null!==(t=this.part)&&To(this,t,"graduatedRange")))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e!==t&&0<t&&(this.Jn=t,this.s(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.s(),this.g("graduatedTickBase",e,t))}},yh:{get:function(){return 0!=(8388608&this.H)},set:function(t){0!=(8388608&this.H)!==t&&(this.H^=8388608)}},rowCount:{get:function(){return void 0===this.sb?0:this.sb.length}},columnCount:{get:function(){return void 0===this.nb?0:this.nb.length}},rowSizing:{get:function(){return void 0===this.Gj?Bh:this.Gj},set:function(t){if(void 0!==this.Gj){var e=this.Gj;e!==t&&(this.Gj=t,this.s(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.cj?Bh:this.cj},set:function(t){if(void 0!==this.cj){var e=this.cj;e!==t&&(this.cj=t,this.s(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.yi?0:this.yi},set:function(t){if(void 0!==this.yi){var e=this.yi;e!==t&&((!isFinite(t)||0>t)&&w("Panel.topIndex must be greater than zero and a real number, not: "+t),this.yi=t,this.s(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.hi?0:this.hi},set:function(t){if(void 0!==this.hi){var e=this.hi;e!==t&&((!isFinite(t)||0>t)&&w("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.hi=t,this.s(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.jb},set:function(t){var e=this.jb;if(e!==t){var n=this instanceof jl&&!(this instanceof tu);yh(this),this.jb=t;var i=this.diagram;null!==i&&(n?(n=i.partManager,this instanceof wu?(null!==e&&n.Gg.remove(e),null!==t&&n.Gg.add(t,this)):this instanceof jl&&(null!==e&&n.Ne.remove(e),null!==t&&n.Ne.add(t,this))):null!==(n=this.panel)&&null!==n.Ed&&(null!==e&&n.Ed.remove(e),null!==t&&n.Ed.add(t,this))),this.g("data",e,t),null!==i&&i.undoManager.isUndoingRedoing||null!==t&&this.Ea()}}},itemIndex:{get:function(){return this.Yn},set:function(t){var e=this.Yn;e!==t&&(this.Yn=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.fi},set:function(t){var e=this.fi;if(e!==t||null!==t&&function(t,e){for(var n=(t=t.Y.j).length,i=e.length,a=0,r=null;a<n&&!((r=t[a])instanceof ah&&null!==r.data);)r=t[++a];if(n-a!==i)return!0;if(null===r)return 0<i;for(var o=0;a<n&&o<i;){if(!((r=t[a])instanceof ah)||r.data!==e[o])return!0;a++,o++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&Wd(n.partManager,this,n),this.fi=t,null!==n&&null!==t&&qd(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||this.mt()}}},itemTemplate:{get:function(){return null===this.je?null:this.je.J("")},set:function(t){if(null===this.je){if(null===t)return;this.je=new ct}var e=this.je.J("");e!==t&&((t instanceof jl||t.isPanelMain)&&w("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.je.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.mt())}},itemTemplateMap:{get:function(){return this.je},set:function(t){var e=this.je;if(e!==t){for(var n=t.iterator;n.next(););this.je=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.mt()}}},itemCategoryProperty:{get:function(){return this.gl},set:function(t){var e=this.gl;e!==t&&(this.gl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.H)},set:function(t){var e=0!=(1048576&this.H);e!==t&&(this.H^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.H)},set:function(t){var e=0!=(2097152&this.H);e!==t&&(this.H^=2097152,this.s(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.H)},set:function(t){var e=0!=(33554432&this.H);e!==t&&(this.H^=33554432,this.s(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.H)},set:function(t){var e=0!=(4194304&this.H);if(e!==t){var n=null===this.panel||this.panel.ug();this.H^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&bh(this,this,t)}}},alignmentFocusName:{get:function(){return this.Bg},set:function(t){var e=this.Bg;e!==t&&(this.Bg=t,this.s(),this.g("alignmentFocusName",e,t))}}}),c.Object.defineProperties(ah,{Position:{get:function(){return Mh.J("Position")}},Horizontal:{get:function(){return Mh.J("Horizontal")}},Vertical:{get:function(){return Mh.J("Vertical")}},Spot:{get:function(){return Mh.J("Spot")}},Auto:{get:function(){return Mh.J("Auto")}},Table:{get:function(){return Mh.J("Table")}},Viewbox:{get:function(){return Mh.J("Viewbox")}},TableRow:{get:function(){return Mh.J("TableRow")}},TableColumn:{get:function(){return Mh.J("TableColumn")}},Link:{get:function(){return Mh.J("Link")}},Grid:{get:function(){return Mh.J("Grid")}},Graduated:{get:function(){return Mh.J("Graduated")}}}),ah.prototype.findItemPanelForData=ah.prototype.gx,ah.prototype.rebuildItemElements=ah.prototype.mt,ah.prototype.updateTargetBindings=ah.prototype.Ea,ah.prototype.copyTemplate=ah.prototype.uy,ah.prototype.graduatedValueForPoint=ah.prototype.gz,ah.prototype.graduatedPointForValue=ah.prototype.fz,ah.prototype.findColumnForLocalX=ah.prototype.Gy,ah.prototype.findRowForLocalY=ah.prototype.Oy,ah.prototype.removeColumnDefinition=ah.prototype.zv,ah.prototype.removeRowDefinition=ah.prototype.Bv,ah.prototype.removeAt=ah.prototype.mb,ah.prototype.remove=ah.prototype.remove,ah.prototype.insertAt=ah.prototype.Ib,ah.prototype.elt=ah.prototype.N,ah.prototype.add=ah.prototype.add,ah.prototype.findObject=ah.prototype.$a,ah.prototype.findInVisualTree=ah.prototype.Yl,ah.prototype.walkVisualTreeFrom=ah.prototype.ym,ah.prototype.findMainElement=ah.prototype.zb;var kh=!1,Lh=null,Mh=new ct;function Nh(){it(this),this.cg=null,this.Fr=!0,this.Sa=0,this.Pc=NaN,this.Yg=0,this.Xg=1/0,this.wb=Fe,this.sa=this.ka=0,this.bb=null,this.qp=Ch,this.we=jr,this.mp=this.gg=null,this.np=NaN,this.ib=this.Ij=null,this.gn=!1}function Th(t){if(t.sizing===Ch){var e=t.cg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}ah.className="Panel",ah.definePanelLayout=xh,xh("Position",new Xs),xh("Vertical",new qs),xh("Auto",new Ks),xh("Link",new eh),xh("Grid",new th),Nh.prototype.copy=function(){var t=new Nh;return t.Fr=this.Fr,t.Sa=this.Sa,t.Pc=this.Pc,t.Yg=this.Yg,t.Xg=this.Xg,t.wb=this.wb,t.ka=this.ka,t.sa=this.sa,t.we=this.we,t.qp=this.qp,null===this.gg?t.gg=null:t.gg=this.gg.I(),t.mp=this.mp,t.np=this.np,t.Ij=null,null!==this.Ij&&(t.separatorDashArray=M(this.separatorDashArray)),t.ib=this.ib,t.gn=this.gn,t.bb=this.bb,t},(n=Nh.prototype).Vl=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.gg=null===t.separatorPadding?null:t.separatorPadding.I(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.Ij=null,t.separatorDashArray&&(this.Ij=M(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.bb=t.bb},n.fb=function(t){t.classType===Nh&&(this.sizing=t)},n.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+rt(this)},n.Ui=function(t){this.cg=t},n.Ou=function(){var t=0,e=0,n=this.cg,i=this.isRow;if(null!==n&&n.type===ah.Table)for(var a=i?n.sb.length:n.nb.length,r=0;r<a;r++){var o=i?n.sb[r]:n.nb[r];if(void 0!==o){e=o.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==n&&(e=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.gg)){if(null===n)return t;e=n.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},n.tc=function(){var t=0,e=this.cg,n=0,i=this.isRow;if(null!==e&&e.type===ah.Table)for(var a=i?e.sb.length:e.nb.length,r=0;r<a;r++){var o=i?e.sb[r]:e.nb[r];if(void 0!==o){n=o.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(i=this.gg)){if(null===e)return t;i=e.defaultSeparatorPadding}return t+(this.isRow?i.top+i.bottom:i.left+i.right)},n.yb=function(t,e,n){var i=this.cg;if(null!==i&&(i.ab(xn,t,this,e,n,void 0,void 0),null!==this.bb&&(null!==(e=i.diagram)&&!e.skipsModelSourceBindings&&(null!==(i=i.Ii())&&null!==(e=i.data)))))for(n=this.bb.iterator;n.next();)n.value.xq(this,e,t,i)},n.bind=function(t){t.Qd=this;var e=this.panel;if(null!==e){var n=e.Ii();null!==n&&vh(n)&&w("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+e)}null===this.bb&&(this.bb=new tt),this.bb.add(t)},c.Object.defineProperties(Nh.prototype,{panel:{get:function(){return this.cg}},isRow:{get:function(){return this.Fr},set:function(t){this.Fr=t}},index:{get:function(){return this.Sa},set:function(t){this.Sa=t}},height:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(0>t&&P(t,">= 0",Nh,"height"),this.Pc=t,this.actual=this.ka,null!==this.panel&&this.panel.s(),this.yb("height",e,t))}},width:{get:function(){return this.Pc},set:function(t){var e=this.Pc;e!==t&&(0>t&&P(t,">= 0",Nh,"width"),this.Pc=t,this.actual=this.ka,null!==this.panel&&this.panel.s(),this.yb("width",e,t))}},minimum:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&((0>t||!isFinite(t))&&P(t,">= 0",Nh,"minimum"),this.Yg=t,this.actual=this.ka,null!==this.panel&&this.panel.s(),this.yb("minimum",e,t))}},maximum:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e!==t&&(0>t&&P(t,">= 0",Nh,"maximum"),this.Xg=t,this.actual=this.ka,null!==this.panel&&this.panel.s(),this.yb("maximum",e,t))}},alignment:{get:function(){return this.wb},set:function(t){var e=this.wb;e.A(t)||(this.wb=t.I(),null!==this.panel&&this.panel.s(),this.yb("alignment",e,t))}},stretch:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(this.we=t,null!==this.panel&&this.panel.s(),this.yb("stretch",e,t))}},separatorPadding:{get:function(){return this.gg},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.gg;null!==t&&null!==e&&e.A(t)||(null!==t&&(t=t.I()),this.gg=t,null!==this.panel&&this.panel.s(),this.yb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.mp},set:function(t){var e=this.mp;e!==t&&(null!==t&&Ns(t,"RowColumnDefinition.separatorStroke"),t instanceof ms&&t.freeze(),this.mp=t,null!==this.panel&&this.panel.s(),this.yb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.np},set:function(t){var e=this.np;e!==t&&(this.np=t,null!==this.panel&&this.panel.s(),this.yb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.Ij},set:function(t){var e=this.Ij;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var r=t[a];"number"==typeof r&&0<=r&&isFinite(r)||w("separatorDashArray value "+r+" at index "+a+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.Ij=t,null!==this.panel&&this.panel.R(),this.yb("separatorDashArray",e,t)}}},background:{get:function(){return this.ib},set:function(t){var e=this.ib;e!==t&&(null!==t&&Ns(t,"RowColumnDefinition.background"),t instanceof ms&&t.freeze(),this.ib=t,null!==this.panel&&this.panel.R(),this.yb("background",e,t))}},coversSeparators:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,null!==this.panel&&this.panel.R(),this.yb("coversSeparators",e,t))}},sizing:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,null!==this.panel&&this.panel.s(),this.yb("sizing",e,t))}},actual:{get:function(){return this.ka},set:function(t){this.ka=isNaN(this.Pc)?Math.max(Math.min(this.Xg,t),this.Yg):Math.max(Math.min(this.Xg,this.Pc),this.Yg)}},total:{get:function(){return this.ka+this.tc()},set:function(t){this.ka=isNaN(this.Pc)?Math.max(Math.min(this.Xg,t),this.Yg):Math.max(Math.min(this.Xg,this.Pc),this.Yg),this.ka=Math.max(0,this.ka-this.tc())}},position:{get:function(){return this.sa},set:function(t){this.sa=t}}}),Nh.prototype.bind=Nh.prototype.bind,Nh.prototype.computeEffectiveSpacing=Nh.prototype.tc,Nh.prototype.computeEffectiveSpacingTop=Nh.prototype.Ou;var Ch=new X(Nh,"Default",0),Fh=new X(Nh,"None",1),Bh=new X(Nh,"ProportionalExtra",2);function Oh(){Mo.call(this),this.Pd=this.qa=null,this.Vk="None",this.Fn=jr,this.Gc=this.Wk="black",this.ih=1,this.Il="butt",this.Jl="miter",this.Kj=10,this.gh=null,this.hh=0,this.ef=this.df=Fe,this.No=this.Mo=NaN,this.Qn=!1,this.Po=null,this.Yk=this.Pl="None",this.Cd=1,this.Bd=0,this.zd=1,this.Ad=null}function Ah(t,e,n,i){var a=n.length;if(!(4>a)){var r=i.measuredBounds,o=Math.max(1,r.width);r=r.height;for(var s,h,l,u,d,c,f=n[0],g=n[1],p=0,m=C(),v=2;v<a;v+=2)0===(l=(s=n[v])-f)&&(l=.001),u=(f=(h=n[v+1])-g)/l,d=Math.atan2(f,l),c=Math.sqrt(l*l+f*f),m.push([l,d,u,c]),p+=c,f=s,g=h;f=n[0],g=n[1],l=i.measuredBounds.width,i instanceof Oh&&(l-=i.strokeWidth),1>l&&(l=1),a=n=l,h=0!==(s=o/2),l=(c=m[v=0])[0],d=c[1],u=c[2],c=c[3];for(var y=0;.1<=p;){if(0===y&&(h?(a=n,a-=s,p-=s,h=!1):a=n,0===a&&(a=1)),a>p)return void F(m);a>c?(y=a-c,a=c):y=0;var w=Math.sqrt(a*a/(1+u*u));if(0>l&&(w=-w),f+=w,g+=u*w,t.translate(f,g),t.rotate(d),t.translate(-o/2,-r/2),0===y&&i.Ei(t,e),t.translate(o/2,r/2),t.rotate(-d),t.translate(-f,-g),p-=a,c-=a,0!==y){if(++v===m.length)return void F(m);l=(c=m[v])[0],d=c[1],u=c[2],c=c[3],a=y}}F(m)}}function jh(t){var e=t.geometryStretch;return null!==t.Pd?e===jr?Br:e:e===jr?_h[t.figure].defaultStretch:e}function Dh(t,e,n,i,a){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<i?(a.x=n.x,a.y=n.y,e):i}function zh(t,e,n,i,a,r,o,s,h){var l=!1,u=(a-o)*(e-i)-(r-s)*(t-n);return 0!==u&&(h.x=((a*s-r*o)*(t-n)-(a-o)*(t*i-e*n))/u,h.y=((a*s-r*o)*(e-i)-(r-s)*(t*i-e*n))/u,(t>n?t-n:n-t)<(e>i?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(h.y>t||qe.ca(h.y,t))&&(h.y<e||qe.ca(h.y,e))&&(l=!0)):(e=t<n?t:n,t=t<n?n:t,(h.x>e||qe.ca(h.x,e))&&(h.x<t||qe.ca(h.x,t))&&(l=!0)),l)}function Gh(t,e,n,i){if(!t.Tc(e,n,i))return!1;t=e.x,e=e.y;var a=n.x,r=n.y;return n=i.x,i=i.y,t===a?(e<r?(t=e,e=r):t=r,i>=t&&i<=e):(t<a?(i=t,t=a):i=a,n>=i&&n<=t)}function Eh(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Ku,"None"!==t.Pl?(t.segmentIndex=-1,t.alignmentFocus=Ge):"None"!==t.Yk&&(t.segmentIndex=0,t.alignmentFocus=new Ve(1-Ge.x,Ge.y)))}function Rh(t){var e=Ih[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=Ih[n])){var i,a=null;for(i in qe.Bm)if(i.toLowerCase()===n){a=i;break}if(null!==a)return t=Ze(qe.Bm[a],!1),Ih[a]=t,n!==a&&(Ih[n]=a),a}}return"string"==typeof e?e:e instanceof We?t:null}Nh.className="RowColumnDefinition",Nh.Default=Ch,Nh.None=Fh,Nh.ProportionalExtra=Bh,d(Oh,Mo),Oh.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.qa=this.qa,t.Vk=this.Vk,t.Fn=this.Fn,t.Pd=this.Pd,t.Wk=this.Wk,t.Gc=this.Gc,t.ih=this.ih,t.Il=this.Il,t.Jl=this.Jl,t.Kj=this.Kj,null!==this.gh&&(t.gh=M(this.gh)),t.hh=this.hh,t.df=this.df.I(),t.ef=this.ef.I(),t.Mo=this.Mo,t.No=this.No,t.Qn=this.Qn,t.Po=this.Po,t.Pl=this.Pl,t.Yk=this.Yk,t.Cd=this.Cd,t.Bd=this.Bd,t.zd=this.zd,t.Ad=this.Ad},(n=Oh.prototype).fb=function(t){t===Or||t===Ar||t===Gr||t===jr?this.geometryStretch=t:Mo.prototype.fb.call(this,t)},n.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+rt(this)},n.Ei=function(t,e){var n=this.Gc,i=this.Wk;if(null!==n||null!==i){var a=this.actualBounds,r=this.naturalBounds;null!==i&&Ao(this,t,i,!0,!1,r,a),null!==n&&Ao(this,t,n,!1,!1,r,a),a=this.part,0===(r=this.ih)&&null!==a&&(r=a instanceof tu&&a.type===ah.Link&&"Selection"===a.category&&a.adornedObject instanceof Oh&&a.adornedPart.zb()===a.adornedObject?a.adornedObject.strokeWidth:0),t.lineWidth=r,t.lineJoin=this.Jl,t.lineCap=this.Il,t.miterLimit=this.Kj;var o=!1;a&&e.Ee("drawShadows")&&(o=a.isShadowed);var s=!0;null!==n&&null===i&&(s=!1),a=!1;var h=this.strokeDashArray;null!==h&&(a=!0,t.Os(h,this.hh));var l=this.qa;if(null!==l){if(l.type===rn)t.beginPath(),t.moveTo(l.startX,l.startY),t.lineTo(l.endX,l.endY),null!==i&&t.Td(i),0!==r&&null!==n&&t.Xi();else if(l.type===on){var u=l.startX,d=l.startY,c=l.endX,f=l.endY;h=Math.min(u,c),l=Math.min(d,f),u=Math.abs(c-u),d=Math.abs(f-d),t.beginPath(),t.rect(h,l,u,d),null!==i&&t.Td(i),null!==n&&(c=i=n=0,s&&o&&(n=t.shadowOffsetX,i=t.shadowOffsetY,c=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),0!==r&&(0!==u&&0!==d||(t.beginPath(),t.rect(h,l,Math.max(u,.1),Math.max(d,.1))),t.Xi()),s&&o&&(t.shadowOffsetX=n,t.shadowOffsetY=i,t.shadowBlur=c))}else if(l.type===sn)d=l.startX,h=l.startY,c=l.endX,f=l.endY,l=Math.abs(c-d)/2,u=Math.abs(f-h)/2,d=Math.min(d,c)+l,h=Math.min(h,f)+u,t.beginPath(),t.moveTo(d,h-u),t.bezierCurveTo(d+qe.Ag*l,h-u,d+l,h-qe.Ag*u,d+l,h),t.bezierCurveTo(d+l,h+qe.Ag*u,d+qe.Ag*l,h+u,d,h+u),t.bezierCurveTo(d-qe.Ag*l,h+u,d-l,h+qe.Ag*u,d-l,h),t.bezierCurveTo(d-l,h-qe.Ag*u,d-qe.Ag*l,h-u,d,h-u),t.closePath(),null!==i&&t.Td(i),0!==r&&null!==n&&(s&&o?(r=t.shadowOffsetX,o=t.shadowOffsetY,n=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Xi(),t.shadowOffsetX=r,t.shadowOffsetY=o,t.shadowBlur=n):t.Xi());else if(l.type===hn)for(l=(h=l.figures).length,u=0;u<l;u++){d=h.j[u],t.beginPath(),t.moveTo(d.startX,d.startY),f=(c=d.segments.j).length;for(var g=null,p=0;p<f;p++){var m=c[p];switch(m.type){case fn:t.moveTo(m.endX,m.endY);break;case gn:t.lineTo(m.endX,m.endY);break;case pn:t.bezierCurveTo(m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY);break;case mn:t.quadraticCurveTo(m.point1X,m.point1Y,m.endX,m.endY);break;case vn:if(m.radiusX===m.radiusY){var v=Math.PI/180;t.arc(m.point1X,m.point1Y,m.radiusX,m.startAngle*v,(m.startAngle+m.sweepAngle)*v,0>m.sweepAngle,null!==g?g.endX:d.startX,null!==g?g.endY:d.startY)}else if(0===(v=(g=dn(m,d)).length))t.lineTo(m.centerX,m.centerY);else for(var y=0;y<v;y++){var S=g[y];0===y&&t.lineTo(S[0],S[1]),t.bezierCurveTo(S[2],S[3],S[4],S[5],S[6],S[7])}break;case yn:if(y=v=0,null!==g&&g.type===vn){if(0===(S=(g=dn(g,d)).length)){t.lineTo(m.centerX,m.centerY);break}null!==(g=g[S-1]||null)&&(v=g[6],y=g[7])}else v=null!==g?g.endX:d.startX,y=null!==g?g.endY:d.startY;if(0===(v=(g=cn(m,d,v,y)).length)){t.lineTo(m.centerX,m.centerY);break}for(y=0;y<v;y++)S=g[y],t.bezierCurveTo(S[2],S[3],S[4],S[5],S[6],S[7]);break;default:w("Segment not of valid type: "+m.type)}m.isClosed&&t.closePath(),g=m}o?(p=f=c=0,d.isShadowed?(!0===d.isFilled&&null!==i?(t.Td(i),s=!0):s=!1,0!==r&&null!==n&&(s&&(c=t.shadowOffsetX,f=t.shadowOffsetY,p=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Xi(),s&&(t.shadowOffsetX=c,t.shadowOffsetY=f,t.shadowBlur=p))):(s&&(c=t.shadowOffsetX,f=t.shadowOffsetY,p=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===d.isFilled&&null!==i&&t.Td(i),0!==r&&null!==n&&t.Xi(),s&&(t.shadowOffsetX=c,t.shadowOffsetY=f,t.shadowBlur=p))):(!0===d.isFilled&&null!==i&&t.Td(i),0!==r&&null!==n&&t.Xi())}if(a&&t.Ms(),null!==this.pathPattern){if((a=this.pathPattern).measure(1/0,1/0),r=a.measuredBounds,a.arrange(0,0,r.width,r.height),o=this.geometry,t.save(),t.beginPath(),r=C(),o.type===rn)r.push(o.startX),r.push(o.startY),r.push(o.endX),r.push(o.endY),Ah(t,e,r,a);else if(o.type===hn)for(o=o.figures.iterator;o.next();){for(n=o.value,r.length=0,r.push(n.startX),r.push(n.startY),h=i=n.startX,l=s=n.startY,d=(u=n.segments.j).length,c=0;c<d;c++){switch((f=u[c]).type){case fn:Ah(t,e,r,a),r.length=0,r.push(f.endX),r.push(f.endY),h=i=f.endX,l=s=f.endY;break;case gn:r.push(f.endX),r.push(f.endY),i=f.endX,s=f.endY;break;case pn:qe.Ae(i,s,f.point1X,f.point1Y,f.point2X,f.point2Y,f.endX,f.endY,.5,r),i=f.endX,s=f.endY;break;case mn:qe.mq(i,s,f.point1X,f.point1Y,f.endX,f.endY,.5,r),i=f.endX,s=f.endY;break;case vn:if(0===(m=(p=dn(f,n)).length)){r.push(f.centerX),r.push(f.centerY),i=f.centerX,s=f.centerY;break}for(g=0;g<m;g++)v=p[g],qe.Ae(i,s,v[2],v[3],v[4],v[5],v[6],v[7],.5,r),i=v[6],s=v[7];break;case yn:if(0===(m=(p=cn(f,n,i,s)).length)){r.push(f.centerX),r.push(f.centerY),i=f.centerX,s=f.centerY;break}for(g=0;g<m;g++)v=p[g],qe.Ae(i,s,v[2],v[3],v[4],v[5],v[6],v[7],.5,r),i=v[6],s=v[7];break;default:w("Segment not of valid type: "+f.type)}f.isClosed&&(r.push(h),r.push(l),Ah(t,e,r,a))}Ah(t,e,r,a)}else if(o.type===on)r.push(o.startX),r.push(o.startY),r.push(o.endX),r.push(o.startY),r.push(o.endX),r.push(o.endY),r.push(o.startX),r.push(o.endY),r.push(o.startX),r.push(o.startY),Ah(t,e,r,a);else if(o.type===sn){if((s=new ln).startX=o.endX,s.startY=(o.startY+o.endY)/2,(i=new un(vn)).startAngle=0,i.sweepAngle=360,i.centerX=(o.startX+o.endX)/2,i.centerY=(o.startY+o.endY)/2,i.radiusX=Math.abs(o.startX-o.endX)/2,i.radiusY=Math.abs(o.startY-o.endY)/2,s.add(i),0===(n=(o=dn(i,s)).length))r.push(i.centerX),r.push(i.centerY);else for(i=s.startX,s=s.startY,h=0;h<n;h++)l=o[h],qe.Ae(i,s,l[2],l[3],l[4],l[5],l[6],l[7],.5,r),i=l[6],s=l[7];Ah(t,e,r,a)}F(r),t.restore(),t.Rc(!1)}}}},n.ma=function(t,e){if(void 0===e&&(e=new ft),t instanceof Ve){t.jc()&&w("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,i=this.strokeWidth;e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)}else e.set(t);return this.rd.ta(e),e},n.Yp=function(t){void 0===t&&(t=new Et);var e=this.naturalBounds,n=this.rd;e=Et.allocAt(e.x,e.y,e.width,e.height);var i=this.strokeWidth;return e.Uc(i/2,i/2),i=ft.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),Ut(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),Ut(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),Ut(t,i.x,i.y,0,0),Et.free(e),ft.free(i),t},n.wh=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var i=n.bounds,a=this.strokeWidth/2;n.type!==rn||e||(a+=2);var r=Et.alloc();if(r.assign(i),r.Uc(a+2,a+2),!r.da(t))return Et.free(r),!1;if(i=a+1e-4,n.type===rn)return null!==this.stroke&&(i=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),!(0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>i)&&(Et.free(r),qe.Tb(n.startX,n.startY,n.endX,n.endY,a,t.x,t.y)));if(n.type===on){e=n.startX;var o=n.startY,s=n.endX;if(n=n.endY,r.x=Math.min(e,s),r.y=Math.min(o,n),r.width=Math.abs(s-e),r.height=Math.abs(n-o),null===this.fill){if(r.Uc(-i,-i),r.da(t))return Et.free(r),!1;r.Uc(i,i)}return null!==this.stroke&&r.Uc(a,a),t=r.da(t),Et.free(r),t}if(n.type===sn){o=n.startX,a=n.startY,s=n.endX;var h=n.endY;if(n=Math.min(o,s),e=Math.min(a,h),o=Math.abs(s-o)/2,a=Math.abs(h-a)/2,n=t.x-(n+o),e=t.y-(e+a),null===this.fill){if(a-=i,0>=(o-=i)||0>=a||1>=n*n/(o*o)+e*e/(a*a))return Et.free(r),!1;o+=i,a+=i}return null!==this.stroke&&(o+=i,a+=i),Et.free(r),!(0>=o||0>=a)&&1>=n*n/(o*o)+e*e/(a*a)}return n.type===hn?(Et.free(r),null===this.fill?en(n,t.x,t.y,a):n.da(t,a,1<this.strokeWidth,e)):(w("Unknown Geometry type: "+n.type),!1)},n.hm=function(t,e,n,i){var a=this.desiredSize,r=this.ih;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Pd)var o=this.geometry.bounds;else{var s=this.figure,h=_h[s];if(void 0===h){var l=qe.Ke[s];"string"==typeof l&&(l=qe.Ke[l]),"function"==typeof l?(h=l(null,100,100),_h[s]=h):w("Unsupported Figure: "+s)}o=h.bounds}s=o.width,h=o.height,l=o.width;var u=o.height;switch(Go(this,!0)){case Or:i=n=0;break;case Br:l=Math.max(t-r,0),u=Math.max(e-r,0);break;case Dr:l=Math.max(t-r,0),i=0;break;case zr:n=0,u=Math.max(e-r,0)}switch(isFinite(a.width)&&(l=a.width),isFinite(a.height)&&(u=a.height),a=this.maxSize,o=this.minSize,n=Math.max(n-r,o.width),i=Math.max(i-r,o.height),l=Math.min(a.width,l),u=Math.min(a.height,u),l=isFinite(l)?Math.max(n,l):Math.max(s,n),u=isFinite(u)?Math.max(i,u):Math.max(h,i),n=jh(this)){case Or:break;case Br:s=l,h=u;break;case Ar:n=Math.min(l/s,u/h),isFinite(n)||(n=1),s*=n,h*=n;break;default:w(n+" is not a valid geometryStretch.")}null!==this.Pd?(a=s=Math.max(s,.01),i=h=Math.max(h,.01),n=(o=null!==this.Pd?this.Pd:this.qa).copy(),a/=(o=o.bounds).width,i/=o.height,isFinite(a)||(a=1),isFinite(i)||(i=1),1===a&&1===i||n.scale(a,i),this.qa=n):null!==this.qa&&qe.ca(this.qa.el,t-r)&&qe.ca(this.qa.cl,e-r)||(this.qa=Oh.makeGeometry(this,s,h)),o=this.qa.bounds,1/0===t||1/0===e?Co(this,o.x-r/2,o.y-r/2,0===t&&0===s?0:o.width+r,0===e&&0===h?0:o.height+r):Co(this,-r/2,-r/2,l+r,u+r)},n.uh=function(t,e,n,i){Bo(this,t,e,n,i)},n.Tc=function(t,e,n){return this.ck(t.x,t.y,e.x,e.y,n)},n.ck=function(t,e,n,i,a){var r=this.transform,o=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*o,h=-r.m12*o,l=-r.m21*o,u=r.m11*o,d=o*(r.m21*r.dy-r.m22*r.dx),c=o*(r.m12*r.dx-r.m11*r.dy);if(r=t*s+e*l+d,o=t*h+e*u+c,s=n*s+i*l+d,h=n*h+i*u+c,d=this.ih/2,null===(l=this.qa)&&(this.measure(1/0,1/0),l=this.qa),c=l.bounds,u=!1,l.type===rn)if(1.5>=this.strokeWidth)u=qe.Ge(l.startX,l.startY,l.endX,l.endY,r,o,s,h,a);else{if(l.startX===l.endX?(i=d,u=0):(e=(l.endY-l.startY)/(l.endX-l.startX),i=(u=d/Math.sqrt(1+e*e))*e),e=C(),t=new ft,qe.Ge(l.startX+i,l.startY+u,l.endX+i,l.endY+u,r,o,s,h,t)&&e.push(t),t=new ft,qe.Ge(l.startX-i,l.startY-u,l.endX-i,l.endY-u,r,o,s,h,t)&&e.push(t),t=new ft,qe.Ge(l.startX+i,l.startY+u,l.startX-i,l.startY-u,r,o,s,h,t)&&e.push(t),t=new ft,qe.Ge(l.endX+i,l.endY+u,l.endX-i,l.endY-u,r,o,s,h,t)&&e.push(t),0===(s=e.length))return F(e),!1;for(u=!0,h=1/0,i=0;i<s;i++)(n=((t=e[i]).x-r)*(t.x-r)+(t.y-o)*(t.y-o))<h&&(h=n,a.x=t.x,a.y=t.y);F(e)}else if(l.type===on)u=qe.Tc(c.x-d,c.y-d,c.x+c.width+d,c.y+c.height+d,r,o,s,h,a);else if(l.type===sn){t:if(0===(e=Et.allocAt(c.x,c.y,c.width,c.height).Uc(d,d)).width)u=qe.Ge(e.x,e.y,e.x,e.y+e.height,r,o,s,h,a);else if(0===e.height)u=qe.Ge(e.x,e.y,e.x+e.width,e.y,r,o,s,h,a);else{if(t=e.width/2,l=e.height/2,i=e.x+t,u=e.y+l,n=9999,r!==s&&(n=(o-h)/(r-s)),9999>Math.abs(n)){if(0>t*t*n*n+l*l-(h=o-u-n*(r-i))*h){a.x=NaN,a.y=NaN,u=!1;break t}s=(-t*t*n*h+t*l*(d=Math.sqrt(t*t*n*n+l*l-h*h)))/(l*l+t*t*n*n)+i,t=(-t*t*n*h-t*l*d)/(l*l+t*t*n*n)+i,l=n*(s-i)+h+u,h=n*(t-i)+h+u,Math.abs((r-s)*(r-s))+Math.abs((o-l)*(o-l))<Math.abs((r-t)*(r-t))+Math.abs((o-h)*(o-h))?(a.x=s,a.y=l):(a.x=t,a.y=h)}else{if(s=l*l,0>(s-=s/(t*t)*(h=r-i)*h)){a.x=NaN,a.y=NaN,u=!1;break t}s=u+(h=Math.sqrt(s)),h=u-h,Math.abs(s-o)<Math.abs(h-o)?(a.x=r,a.y=s):(a.x=r,a.y=h)}u=!0}Et.free(e)}else if(l.type===hn){c=ft.alloc();var f=s-r,g=h-o,p=f*f+g*g;a.x=s,a.y=h;for(var m=0;m<l.figures.count;m++)for(var v=l.figures.j[m],y=v.segments,S=f=v.startX,P=g=v.startY,b=0;b<y.count;b++){var x=y.j[b],k=x.type,L=x.endX,M=x.endY,N=!1;switch(k){case fn:S=L,P=M;break;case gn:N=zh(f,g,L,M,r,o,s,h,c);break;case pn:N=qe.Op(f,g,x.point1X,x.point1Y,x.point2X,x.point2Y,L,M,r,o,s,h,.6,c);break;case mn:N=qe.Op(f,g,(f+2*x.point1X)/3,(g+2*x.point1Y)/3,(2*x.point1X+L)/3,(2*x.point1X+L)/3,L,M,r,o,s,h,.6,c);break;case vn:case yn:var T=(k=x.type===vn?dn(x,v):cn(x,v,f,g)).length;if(0===T){N=zh(f,g,x.centerX,x.centerY,r,o,s,h,c);break}for(M=null,L=0;L<T;L++){if(M=k[L],0===L&&zh(f,g,M[0],M[1],r,o,s,h,c)){var B=Dh(r,o,c,p,a);B<p&&(p=B,u=!0)}qe.Op(M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],r,o,s,h,.6,c)&&((B=Dh(r,o,c,p,a))<p&&(p=B,u=!0))}L=M[6],M=M[7];break;default:w("Unknown Segment type: "+k)}f=L,g=M,N&&((N=Dh(r,o,c,p,a))<p&&(p=N,u=!0)),x.isClosed&&(zh(f,g,L=S,M=P,r,o,s,h,c)&&((x=Dh(r,o,c,p,a))<p&&(p=x,u=!0)))}r=n-t,o=i-e,0!==(s=Math.sqrt(r*r+o*o))&&(r/=s,o/=s),a.x-=r*d,a.y-=o*d,ft.free(c)}else w("Unknown Geometry type: "+l.type);return!!u&&(this.transform.ta(a),!0)},n.vh=function(t,e){if(void 0===e)return t.nf(this.actualBounds);var n=this.qa;null===n&&(this.measure(1/0,1/0),n=this.qa),n=n.bounds;var i=this.strokeWidth/2,a=!1,r=ft.alloc();return r.h(n.x-i,n.y-i),t.da(e.ta(r))&&(r.h(n.x-i,n.bottom+i),t.da(e.ta(r))&&(r.h(n.right+i,n.bottom+i),t.da(e.ta(r))&&(r.h(n.right+i,n.y-i),t.da(e.ta(r))&&(a=!0)))),ft.free(r),a},n.Ic=function(t,e){if(this.vh(t,e)||void 0===e&&(e=this.transform,t.nf(this.actualBounds)))return!0;var n=ae.alloc();n.set(e),n.at();var i=t.left,a=t.right,r=t.top;t=t.bottom;var o=ft.alloc();if(o.h(i,r),n.ta(o),this.wh(o,!0))return ft.free(o),!0;if(o.h(a,r),n.ta(o),this.wh(o,!0))return ft.free(o),!0;if(o.h(i,t),n.ta(o),this.wh(o,!0))return ft.free(o),!0;if(o.h(a,t),n.ta(o),this.wh(o,!0))return ft.free(o),!0;var s=ft.alloc(),h=ft.alloc();return n.set(e),n.ov(this.transform),n.at(),s.x=a,s.y=r,s.transform(n),o.x=i,o.y=r,o.transform(n),e=!1,Gh(this,o,s,h)?e=!0:(o.x=a,o.y=t,o.transform(n),Gh(this,o,s,h)?e=!0:(s.x=i,s.y=t,s.transform(n),Gh(this,o,s,h)?e=!0:(o.x=i,o.y=r,o.transform(n),Gh(this,o,s,h)&&(e=!0)))),ft.free(o),ae.free(n),ft.free(s),ft.free(h),e},n.hx=function(t,e,n){function i(t,e){for(var n=t.length,i=0;i<n;i+=2)if(e.cd(t[i],t[i+1])>a)return!0;return!1}if(n&&null!==this.fill&&this.wh(t,!0))return!0;var a=t.Ce(e),r=a;if(1.5<this.strokeWidth&&(a=this.strokeWidth/2+Math.sqrt(a),a*=a),null===(e=this.qa)&&(this.measure(1/0,1/0),null===(e=this.qa)))return!1;if(!n){var o=e.bounds,s=o.x,h=o.y,l=o.x+o.width;if(o=o.y+o.height,wt(t.x,t.y,s,h)<=a&&wt(t.x,t.y,l,h)<=a&&wt(t.x,t.y,s,o)<=a&&wt(t.x,t.y,l,o)<=a)return!0}if(s=e.startX,h=e.startY,l=e.endX,o=e.endY,e.type===rn){if(n=(s-l)*(t.x-l)+(h-o)*(t.y-o),yt(t.x,t.y,s,h,l,o)<=(0<=(l-s)*(t.x-s)+(o-h)*(t.y-h)&&0<=n?a:r))return!0}else{if(e.type===on)return e=!1,n&&(e=yt(t.x,t.y,s,h,s,o)<=a||yt(t.x,t.y,s,h,l,h)<=a||yt(t.x,t.y,l,h,l,o)<=a||yt(t.x,t.y,s,o,l,o)<=a),e;if(e.type===sn){e=t.x-(s+l)/2,r=t.y-(h+o)/2;var u=Math.abs(l-s)/2,d=Math.abs(o-h)/2;if(0===u||0===d)return yt(t.x,t.y,s,h,l,o)<=a;if(!n)return!(wt(e,r,-u,0)>=a||wt(e,r,0,-d)>=a||wt(e,r,0,d)>=a||wt(e,r,u,0)>=a);if((t=qe.Ay(u,d,e,r))*t<=a)return!0}else if(e.type===hn){if(r=(l=e.bounds).x,s=l.y,h=l.x+l.width,l=l.y+l.height,t.x>h&&t.x<r&&t.y>l&&t.y<s&&yt(t.x,t.y,r,s,r,l)>a&&yt(t.x,t.y,r,s,h,s)>a&&yt(t.x,t.y,h,l,r,l)>a&&yt(t.x,t.y,h,l,h,s)>a)return!1;if(r=Math.sqrt(a),!n){for(n=e.figures,e=0;e<n.count;e++){if(o=(r=n.j[e]).startX,u=r.startY,t.cd(o,u)>a)return!1;for(h=(s=r.segments.j).length,l=0;l<h;l++)switch(d=s[l],d.type){case fn:case gn:if(o=d.endX,u=d.endY,t.cd(o,u)>a)return!1;break;case pn:var c=C();if(qe.Ae(o,u,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,c),o=i(c,t),F(c),o)return!1;if(o=d.endX,u=d.endY,t.cd(o,u)>a)return!1;break;case mn:if(c=C(),qe.mq(o,u,d.point1X,d.point1Y,d.endX,d.endY,.8,c),o=i(c,t),F(c),o)return!1;if(o=d.endX,u=d.endY,t.cd(o,u)>a)return!1;break;case vn:case yn:var f=(c=d.type===vn?dn(d,r):cn(d,r,o,u)).length;if(0===f){if(o=d.centerX,u=d.centerY,t.cd(o,u)>a)return!1;break}d=null;for(var g=C(),p=0;p<f;p++)if(d=c[p],g.length=0,qe.Ae(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,g),i(g,t))return F(g),!1;F(g),null!==d&&(o=d[6],u=d[7]);break;default:w("Unknown Segment type: "+d.type)}}return!0}if(null===this.fill?en(e,t.x,t.y,r):e.da(t,r,!0))return!0}}return!1},n.ac=function(){this.qa=null},Oh.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var i=Ih[t.toArrow];else"None"!==t.fromArrow?i=Ih[t.fromArrow]:("string"==typeof(i=qe.Ke[t.figure])&&(i=qe.Ke[i]),void 0===i&&w("Unknown Shape.figure: "+t.figure),(i=i(t,e,n)).el=e,i.cl=n);if(null===i){var a=qe.Ke.Rectangle;"function"==typeof a&&(i=a(t,e,n))}return i},c.Object.defineProperties(Oh.prototype,{geometry:{get:function(){return null!==this.qa?this.qa:this.Pd},set:function(t){var e=this.qa;if(e!==t){this.Pd=this.qa=null!==t?t.freeze():null;var n=this.part;null!==n&&(n.Wg=NaN),this.s(),this.g("geometry",e,t),_o(this)&&(null!==(t=this.part)&&To(this,t,"geometryString"))}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=Ze(t)).normalize();this.geometry=t,this.position=t=ft.allocAt(-e.x,-e.y),ft.free(t)}},isGeometryPositioned:{get:function(){return this.Qn},set:function(t){var e=this.Qn;e!==t&&(this.Qn=t,this.s(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Wk},set:function(t){var e=this.Wk;e!==t&&(null!==t&&Ns(t,"Shape.fill"),t instanceof ms&&t.freeze(),this.Wk=t,this.R(),this.g("fill",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Ns(t,"Shape.stroke"),t instanceof ms&&t.freeze(),this.Gc=t,this.R(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ih},set:function(t){var e=this.ih;if(e!==t)if(0<=t){this.ih=t,this.s();var n=this.part;null!==n&&(n.Wg=NaN),this.g("strokeWidth",e,t)}else P(t,"value >= 0",Oh,"strokeWidth:value")}},strokeCap:{get:function(){return this.Il},set:function(t){var e=this.Il;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?P(t,'"butt", "round", or "square"',Oh,"strokeCap"):(this.Il=t,this.R(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Jl},set:function(t){var e=this.Jl;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?P(t,'"miter", "bevel", or "round"',Oh,"strokeJoin"):(this.Jl=t,this.R(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Kj},set:function(t){var e=this.Kj;if(e!==t&&1<=t){this.Kj=t,this.R();var n=this.part;null!==n&&(n.Wg=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.gh},set:function(t){var e=this.gh;if(e!==t){if(null!==t){for(var n=t.length,i=0,a=0;a<n;a++){var r=t[a];0<=r&&isFinite(r)||w("strokeDashArray:value "+r+" at index "+a+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.gh=t,this.R(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.hh},set:function(t){var e=this.hh;e!==t&&0<=t&&(this.hh=t,this.R(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Vk},set:function(t){var e=this.Vk;if(e!==t){var n=qe.Ke[t];"function"==typeof n?n=t:(n=qe.Ke[t.toLowerCase()])||w("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.Wg=NaN),this.Vk=n,this.Pd=null,this.ac(),this.s(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.Pl},set:function(t){var e=this.Pl;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=Rh(t);null===n?w("Unknown Shape.toArrow: "+t):e!==n&&(this.Pl=n,this.Pd=null,this.ac(),this.s(),Eh(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.Yk},set:function(t){var e=this.Yk;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=Rh(t);null===n?w("Unknown Shape.fromArrow: "+t):e!==n&&(this.Yk=n,this.Pd=null,this.ac(),this.s(),Eh(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.df},set:function(t){var e=this.df;e.A(t)||(this.df=t=t.I(),this.s(),this.g("spot1",e,t))}},spot2:{get:function(){return this.ef},set:function(t){var e=this.ef;e.A(t)||(this.ef=t=t.I(),this.s(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Mo},set:function(t){var e=this.Mo;e!==t&&(this.Mo=t,this.ac(),this.s(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.No},set:function(t){var e=this.No;e!==t&&(this.No=t,this.ac(),this.s(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(null!==this.qa)return this.qc.assign(this.qa.bounds),this.qc;var t=this.desiredSize;return new Et(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.Po},set:function(t){var e=this.Po;e!==t&&(this.Po=t,this.R(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.Fn},set:function(t){var e=this.Fn;e!==t&&(this.Fn=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Cd},set:function(t){var e=this.Cd;if(e!==(t=Math.floor(t))&&0<=t){this.Cd=t;var n=this.diagram;null!==n&&this.panel===n.grid&&ur(n),this.s(),null!==(n=this.panel)&&(n.Pg=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Bd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(0>t?t=0:1<t&&(t=1),this.zd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.s(),this.g("graduatedSkip",e,t))}}}),Oh.prototype.intersectsRect=Oh.prototype.Ic,Oh.prototype.containedInRect=Oh.prototype.vh,Oh.prototype.getNearestIntersectionPoint=Oh.prototype.Tc,Oh.prototype.getDocumentBounds=Oh.prototype.Yp,Oh.prototype.getDocumentPoint=Oh.prototype.ma;var Ih=new W,_h=new W;function Vh(){Mo.call(this),fl||(Jh(),fl=!0),this.Ob="",this.Gc="black",this.fe="13px sans-serif",this.wi="start",this.yd=Or,this.Bi=Ae,this.oj=!0,this.di=this.ei=!1,this.ag=il,this.mg=el,this.Qr=this.oc=0,this.hu=this.iu=null,this.nd=new gl,this.zn=!1,this.Cc=this.Wm=this.zp=this.xi=this.Ap=null,this.cf=this.bf=0,this.ne=1/0,this.jl=0,this.Cd=1,this.Bd=0,this.zd=1,this.Ad=this.jj=null}function Yh(t,e){t.H=6144|e.H,t.lb=e.opacity,t.ib=e.background,t.dc=e.areaBackground,t.Nc=e.desiredSize.I(),t.Sf=e.minSize.I(),t.Rf=e.maxSize.I(),t.Qf=e.Qf.copy(),t.Ca=e.scale,t.zc=e.angle,t.we=e.stretch,t.Vg=e.margin.I(),t.wb=e.alignment.I(),t.yk=e.alignmentFocus.I(),t.yl=e.segmentFraction,t.zl=e.segmentOffset.I(),t.Al=e.segmentOrientation,null!==e.kd&&(t.kd=e.kd.copy()),t.Cl=e.shadowVisible,e instanceof Vh&&(t.Ob=e.Ob,t.Gc=e.Gc,t.fe=e.fe,t.wi=e.wi,t.yd=e.yd,t.Bi=e.Bi,t.oj=e.oj,t.ei=e.ei,t.di=e.di,t.ag=e.ag,t.mg=e.mg,t.nd.Jf=null,t.bf=e.bf,t.cf=e.cf,t.ne=e.ne,t.jl=e.jl,t.Cd=e.Cd,t.Bd=e.Bd,t.zd=e.zd,t.jj=e.jj,t.Ad=e.Ad)}function Hh(t,e,n,i,a){e=e.trim();var r=0,o=t.fe,s=t.bf+t.cf;s=Math.max(0,qh(t)+s);var h=t.ag===al?Wh(o):0;if(t.oc>=t.ne)null!==a&&a.h(0,s);else{var l=e;if(t.mg===Qh)if(n.lg=1,o=Uh(e),0===h||o<=i)n.Ec=Math.max(n.Ec,o),n.Wc.push(n.Ec),n.Ac.push(e),null!==a&&a.h(o,s);else{for(o=Uh((r=Xh(t,l))+(e=Xh(t,l=l.substr(r.length))));0<e.length&&o<=i;)o=Uh(((r+=e)+(e=Xh(t,l=l.substr(e.length)))).trim());for(r+=e.trim(),i=Math.max(1,i-h);Uh(r)>i&&1<r.length;)r=r.substr(0,r.length-1);e=Uh(r+=ul),n.Wc.push(e),n.Ec=e,n.Ac.push(r),null!==a&&a.h(e,s)}else{for(h=0,0===l.length&&(h=1,n.Wc.push(0),n.Ac.push(l));0<l.length;){var u=Xh(t,l);for(l=l.substr(u.length);Uh(u)>i;){var d=1;for(o=Uh(u.substr(0,d)),e=0;o<=i;)d++,e=o,o=Uh(u.substr(0,d));if(1===d?(n.Wc[t.oc+h]=o,r=Math.max(r,o)):(n.Wc[t.oc+h]=e,r=Math.max(r,e)),1>--d&&(d=1),n.Ac[t.oc+h]=u.substr(0,d),h++,u=u.substr(d),t.oc+h>t.ne)break}for(o=Uh(u+(e=Xh(t,l)));0<e.length&&o<=i;)o=Uh(((u+=e)+(e=Xh(t,l=l.substr(e.length)))).trim());if(""!==(u=u.trim())&&(""===u[u.length-1]&&(u=u.substring(0,u.length-1)+""),0===e.length?(n.Wc.push(o),r=Math.max(r,o)):(e=Uh(u),n.Wc.push(e),r=Math.max(r,e)),n.Ac.push(u),h++,t.oc+h>t.ne))break}n.lg=Math.min(t.ne,h),n.Ec=Math.max(n.Ec,r),null!==a&&a.h(n.Ec,s*n.lg)}}}function Xh(t,e){if(t.mg===nl)return e.substr(0,1);t=e.length;for(var n=0,i=rl;n<t&&!i.test(e.charAt(n));)n++;for(;n<t&&i.test(e.charAt(n));)n++;return n>=t?e:e.substr(0,n)}function Uh(t){return null===cl?8*t.length:cl.measureText(t).width}function qh(t){if(null!==t.nd.Jf)return t.nd.Jf;var e=t.fe;if(null===cl){var n=16;return t.nd.Jf=n}return void 0!==ol[e]&&5e3>sl?n=ol[e]:(n=1.3*cl.measureText("M").width,ol[e]=n,sl++),t.nd.Jf=n}function Wh(t){if(null===cl)return 6;if(void 0!==hl[t]&&5e3>ll)var e=hl[t];else e=cl.measureText(ul).width,hl[t]=e,ll++;return e}function Kh(t,e,n){var i=t.Ob.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),a=t.bf+t.cf;if(a=Math.max(0,qh(t)+a),0===i.length)return n.Ec=0,t.oc=1,a;if(!t.isMultiline){var r=i.indexOf("\n",0);0<=r&&(i=i.substr(0,r))}r=0;for(var o,s=t.oc=0,h=!1;!h;){if(-1===(o=i.indexOf("\n",s))&&(o=i.length,h=!0),s<=o){if(s=i.substr(s,o-s),t.mg!==Qh){n.lg=0;var l=jt.alloc();Hh(t,s,n,e,l),r+=l.height,jt.free(l),t.oc+=n.lg}else Hh(t,s,n,e,null),r+=a,t.oc++;t.oc===t.ne&&(h=!0)}s=o+1}return t.Qr=r}function Jh(){rl=/[ \u200b\u00ad]/,ol=new W,hl=new W,cl=Xr?new cs(null).context:null}Oh.className="Shape",Oh.getFigureGenerators=function(){var t,e=new ct;for(t in qe.Ke)t!==t.toLowerCase()&&e.add(t,qe.Ke[t]);return e.freeze(),e},Oh.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=qe.Ke;i[t]=e,i[n]=t},Oh.getArrowheadGeometries=function(){var t=new ct;for(i in qe.Bm)if(void 0===Ih[i]){var e=Ze(qe.Bm[i],!1);Ih[i]=e,(e=i.toLowerCase())!==i&&(Ih[e]=i)}for(var n in Ih)if(n!==n.toLowerCase()){var i=Ih[n];i instanceof We&&t.add(n,i)}return t.freeze(),t},Oh.defineArrowheadGeometry=function(t,e){var n=null;n="string"==typeof e?Ze(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||w("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=Ih;i[t]=n,i[e]=t},d(Vh,Mo),Vh.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.Ob=this.Ob,t.Gc=this.Gc,t.fe=this.fe,t.wi=this.wi,t.yd=this.yd,t.Bi=this.Bi,t.oj=this.oj,t.ei=this.ei,t.di=this.di,t.ag=this.ag,t.mg=this.mg,t.oc=this.oc,t.Qr=this.Qr,t.iu=this.iu,t.hu=this.hu,t.nd.Vl(this.nd),t.zn=this.zn,t.Ap=this.Ap,t.xi=this.xi,t.zp=this.zp,t.Wm=this.Wm,t.Cc=this.Cc,t.bf=this.bf,t.cf=this.cf,t.ne=this.ne,t.jl=this.jl,t.Cd=this.Cd,t.Bd=this.Bd,t.zd=this.zd,t.jj=this.jj,t.Ad=this.Ad},(n=Vh.prototype).fb=function(t){t.classType===Vh?this.wrap=t:Mo.prototype.fb.call(this,t)},n.toString=function(){return 22<this.Ob.length?'TextBlock("'+this.Ob.substring(0,20)+'"...)':'TextBlock("'+this.Ob+'")'},n.s=function(){Mo.prototype.s.call(this),this.hu=this.iu=null},n.Ei=function(t,e){if(null!==this.Gc&&0!==this.Ob.length&&null!==this.fe){var n=this.naturalBounds,i=this.actualBounds,a=n.width,r=n.height,o=qh(this),s=t.textAlign=this.wi,h=e.Sn;"start"===s?s=h?"right":"left":"end"===s&&(s=h?"left":"right"),h=this.ei;var l=this.di;Ao(this,t,this.Gc,!0,!1,n,i),(h||l)&&Ao(this,t,this.Gc,!1,!1,n,i),i=0,n=!1;var u=ft.allocAt(0,0);this.rd.ta(u);var d=ft.allocAt(0,o);this.rd.ta(d);var c=u.Ce(d);switch(ft.free(u),ft.free(d),8>c*(u=e.scale)*u&&(n=!0),e.Yc!==t&&(n=!1),!1===e.Ee("textGreeking")&&(n=!1),e=this.bf,c=this.cf,this.flip){case Rr:t.translate(a,0),t.scale(-1,1);break;case Er:t.translate(0,r),t.scale(1,-1);break;case Ir:t.translate(a,r),t.scale(-1,-1)}r>(d=(e+o+c)*(u=this.oc))&&(i=(i=this.Bi).y*r-i.y*d+i.offsetY),d=this.nd;for(var f=0;f<u;f++){var g=d.Wc[f];g>a&&(g=a),i+=e;var p=d.Ac[f],m=t,v=i,y=s,w=0;if(n)"left"===y?w=0:"right"===y?w=a-g:"center"===y&&(w=(a-g)/2),m.fillRect(0+w,v+.25*o,g,1);else{"left"===y?w=0:"right"===y?w=a:"center"===y&&(w=a/2);var S=null!==Zh?Zh(this,o):.75*o;m.fillText(p,0+w,v+S),0===(p=o/20|0)&&(p=1),"right"===y?w-=g:"center"===y&&(w-=g/2),h&&(y=null!==$h?$h(this,o):.8*o,m.beginPath(),m.lineWidth=p,m.moveTo(0+w,v+y),m.lineTo(0+w+g,v+y),m.stroke()),l&&(m.beginPath(),m.lineWidth=p,v=v+o-o/2.2|0,0!=p%2&&(v+=.5),m.moveTo(0+w,v),m.lineTo(0+w+g,v),m.stroke())}i+=o+c}switch(this.flip){case Rr:t.scale(-1,1),t.translate(-a,0);break;case Er:t.scale(1,-1),t.translate(0,-r);break;case Ir:t.scale(-1,-1),t.translate(-a,-r)}}},n.hm=function(t,e,n,i){this.jl=t;var a,r=this.fe;if(null!==cl&&dl!==r&&(dl=cl.font=r),(r=this.nd).reset(),isNaN(this.desiredSize.width)){var o=this.Ob.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===o.length)o=0;else if(this.isMultiline){for(var s=a=0,h=!1;!h;){var l=o.indexOf("\n",s);-1===l&&(l=o.length,h=!0),a=Math.max(a,Uh(o.substr(s,l-s).trim())),s=l+1}o=a}else 0<=(a=o.indexOf("\n",0))&&(o=o.substr(0,a)),o=Uh(o);o=Math.min(o,t/this.scale),o=Math.max(8,o)}else o=this.desiredSize.width;if(null!==this.panel&&(o=Math.min(o,this.panel.maxSize.width)),a=Kh(this,o,r),s=a=isNaN(this.desiredSize.height)?Math.min(a,e/this.scale):this.desiredSize.height,0!==r.Ec&&1!==r.Ac.length&&this.ag===al&&(e=this.fe,e=this.ag===al?Wh(e):0,h=this.bf+this.cf,h=Math.max(0,qh(this)+h),!((s=Math.min(this.maxLines-1,Math.max(Math.floor(s/h+.01)-1,0)))+1>=r.Ac.length))){for(h=r.Ac[s],e=Math.max(1,t-e);Uh(h)>e&&1<h.length;)h=h.substr(0,h.length-1);e=Uh(h+=ul),r.Ac[s]=h,r.Ac=r.Ac.slice(0,s+1),r.Wc[s]=e,r.Wc=r.Wc.slice(0,s+1),r.lg=r.Ac.length,r.Ec=Math.max(r.Ec,e),this.oc=r.lg}(this.wrap===tl||isNaN(this.desiredSize.width))&&(o=isNaN(t)?r.Ec:Math.min(t,r.Ec),isNaN(this.desiredSize.width)&&(o=Math.max(8,o))),o=Math.max(n,o),a=Math.max(i,a),Rt(this.qc,o,a),Co(this,0,0,o,a)},n.uh=function(t,e,n,i){Bo(this,t,e,n,i)},c.Object.defineProperties(Vh.prototype,{font:{get:function(){return this.fe},set:function(t){var e=this.fe;e!==t&&(this.fe=t,this.nd.Jf=null,this.s(),this.g("font",e,t))}},text:{get:function(){return this.Ob},set:function(t){var e=this.Ob;e!==(t=null!=t?t.toString():"")&&(this.Ob=t,this.s(),this.g("text",e,t))}},textAlign:{get:function(){return this.wi},set:function(t){var e=this.wi;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.wi=t,this.R(),this.g("textAlign",e,t))}},flip:{get:function(){return this.yd},set:function(t){var e=this.yd;e!==t&&(this.yd=t,this.R(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Bi},set:function(t){var e=this.Bi;e.A(t)||(this.Bi=t=t.I(),zo(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.qc.o()){var t=jt.alloc();Hh(this,this.Ob,this.nd,999999,t);var e=t.width;jt.free(t),t=Kh(this,e,this.nd);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),Rt(this.qc,e,t)}return this.qc}},isMultiline:{get:function(){return this.oj},set:function(t){var e=this.oj;e!==t&&(this.oj=t,this.s(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.R(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.R(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.s(),this.g("wrap",e,t))}},overflow:{get:function(){return this.ag},set:function(t){var e=this.ag;e!==t&&(this.ag=t,this.s(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&Ns(t,"TextBlock.stroke"),t instanceof ms&&t.freeze(),this.Gc=t,this.R(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.oc}},editable:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.Cc},set:function(t){var e=this.Cc;e!==t&&(this.Cc=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Cd},set:function(t){var e=this.Cd;if(e!==(t=Math.floor(t))&&0<=t){this.Cd=t,this.s();var n=this.panel;null!==n&&(n.Pg=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Bd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.zd},set:function(t){var e=this.zd;e!==t&&(0>t?t=0:1<t&&(t=1),this.zd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&(this.jj=t,this.s(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Ad},set:function(t){var e=this.Ad;e!==t&&(this.Ad=t,this.s(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.xi},set:function(t){var e=this.xi;e!==t&&(this.xi=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.cf},set:function(t){var e=this.cf;e!==t&&(this.cf=t,this.g("spacingBelow",e,t))}},maxLines:{get:function(){return this.ne},set:function(t){var e=this.ne;e!==t&&(0>=(t=Math.floor(t))&&P(t,"> 0",Vh,"maxLines"),this.ne=t,this.g("maxLines",e,t),this.s())}},metrics:{get:function(){return this.nd}},choices:{get:function(){return this.Wm},set:function(t){var e=this.Wm;e!==t&&(this.Wm=t,this.g("choices",e,t))}}});var Zh=null,$h=null,Qh=new X(Vh,"None",0),tl=new X(Vh,"WrapFit",1),el=new X(Vh,"WrapDesiredSize",2),nl=new X(Vh,"WrapBreakAll",3),il=new X(Vh,"OverflowClip",0),al=new X(Vh,"OverflowEllipsis",1),rl=null,ol=null,sl=0,hl=null,ll=0,ul="...",dl="",cl=null,fl=!1;function gl(){this.Ec=this.lg=0,this.Wc=[],this.Ac=[],this.Jf=null}function pl(){Mo.call(this),this.Lg=null,this.sp="",this.fh=Jt,this.al=Br,this.ff=this.Cc=null,this.$k=ue,this.yd=Or,this.Ll=null,this.au=!1,this.nr=!0,this.nl=!1,this.Dl=null}function ml(t){void 0===t&&(t=""),""!==t?wl[t]&&(delete wl[t],Sl--):(wl=new W,Sl=0)}function vl(t,e){t.Dr=!0,t.Zk=!1;for(var n,i=D(),a=i.length,r=0;r<a;r++){var o=i[r];n=t.getAttribute("src");var s=o.Dj.J(n);if(null!==s)for(var h=s.length,l=0;l<h;l++)n=s[l],o.mu.add(n),o.cc(),void 0===t.su&&(t.su=e,null!==n.ff&&n.ff(n,e))}}function yl(t,e){t.Zk=e;for(var n,i=D(),a=i.length,r=0;r<a;r++){var o=i[r],s=t.getAttribute("src");if(null!==(n=o.Dj.J(s))){o=n.length,s=C();for(var h=0;h<o;h++)s.push(n[h]);for(h=0;h<o;h++)null!==(n=s[h]).Cc&&n.Cc(n,e);F(s)}}}Vh.className="TextBlock",Vh.getEllipsis=function(){return ul},Vh.setEllipsis=function(t){ul=t,hl=new W,ll=0},Vh.getBaseline=function(){return Zh},Vh.setBaseline=function(t){Zh=t;for(var e=(t=D()).length,n=0;n<e;n++)t[n].uf()},Vh.getUnderline=function(){return $h},Vh.setUnderline=function(t){$h=t;for(var e=(t=D()).length,n=0;n<e;n++)t[n].uf()},Vh.isValidFont=function(t){if(fl||(Jh(),fl=!0),null===cl)return!0;var e=cl.font;if(t===e||"10px sans-serif"===t)return!0;cl.font="10px sans-serif",cl.font=t;var n=cl.font;if("10px sans-serif"!==n)return cl.font=e,!0;cl.font="19px serif";var i=cl.font;return cl.font=t,n=cl.font,cl.font=e,n!==i},Vh.None=Qh,Vh.WrapFit=tl,Vh.WrapDesiredSize=el,Vh.WrapBreakAll=nl,Vh.OverflowClip=il,Vh.OverflowEllipsis=al,gl.prototype.reset=function(){this.Ec=this.lg=0,this.Jf=null,this.Wc=[],this.Ac=[]},gl.prototype.Vl=function(t){this.lg=t.lg,this.Jf=t.Jf,this.Ec=t.Ec,this.Wc=M(t.Wc),this.Ac=M(t.Ac)},c.Object.defineProperties(gl.prototype,{arrSize:{get:function(){return this.Wc}},arrText:{get:function(){return this.Ac}},maxLineWidth:{get:function(){return this.Ec}},fontHeight:{get:function(){return this.Jf}}}),gl.className="TextBlockMetrics",d(pl,Mo),pl.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.element=this.Lg,t.sp=this.sp,t.fh=this.fh.I(),t.al=this.al,t.yd=this.yd,t.Cc=this.Cc,t.ff=this.ff,t.$k=this.$k.I(),t.nr=this.nr,t.Dl=this.Dl},(n=pl.prototype).fb=function(t){t===Or||t===Ar||t===Gr?this.imageStretch=t:Mo.prototype.fb.call(this,t)},n.toString=function(){return"Picture("+this.source+")#"+rt(this)},n.Jz=function(){if(""!==this.source){ml(this.source);var t=this.source;this.source="",this.source=t}},n.uf=function(){this.R()},n.Ei=function(t,e){var n=this.Lg;if(null!==n){var i=n.getAttribute("src");if(n instanceof HTMLImageElement&&(null===i||""===i)&&w('Element has no source ("src") attribute: '+n),!(n.Zk instanceof Event)){i=this.naturalBounds;var a=0,r=0,o=this.au,s=o?+n.width:n.naturalWidth;if(o=o?+n.height:n.naturalHeight,void 0===s&&n.videoWidth&&(s=n.videoWidth),void 0===o&&n.videoHeight&&(o=n.videoHeight),s=s||i.width,o=o||i.height,0!==s&&0!==o){var h=s,l=o;this.sourceRect.o()&&(a=this.fh.x,r=this.fh.y,s=this.fh.width,o=this.fh.height);var u=s,d=o,c=this.al,f=this.$k;switch(c){case Or:if(this.sourceRect.o())break;u>=i.width&&(a=a+f.offsetX+(u*f.x-i.width*f.x)),d>=i.height&&(r=r+f.offsetY+(d*f.y-i.height*f.y)),s=Math.min(i.width,u),o=Math.min(i.height,d);break;case Br:u=i.width,d=i.height;break;case Ar:case Gr:c===Ar?(u*=c=Math.min(i.height/d,i.width/u),d*=c):c===Gr&&(d*=c=Math.max(i.height/d,i.width/u),(u*=c)>=i.width&&(a=(a+f.offsetX+(u*f.x-i.width*f.x)/u)*s),d>=i.height&&(r=(r+f.offsetY+(d*f.y-i.height*f.y)/d)*o),s*=1/(u/i.width),o*=1/(d/i.height),u=i.width,d=i.height)}var g=u*(c=this.De()*e.scale)*d*c,p=s*o/g,m=n.__goCache;c=null;var v=Pl;if(n.Dr&&void 0!==m&&4<g&&p>v*v)for(null===m.Di&&(xl(m,4,h,l,n),xl(m,16,h,l,n)),l=(h=m.Di).length,g=0;g<l&&h[g].ratio*h[g].ratio<p;g++)c=h[g];if(!e.wn){if(null===this.Ll)if(null===this.Lg)this.Ll=!1;else{(h=new cs(null).context).drawImage(this.Lg,0,0);try{h.getImageData(0,0,1,1).data[3]&&(this.Ll=!1),this.Ll=!1}catch(t){this.Ll=!0}}if(this.Ll)return}switch(h=0,u<i.width&&(h=f.offsetX+(i.width*f.x-u*f.x)),l=0,d<i.height&&(l=f.offsetY+(i.height*f.y-d*f.y)),this.flip){case Rr:t.translate(Math.min(i.width,u),0),t.scale(-1,1);break;case Er:t.translate(0,Math.min(i.height,d)),t.scale(1,-1);break;case Ir:t.translate(Math.min(i.width,u),Math.min(i.height,d)),t.scale(-1,-1)}if(e.Ee("pictureRatioOptimization")&&!e.nj&&void 0!==m&&null!==c&&1!==c.ratio){t.save(),e=c.ratio;try{t.drawImage(c.source,a/e,r/e,Math.min(c.source.width,s/e),Math.min(c.source.height,o/e),h,l,Math.min(i.width,u),Math.min(i.height,d))}catch(t){this.nr=!1}t.restore()}else try{t.drawImage(n,a,r,s,o,h,l,Math.min(i.width,u),Math.min(i.height,d))}catch(t){this.nr=!1}switch(this.flip){case Rr:t.scale(-1,1),t.translate(-Math.min(i.width,u),0);break;case Er:t.scale(1,-1),t.translate(0,-Math.min(i.height,d));break;case Ir:t.scale(-1,-1),t.translate(-Math.min(i.width,u),-Math.min(i.height,d))}}}}},n.hm=function(t,e,n,i){var a=this.desiredSize,r=Go(this,!0),o=this.Lg,s=this.au;(s||!this.nl&&o&&o.complete)&&(this.nl=!0),null===o&&(isFinite(a.width)||(t=0),isFinite(a.height)||(e=0)),isFinite(a.width)||r===Br||r===Dr?(isFinite(t)||(t=this.sourceRect.o()?this.sourceRect.width:s?+o.width:o.naturalWidth),n=0):null!==o&&!1!==this.nl&&(t=this.sourceRect.o()?this.sourceRect.width:s?+o.width:o.naturalWidth),isFinite(a.height)||r===Br||r===zr?(isFinite(e)||(e=this.sourceRect.o()?this.sourceRect.height:s?+o.height:o.naturalHeight),i=0):null!==o&&!1!==this.nl&&(e=this.sourceRect.o()?this.sourceRect.height:s?+o.height:o.naturalHeight),isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(e=a.height),a=this.maxSize,r=this.minSize,n=Math.max(n,r.width),i=Math.max(i,r.height),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(n,t),e=Math.max(i,e),null===o||o.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Rt(this.qc,t,e),Co(this,0,0,t,e)},n.uh=function(t,e,n,i){Bo(this,t,e,n,i)},c.Object.defineProperties(pl.prototype,{element:{get:function(){return this.Lg},set:function(t){var e=this.Lg;if(e!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||w("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.au=t instanceof HTMLCanvasElement,this.Lg=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.Zk instanceof Event&&null!==this.Cc&&this.Cc(this,t.Zk),!0===t.Dr&&null!==this.ff&&this.ff(this,t.su),t.Dr=!0,this.desiredSize.o()||(Uo(this,!1),this.s());else{var n=this;t.xw||(t.addEventListener("load",(function(e){vl(t,e),n.desiredSize.o()||(Uo(n,!1),n.s())})),t.addEventListener("error",(function(e){yl(t,e)})),t.xw=!0)}this.g("element",e,t),this.R()}}},source:{get:function(){return this.sp},set:function(t){var e=this.sp;if(e!==t){this.sp=t;var n=wl,i=this.diagram,a=null;if(void 0!==n[t])a=n[t];else{30<Sl&&(ml(),n=wl),a=y("img");var r=this;a.addEventListener("load",(function(t){vl(a,t),r.desiredSize.o()||(Uo(r,!1),r.s())})),a.addEventListener("error",(function(t){yl(a,t)})),a.xw=!0;var o=this.Dl;null!==o&&(a.crossOrigin=o(this)),a.src=t,n[t]=a,Sl++}null!==i&&pr(i,this),this.element=a,null!==i&&gr(i,this),void 0===a.__goCache&&(a.__goCache=new bl),this.s(),this.R(),this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Dl},set:function(t){if(this.Dl!==t&&(this.Dl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.fh},set:function(t){var e=this.fh;e.A(t)||(this.fh=t=t.I(),this.R(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.al},set:function(t){var e=this.al;e!==t&&(this.al=t,this.R(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.yd},set:function(t){var e=this.yd;e!==t&&(this.yd=t,this.R(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.$k},set:function(t){var e=this.$k;e.A(t)||(this.$k=t=t.I(),this.s(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Cc},set:function(t){var e=this.Cc;e!==t&&(this.Cc=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.ff},set:function(t){var e=this.ff;e!==t&&(this.ff=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.qc}}}),pl.prototype.redraw=pl.prototype.uf,pl.prototype.reloadSource=pl.prototype.Jz;var wl=null,Sl=0,Pl=4;function bl(){this.Di=null}function xl(t,e,n,i,a){null===t.Di&&(t.Di=[]);var r=new cs(null),o=r.context,s=1/e;r.width=n/e,r.height=i/e,0!==r.width&&0!==r.height&&(e=new kl(r.Ga,e),n=1,0<t.Di.length&&(a=(n=t.Di[t.Di.length-1]).source,n=n.ratio),o.setTransform(s*n,0,0,s*n,0,0),o.drawImage(a,0,0),t.Di.push(e))}function kl(t,e){this.source=t,this.ratio=e}function Ll(){this.Ts=new We,this.ec=null}function Ml(t,e,n,i,a){t.ec=new ln,t.ec.startX=e,t.ec.startY=n,t.ec.isFilled=i,t.Ts.figures.add(t.ec),void 0!==a&&(t.ec.isShadowed=a)}function Nl(t){var e=t.ec.segments.length;0<e&&t.ec.segments.N(e-1).close()}function Tl(t,e,n,i,a,r,o){var s;void 0===s&&(s=!1);var h=new un(pn);h.point1X=e,h.point1Y=n,h.point2X=i,h.point2Y=a,h.endX=r,h.endY=o,s&&h.close(),t.ec.segments.add(h)}function Cl(t,e,n,i,a){var r;void 0===r&&(r=!1);var o=new un(mn);o.point1X=e,o.point1Y=n,o.endX=i,o.endY=a,r&&o.close(),t.ec.segments.add(o)}function Fl(t,e,n,i,a,r,o,s){var h;void 0===h&&(h=!1),e=new un(yn,o,s,e,n,i,a,r),h&&e.close(),t.ec.segments.add(e)}function Bl(t){var e=Ol;return null!==e?(Ol=null,e.reset(t),e):((e=new Ll).reset(t),e)}pl.className="Picture",wl=new W,pl.clearCache=ml,bl.className="PictureCacheArray",kl.className="PictureCacheInstance",(n=Ll.prototype).reset=function(t){null!==t?(t.ha(),this.Ts=t,t.figures.clear()):this.Ts=new We,this.ec=null},n.tq=function(t){this.ec.isShadowed=t},n.moveTo=function(t,e,n){void 0===n&&(n=!1);var i=new un(fn);i.endX=t,i.endY=e,n&&i.close(),this.ec.segments.add(i)},n.lineTo=function(t,e,n){void 0===n&&(n=!1);var i=new un(gn);i.endX=t,i.endY=e,n&&i.close(),this.ec.segments.add(i)},n.arcTo=function(t,e,n,i,a,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var s=new un(vn);s.startAngle=t,s.sweepAngle=e,s.centerX=n,s.centerY=i,s.radiusX=a,s.radiusY=0!==r?r:a,o&&s.close(),this.ec.segments.add(s)};var Ol=null;function Al(t,e){var n=t.toLowerCase(),i=qe.Ke;i[t]=e,i[n]=t}function jl(t){ah.call(this,t),this.D=2408959,this.Tg=this.Af="",this.Yo=this.Vo=this.jp=this.$n=null,this.lp="",this.yf=this.Mn=this.kp=this.dh=null,this.Xo="",this.Wo=Ot,this.Ob=this.Zo="",this.gi=this.Zm=this.Sh=null,this.me=new ft(NaN,NaN).freeze(),this.ho="",this.Xe=null,this.io=oe,this.$o=Fe,this.qo=bt,this.jo=xt,this.vn=null,this.ao=127,this.ui=kt,this.Jj="gray",this.Od=4,this.Aw=-1,this.Kp=NaN,this.Sx=new Et,this.wj=null,this.Wg=NaN}function Dl(t){0!=(16384&t.D)!=!1&&(t.updateAdornments(),Xl(t,!1))}function zl(t){if(!1===Ul(t)){ql(t,!0),t.fl();var e=t.diagram;null!==e&&(e.Dd.add(t),e.cc())}}function Gl(t){if(t.D|=2097152,!1!==Ul(t)){var e=t.position,n=t.location;n.o()&&e.o()||Il(t,e,n),n=t.vb;var i=Et.alloc().assign(n);n.ha(),n.x=e.x,n.y=e.y,n.freeze(),t.kt(i,n),Et.free(i),ql(t,!1)}}function El(t,e){var n=t.Sx;isNaN(t.Wg)&&(t.Wg=function t(e){for(var n=(e=e.Y.j).length,i=0,a=0;a<n;a++){var r=e[a];if(r instanceof ah)i=Math.max(i,t(r));else if(r instanceof Oh){t:{switch(r.Vk){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":r=0;break t}r=r.ih/2*r.Kj*r.De()}i=Math.max(i,r)}}return i}(t));var i=t.Wg,a=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+a,e.height+2+a),n;i=e.x,a=e.y;var r=e.width;e=e.height;var o=t.shadowBlur;return r+=o,e+=o,i-=o/2,a-=o/2,0<(t=t.shadowOffset).x?r+=t.x:(i+=t.x,r-=t.x),0<t.y?e+=t.y:(a+=t.y,e-=t.y),n.h(i-1,a-1,r+2,e+2),n}function Rl(t,e,n,i){null===e||t instanceof tu||(e=e.animationManager).ni&&e.sh(t,"position",i.copy(),n.copy(),!1)}function Il(t,e,n){var i=ft.alloc(),a=t.locationSpot,r=t.locationObject;a.jc()&&w("determineOffset: Part's locationSpot must be real: "+a.toString());var o=r.naturalBounds,s=r instanceof Oh?r.strokeWidth:0;if(i.rk(0,0,o.width+s,o.height+s,a),r!==t)for(i.offset(-s/2,-s/2),r.transform.ta(i),a=r.panel;null!==a&&a!==t;)a.transform.ta(i),a=a.panel;t.Qf.ta(i),i.offset(-t.pc.x,-t.pc.y),a=t.diagram,r=n.o(),o=e.o(),r&&o?0!=(2097152&t.D)?_l(t,e,n,a,i):Vl(t,e,n,a,i):r?_l(t,e,n,a,i):o&&Vl(t,e,n,a,i),t.D|=2097152,ft.free(i),t.fl()}function _l(t,e,n,i,a){var r=e.x,o=e.y;e.h(n.x-a.x,n.y-a.y),null!==i&&((a=(n=i.animationManager).isAnimating)||!n.ni||t instanceof tu||n.sh(t,"position",new ft(r,o),e,!1),a||e.x===r&&e.y===o||(n=i.skipsUndoManager,i.skipsUndoManager=!0,t.g("position",new ft(r,o),e),i.skipsUndoManager=n))}function Vl(t,e,n,i,a){var r=n.copy();n.h(e.x+a.x,e.y+a.y),n.A(r)||null===i||(e=i.skipsUndoManager,i.skipsUndoManager=!0,t.g("location",r,n),i.skipsUndoManager=e)}function Yl(t,e,n){Wl(t,!1),t instanceof eu&&Nr(n,t),t.layer.isTemporary||e||n.Xa(),e=t.vb;var i=n.viewportBounds;i.o()?Kl(t)?(Xt(e,i,10)||t.hd(!1),t.updateAdornments()):e.Ic(i)?(t.hd(!0),t.updateAdornments()):t.Jb():n.ci=!0}function Hl(t,e,n,i){e.constructor===t.constructor||Ql||(Ql=!0,b('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),b("  Old class: "+B(t.constructor)+", new class: "+B(e.constructor)+", part: "+t.toString())),t.Tj();var a=t.data;n=t.layerName;var r=t.isSelected,o=t.isHighlighted,s=!0,h=!0,l=!1;t instanceof eu&&(s=t.isTreeLeaf,h=t.isTreeExpanded,l=t.wasTreeExpanded),e.pf(t),e.cloneProtected(t),t.Af=i,t.s(),t.R(),i=!0,null!==(e=t.diagram)&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.jb=a,t.D=r?4096|t.D:-4097&t.D,t.D=o?524288|t.D:-524289&t.D,t instanceof eu&&(t.S=s?4|t.S:-5&t.S,t.S=h?1|t.S:-2&t.S,t.S=l?2|t.S:-3&t.S),null!==a&&t.Ea(),(a=t.layerName)!==n&&(t.Tg=n,t.layerName=a),null!==e&&(e.skipsUndoManager=i),t.bc()&&t.B(64)}function Xl(t,e){t.D=e?16384|t.D:-16385&t.D}function Ul(t){return 0!=(32768&t.D)}function ql(t,e){t.D=e?32768|t.D:-32769&t.D}function Wl(t,e){t.D=e?65536|t.D:-65537&t.D}function Kl(t){return 0!=(131072&t.D)}function Jl(t,e){t.D=e?1048576|t.D:-1048577&t.D}function Zl(t){return!!t.isVisible()&&(null===(t=t.layer)||!t.isTemporary)}function $l(t,e,n,i,a,r){if(void 0===r&&(r=null),!(t.contains(e)||null!==r&&!r(e)||e instanceof tu))if(t.add(e),e instanceof eu){if(n&&e instanceof pu)for(var o=e.memberParts;o.next();)$l(t,o.value,n,i,a,r);if(!1!==a)for(o=e.linksConnected;o.next();){var s=o.value;if(!t.contains(s)){var h=s.fromNode,l=s.toNode;h=null===h||t.contains(h),l=null===l||t.contains(l),(a?h&&l:h||l)&&$l(t,s,n,i,a,r)}}if(1<i)for(e=e.av();e.next();)$l(t,e.value,n,i-1,a,r)}else if(e instanceof wu)for(e=e.labelNodes;e.next();)$l(t,e.value,n,i,a,r)}Ll.className="StreamGeometryContext",Al("Rectangle",(function(t,e,n){return(t=new We(on)).startX=0,t.startY=0,t.endX=e,t.endY=n,t})),Al("Square",(function(t,e,n){return(t=new We(on)).startX=0,t.startY=0,t.endX=e,t.endY=n,t.defaultStretch=Ar,t})),Al("RoundedRectangle",(function(t,e,n){var i=t?t.parameter1:NaN;return(isNaN(i)||0>=i)&&(i=5),i=Math.min(i,e/3),t=(i=Math.min(i,n/3))*qe.Ag,e=(new We).add(new ln(i,0,!0).add(new un(gn,e-i,0)).add(new un(pn,e,i,e-t,0,e,t)).add(new un(gn,e,n-i)).add(new un(pn,e-i,n,e,n-t,e-t,n)).add(new un(gn,i,n)).add(new un(pn,0,n-i,t,n,0,n-t)).add(new un(gn,0,i)).add(new un(pn,i,0,0,t,t,0).close())),1<t&&(e.spot1=new Ve(0,0,t,t),e.spot2=new Ve(1,1,-t,-t)),e})),Al("Border","RoundedRectangle"),Al("Ellipse",(function(t,e,n){return(t=new We(sn)).startX=0,t.startY=0,t.endX=e,t.endY=n,t.spot1=Re,t.spot2=Ie,t})),Al("Circle",(function(t,e,n){return(t=new We(sn)).startX=0,t.startY=0,t.endX=e,t.endY=n,t.spot1=Re,t.spot2=Ie,t.defaultStretch=Ar,t})),Al("TriangleRight",(function(t,e,n){return(new We).add(new ln(0,0).add(new un(gn,e,.5*n)).add(new un(gn,0,n).close())).xm(0,.25,.5,.75)})),Al("TriangleDown",(function(t,e,n){return(new We).add(new ln(0,0).add(new un(gn,e,0)).add(new un(gn,.5*e,n).close())).xm(.25,0,.75,.5)})),Al("TriangleLeft",(function(t,e,n){return(new We).add(new ln(e,n).add(new un(gn,0,.5*n)).add(new un(gn,e,0).close())).xm(.5,.25,1,.75)})),Al("TriangleUp",(function(t,e,n){return(new We).add(new ln(e,n).add(new un(gn,0,n)).add(new un(gn,.5*e,0).close())).xm(.25,.5,.75,1)})),Al("Triangle","TriangleUp"),Al("Diamond",(function(t,e,n){return(new We).add(new ln(.5*e,0).add(new un(gn,0,.5*n)).add(new un(gn,.5*e,n)).add(new un(gn,e,.5*n).close())).xm(.25,.25,.75,.75)})),Al("LineH",(function(t,e,n){return(t=new We(rn)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t})),Al("LineV",(function(t,e,n){return(t=new We(rn)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t})),Al("None","Rectangle"),Al("BarH","Rectangle"),Al("BarV","Rectangle"),Al("MinusLine","LineH"),Al("PlusLine",(function(t,e,n){return(new We).add(new ln(0,n/2,!1).add(new un(gn,e,n/2)).add(new un(fn,e/2,0)).add(new un(gn,e/2,n)))})),Al("XLine",(function(t,e,n){return(new We).add(new ln(0,n,!1).add(new un(gn,e,0)).add(new un(fn,0,0)).add(new un(gn,e,n)))})),qe.Bm={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},d(jl,ah),jl.prototype.cloneProtected=function(t){ah.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.Af=this.Af,t.Tg=this.Tg,t.$n=this.$n,t.jp=this.jp,t.Vo=this.Vo,t.Yo=this.Yo,t.lp=this.lp,t.kp=this.kp,t.Mn=this.Mn,t.yf=null,t.Xo=this.Xo,t.Wo=this.Wo.I(),t.Zo=this.Zo,t.$o=this.$o.I(),t.Ob=this.Ob,t.Zm=this.Zm,t.me.assign(this.me),t.ho=this.ho,t.io=this.io.I(),t.qo=this.qo.I(),t.jo=this.jo.I(),t.vn=this.vn,t.ao=this.ao,t.ui=this.ui.I(),t.Jj=this.Jj,t.Od=this.Od,t.Kp=this.Kp},jl.prototype.pf=function(t){ah.prototype.pf.call(this,t),t.zh(),t.dh=null,t.Xe=null,t.wj=null},jl.prototype.toString=function(){var t=B(this.constructor)+"#"+rt(this);return null!==this.data&&(t+="("+O(this.data)+")"),t},jl.prototype.pk=function(t,e,n,i,a,r,o){var s=this.diagram;null!==s&&(t===kn&&"elements"===e?a instanceof ah?dh(a,(function(t){qd(s.partManager,t),fr(s,t)})):gr(s,a):t===Ln&&"elements"===e&&(a instanceof ah?dh(a,(function(t){Wd(s.partManager,t,s)})):pr(s,a)),s.ab(t,e,n,i,a,r,o))},jl.prototype.Ea=function(t){if(ah.prototype.Ea.call(this,t),null!==this.data)for(var e=(t=this.Y.j).length,n=0;n<e;n++){var i=t[n];i instanceof ah&&dh(i,(function(t){null!==t.data&&t.Ea()}))}},jl.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},jl.prototype.ak=function(t){var e=this.yf;return null===e?null:e.J(t)},jl.prototype.qh=function(t,e){if(null!==e){var n=null,i=this.yf;if(null!==i&&(n=i.J(t)),n!==e){if(null!==n){var a=n.diagram;null!==a&&a.remove(n)}null===i&&(this.yf=i=new ct),e.Af!==t&&(e.category=t),i.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&(null!==(t=t.Ii())&&(e.data=t.data)))}}},jl.prototype.vf=function(t){var e=this.yf;if(null!==e){var n=e.J(t);if(null!==n){var i=n.diagram;null!==i&&i.remove(n)}e.remove(t),0===e.count&&(this.yf=null)}},jl.prototype.Tj=function(){var t=this.yf;if(null!==t){var e=C();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.vf(e[n]);F(e)}},jl.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.s(),n.placeholder&&n.placeholder.s()}t:{if(this.isSelected&&this.selectionAdorned&&(null!==(e=this.selectionObject)&&this.actualBounds.o()&&this.isVisible()&&e.tf()&&e.actualBounds.o())){if(null===(n=this.ak("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.Ah()?t.linkSelectionAdornmentTemplate:this instanceof pu?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof tu))break t;yh(n),null!==(n=n.copy())&&(this.Ah()&&this.selectionObject===this.path&&(n.type=ah.Link),n.adornedObject=e)}if(null!==n){if(null!==n.placeholder){var i=e.De(),a=0;e instanceof Oh&&(a=e.strokeWidth);var r=jt.alloc();r.h((e.naturalBounds.width+a)*i,(e.naturalBounds.height+a)*i),jt.free(r)}n.type===ah.Link?n.s():(e=ft.alloc(),ft.free(e)),this.qh("Selection",n);break t}}this.vf("Selection")}for(function(t,e){e.toolManager.mouseDownTools.each((function(e){e.isEnabled&&e.updateAdornments(t)})),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Ea()}},jl.prototype.Jb=function(){var t=this.diagram;null!==t&&(Ja(t),0!=(16384&this.D)!=!0&&(Xl(this,!0),t.cc()))},jl.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},jl.prototype.moveTo=function(t,e,n){t=ft.allocAt(t,e),this.move(t,n),ft.free(t)},jl.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return!(null!==t&&!t.visible)&&(!(null===(t=this.diagram)||!aa(t.animationManager,this))||!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible()))},(n=jl.prototype).Lb=function(t){var e=this.diagram;t?(this.B(4),this.Jb(),null!==e&&e.Dd.add(this)):(this.B(8),this.Tj()),this.zh(),null!==e&&(e.Xa(),e.R())},n.$a=function(t){if(this.name===t)return this;var e=this.wj;if(null===e&&(this.wj=e=new ct),null!==e.J(t))return e.J(t);var n=ah.prototype.$a.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},n.qf=function(t,e,n){void 0===n&&(n=new ft),e=e.jc()?ue:e;var i=t.naturalBounds;if(n.h(i.width*e.x+e.offsetX,i.height*e.y+e.offsetY),null===t||t===this)return n;for(t.transform.ta(n),t=t.panel;null!==t&&t!==this;)t.transform.ta(n),t=t.panel;return this.Qf.ta(n),n.offset(-this.pc.x,-this.pc.y),n},n.Yp=function(t){return void 0===t&&(t=new Et),t.assign(this.actualBounds)},n.$b=function(){!0===Xo(this)&&(this instanceof pu&&this.memberParts.each((function(t){t.$b()})),this.measure(1/0,1/0)),this.arrange()},jl.prototype.arrange=function(){if(!1===qo(this))Gl(this);else{var t=this.vb,e=Et.alloc();e.assign(t),t.ha();var n=Kl(this);this.uh(0,0,this.pc.width,this.pc.height);var i=this.position;Il(this,i,this.location),t.x=i.x,t.y=i.y,t.freeze(),this.kt(e,t),Wo(this,!1),e.A(t)?this.hd(n):!this.bc()||qe.w(e.width,t.width)&&qe.w(e.height,t.height)||0<=this.Aw&&this.B(16),Et.free(e),ql(this,!1)}},(n=jl.prototype).kt=function(t,e){var n=this.diagram;if(null!==n){var i=!1;if(!1===n.Rg&&t.o()){var a=Et.alloc();a.assign(n.documentBounds),a.Pv(n.padding),t.x>a.x&&t.y>a.y&&t.right<a.right&&t.bottom<a.bottom&&e.x>a.x&&e.y>a.y&&e.right<a.right&&e.bottom<a.bottom&&(i=!0),Et.free(a)}0!=(65536&this.D)!=!0&&t.A(e)||Yl(this,i,n),n.R(),Vt(t,e)||(this instanceof eu&&!n.undoManager.isUndoingRedoing&&this.ed(),this.zh())}},n.Lv=function(t,e){if(this.Ah()||!t.o())return!1;var n=this.diagram;return null!==n&&(Rl(this,n,t,e),!0===n.undoManager.isUndoingRedoing)||(this.sa=t,this.D&=-2097153,(n=this.me).o()&&(this.me=new ft(n.x+(t.x-e.x),n.y+(t.y-e.y)),this.g("location",n,this.me)),!1===Ul(this)&&!1===qo(this)&&(zl(this),Gl(this))),!0},n.vt=function(t,e){var n=this.me,i=this.sa;Ul(this)||qo(this)?n.h(NaN,NaN):n.h(n.x+t-i.x,n.y+e-i.y),i.h(t,e),zl(this)},n.Mv=function(){this.D&=-2097153,zl(this)},n.Ri=function(){return!0},n.bc=function(){return!0},n.Ah=function(){return!1},n.vg=function(){return!0},jl.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},jl.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},jl.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},jl.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},jl.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},jl.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},jl.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},jl.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},jl.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(n=jl.prototype).hd=function(t){this.D=t?131072|this.D:-131073&this.D},n.zh=function(){var t=this.containingGroup;null!==t&&(t.s(),null!==t.placeholder&&t.placeholder.s(),t.ed())},n.R=function(){var t=this.diagram;null!==t&&!qo(this)&&!Ul(this)&&this.isVisible()&&this.vb.o()&&t.R(El(this,this.vb))},n.s=function(){ah.prototype.s.call(this);var t=this.diagram;null!==t&&(t.Dd.add(this),this instanceof eu&&null!==this.labeledLink&&zo(this.labeledLink),t.cc(!0))},n.aq=function(t){t||null!==(t=this.Sh)&&mu(t,this)},n.bq=function(t){t||null!==(t=this.Sh)&&vu(t,this)},n.Zj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&(null!==(e=e.model)&&e.om(t))}},n.Py=function(){return function t(e,n){var i=n.containingGroup;return null!==i?1+t(e,i):n instanceof eu&&null!==(n=n.labeledLink)?t(e,n):0}(this,this)},n.Sy=function(){return function t(e,n){var i=n.containingGroup;return null!==i||n instanceof eu&&null!==(i=n.labeledLink)?t(e,i):n}(this,this)},n.Vd=function(t){return t instanceof pu&&function t(e,n,i){if(n===i||null===i)return!1;var a=n.containingGroup;return!(null===a||a!==i&&!t(e,a,i))||n instanceof eu&&null!==(n=n.labeledLink)&&t(e,n,i)}(this,this,t)},n.ex=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof pu&&Jl(e,!0),e instanceof eu){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e instanceof eu&&(null!==(t=e.labeledLink)&&(e=t)),e=e.containingGroup}for(e=this;null!==e;)e instanceof pu&&Jl(e,!1),e instanceof eu&&(null!==(t=e.labeledLink)&&(e=t)),e=e.containingGroup;return n},jl.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof eu&&this.isLinkLabel)},jl.prototype.B=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;null!==e&&e.isTemporary||this instanceof eu&&this.isLinkLabel?e=!1:e=null===(e=this.diagram)||!e.undoManager.isUndoingRedoing}else e=!1;if(e)if(null!==(e=this.Sh)){var n=e.layout;null!==n?n.B():e.B(t)}else null!==(t=this.diagram)&&(null!==(t=t.layout)&&t.B())},c.Object.defineProperties(jl.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.pa(this.data)}},adornments:{get:function(){return null===this.yf?J:this.yf.iteratorValues}},layer:{get:function(){return this.gi}},diagram:{get:function(){var t=this.gi;return null!==t?t.diagram:null}},layerName:{get:function(){return this.Tg},set:function(t){var e=this.Tg;if(e!==t){var n=this.diagram;if((null===n||null!==n.Zl(t)&&!n.partManager.addsToTemporaryLayer)&&(this.Tg=t,null!==n&&n.Xa(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&(null!==(n=e.diagram)&&(null!==(t=n.Zl(t))&&t!==e)))){var i=e.xc(-1,this,!0);if(0<=i&&n.ab(Ln,"parts",e,this,null,i,!0),i=t.Pi(99999999,this,!0),e.visible!==t.visible&&this.Lb(t.visible),0<=i&&n.ab(kn,"parts",t,null,this,!0,i),null!==(i=this.layerChanged)){var a=n.ea;n.ea=!0,i(this,e,t),n.ea=a}}}}},layerChanged:{get:function(){return this.$n},set:function(t){var e=this.$n;e!==t&&(this.$n=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Kp},set:function(t){var e=this.Kp;if(e!==t){this.Kp=t;var n=this.layer;null!==n&&ma(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.R()}}},locationObject:{get:function(){if(null===this.Xe){var t=this.locationObjectName;""!==t?(t=this.$a(t),this.Xe=null!==t?t:this):this instanceof tu&&this.type!==ah.Link&&null!==this.placeholder?this.Xe=this.placeholder:this.Xe=this}return this.Xe.visible?this.Xe:this}},minLocation:{get:function(){return this.qo},set:function(t){var e=this.qo;e.A(t)||(this.qo=t=t.I(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.jo},set:function(t){var e=this.jo;e.A(t)||(this.jo=t=t.I(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.Xe=null,this.s(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.io},set:function(t){var e=this.io;e.A(t)||(this.io=t=t.I(),this.s(),this.g("locationSpot",e,t))}},location:{get:function(){return this.me},set:function(t){var e=t.x,n=t.y,i=this.me,a=i.x,r=i.y;(a===e||isNaN(a)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))||(e=t=t.I(),this.Ah()?e=!1:(this.me=e,this.D|=2097152,!1===qo(this)&&(zl(this),(n=this.sa).o()&&(a=n.copy(),n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),Rl(this,this.diagram,n,a),this.g("position",a,n))),e=!0),e&&this.g("location",i,t))}},category:{get:function(){return this.Af},set:function(t){var e=this.Af;if(e!==t){var n=this.diagram,i=this.data,a=null;if(null!==n&&null!==i&&!(this instanceof tu)){var r=n.model.undoManager;r.isEnabled&&!r.isUndoingRedoing&&(a=this.clone()).Y.addAll(this.Y)}this.Af=t,this.g("category",e,t),null===n||null===i||this instanceof tu?this instanceof tu&&(null!==(a=this.adornedPart)&&(null!==(t=a.yf)&&t.remove(e),a.qh(this.category,this))):(r=n.model).undoManager.isUndoingRedoing||(this.Ah()?(n.partManager.setLinkCategoryForData(i,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(yh(n),null!==(n=n.copy())&&Hl(this,n,e,t))):(null!==r&&r.sq(i,t),null!==(n=Hd(n.partManager,i,t))&&(yh(n),null===(n=n.copy())||n instanceof wu||(i=this.location.copy(),Hl(this,n,e,t),this.location.o()||(this.location=i)))),null!==a&&((e=this.clone()).Y.addAll(this.Y),this.g("self",a,e)))}}},self:{get:function(){return this},set:function(t){Hl(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Jb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Jb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e=0!=(64&this.D);if(e!==t){this.D^=64;var n=this.diagram;null!==n&&n.Xa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.B(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Jb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Jb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Jb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Jb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e=0!=(4096&this.D);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.D^=4096;var i=!1;if(null!==n){i=n.skipsUndoManager,n.skipsUndoManager=!0;var a=n.selection;a.ha(),t?a.add(this):a.remove(this),a.freeze()}this.g("isSelected",e,t),this.Jb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.cc(),n.skipsUndoManager=i)}}}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e=0!=(524288&this.D);if(e!==t){this.D^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ha(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.R(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.R())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.Mn},set:function(t){var e=this.Mn;e!==t&&(this.Mn=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(this.lp=t,this.dh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.jp},set:function(t){var e=this.jp;e!==t&&(this.jp=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.dh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.$a(t),this.dh=null!==t?t:this):this instanceof wu?(t=this.path,this.dh=null!==t?t:this):this.dh=this}return this.dh}},selectionChanged:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(this.kp=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.Vo},set:function(t){var e=this.Vo;e!==t&&(this.Vo=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.Xo},set:function(t){var e=this.Xo;e!==t&&(this.Xo=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},resizeCellSize:{get:function(){return this.Wo},set:function(t){var e=this.Wo;e.A(t)||(this.Wo=t=t.I(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Zo},set:function(t){var e=this.Zo;e!==t&&(this.Zo=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},rotationSpot:{get:function(){return this.$o},set:function(t){var e=this.$o;e.A(t)||(this.$o=t=t.I(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Ob},set:function(t){var e=this.Ob;e!==t&&(this.Ob=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Sh},set:function(t){if(this.bc()){var e=this.Sh;if(e!==t){null===t||this!==t&&!t.Vd(this)||(this===t&&w("Cannot make a Group a member of itself: "+this.toString()),w("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.B(2);var n=this.diagram;if(null!==e?vu(e,this):this instanceof pu&&null!==n&&n.zi.remove(this),this.Sh=t,null!==t?mu(t,this):this instanceof pu&&null!==n&&n.zi.add(this),this.B(1),null!==n){var i=this.data,a=n.model;if(null!==i&&a.ek()){var r=a.pa(null!==t?t.data:null);a.tt(i,r)}}if(null!==(i=this.containingGroupChanged)&&(a=!0,null!==n&&(a=n.ea,n.ea=!0),i(this,e,t),null!==n&&(n.ea=a)),this instanceof pu)for($l(n=new nt,this,!0,0,!0),n=n.iterator;n.next();)if((i=n.value)instanceof eu)for(i=i.linksConnected;i.next();)Su(i.value);if(this instanceof eu){for(n=this.linksConnected;n.next();)Su(n.value);null!==(n=this.labeledLink)&&Su(n)}this.g("containingGroup",e,t),null!==t&&(null!==(e=t.layer)&&ma(e,-1,t))}}else w("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.Zm},set:function(t){var e=this.Zm;e!==t&&(this.Zm=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof eu&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.ao},set:function(t){var e=this.ao;e!==t&&(this.ao=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.vn},set:function(t){var e=this.vn;e!==t&&(this.vn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.ui},set:function(t){var e=this.ui;e.A(t)||(this.ui=t=t.I(),this.R(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Jj},set:function(t){var e=this.Jj;e!==t&&(this.Jj=t,this.R(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.R(),this.g("shadowBlur",e,t))}}}),jl.prototype.invalidateLayout=jl.prototype.B,jl.prototype.findCommonContainingGroup=jl.prototype.ex,jl.prototype.isMemberOf=jl.prototype.Vd,jl.prototype.findTopLevelPart=jl.prototype.Sy,jl.prototype.findSubGraphLevel=jl.prototype.Py,jl.prototype.ensureBounds=jl.prototype.$b,jl.prototype.getDocumentBounds=jl.prototype.Yp,jl.prototype.getRelativePoint=jl.prototype.qf,jl.prototype.findObject=jl.prototype.$a,jl.prototype.moveTo=jl.prototype.moveTo,jl.prototype.invalidateAdornments=jl.prototype.Jb,jl.prototype.clearAdornments=jl.prototype.Tj,jl.prototype.removeAdornment=jl.prototype.vf,jl.prototype.addAdornment=jl.prototype.qh,jl.prototype.findAdornment=jl.prototype.ak,jl.prototype.updateTargetBindings=jl.prototype.Ea;var Ql=!1;function tu(t){jl.call(this,t),this.D&=-257,this.Tg="Adornment",this.$d=null,this.Dw=0,this.Ow=!1,this.l=[],this.Va=null}function eu(t){jl.call(this,t),this.S=13,this.Ya=new tt,this.Ep=this.hl=this.ji=this.co=this.bo=null,this.Dk=ne,this.rc=this.Me=null,this.So=fu,this.oh=!1}function nu(t,e){null!==e&&(null===t.Me&&(t.Me=new nt),t.Me.add(e))}function iu(t,e,n,i){if(null===e||null===t.Me)return null;for(var a=t.Me.iterator;a.next();){var r=a.value;if(r.it===t&&r.pv===e&&r.vx===n&&r.wx===i||r.it===e&&r.pv===t&&r.vx===i&&r.wx===n)return r}return null}function au(t,e){for(var n=t.linksConnected;n.next();){var i=n.value;i.fromPort!==e&&i.toPort!==e||(ru(t,i.fromPort),ru(t,i.toPort),i.Ra())}}function ru(t,e){null!==e&&(null!==(e=e.Ro)&&e.cm(),null===(t=t.containingGroup)||t.isSubGraphExpanded||ru(t,t.port))}function ou(t,e,n){ru(t,n);var i=t.Ya.contains(e);if(i||t.Ya.add(e),!i||e.fromNode===e.toNode){var a=t.linkConnected;if(null!==a){var r=!0,o=t.diagram;null!==o&&(r=o.ea,o.ea=!0),a(t,e,n),null!==o&&(o.ea=r)}}!i&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(i=!0,null!==(t=t.diagram)&&(i=t.isTreePathToChildren),r=i?n:e,(a=i?e:n).oh||(a.oh=r),!r.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(i?n===r&&(r.isTreeLeaf=!1):e===r&&(r.isTreeLeaf=!1))))}function su(t,e,n){ru(t,n);var i=t.Ya.remove(e),a=null;if(i||e.toNode===e.fromNode){var r=t.linkDisconnected;if(a=t.diagram,null!==r){var o=!0;null!==a&&(o=a.ea,a.ea=!0),r(t,e,n),null!==a&&(a.ea=o)}}i&&e.isTreeLink&&(n=!0,null!==a&&(n=a.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.oh=!1),null===e||e.isTreeLeaf||(0===e.Ya.count?(e.oh=null,null!==a&&a.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):hu(e)))}function hu(t){if(t.oh=!1,0!==t.Ya.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink)if(e){if(i.fromNode===t)return void(t.isTreeLeaf=!1)}else if(i.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function lu(t){null===t.rc?t.rc=new ct:t.rc.clear(),t.ym(t,(function(t,e){uu(t,e)})),0===t.rc.count&&t.rc.add("",t)}function uu(t,e){var n=e.portId;null!==n&&null!==t.rc&&t.rc.add(n,e)}function du(t,e,n){var i=e.portId;if(null!==i&&(null!==t.rc&&t.rc.remove(i),null!==(e=t.diagram)&&n)){for(n=null,t=t.Xu(i);t.next();)i=t.value,null===n&&(n=C()),n.push(i);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);F(n)}}}jl.className="Part",jl.LayoutNone=0,jl.LayoutAdded=1,jl.LayoutRemoved=2,jl.LayoutShown=4,jl.LayoutHidden=8,jl.LayoutNodeSized=16,jl.LayoutGroupLayout=32,jl.LayoutNodeReplaced=64,jl.LayoutStandard=127,jl.LayoutAll=16777215,d(tu,jl),tu.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},tu.prototype.updateRelationshipsFromData=function(){},tu.prototype.hk=function(t){var e=this.adornedObject.part;if(e instanceof wu&&this.adornedObject instanceof Oh){var n=e.path;e.hk(t),t=n.geometry,n=(e=this.Y.j).length;for(var i=0;i<n;i++){var a=e[i];a.isPanelMain&&a instanceof Oh&&(a.qa=t)}}},tu.prototype.Ri=function(){var t=this.$d;return null===t||(null===(t=t.part)||!qo(t))},tu.prototype.bc=function(){return!1},tu.prototype.pk=function(t,e,n,i,a,r,o){if(t===kn&&"elements"===e){if(a instanceof yu)null===this.Va&&(this.Va=a);else if(a instanceof ah){var s=a.Yl((function(t){return t instanceof yu}));s instanceof yu&&null===this.Va&&(this.Va=s)}}else t===Ln&&"elements"===e&&null!==this.Va&&(i===this.Va||i instanceof ah&&this.Va.tg(i))&&(this.Va=null);jl.prototype.pk.call(this,t,e,n,i,a,r,o)},tu.prototype.updateAdornments=function(){},tu.prototype.Zj=function(){},c.Object.defineProperties(tu.prototype,{placeholder:{get:function(){return this.Va}},adornedObject:{get:function(){return this.$d},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.vf(this.category),this.$d=t,null!==n&&n.qh(this.category,this)}},adornedPart:{get:function(){var t=this.$d;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),tu.className="Adornment",d(eu,jl),eu.prototype.cloneProtected=function(t){jl.prototype.cloneProtected.call(this,t),t.S=this.S,t.S=-17&this.S,t.bo=this.bo,t.co=this.co,t.ji=this.ji,t.Ep=this.Ep,t.Dk=this.Dk.I(),t.So=this.So},(n=eu.prototype).pf=function(t){jl.prototype.pf.call(this,t),t.ed(),t.Me=this.Me,t.rc=null},n.oz=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=iu(this,t,e,n))&&t.cm()},n.pk=function(t,e,n,i,a,r,o){(t===kn&&"elements"===e||t===Ln&&"elements"===e)&&(this.rc=null),jl.prototype.pk.call(this,t,e,n,i,a,r,o)},n.ed=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var n=e.value;null!==t&&t.contains(n)||(ru(this,n.fromPort),ru(this,n.toPort),n.Ra())}},n.Ri=function(){return!0},eu.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Np(this.Dk),t},eu.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},eu.prototype.isVisible=function(){if(!jl.prototype.isVisible.call(this))return!1;var t=!0,e=ro,n=this.diagram;if(null!==n){if(aa(n.animationManager,this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===ro){if(null!==(t=this.rg())&&!t.isTreeExpanded)return!1}else if(e===oo){if(0<(t=t?this.Zu():this.$u()).count&&t.all((function(t){return!t.isTreeExpanded})))return!1}else if(e===so&&(0<(t=t?this.Zu():this.$u()).count&&t.any((function(t){return!t.isTreeExpanded}))))return!1;return null===(t=this.labeledLink)||t.isVisible()},(n=eu.prototype).Lb=function(t){jl.prototype.Lb.call(this,t);for(var e=this.linksConnected;e.next();)e.value.Lb(t)},n.Xu=function(t){if(void 0===t&&(t=null),null===t)return this.Ya.iterator;var e=new $(this.Ya),n=this;return e.predicate=function(e){return e.fromNode===n&&e.fromPortId===t||e.toNode===n&&e.toPortId===t},e},n.Vp=function(t){void 0===t&&(t=null);var e=new $(this.Ya),n=this;return e.predicate=function(e){return e.fromNode===n&&(null===t||e.fromPortId===t)},e},n.sd=function(t){void 0===t&&(t=null);var e=new $(this.Ya),n=this;return e.predicate=function(e){return e.toNode===n&&(null===t||e.toPortId===t)},e},n.Yu=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var a=i.value;a.fromNode===this?null!==t&&a.fromPortId!==t||(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a):a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Z(n):J},n.$u=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var a=i.value;a.fromNode!==this||null!==t&&a.fromPortId!==t||(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Z(n):J},n.Zu=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var a=i.value;a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Z(n):J},n.Ky=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new $(this.Ya),a=this;return i.predicate=function(i){return!(i.fromNode!==a||i.toNode!==t||null!==e&&i.fromPortId!==e||null!==n&&i.toPortId!==n)||!(i.fromNode!==t||i.toNode!==a||null!==n&&i.fromPortId!==n||null!==e&&i.toPortId!==e)},i},n.Ly=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new $(this.Ya),a=this;return i.predicate=function(i){return!(i.fromNode!==a||i.toNode!==t||null!==e&&i.fromPortId!==e||null!==n&&i.toPortId!==n)},i},eu.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(n=eu.prototype).aq=function(t){jl.prototype.aq.call(this,t),t||(hu(this),null!==(t=this.hl)&&Pu(t,this))},n.bq=function(t){jl.prototype.bq.call(this,t),t||null!==(t=this.hl)&&null!==t.$c&&(t.$c.remove(this),t.s())},n.Zj=function(){if(0<this.Ya.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.Ya.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,jl.prototype.Zj.call(this)},n.Ss=function(t){if(null===this.rc){if(""===t&&!1===this.yh)return this;lu(this)}var e=this.rc.J(t);return null!==e||""!==t&&null!==(e=this.rc.J(""))?e:this},n.qz=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.Ya.iterator;i.next();){var a=i.value;if(a.isTreeLink&&((e=a.fromNode)!==n&&e!==this))break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.Ya.iterator;i.next()&&(!(a=i.value).isTreeLink||((e=a.toNode)===n||e===this)););if(e===this||null===e||e===n)return!1;n=e}return!0},n.Wy=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink&&((t=i.fromNode)!==e&&t!==this))break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.Ya.iterator;n.next()&&(!(i=n.value).isTreeLink||((t=i.toNode)===e||t===this)););if(t===this)return this;if(null===t||t===e)return e;e=t}},n.Hy=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Jl(e,!0),e=e.rg();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e=e.rg()}for(e=this;null!==e;)Jl(e,!1),e=e.rg();return n},n.Ji=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.Ya.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},n.rg=function(){var t=this.oh;if(null===t)return null;if(t instanceof eu)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.Ya.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.oh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.oh=e;return this.oh=null},n.Uy=function(){var t=new nt;return function t(e,n){if(null!==e){n.add(e);var i=e.Ji();null!==i&&(n.add(i),t(e.rg(),n))}}(this,t),t},n.Ty=function(){return function t(e,n){return null===(n=n.rg())?0:1+t(e,n)}(this,this)},n.Xp=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new $(this.Ya);var n=this;return e.predicate=t?function(t){return!(!t.isTreeLink||t.fromNode!==n)}:function(t){return!(!t.isTreeLink||t.toNode!==n)},e},n.av=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,i=this.Ya.iterator;if(t)for(;i.next();)(t=i.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);else for(;i.next();)(t=i.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new tt).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new Z(n):J},n.Vy=function(t){void 0===t&&(t=1/0);var e=new nt;return $l(e,this,!1,t,!0),e},eu.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Fe){e.Fe=!0;var n=new nt;n.add(this),function t(e,n,i,a,r,o,s){if(1<a)for(var h=i?e.Vp():e.sd();h.next();){var l=h.value;l.isTreeLink&&(null===(l=l.Ws(e))||l===e||n.contains(l)||(n.add(l),t(l,n,i,a-1,r,o,s)))}else!function t(e,n,i,a,r,o){for(var s=r===e||e.isTreeExpanded,h=i?e.Vp():e.sd();h.next();){var l=h.value;if(l.isTreeLink&&(null!==(l=l.Ws(e))&&l!==e)){var u=n.contains(l);u||n.add(l),s&&(o&&a.Lp(l,r),l.zh(),l.Lb(!1)),l.isTreeExpanded&&(l.wasTreeExpanded=l.isTreeExpanded,u||t(l,n,i,a,r,o))}}e.isTreeExpanded=!1}(e,n,i,r,o,s)}(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ro),e.Fe=!1}},eu.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Fe){e.Fe=!0;var n=new nt;n.add(this),function t(e,n,i,a,r,o,s){for(var h=o!==e&&e.isTreeExpanded,l=i?e.Vp():e.sd();l.next();){var u=l.value;u.isTreeLink&&(h||u.Lc||u.Ra(),null!==(u=u.Ws(e))&&u!==e&&!n.contains(u)&&(n.add(u),h||(u.Lb(!0),u.zh(),s&&r.Mp(u,o)),2<a||u.wasTreeExpanded))&&(u.wasTreeExpanded=!1,t(u,n,i,a-1,r,o,s))}e.isTreeExpanded=!0}(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===ro),e.Fe=!1}},c.Object.defineProperties(eu.prototype,{portSpreading:{get:function(){return this.So},set:function(t){var e=this.So;e!==t&&(this.So=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.ed())}},avoidable:{get:function(){return 0!=(8&this.S)},set:function(t){var e=0!=(8&this.S);if(e!==t){this.S^=8;var n=this.diagram;null!==n&&Nr(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Dk},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.Dk;if(!e.A(t)){this.Dk=t=t.I();var n=this.diagram;null!==n&&Nr(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.Ya.iterator}},linkConnected:{get:function(){return this.bo},set:function(t){var e=this.bo;e!==t&&(this.bo=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.co},set:function(t){var e=this.co;e!==t&&(this.co=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.hl}},labeledLink:{get:function(){return this.hl},set:function(t){var e=this.hl;if(e!==t){var n=this.diagram,i=this.data;if(null!==e){if(null!==e.$c&&(e.$c.remove(this),e.s()),null!==n&&null!==i&&!n.undoManager.isUndoingRedoing){var a=e.data,r=n.model;if(null!==a&&r.em()){var o=r.pa(i);void 0!==o&&r.xx(a,o)}}this.containingGroup=null}this.hl=t,null!==t&&(Pu(t,this),null===n||null===i||n.undoManager.isUndoingRedoing||(a=t.data,n=n.model,null!==a&&n.em()&&(void 0!==(i=n.pa(i))&&n.Gu(a,i))),this.containingGroup=t.containingGroup),zo(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.Ss("")}},ports:{get:function(){return null===this.rc&&lu(this),this.rc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.S)},set:function(t){var e=0!=(1&this.S);if(e!==t){this.S^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var i=!0;null!==n&&(i=n.ea,n.ea=!0),e(this),null!==n&&(n.ea=i)}null!==n&&n.undoManager.isUndoingRedoing?this.Lb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.S)},set:function(t){var e=0!=(2&this.S);e!==t&&(this.S^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Ep},set:function(t){var e=this.Ep;e!==t&&(this.Ep=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.S)},set:function(t){var e=0!=(4&this.S);e!==t&&(this.S^=4,this.g("isTreeLeaf",e,t))}}}),eu.prototype.expandTree=eu.prototype.expandTree,eu.prototype.collapseTree=eu.prototype.collapseTree,eu.prototype.findTreeParts=eu.prototype.Vy,eu.prototype.findTreeChildrenNodes=eu.prototype.av,eu.prototype.findTreeChildrenLinks=eu.prototype.Xp,eu.prototype.findTreeLevel=eu.prototype.Ty,eu.prototype.findTreeParentChain=eu.prototype.Uy,eu.prototype.findTreeParentNode=eu.prototype.rg,eu.prototype.findTreeParentLink=eu.prototype.Ji,eu.prototype.findCommonTreeParent=eu.prototype.Hy,eu.prototype.findTreeRoot=eu.prototype.Wy,eu.prototype.isInTreeOf=eu.prototype.qz,eu.prototype.findPort=eu.prototype.Ss,eu.prototype.findLinksTo=eu.prototype.Ly,eu.prototype.findLinksBetween=eu.prototype.Ky,eu.prototype.findNodesInto=eu.prototype.Zu,eu.prototype.findNodesOutOf=eu.prototype.$u,eu.prototype.findNodesConnected=eu.prototype.Yu,eu.prototype.findLinksInto=eu.prototype.sd,eu.prototype.findLinksOutOf=eu.prototype.Vp,eu.prototype.findLinksConnected=eu.prototype.Xu,eu.prototype.invalidateConnectedLinks=eu.prototype.ed,eu.prototype.invalidateLinkBundle=eu.prototype.oz;var cu=new X(eu,"SpreadingNone",10),fu=new X(eu,"SpreadingEvenly",11),gu=new X(eu,"SpreadingPacked",12);function pu(t){eu.call(this,t),this.S|=4608,this.no=new nt,this.rl=new nt,this.Va=this.wp=this.ki=this.oo=this.mo=null,this.gc=new bd,this.gc.group=this}function mu(t,e){if(t.no.add(e)){e instanceof pu&&t.rl.add(e);var n=t.memberAdded;if(null!==n){var i=!0,a=t.diagram;null!==a&&(i=a.ea,a.ea=!0),n(t,e),null!==a&&(a.ea=i)}t.isVisible()&&t.isSubGraphExpanded||e.Lb(!1)}e instanceof wu&&!t.computesBoundsIncludingLinks||(null===(e=t.Va)&&(e=t),e.s())}function vu(t,e){if(t.no.remove(e)){e instanceof pu&&t.rl.remove(e);var n=t.memberRemoved;if(null!==n){var i=!0,a=t.diagram;null!==a&&(i=a.ea,a.ea=!0),n(t,e),null!==a&&(a.ea=i)}t.isVisible()&&t.isSubGraphExpanded||e.Lb(!0)}e instanceof wu&&!t.computesBoundsIncludingLinks||(null===(e=t.Va)&&(e=t),e.s())}function yu(){Mo.call(this),this.eb=ee,this.gp=new Et(NaN,NaN,NaN,NaN)}function wu(){jl.call(this,ah.Link),this.Ta=8,this.Pe=null,this.Qe="",this.gf=this.En=null,this.hf="",this.Dp=null,this.Lm=Vu,this.fn=0,this.jn=Vu,this.kn=NaN,this.Fj=Eu,this.rp=.5,this.$c=null,this.xb=(new tt).freeze(),this.bh=this.Zg=null,this.xl=new Et,this.qa=new We,this.Pn=!0,this.K=this.u=this.zf=this.If=null,this.l=[],this.zu=new ft,this.qr=this.Kw=this.Jw=null,this.$t=NaN,this.P=null}function Su(t){var e=t.fromNode,n=t.toNode,i=null;if(i=null!==e?null!==n?e.ex(n):e.containingGroup:null!==n?n.containingGroup:null,e=i,(n=t.Sh)!==e){null!==n&&vu(n,t),t.Sh=e,null!==e&&mu(e,t);var a=t.containingGroupChanged;if(null!==a){var r=!0,o=t.diagram;null!==o&&(r=o.ea,o.ea=!0),a(t,n,e),null!==o&&(o.ea=r)}!t.Lc||t.Jw!==n&&t.Kw!==n||t.Ra()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=i}function Pu(t,e){null===t.$c&&(t.$c=new nt),t.$c.add(e),t.s()}function bu(t,e,n){if(0!==e||0!==n){for(var i=t.Lc,a=new tt,r=t.xb.iterator;r.next();){var o=r.value;a.add(new ft(o.x+e,o.y+n).freeze())}a.freeze(),r=t.xb,t.xb=a,isNaN(e)||isNaN(n)||t.diagram.animationManager.rb?t.s():(t.me.h(t.me.x+e,t.me.y+n),t.sa.h(t.sa.x+e,t.sa.y+n),zo(t)),i&&xu(t),null!==(e=t.diagram)&&e.animationManager.rb&&(t.bh=a),t.g("points",r,a)}}function xu(t){0===t.xb.count?t.Lc=!1:(t.Lc=!0,t.qr=null,t.$t=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),ju(t,!1))}function ku(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}function Lu(t,e){var n=e.Ro;return null===n&&((n=new vd).port=e,n.node=e.part,e.Ro=n),wd(n,t)}function Mu(t){return t===re||.5===t.x&&.5===t.y}function Nu(t){if(null===t.diagram||!t.isAvoiding||!kr(t.diagram))return!1;var e=t.points.j,n=e.length;if(4>n)return!1;t=Lr(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var a=e[i],r=e[i+1];if(!t.fk(Math.min(a.x,r.x),Math.min(a.y,r.y),Math.abs(a.x-r.x),Math.abs(a.y-r.y)))return!0}return!1}function Tu(t,e,n,i){return t=n-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),e=i-e,isNaN(e)||1/0===e||-1/0===e?NaN:(0>e&&(e=-e),qe.ca(t,0)?e:qe.ca(e,0)?t:Math.sqrt(t*t+e*e)))}function Cu(t,e,n,i){var a=t.pointsCount;if(2>a)return e;if(n){var r=t.i(1);if(n=r.x-i.x,r=r.y-i.y,0===(i=Tu(e.x,e.y,n,r)))return e;a=2===a?.5*i:i,(t=t.computeShortLength(!0))>a&&(t=a),a=t*(r-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=a}else{if(n=(r=t.i(a-2)).x-i.x,r=r.y-i.y,0===(i=Tu(e.x,e.y,n,r)))return e;a=2===a?.5*i:i,(t=t.computeShortLength(!1))>a&&(t=a),a=t*(e.y-r)/i,e.x-=t*(e.x-n)/i,e.y-=a}return e}function Fu(t,e,n,i){for(var a=t.pointsCount,r=e;qe.ca(e.x,r.x)&&qe.ca(e.y,r.y);){if(n>=a)return a-1;r=t.i(n++)}if(!qe.ca(e.x,r.x)&&!qe.ca(e.y,r.y))return n-1;for(var o=r;qe.ca(e.x,r.x)&&qe.ca(r.x,o.x)&&(!i||(e.y>=r.y?r.y>=o.y:r.y<=o.y))||qe.ca(e.y,r.y)&&qe.ca(r.y,o.y)&&(!i||(e.x>=r.x?r.x>=o.x:r.x<=o.x));){if(n>=a)return a-1;o=t.i(n++)}return n-2}function Bu(t,e,n,i,a,r,o){if(!o&&Au(t)){o=[];var s=0;if(t.isVisible()&&(s=function(t,e,n,i){var a=t.diagram;if(null===a||e.A(n))return 0;for(a=a.layers;a.next();){var r=a.value;if(null!==r&&r.visible)for(var o=(r=r.Fa.j).length,s=0;s<o;s++){var h=r[s];if(h instanceof wu){if(h===t)return 0<i.length&&i.sort((function(t,e){return t-e})),i.length;if(h.isVisible()&&Au(h)){var l=h.routeBounds;l.o()&&t.routeBounds.Ic(l)&&!t.usesSamePort(h)&&(null!==(l=h.path)&&l.tf()&&Ou(e,n,i,h))}}}}return 0<i.length&&i.sort((function(t,e){return t-e})),i.length}(t,a,r,o)),0<s)if(qe.w(a.y,r.y))if(a.x<r.x)for(var h=0;h<s;){var l=Math.max(a.x,Math.min(o[h++]-5,r.x-10));e.lineTo(l+n,r.y+i);for(var u=l+n,d=Math.min(l+10,r.x);h<s&&(l=o[h])<d+10;)h++,d=Math.min(l+5,r.x);l=r.y-10+i,d+=n;var c=r.y+i;t.curve===Hu?Ml(e,d,c,!1):Tl(e,u,l,d,l,d,c)}else for(--s;0<=s;){for(h=Math.min(a.x,Math.max(o[s--]+5,r.x+10)),e.lineTo(h+n,r.y+i),u=h+n,l=Math.max(h-10,r.x);0<=s&&(h=o[s])>l-10;)s--,l=Math.max(h-5,r.x);h=r.y-10+i,l+=n,d=r.y+i,t.curve===Hu?Ml(e,l,d,!1):Tl(e,u,h,l,h,l,d)}else if(qe.w(a.x,r.x))if(a.y<r.y)for(h=0;h<s;){for(l=Math.max(a.y,Math.min(o[h++]-5,r.y-10)),e.lineTo(r.x+n,l+i),u=l+i,l=Math.min(l+10,r.y);h<s&&(d=o[h])<l+10;)h++,l=Math.min(d+5,r.y);d=r.x-10+n,c=r.x+n,l+=i,t.curve===Hu?Ml(e,c,l,!1):Tl(e,d,u,d,l,c,l)}else for(--s;0<=s;){for(h=Math.min(a.y,Math.max(o[s--]+5,r.y+10)),e.lineTo(r.x+n,h+i),u=h+i,h=Math.max(h-10,r.y);0<=s&&(l=o[s])>h-10;)s--,h=Math.max(l-5,r.y);l=r.x-10+n,d=r.x+n,h+=i,t.curve===Hu?Ml(e,d,h,!1):Tl(e,l,u,l,h,d,h)}}e.lineTo(r.x+n,r.y+i)}function Ou(t,e,n,i){for(var a=qe.w(t.y,e.y),r=i.pointsCount,o=i.i(0),s=ft.alloc(),h=1;h<r;h++){var l=i.i(h);if(h<r-1){var u=i.i(h+1);if(o.y===l.y&&l.y===u.y){if(l.x>o.x&&u.x>=l.x||l.x<o.x&&u.x<=l.x)continue}else if(o.x===l.x&&l.x===u.x&&(l.y>o.y&&u.y>=l.y||l.y<o.y&&u.y<=l.y))continue}t:{u=t.x;var d=t.y,c=e.x,f=e.y,g=o.x;o=o.y;var p=l.x,m=l.y;if(qe.w(u,c)){if(!qe.w(d,f)&&qe.w(o,m)&&Math.min(d,f)<o&&Math.max(d,f)>o&&Math.min(g,p)<u&&Math.max(g,p)>u&&!qe.w(g,p)){s.x=u,s.y=o,u=!0;break t}}else if(qe.w(d,f)&&qe.w(g,p)&&Math.min(u,c)<g&&Math.max(u,c)>g&&Math.min(o,m)<d&&Math.max(o,m)>d&&!qe.w(o,m)){s.x=g,s.y=d,u=!0;break t}s.x=0,s.y=0,u=!1}u&&(a?n.push(s.x):n.push(s.y)),o=l}ft.free(s)}function Au(t){return(t=t.curve)===Xu||t===Hu}function ju(t,e){(e||Au(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Xh.contains(t)||0===t.xl.width&&0===t.xl.height||e.Xh.add(t,t.xl.copy()))}function Du(t,e,n){if(null!==e&&null!==e.qa&&Au(e)){var i=e.routeBounds;i.o()&&(t.routeBounds.Ic(i)||n.Ic(i))&&(t.usesSamePort(e)||e.ac())}}function zu(t){var e=t.Pe;if(null!==e){var n=t.gf;if(null!==n){for(var i=t.Qe,a=t.hf,r=t=null,o=e.Ya.j,s=o.length,h=0;h<s;h++){var l=o[h];(l.Pe===e&&l.Qe===i&&l.gf===n&&l.hf===a||l.Pe===n&&l.Qe===a&&l.gf===e&&l.hf===i)&&(null===r?r=l:(null===t&&(t=[]).push(r),t.push(l)))}if(null!==t){for(null===(r=iu(e,n,i,a))&&(nu(e,r=new id(e,i,n,a)),nu(n,r)),r.links=t,e=0;e<t.length;e++)t[e].zf=r;r.cm()}}}}function Gu(t){var e=t.zf;null!==e&&(t.zf=null,0<=(t=e.links.indexOf(t))&&(T(e.links,t),e.cm()))}eu.className="Node",eu.SpreadingNone=cu,eu.SpreadingEvenly=fu,eu.SpreadingPacked=gu,d(pu,eu),pu.prototype.cloneProtected=function(t){eu.prototype.cloneProtected.call(this,t),this.S=-32769&this.S,t.mo=this.mo,t.oo=this.oo,t.ki=this.ki,t.wp=this.wp;var e=t.Yl((function(t){return t instanceof yu}));t.Va=e instanceof yu?e:null,null!==this.gc?(t.gc=this.gc.copy(),t.gc.group=t):(null!==t.gc&&(t.gc.group=null),t.gc=null)},(n=pu.prototype).pf=function(t){eu.prototype.pf.call(this,t);var e=t.bk();for(t=t.memberParts;t.next();){var n=t.value;if(n.s(),n.B(8),n.Tj(),n instanceof eu)n.ed(e);else if(n instanceof wu)for(n=n.labelNodes;n.next();)n.value.ed(e)}},n.pk=function(t,e,n,i,a,r,o){if(t===kn&&"elements"===e){if(a instanceof yu)null===this.Va?this.Va=a:this.Va!==a&&w("Cannot insert a second Placeholder into the visual tree of a Group.");else if(a instanceof ah){var s=a.Yl((function(t){return t instanceof yu}));s instanceof yu&&(null===this.Va?this.Va=s:this.Va!==s&&w("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===Ln&&"elements"===e&&null!==this.Va&&(i===this.Va||i instanceof ah&&this.Va.tg(i))&&(this.Va=null);eu.prototype.pk.call(this,t,e,n,i,a,r,o)},n.uh=function(t,e,n,i){this.Xe=this.Va,eu.prototype.uh.call(this,t,e,n,i)},n.Ri=function(){if(!eu.prototype.Ri.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof eu){if(e.isVisible()&&qo(e))return!1}else if(e instanceof wu&&e.isVisible()&&qo(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},n.Zj=function(){if(0<this.no.count){var t=this.diagram;if(null!==t)for(var e=this.no.copy().iterator;e.next();)t.remove(e.value)}eu.prototype.Zj.call(this)},pu.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=Lo(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},pu.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var i=!0;for(t=Lo(t).iterator;t.next();){var a=t.value;!e||n.isValidMember(this,a)?a.containingGroup=this:i=!1}return i},pu.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup)&&!(null!==(t=t.diagram)&&!t.allowUngroup)},(n=pu.prototype).ed=function(t){void 0===t&&(t=null);var e=0!=(65536&this.S);if(eu.prototype.ed.call(this,t),!e)for(0!=(65536&this.S)!=!0&&(this.S=65536^this.S),e=this.Wu();e.next();){var n=e.value;if(null===t||!t.contains(n)){var i=n.fromNode;null!==i&&i!==this&&i.Vd(this)&&!i.isVisible()?(ru(i,n.fromPort),ru(i,n.toPort),n.Ra()):null!==(i=n.toNode)&&i!==this&&i.Vd(this)&&!i.isVisible()&&(ru(i,n.fromPort),ru(i,n.toPort),n.Ra())}}},n.Wu=function(){var t=this.bk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var i=n.value;if(i instanceof eu)for(i=i.linksConnected;i.next();){var a=i.value;t.contains(a)||e.add(a)}}return e.iterator},n.Jy=function(){var t=this.bk();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var i=n.value;if(i instanceof eu)for(i=i.linksConnected;i.next();){var a=i.value,r=a.fromNode;t.contains(r)&&r!==this||e.add(r),a=a.toNode,t.contains(a)&&a!==this||e.add(a)}}return e.iterator},n.Iy=function(){var t=new nt;return function t(e,n){null!==e&&(n.add(e),t(e.containingGroup,n))}(this,t),t},n.bk=function(){var t=new nt;return $l(t,this,!0,0,!0),t.remove(this),t},n.Lb=function(t){eu.prototype.Lb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Lb(t)},pu.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Fe||(t.Fe=!0,function t(e,n,i,a){for(var r=e.memberParts;r.next();){var o=r.value;if(o.Lb(!1),o instanceof pu&&o.isSubGraphExpanded&&(o.wasSubGraphExpanded=o.isSubGraphExpanded,t(o,n,i,a)),o instanceof eu)o.ed(n),i.Lp(o,a);else if(o instanceof wu)for(o=o.labelNodes;o.next();)o.value.ed(n)}e.isSubGraphExpanded=!1}(this,this.bk(),t,this),t.Fe=!1)},pu.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Fe||(t.Fe=!0,function t(e,n,i,a){for(var r=e.memberParts;r.next();){var o=r.value;if(o.Lb(!0),o instanceof pu&&o.wasSubGraphExpanded&&(o.wasSubGraphExpanded=!1,t(o,n,i,a)),o instanceof eu)o.ed(n),i.Mp(o,a);else if(o instanceof wu)for(o=o.labelNodes;o.next();)o.value.ed(n)}e.isSubGraphExpanded=!0}(this,this.bk(),t,this),t.Fe=!1)},pu.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,i=n.x;n=n.y;var a=t.x,r=t.y;if(!(i===a||isNaN(i)&&isNaN(a))||!(n===r||isNaN(n)&&isNaN(r))){for(i=a-(isNaN(i)?0:i),n=r-(isNaN(n)?0:n),r=ft.alloc(),eu.prototype.move.call(this,t,e),t=new nt,e=this.bk().iterator;e.next();)(a=e.value)instanceof wu&&(a.suspendsRouting&&t.add(a),a.Lc||a.fromNode!==this&&a.toNode!==this)&&(a.suspendsRouting=!0);for(e.reset();e.next();)if(!((a=e.value).Ah()||a instanceof eu&&a.isLinkLabel)){var o=a.position,s=a.location;o.o()?(r.x=o.x+i,r.y=o.y+n,a.position=r):s.o()&&(r.x=s.x+i,r.y=s.y+n,a.location=r)}for(e.reset();e.next();)(a=e.value)instanceof wu&&(a.suspendsRouting=t.contains(a),a.Lc||a.fromNode!==this&&a.toNode!==this)&&(o=a.position,r.x=o.x+i,r.y=o.y+n,r.o()?a.move(r):a.Ra(),Nu(a)&&a.Ra());ft.free(r)}},c.Object.defineProperties(pu.prototype,{placeholder:{get:function(){return this.Va}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.S)},set:function(t){var e=0!=(2048&this.S);e!==t&&(this.S^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.S)},set:function(t){var e=0!=(4096&this.S);e!==t&&(this.S^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.S)},set:function(t){var e=0!=(8192&this.S);e!==t&&(this.S^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.S)},set:function(t){var e=0!=(16384&this.S);e!==t&&(this.S^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.no.iterator}},layout:{get:function(){return this.gc},set:function(t){var e=this.gc;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.gc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Cg=!0),this.g("layout",e,t),null!==n&&n.cc()}}},memberAdded:{get:function(){return this.mo},set:function(t){var e=this.mo;e!==t&&(this.mo=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.S)},set:function(t){var e=0!=(256&this.S);e!==t&&(this.S^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.S)},set:function(t){var e=0!=(512&this.S);if(e!==t){this.S^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var i=!0;null!==n&&(i=n.ea,n.ea=!0),e(this),null!==n&&(n.ea=i)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Va&&this.Va.s(),this.memberParts.each((function(t){t.updateAdornments()}))):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.S)},set:function(t){var e=0!=(1024&this.S);e!==t&&(this.S^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.wp},set:function(t){var e=this.wp;e!==t&&(this.wp=t,this.g("subGraphExpandedChanged",e,t))}},nk:{get:function(){return 0!=(32768&this.S)},set:function(t){0!=(32768&this.S)!==t&&(this.S^=32768)}}}),pu.prototype.expandSubGraph=pu.prototype.expandSubGraph,pu.prototype.collapseSubGraph=pu.prototype.collapseSubGraph,pu.prototype.findSubGraphParts=pu.prototype.bk,pu.prototype.findContainingGroupChain=pu.prototype.Iy,pu.prototype.findExternalNodesConnected=pu.prototype.Jy,pu.prototype.findExternalLinksConnected=pu.prototype.Wu,pu.className="Group",d(yu,Mo),yu.prototype.cloneProtected=function(t){Mo.prototype.cloneProtected.call(this,t),t.eb=this.eb.I(),t.gp=this.gp.copy()},yu.prototype.wh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return qt(0,0,e.width,e.height,t.x,t.y)},yu.prototype.hm=function(){var t=this.part;if(null!==t&&(t instanceof pu||t instanceof tu)||w("Placeholder is not inside a Group or Adornment."),t instanceof pu){var e=this.computeBorder(this.gp),n=this.minSize,i=this.qc;for(Rt(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),Co(this,0,0,i.width,i.height),n=t.memberParts,i=!1;n.next();)if(n.value.isVisible()){i=!0;break}n=t.diagram,(i=!i||null===n)||((i=n.animationManager).Mf?i=null!==(i=i.yj.J(t))&&(i.start.position||i.start.location):i=!1),i||isNaN(e.x)||isNaN(e.y)?null!==n&&n.animationManager.isAnimating&&n.animationManager.bs.add(this):((n=ft.alloc()).Vi(e,t.locationSpot),n.A(t.location)||(t.location=new ft(n.x,n.y)),ft.free(n))}else{e=this.qc,i=(n=this.eb).left+n.right;var a=n.top+n.bottom,r=t.adornedObject;t.angle=r.Li();var o=0;r instanceof Oh&&(o=r.strokeWidth);var s=r.De(),h=r.naturalBounds,l=(h.width+o)*s;o=(h.height+o)*s,t.type!==ah.Link&&(r=r.ma("Selection"===t.category?oe:t.locationSpot,ft.alloc()),t.location=r,ft.free(r)),isNaN(l)||isNaN(o)?(l=(t=t.adornedObject).ma(oe,ft.alloc()),(r=Et.allocAt(l.x,l.y,0,0)).Je(t.ma(ge,l)),r.Je(t.ma(he,l)),r.Je(t.ma(ce,l)),Rt(e,r.width+i||0,r.height+a||0),Co(this,-n.left,-n.top,e.width,e.height),ft.free(l),Et.free(r)):(Rt(e,l+i||0,o+a||0),Co(this,-n.left,-n.top,e.width,e.height))}},yu.prototype.uh=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},yu.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof pu&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.gp.o()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&null!==(n=i.computeBorder(e,this.gp,t)))return n}n=Et.alloc(),i=this.computeMemberBounds(n);var a=this.eb;return e instanceof pu&&!e.isSubGraphExpanded?t.h(i.x-a.left,i.y-a.top,0,0):t.h(i.x-a.left,i.y-a.top,Math.max(i.width+a.left+a.right,0),Math.max(i.height+a.top+a.bottom,0)),Et.free(n),e instanceof pu&&e.computesBoundsIncludingLocation&&e.location.o()&&t.Je(e.location),t},yu.prototype.computeMemberBounds=function(t){if(!(this.part instanceof pu))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,a=-1/0,r=-1/0,o=e.memberParts;o.next();){var s=o.value;if(s.isVisible()){if(s instanceof wu){if(!e.computesBoundsIncludingLinks)continue;if(Xo(s))continue;if(s.fromNode===e||s.toNode===e)continue}(s=s.actualBounds).left<n&&(n=s.left),s.top<i&&(i=s.top),s.right>a&&(a=s.right),s.bottom>r&&(r=s.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,a-n,r-i):(e=e.location,t.h(e.x,e.y,0,0)),t},c.Object.defineProperties(yu.prototype,{padding:{get:function(){return this.eb},set:function(t){"number"==typeof t&&(t=new $t(t));var e=this.eb;e.A(t)||(this.eb=t=t.I(),this.g("padding",e,t))}}}),yu.className="Placeholder",d(wu,jl),wu.prototype.cloneProtected=function(t){jl.prototype.cloneProtected.call(this,t),t.Ta=-113&this.Ta,t.Qe=this.Qe,t.En=this.En,t.hf=this.hf,t.Dp=this.Dp,t.Lm=this.Lm,t.fn=this.fn,t.jn=this.jn,t.kn=this.kn,t.Fj=this.Fj,t.rp=this.rp,null!==this.P&&(t.P=this.P.copy())},(n=wu.prototype).pf=function(t){jl.prototype.pf.call(this,t),this.Qe=t.Qe,this.hf=t.hf,t.Zg=null,t.Ra(),t.zf=this.zf;var e=t.fromPort;null!==e&&ru(t.fromNode,e),null!==(e=t.toPort)&&ru(t.toNode,e)},n.fb=function(t){t.classType===wu?2==(2&t.value)?this.routing=t:t===Yu||t===Hu||t===Xu?this.curve=t:t===Uu||t===qu||t===Wu?this.adjusting=t:t!==Eu&&t!==Vu&&w("Unknown Link enum value for a Link property: "+t):jl.prototype.fb.call(this,t)},n.Hc=function(){null===this.P&&(this.P=new Pd)},n.Ri=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),qo(t)||Ul(t))return!1}return null===(t=this.toNode)||(null!==(e=t.findVisibleNode())&&(t=e),!qo(t)&&!Ul(t))},n.Lv=function(){return!1},n.Mv=function(){},n.bc=function(){return!1},wu.prototype.computeAngle=function(t,e,n){return wu.computeAngle(e,n)},wu.computeAngle=function(t,e){switch(t){default:case Vu:t=0;break;case Ku:t=e;break;case Ju:t=e+90;break;case Zu:t=e-90;break;case $u:t=e+180;break;case Qu:90<(t=qe.jq(e))&&270>t&&(t-=180);break;case td:90<(t=qe.jq(e+90))&&270>t&&(t-=180);break;case ed:90<(t=qe.jq(e-90))&&270>t&&(t-=180);break;case nd:if(45<(t=qe.jq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return qe.jq(t)},(n=wu.prototype).zh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&jl.prototype.zh.call(this)},n.Ws=function(t){var e=this.fromNode;return t===e?this.toNode:e},n.bz=function(t){var e=this.fromPort;return t===e?this.toPort:e},n.aq=function(t){if(jl.prototype.aq.call(this,t),Au(this)&&this.cq(this.actualBounds),!t){var e=null;null!==(t=this.Pe)&&ou(t,this,e=this.fromPort);var n=this.gf;if(null!==n){var i=this.toPort;n===t&&i===e||ou(n,this,i)}zu(this)}},n.bq=function(t){if(jl.prototype.bq.call(this,t),Au(this)&&this.cq(this.actualBounds),!t){var e=null;null!==(t=this.Pe)&&su(t,this,e=this.fromPort);var n=this.gf;if(null!==n){var i=this.toPort;n===t&&i===e||su(n,this,i)}Gu(this)}},n.Zj=function(){if(this.Lc=!0,null!==this.$c){var t=this.diagram;if(null!==t)for(var e=this.$c.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&(null!==(t=this.diagram)&&t.partManager.removeDataForLink(this))},wu.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},wu.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var a=n.y;for(isNaN(a)&&(a=0),i=t.x-i,a=t.y-a,!0===e?jl.prototype.move.call(this,t,!1):(t=ft.allocAt(n.x+i,n.y+a),jl.prototype.move.call(this,t,!1),ft.free(t)),bu(this,i,a),t=this.labelNodes;t.next();)n=(e=t.value).position,e.moveTo(n.x+i,n.y+a)},wu.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},wu.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},wu.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(Lt),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),i=this.i(1);return t.h((n.x+i.x)/2,(n.y+i.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yu))return this.qa.dv(.5,t),t.add(this.i(0)),n=this.qa.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===Yu){if(3===e)return this.i(1);if(n=3*((i=(e-1)/3|0)/2|0),1==i%2){i=this.i(n);var a=this.i(n+1),r=this.i(n+2);n=this.i(n+3),qe.ny(i.x,i.y,a.x,a.y,r.x,r.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var o=this.flattenedLengths;for(n=this.flattenedTotalLength,a=r=i=0;i<n/2&&r<e&&!(i+(a=o[r])>n/2);)i+=a,r++;return e=this.i(r),r=this.i(r+1),1>Math.abs(e.x-r.x)?e.y>r.y?t.h(e.x,e.y-(n/2-i)):t.h(e.x,e.y+(n/2-i)):1>Math.abs(e.y-r.y)?e.x>r.x?t.h(e.x-(n/2-i),e.y):t.h(e.x+(n/2-i),e.y):(n=(n/2-i)/a,t.h(e.x+n*(r.x-e.x),e.y+n*(r.y-e.y))),t},wu.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Wa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Yu)){t:{var e=.5;if(0>e?e=0:1<e&&(e=1),(t=this.qa).type===rn)t=180*Math.atan2(t.endY-t.startY,t.endX-t.startX)/Math.PI;else{var n=t.flattenedSegments,i=t.flattenedLengths,a=n.length;e=t.flattenedTotalLength*e;for(var r=0,o=0;o<a;o++){var s=i[o],h=s.length;for(t=0;t<h;t++){var l=s[t];if(r+l>=e){n=(e=n[o])[2*t],i=e[2*t+1],a=e[2*t+2],t=e[2*t+3],t=1>Math.abs(a-n)&&1>Math.abs(t-i)?0:1>Math.abs(a-n)?0<=t-i?90:270:1>Math.abs(t-i)?0<=a-n?0:180:180*Math.atan2(t-i,a-n)/Math.PI;break t}r+=l}}t=NaN}}return t}if(this.computeCurve()===Yu&&4<=t){if(n=3*((i=(t-1)/3|0)/2|0),1==i%2)return n=Math.floor(n),t=this.i(n),i=this.i(n+1),a=this.i(n+2),n=this.i(n+3),qe.my(t.x,t.y,i.x,i.y,a.x,a.y,n.x,n.y);if(0<n&&n+1<t)return this.i(n-1).Wa(this.i(n+1))}for(i=this.flattenedLengths,a=this.flattenedTotalLength,n=e=0;e<a/2&&n<t&&!(e+(r=i[n])>a/2);)e+=r,n++;if(i=this.i(n),a=this.i(n+1),1>Math.abs(i.x-a.x)&&1>Math.abs(i.y-a.y)){if(0<n&&n+2<t)return this.i(n-1).Wa(this.i(n+2))}else{if(1>Math.abs(i.x-a.x))return i.y>a.y?270:90;if(1>Math.abs(i.y-a.y))return i.x>a.x?180:0}return i.Wa(a)},(n=wu.prototype).i=function(t){return this.xb.j[t]},n.jd=function(t,e){this.xb.gd(t,e)},n.M=function(t,e,n){this.xb.gd(t,new ft(e,n))},n.mz=function(t,e){this.xb.Ib(t,e)},n.m=function(t,e,n){this.xb.Ib(t,new ft(e,n))},n.ze=function(t){this.xb.add(t)},n.lf=function(t,e){this.xb.add(new ft(t,e))},n.Av=function(t){this.xb.mb(t)},n.Uj=function(){this.xb.clear()},n.Ch=function(){null===this.Zg&&(this.Zg=this.xb,this.xb=this.xb.copy())},n.mf=function(){if(null!==this.Zg){for(var t=this.Zg,e=this.xb,n=1/0,i=1/0,a=t.j,r=a.length,o=0;o<r;o++){var s=a[o];n=Math.min(s.x,n),i=Math.min(s.y,i)}s=o=1/0;for(var h=e.j,l=h.length,u=0;u<l;u++){var d=h[u];o=Math.min(d.x,o),s=Math.min(d.y,s),d.freeze()}if(e.freeze(),l===r){for(r=0;r<l;r++)if(u=a[r],d=h[r],u.x-n!=d.x-o||u.y-i!=d.y-s){this.s(),this.ac();break}}else this.s(),this.ac();this.Zg=null,null!==(n=this.diagram)&&n.animationManager.rb&&(this.bh=e),xu(this),this.g("points",t,e)}},n.zx=function(){null!==this.Zg&&(this.xb=this.Zg,this.Zg=null)},n.Ra=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.ft.contains(this)||t.undoManager.isUndoingRedoing)return;if((t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.bh&&!t.isTicking&&t.isAnimating&&(this.bh=null)}null!==(t=this.path)&&(this.Lc=!1,this.s(),t.s())}},n.Zi=function(){if(!this.Lc&&!this.Pu){var t=!0;try{this.Pu=!0,this.Ch(),t=this.computePoints()}finally{this.Pu=!1,t?this.mf():this.zx()}}},wu.prototype.computePoints=function(){var t=this.diagram;if(null===t)return!1;var e=this.fromNode,n=null;if(null===e?(t.ri||(t.ap=new Oh,t.ap.desiredSize=Mt,t.ap.strokeWidth=0,t.ri=new eu,t.ri.add(t.ap),t.ri.$b()),this.defaultFromPoint&&(t.ri.position=t.ri.location=this.defaultFromPoint,t.ri.$b(),e=t.ri,n=t.ap)):n=this.fromPort,null!==n&&!e.isVisible()){var i=e.findVisibleNode();null!==i&&i!==e?(e=i,n=i.port):e=i}if(this.Jw=e,null===e||!e.location.o())return!1;for(;!(null===n||n.actualBounds.o()&&n.tf());)n=n.panel;if(null===n)return!1;var a=this.toNode,r=null;if(null===a?(t.si||(t.bp=new Oh,t.bp.desiredSize=Mt,t.bp.strokeWidth=0,t.si=new eu,t.si.add(t.bp),t.si.$b()),this.defaultToPoint&&(t.si.position=t.si.location=this.defaultToPoint,t.si.$b(),a=t.si,r=t.bp)):r=this.toPort,null===r||a.isVisible()||(null!==(t=a.findVisibleNode())&&t!==a?(a=t,r=t.port):a=t),this.Kw=a,null===a||!a.location.o())return!1;for(;!(null===r||r.actualBounds.o()&&r.tf());)r=r.panel;if(null===r)return!1;var o=this.pointsCount;i=this.computeSpot(!0,n),t=this.computeSpot(!1,r);var s=Mu(i),h=Mu(t),l=n===r&&null!==n,u=this.isOrthogonal,d=this.curve===Yu;this.If=!(!l||u)&&(d=!0);var c=this.adjusting===Vu||l;if(!u&&!l&&s&&h){if(s=!1,!c&&3<=o&&(c=this.getLinkPoint(e,n,i,!0,!1,a,r),h=this.getLinkPoint(a,r,t,!1,!1,e,n),s=this.adjustPoints(0,c,o-1,h))&&(c=this.getLinkPoint(e,n,i,!0,!1,a,r),h=this.getLinkPoint(a,r,t,!1,!1,e,n),this.adjustPoints(0,c,o-1,h)),!s)if(this.Uj(),d){o=this.getLinkPoint(e,n,i,!0,!1,a,r),s=(c=this.getLinkPoint(a,r,t,!1,!1,e,n)).x-o.x,h=c.y-o.y,l=this.computeCurviness(),d=u=0;var f=o.x+s/3,g=o.y+h/3,p=f,m=g;qe.w(h,0)?m=0<s?m-l:m+l:(u=-s/h,d=Math.sqrt(l*l/(u*u+1)),0>l&&(d=-d),m=u*((p=(0>h?-1:1)*d+f)-f)+g);var v=f=o.x+2*s/3,y=g=o.y+2*h/3;qe.w(h,0)?y=0<s?y-l:y+l:y=u*((v=(0>h?-1:1)*d+f)-f)+g,this.Uj(),this.ze(o),this.lf(p,m),this.lf(v,y),this.ze(c),this.jd(0,this.getLinkPoint(e,n,i,!0,!1,a,r)),this.jd(3,this.getLinkPoint(a,r,t,!1,!1,e,n))}else i=this.getLinkPoint(e,n,i,!0,!1,a,r),t=this.getLinkPoint(a,r,t,!1,!1,e,n),this.hasCurviness()?(c=t.x-i.x,a=t.y-i.y,r=this.computeCurviness(),o=e=i.x+c/2,s=n=i.y+a/2,qe.w(a,0)?s=0<c?s-r:s+r:(c=-c/a,o=Math.sqrt(r*r/(c*c+1)),0>r&&(o=-o),s=c*((o=(0>a?-1:1)*o+e)-e)+n),this.ze(i),this.lf(o,s)):this.ze(i),this.ze(t)}else{d=this.isAvoiding,c&&(u&&d||l)&&this.Uj();var w=l?this.computeCurviness():0;d=this.getLinkPoint(e,n,i,!0,u,a,r),f=p=g=0,(u||!s||l)&&(m=this.computeEndSegmentLength(e,n,i,!0),f=this.getLinkDirection(e,n,d,i,!0,u,a,r),l&&(s||i.A(t)||!u&&1===i.x+t.x&&1===i.y+t.y)&&(f-=u?90:30,0>w&&(f-=180)),0>f?f+=360:360<=f&&(f-=360),l&&(m+=Math.abs(w)*(u?1:2)),0===f?g=m:90===f?p=m:180===f?g=-m:270===f?p=-m:(g=m*Math.cos(f*Math.PI/180),p=m*Math.sin(f*Math.PI/180)),i.jc()&&l&&(m=n.ma(ue,ft.alloc()),v=ft.allocAt(m.x+1e3*g,m.y+1e3*p),this.getLinkPointFromPoint(e,n,m,v,!0,d),ft.free(m),ft.free(v))),m=this.getLinkPoint(a,r,t,!1,u,e,n);var S=y=v=0;if(u||!h||l){var P=this.computeEndSegmentLength(a,r,t,!1);S=this.getLinkDirection(a,r,m,t,!1,u,e,n),l&&(h||i.A(t)||!u&&1===i.x+t.x&&1===i.y+t.y)&&(S+=u?0:30,0>w&&(S+=180)),0>S?S+=360:360<=S&&(S-=360),l&&(P+=Math.abs(w)*(u?1:2)),0===S?v=P:90===S?y=P:180===S?v=-P:270===S?y=-P:(v=P*Math.cos(S*Math.PI/180),y=P*Math.sin(S*Math.PI/180)),t.jc()&&l&&(t=r.ma(ue,ft.alloc()),i=ft.allocAt(t.x+1e3*v,t.y+1e3*y),this.getLinkPointFromPoint(a,r,t,i,!1,m),ft.free(t),ft.free(i))}t=d,(u||!s||l)&&(t=new ft(d.x+g,d.y+p)),i=m,(u||!h||l)&&(i=new ft(m.x+v,m.y+y)),!c&&!u&&s&&3<o&&this.adjustPoints(0,d,o-2,i)?this.jd(o-1,m):!c&&!u&&h&&3<o&&this.adjustPoints(1,t,o-1,m)?this.jd(0,d):!c&&(u?6<=o:4<o)&&this.adjustPoints(1,t,o-2,i)?(this.jd(0,d),this.jd(o-1,m)):(this.Uj(),this.ze(d),(u||!s||l)&&this.ze(t),u&&this.addOrthoPoints(t,f,i,S,e,a),(u||!h||l)&&this.ze(i),this.ze(m))}return!0},wu.prototype.getLinkPointFromPoint=function(t,e,n,i,a,r){if(void 0===r&&(r=new ft),null===t||null===e)return r.assign(n),r;if(t.isVisible()||null!==(a=t.findVisibleNode())&&a!==t&&(e=a.port),t=null,null===(a=e.panel)||a.Zd()||(a=a.panel),null===a){a=i.x,i=i.y;var o=n.x;n=n.y}else{a=1/((t=a.rd).m11*t.m22-t.m12*t.m21),o=t.m22*a;var s=-t.m12*a,h=-t.m21*a,l=t.m11*a,u=a*(t.m21*t.dy-t.m22*t.dx),d=a*(t.m12*t.dx-t.m11*t.dy);a=i.x*o+i.y*h+u,i=i.x*s+i.y*l+d,o=n.x*o+n.y*h+u,n=n.x*s+n.y*l+d}return e.ck(a,i,o,n,r),null!==t&&r.transform(t),r},wu.prototype.getLinkPoint=function(t,e,n,i,a,r,o,s){if(void 0===s&&(s=new ft),n.gb()&&!Mu(n))return e.ma(n,s),s;if(n.sf()){var h=Lu(this,e);if(null!==h){if(s.assign(h.gq),a&&this.routing===_u){var l=Lu(this,o);if(null!==l&&h.Wl<l.Wl){h=ft.alloc(),l=ft.alloc();var u=new Et(e.ma(oe,h),e.ma(ge,l)),d=this.computeSpot(!i,o);t=this.getLinkPoint(r,o,d,!i,a,t,e,l),(n.rf(me)||n.rf(ve))&&t.y>=u.y&&t.y<=u.y+u.height?s.y=t.y:(n.rf(pe)||n.rf(ye))&&t.x>=u.x&&t.x<=u.x+u.width&&(s.x=t.x),ft.free(h),ft.free(l)}}return s}}return n=e.ma(.5===n.x&&.5===n.y?n:ue,ft.alloc()),this.pointsCount>(a?6:2)?(o=i?this.i(1):this.i(this.pointsCount-2),a&&(o=ku(n,o.copy()))):(h=this.computeSpot(!i,o),r=ft.alloc(),o=o.ma(.5===h.x&&.5===h.y?h:ue,r),a&&(o=ku(n,o)),ft.free(r)),this.getLinkPointFromPoint(t,e,n,o,i,s),ft.free(n),s},wu.prototype.getLinkDirection=function(t,e,n,i,a,r,o,s){t:if(i.gb())var h=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:.5>i.x?225:.5<i.x?45:0;else{if(i.sf()&&null!==(h=Lu(this,e)))switch(h.yc){case 1:h=270;break t;case 2:h=180;break t;default:case 4:h=0;break t;case 8:h=90;break t}h=e.ma(ue,ft.alloc()),this.pointsCount>(r?6:2)?(s=a?this.i(1):this.i(this.pointsCount-2),s=r?ku(h,s.copy()):n):(n=ft.alloc(),s=s.ma(ue,n),ft.free(n)),n=Math.abs(s.x-h.x)>Math.abs(s.y-h.y)?s.x>=h.x?0:180:s.y>=h.y?90:270,ft.free(h),h=n}return i.jc()&&o.Vd(t)&&(360<=(h+=180)&&(h-=360)),Mu(i)||0===(t=e.Li())||(45<=t&&135>t?h+=90:135<=t&&225>t?h+=180:225<=t&&315>t&&(h+=270),360<=h&&(h-=360)),h},wu.prototype.computeEndSegmentLength=function(t,e,n,i){return null!==e&&n.sf()&&null!==(t=Lu(this,e))?t.Uu:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},wu.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=ue:((e=this.fromSpot).Kb()&&(e=t.fromSpot),t=e===Fe?re:e):null===(t=e||this.toPort)?t=ue:((e=this.toSpot).Kb()&&(e=t.toSpot),t=e===Fe?re:e),t},wu.prototype.computeOtherPoint=function(t,e){return t=e.ma(ue),null!==(e=null!==(e=e.Ro)?wd(e,this):null)&&(t=e.gq),t},wu.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&(null!==(e=this.toPort)&&(t=e.toShortLength)),isNaN(t)?0:t},wu.prototype.pg=function(t,e,n,i,a,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var o=r;if(void 0===r&&(o=ae.alloc()).reset(),o.multiply(this.transform),this.vh(t,o))return fh(this,e,n,a),void 0===r&&ae.free(o),!0;if(this.Ic(t,o)){var s=!1;if(!this.isAtomic)for(var h=this.Y.j,l=h.length;l--;){var u=h[l];if(u.visible||u===this.locationObject){var d=u.actualBounds,c=this.naturalBounds;if(!(d.x>c.width||d.y>c.height||0>d.x+d.width||0>d.y+d.height)){if((d=ae.alloc()).set(o),u instanceof ah)s=u.pg(t,e,n,i,a,d);else if(this.path===u){if(u instanceof Oh)if(s=t,c=i,!1===u.pickable)s=!1;else if(d.multiply(u.transform),c)t:{var f=s,g=d;if(u.vh(f,g))s=!0;else{if(void 0===g&&(g=u.transform,f.nf(u.actualBounds))){s=!0;break t}s=f.left,c=f.right;var p=f.top;f=f.bottom;var m=ft.alloc(),v=ft.alloc(),y=ft.alloc(),w=ae.alloc();w.set(g),w.ov(u.transform),w.at(),v.x=c,v.y=p,v.transform(w),m.x=s,m.y=p,m.transform(w),g=!1,Gh(u,m,v,y)?g=!0:(m.x=c,m.y=f,m.transform(w),Gh(u,m,v,y)?g=!0:(v.x=s,v.y=f,v.transform(w),Gh(u,m,v,y)?g=!0:(m.x=s,m.y=p,m.transform(w),Gh(u,m,v,y)&&(g=!0)))),ae.free(w),ft.free(m),ft.free(v),ft.free(y),s=g}}else s=u.vh(s,d)}else s=Fo(u,t,i,d);s&&(c=u,null!==e&&(c=e(u)),c&&(null===n||n(c))&&a.add(c)),ae.free(d)}}}return void 0===r&&ae.free(o),s||null!==this.background||null!==this.areaBackground}return void 0===r&&ae.free(o),!1},wu.prototype.computeCurve=function(){if(null===this.If){var t=this.fromPort,e=this.isOrthogonal;this.If=null!==t&&t===this.toPort&&!e}return this.If?Yu:this.curve},wu.prototype.computeCorner=function(){if(this.curve===Yu)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},wu.prototype.findMidLabel=function(){for(var t=this.path,e=this.Y.j,n=e.length,i=0;i<n;i++){var a=e[i];if(a!==t&&!a.isPanelMain&&(-1/0===a.segmentIndex||isNaN(a.segmentIndex)))return a}for(t=this.labelNodes;t.next();)if(-1/0===(e=t.value).segmentIndex||isNaN(e.segmentIndex))return e;return null},wu.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Math.max(14,this.computeThickness()),e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var i=this.findMidLabel();if(null!==i){var a=i.naturalBounds,r=i.margin,o=isNaN(a.width)?30:a.width*i.scale+r.left+r.right;a=isNaN(a.height)?14:a.height*i.scale+r.top+r.bottom,(i=i.segmentOrientation)===Ku||i===Qu||i===$u?t=Math.max(t,a):i===Zu||i===ed||i===Ju||i===td?t=Math.max(t,o):(e=e.ma(ue).Wa(n.ma(ue))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*o)+Math.abs(Math.cos(e)*a)+1)),this.curve===Yu&&(t*=1.333)}}return t},wu.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.adjusting===Vu&&n.Ra()}},wu.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=16;var e=this.zf;if(null!==e){for(var n=C(),i=0,a=e.links,r=0;r<a.length;r++){var o=a[r].computeSpacing();n.push(o),i+=o}for(i=-i/2,r=0;r<a.length;r++){if(a[r]===this){t=i+n[r]/2;break}i+=n[r]}e.it===this.fromNode&&(t=-t),F(n)}}return t},wu.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},wu.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.zf},wu.prototype.adjustPoints=function(t,e,n,i){var a=this.adjusting;if(this.isOrthogonal){if(a===qu)return!1;a===Wu&&(a=Uu)}switch(a){case qu:var r=this.i(t),o=this.i(n);if(!r.Qa(e)||!o.Qa(i)){a=r.x,r=r.y;var s=o.x-a,h=o.y-r,l=Math.sqrt(s*s+h*h);if(!qe.ca(l,0)){if(qe.ca(s,0))var u=0>h?-Math.PI/2:Math.PI/2;else u=Math.atan(h/Math.abs(s)),0>s&&(u=Math.PI-u);o=e.x;var d=e.y;s=i.x-o;var c=i.y-d;for(h=Math.sqrt(s*s+c*c),qe.ca(s,0)?c=0>c?-Math.PI/2:Math.PI/2:(c=Math.atan(c/Math.abs(s)),0>s&&(c=Math.PI-c)),l=h/l,u=c-u,this.jd(t,e),t+=1;t<n;t++)s=(e=this.i(t)).x-a,h=e.y-r,e=Math.sqrt(s*s+h*h),qe.ca(e,0)||(qe.ca(s,0)?h=0>h?-Math.PI/2:Math.PI/2:(h=Math.atan(h/Math.abs(s)),0>s&&(h=Math.PI-h)),s=h+u,e*=l,this.M(t,o+e*Math.cos(s),d+e*Math.sin(s)));this.jd(n,i)}}return!0;case Wu:if(r=this.i(t),d=this.i(n),!r.Qa(e)||!d.Qa(i)){a=r.x,r=r.y,l=((o=d.x)-a)*(o-a)+((d=d.y)-r)*(d-r),s=e.x,u=e.y,h=i.x,c=i.y;var f=1;if(0!=h-s){var g=(c-u)/(h-s);f=Math.sqrt(1+1/(g*g))}else g=9e9;for(this.jd(t,e),t+=1;t<n;t++){var p=(e=this.i(t)).x,m=e.y,v=.5;0!==l&&(v=((a-p)*(a-o)+(r-m)*(r-d))/l);var y=a+v*(o-a),w=r+v*(d-r);e=Math.sqrt((p-y)*(p-y)+(m-w)*(m-w)),m<g*(p-y)+w&&(e=-e),0<g&&(e=-e),p=s+v*(h-s),v=u+v*(c-u),0!==g?(e=p+e/f,this.M(t,e,v-(e-p)/g)):this.M(t,p,v+e)}this.jd(n,i)}return!0;case Uu:return this.isOrthogonal&&(a=this.i(t),r=this.i(t+1),o=this.i(t+2),d=s=r.x,l=u=r.y,qe.w(a.y,r.y)?qe.w(r.x,o.x)?u=e.y:qe.w(r.y,o.y)&&(s=e.x):qe.w(a.x,r.x)&&(qe.w(r.y,o.y)?s=e.x:qe.w(r.x,o.x)&&(u=e.y)),this.M(t+1,s,u),a=this.i(n),r=this.i(n-1),o=this.i(n-2),h=s=r.x,c=u=r.y,qe.w(a.y,r.y)?qe.w(r.x,o.x)?u=i.y:qe.w(r.y,o.y)&&(s=i.x):qe.w(a.x,r.x)&&(qe.w(r.y,o.y)?s=i.x:qe.w(r.x,o.x)&&(u=i.y)),this.M(n-1,s,u),Nu(this))?(this.M(t+1,d,l),this.M(n-1,h,c),n=!1):(this.jd(t,e),this.jd(n,i),n=!0),n;default:return!1}},wu.prototype.addOrthoPoints=function(t,e,n,i,a,r){e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,i=-45<=i&&45>i?0:45<=i&&135>i?90:135<=i&&225>i?180:270;var o=a.actualBounds.copy(),s=r.actualBounds.copy();if(o.o()&&s.o()){if(o.Uc(8,8),s.Uc(8,8),o.Je(t),s.Je(n),0===e)if(n.x>t.x||270===i&&n.y<t.y&&s.right>t.x||90===i&&n.y>t.y&&s.right>t.x){var h=new ft(n.x,t.y),l=new ft(n.x,(t.y+n.y)/2);180===i?(h.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),l.x=h.x,l.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(h.x=t.x<s.left?this.computeMidOrthoPosition(t.x,t.y,s.left,n.y,!1):t.x<s.right&&(270===i&&t.y<s.top||90===i&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):s.right,l.x=h.x,l.y=n.y):0===i&&t.x<s.left&&t.y>s.top&&t.y<s.bottom&&(h.x=t.x,h.y=t.y<n.y?Math.min(n.y,s.top):Math.max(n.y,s.bottom),l.y=h.y)}else h=new ft(t.x,n.y),l=new ft((t.x+n.x)/2,n.y),(180===i||90===i&&n.y<o.top||270===i&&n.y>o.bottom)&&(180===i&&(s.da(t)||o.da(n))?h.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===i||90===i)?h.y=this.computeMidOrthoPosition(t.x,o.top,n.x,Math.max(n.y,s.bottom),!0):n.y>t.y&&(180===i||270===i)&&(h.y=this.computeMidOrthoPosition(t.x,o.bottom,n.x,Math.min(n.y,s.top),!0)),l.x=n.x,l.y=h.y),h.y>o.top&&h.y<o.bottom&&(n.x>=o.left&&n.x<=t.x||t.x<=s.right&&t.x>=n.x?90!==i&&270!==i||(h=new ft(Math.max((t.x+n.x)/2,t.x),t.y),l=new ft(h.x,n.y)):(h.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,0===i?o.top:Math.min(o.top,s.top)):Math.max(n.y,0===i?o.bottom:Math.max(o.bottom,s.bottom)),l.x=n.x,l.y=h.y));else 180===e?n.x<t.x||270===i&&n.y<t.y&&s.left<t.x||90===i&&n.y>t.y&&s.left<t.x?(h=new ft(n.x,t.y),l=new ft(n.x,(t.y+n.y)/2),0===i?(h.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),l.x=h.x,l.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(h.x=t.x>s.right?this.computeMidOrthoPosition(t.x,t.y,s.right,n.y,!1):t.x>s.left&&(270===i&&t.y<s.top||90===i&&t.y>s.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):s.left,l.x=h.x,l.y=n.y):180===i&&t.x>s.right&&t.y>s.top&&t.y<s.bottom&&(h.x=t.x,h.y=t.y<n.y?Math.min(n.y,s.top):Math.max(n.y,s.bottom),l.y=h.y)):(h=new ft(t.x,n.y),l=new ft((t.x+n.x)/2,n.y),(0===i||90===i&&n.y<o.top||270===i&&n.y>o.bottom)&&(0===i&&(s.da(t)||o.da(n))?h.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===i||90===i)?h.y=this.computeMidOrthoPosition(t.x,o.top,n.x,Math.max(n.y,s.bottom),!0):n.y>t.y&&(0===i||270===i)&&(h.y=this.computeMidOrthoPosition(t.x,o.bottom,n.x,Math.min(n.y,s.top),!0)),l.x=n.x,l.y=h.y),h.y>o.top&&h.y<o.bottom&&(n.x<=o.right&&n.x>=t.x||t.x>=s.left&&t.x<=n.x?90!==i&&270!==i||(h=new ft(Math.min((t.x+n.x)/2,t.x),t.y),l=new ft(h.x,n.y)):(h.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,180===i?o.top:Math.min(o.top,s.top)):Math.max(n.y,180===i?o.bottom:Math.max(o.bottom,s.bottom)),l.x=n.x,l.y=h.y))):90===e?n.y>t.y||180===i&&n.x<t.x&&s.bottom>t.y||0===i&&n.x>t.x&&s.bottom>t.y?(h=new ft(t.x,n.y),l=new ft((t.x+n.x)/2,n.y),270===i?(h.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),l.x=n.x,l.y=h.y):180===i&&n.x<t.x||0===i&&n.x>t.x?(h.y=t.y<s.top?this.computeMidOrthoPosition(t.x,t.y,n.x,s.top,!0):t.y<s.bottom&&(180===i&&t.x<s.left||0===i&&t.x>s.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):s.bottom,l.x=n.x,l.y=h.y):90===i&&t.y<s.top&&t.x>s.left&&t.x<s.right&&(h.x=t.x<n.x?Math.min(n.x,s.left):Math.max(n.x,s.right),h.y=t.y,l.x=h.x)):(h=new ft(n.x,t.y),l=new ft(n.x,(t.y+n.y)/2),(270===i||0===i&&n.x<o.left||180===i&&n.x>o.right)&&(270===i&&(s.da(t)||o.da(n))?h.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===i||0===i)?h.x=this.computeMidOrthoPosition(o.left,t.y,Math.max(n.x,s.right),n.y,!1):n.x>t.x&&(270===i||180===i)&&(h.x=this.computeMidOrthoPosition(o.right,t.y,Math.min(n.x,s.left),n.y,!1)),l.x=h.x,l.y=n.y),h.x>o.left&&h.x<o.right&&(n.y>=o.top&&n.y<=t.y||t.y<=s.bottom&&t.y>=n.y?0!==i&&180!==i||(h=new ft(t.x,Math.max((t.y+n.y)/2,t.y)),l=new ft(n.x,h.y)):(h.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,90===i?o.left:Math.min(o.left,s.left)):Math.max(n.x,90===i?o.right:Math.max(o.right,s.right)),l.x=h.x,l.y=n.y))):n.y<t.y||180===i&&n.x<t.x&&s.top<t.y||0===i&&n.x>t.x&&s.top<t.y?(h=new ft(t.x,n.y),l=new ft((t.x+n.x)/2,n.y),90===i?(h.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),l.x=n.x,l.y=h.y):180===i&&n.x<t.x||0===i&&n.x>=t.x?(h.y=t.y>s.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,s.bottom,!0):t.y>s.top&&(180===i&&t.x<s.left||0===i&&t.x>s.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):s.top,l.x=n.x,l.y=h.y):270===i&&t.y>s.bottom&&t.x>s.left&&t.x<s.right&&(h.x=t.x<n.x?Math.min(n.x,s.left):Math.max(n.x,s.right),h.y=t.y,l.x=h.x)):(h=new ft(n.x,t.y),l=new ft(n.x,(t.y+n.y)/2),(90===i||0===i&&n.x<o.left||180===i&&n.x>o.right)&&(90===i&&(s.da(t)||o.da(n))?h.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===i||0===i)?h.x=this.computeMidOrthoPosition(o.left,t.y,Math.max(n.x,s.right),n.y,!1):n.x>t.x&&(90===i||180===i)&&(h.x=this.computeMidOrthoPosition(o.right,t.y,Math.min(n.x,s.left),n.y,!1)),l.x=h.x,l.y=n.y),h.x>o.left&&h.x<o.right&&(n.y<=o.bottom&&n.y>=t.y||t.y>=s.top&&t.y<=n.y?0!==i&&180!==i||(h=new ft(t.x,Math.min((t.y+n.y)/2,t.y)),l=new ft(n.x,h.y)):(h.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,270===i?o.left:Math.min(o.left,s.left)):Math.max(n.x,270===i?o.right:Math.max(o.right,s.right)),l.x=h.x,l.y=n.y)));var u=h,d=l,c=n;if(this.isAvoiding){var f=this.diagram;if(null===f||!kr(f)||o.da(c)&&!r.Vd(a)||s.da(t)&&!a.Vd(r)||a===r||this.layer.isTemporary)e=!1;else{var g=Lr(f,!0,this.containingGroup,null);if(g.fk(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&g.fk(Math.min(u.x,d.x),Math.min(u.y,d.y),Math.abs(u.x-d.x),Math.abs(u.y-d.y))&&g.fk(Math.min(d.x,c.x),Math.min(d.y,c.y),Math.abs(d.x-c.x),Math.abs(d.y-c.y)))e=!1;else{a=t,r=c;var p=n=null;if(f.isVirtualized){(f=g.bounds.copy()).Uc(-g.Ul,-g.Tl);var m=ft.alloc();rd(g,t.x,t.y)||(qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,t.x,t.y,u.x,u.y,m)?(n=t=m.copy(),e=m.Wa(u)):qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,u.x,u.y,d.x,d.y,m)?(n=t=m.copy(),e=m.Wa(d)):qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,d.x,d.y,c.x,c.y,m)&&(n=t=m.copy(),e=m.Wa(c))),rd(g,c.x,c.y)||(qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,c.x,c.y,d.x,d.y,m)?(p=c=m.copy(),i=d.Wa(m)):qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,d.x,d.y,u.x,u.y,m)?(p=c=m.copy(),i=u.Wa(m)):qe.Tc(f.x,f.y,f.x+f.width,f.y+f.height,u.x,u.y,t.x,t.y,m)&&(p=c=m.copy(),i=t.Wa(m))),ft.free(m)}o=o.copy().Jc(s),s=g.Sz,o.Uc(g.Ul*s,g.Tl*s),cd(g,t,e,c,i,o),s=od(g,c.x,c.y),!g.abort&&s>=pd&&(hd(g),s=g.vz,o.Uc(g.Ul*s,g.Tl*s),cd(g,t,e,c,i,o),s=od(g,c.x,c.y)),!g.abort&&s>=pd&&g.Yz&&(hd(g),cd(g,t,e,c,i,g.bounds),s=od(g,c.x,c.y)),!g.abort&&s<pd&&od(g,c.x,c.y)!==fd?(!function t(e,n,i,a,r,o){var s=n.Ul,h=n.Tl,l=od(n,i,a),u=i,d=a;for(0===r?u+=s:90===r?d+=h:180===r?u-=s:d-=h;l>gd&&od(n,u,d)===l-1;)i=u,a=d,0===r?u+=s:90===r?d+=h:180===r?u-=s:d-=h,--l;o?l>gd&&(180===r||0===r?i=Math.floor(i/s)*s+s/2:90!==r&&270!==r||(a=Math.floor(a/h)*h+h/2)):(i=Math.floor(i/s)*s+s/2,a=Math.floor(a/h)*h+h/2);l>gd&&(o=r,u=i,d=a,0===r?(o=90,d+=h):90===r?(o=180,u-=s):180===r?(o=270,d-=h):270===r&&(o=0,u+=s),od(n,u,d)===l-1?t(e,n,u,d,o,!1):(u=i,d=a,0===r?(o=270,d-=h):90===r?(o=0,u+=s):180===r?(o=90,d+=h):270===r&&(o=180,u-=s),od(n,u,d)===l-1&&t(e,n,u,d,o,!1))),e.lf(i,a)}(this,g,c.x,c.y,i,!0),o=this.i(2),4>this.pointsCount?(0===e||180===e?(o.x=t.x,o.y=c.y):(o.x=c.x,o.y=t.y),this.M(2,o.x,o.y),this.m(3,o.x,o.y)):(c=this.i(3),0===e||180===e?qe.w(o.x,c.x)?(o=0===e?Math.max(o.x,t.x):Math.min(o.x,t.x),this.M(2,o,t.y),this.M(3,o,c.y)):qe.w(o.y,c.y)?(Math.abs(t.y-o.y)<=g.Tl/2&&(this.M(2,o.x,t.y),this.M(3,c.x,t.y)),this.m(2,o.x,t.y)):this.M(2,t.x,o.y):90!==e&&270!==e||(qe.w(o.y,c.y)?(o=90===e?Math.max(o.y,t.y):Math.min(o.y,t.y),this.M(2,t.x,o),this.M(3,c.x,o)):qe.w(o.x,c.x)?(Math.abs(t.x-o.x)<=g.Ul/2&&(this.M(2,t.x,o.y),this.M(3,t.x,c.y)),this.m(2,t.x,o.y)):this.M(2,o.x,t.y))),null!==n&&(t=this.i(1),c=this.i(2),t.x!==c.x&&t.y!==c.y?0===e||180===e?this.m(2,t.x,c.y):this.m(2,c.x,t.y):0===e||180===e?this.m(2,a.x,n.y):this.m(2,n.x,a.y)),null!==p&&(0===i||180===i?this.lf(r.x,p.y):this.lf(p.x,r.y)),e=!0):e=!1}}}else e=!1;e||(this.ze(h),this.ze(l))}},wu.prototype.computeMidOrthoPosition=function(t,e,n,i,a){var r=0;return this.hasCurviness()&&(r=this.computeCurviness()),a?(e+i)/2+r:(t+n)/2+r},wu.prototype.Fy=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),a=yt(e,t,n.x,n.y,i.x,i.y),r=0,o=1;o<this.pointsCount-1;o++){n=this.i(o+1);var s=yt(e,t,i.x,i.y,n.x,n.y);i=n,s<a&&(r=o,a=s)}return r},wu.prototype.ac=function(){this.Pn=!0},wu.prototype.hk=function(t){if(!t){if(!1===this.Lc)return;if(t=this.zb(),!this.Pn&&(null===t||null!==t.geometry))return}if(this.qa=this.makeGeometry(),null!==(t=this.path)){t.qa=this.qa;for(var e=this.Y.j,n=e.length,i=0;i<n;i++){var a=e[i];a!==t&&a.isPanelMain&&a instanceof Oh&&(a.qa=this.qa)}}},wu.prototype.makeGeometry=function(){var t=this.qa,e=this.pointsCount;if(2>e)return t.type=rn,this.Pn=!1,t;var n=!1,i=this.diagram;null!==i&&Au(this)&&i.Xh.contains(this)&&(0!==this.xl.width||0!==this.xl.height)&&(n=!0);var a=this.i(0).copy(),r=a.copy();i=this.xb.j;var o=this.computeCurve();if(o===Yu&&3<=e&&!qe.ca(this.smoothness,0))if(3===e){var s=this.i(1);i=Math.min(a.x,s.x);var h=Math.min(a.y,s.y);s=this.i(2),i=Math.min(i,s.x),h=Math.min(h,s.y)}else{if(this.isOrthogonal)for(h=0;h<e;h++)s=i[h],r.x=Math.min(s.x,r.x),r.y=Math.min(s.y,r.y);else for(i=3;i<e;i+=3)i+3>=e&&(i=e-1),h=this.i(i),r.x=Math.min(h.x,r.x),r.y=Math.min(h.y,r.y);i=r.x,h=r.y}else{for(h=0;h<e;h++)s=i[h],r.x=Math.min(s.x,r.x),r.y=Math.min(s.y,r.y);i=r.x,h=r.y}if(i-=this.zu.x,h-=this.zu.y,a.x-=i,a.y-=h,2!==e||Au(this)){if(t.type=hn,s=Bl(t),0!==this.computeShortLength(!0)&&(a=Cu(this,a,!0,r)),Ml(s,a.x,a.y,!1),o===Yu&&3<=e&&!qe.ca(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-i,n=n.y-h,(a=this.i(2).copy()).x-=i,a.y-=h,0!==this.computeShortLength(!1)&&(a=Cu(this,a,!1,r)),Tl(s,e,n,e,n,a.x,a.y);else if(this.isOrthogonal){r=new ft(i,h),a=this.i(1).copy(),o=new ft(i,h),e=new ft(i,h),n=this.i(0);for(var l,u=this.smoothness/3,d=1;d<this.pointsCount-1;d++){var c=n,f=l=this.i(d),g=this.i(Fu(this,l,d,!1));if(!(qe.ca(c.x,f.x)&&qe.ca(f.x,g.x)||qe.ca(c.y,f.y)&&qe.ca(f.y,g.y))){var p=u;isNaN(p)&&(p=this.smoothness/3);var m=c.x;c=c.y;var v=f.x;f=f.y;var y=g.x;g=g.y;var w=p*Tu(m,c,v,f);p*=Tu(v,f,y,g),qe.ca(c,f)&&qe.ca(v,y)&&(v>m?g>f?(o.x=v-w,o.y=f-w,e.x=v+p,e.y=f+p):(o.x=v-w,o.y=f+w,e.x=v+p,e.y=f-p):g>f?(o.x=v+w,o.y=f-w,e.x=v-p,e.y=f+p):(o.x=v+w,o.y=f+w,e.x=v-p,e.y=f-p)),qe.ca(m,v)&&qe.ca(f,g)&&(f>c?(y>v?(o.x=v-w,o.y=f-w,e.x=v+p):(o.x=v+w,o.y=f-w,e.x=v-p),e.y=f+p):(y>v?(o.x=v-w,o.y=f+w,e.x=v+p):(o.x=v+w,o.y=f+w,e.x=v-p),e.y=f-p)),(qe.ca(m,v)&&qe.ca(v,y)||qe.ca(c,f)&&qe.ca(f,g))&&(m=.5*(m+y),c=.5*(c+g),o.x=m,o.y=c,e.x=m,e.y=c),(1===d||2===d&&qe.ca(n.x,this.i(0).x)&&qe.ca(n.y,this.i(0).y))&&(a.x=.5*(n.x+l.x),a.y=.5*(n.y+l.y)),Tl(s,a.x-i,a.y-h,o.x-i,o.y-h,l.x-i,l.y-h),r.set(o),a.set(e),n=l}}r=n.x,n=n.y,a=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(a=Cu(this,a.copy(),!1,Pt)),r=.5*(r+a.x),n=.5*(n+a.y),Tl(s,e.x-i,e.y-h,r-i,n-h,a.x-i,a.y-h)}else for(n=3;n<e;n+=3)r=this.i(n-2),n+3>=e&&(n=e-1),a=this.i(n-1),o=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(o=Cu(this,o.copy(),!1,Pt)),Tl(s,r.x-i,r.y-h,a.x-i,a.y-h,o.x-i,o.y-h);else{for((r=ft.alloc()).assign(this.i(0)),o=1,a=0;o<e;){if(o=Fu(this,r,o,1<o),u=this.i(o),o>=e-1){if(r.A(u)){if(0===a)for(o=1;o<e;)Bu(this,s,-i,-h,r,u=this.i(o++),n),r.assign(u)}else 0!==this.computeShortLength(!1)&&(u=Cu(this,u.copy(),!1,Pt)),Bu(this,s,-i,-h,r,u,n);break}a=Fu(this,u,o+1,o<e-3),o=-i,l=-h,d=this.i(a),m=n,qe.w(r.y,u.y)&&qe.w(u.x,d.x)?(c=this.computeCorner(),c=Math.min(c,Math.abs(u.x-r.x)/2),c=p=Math.min(c,Math.abs(d.y-u.y)/2),qe.w(c,0)?(Bu(this,s,o,l,r,u,m),r.assign(u)):(y=v=u.x,g=f=u.y,v=u.x>r.x?u.x-c:u.x+c,g=d.y>u.y?u.y+p:u.y-p,Bu(this,s,o,l,r,new ft(v,f),m),Cl(s,u.x+o,u.y+l,y+o,g+l),r.h(y,g))):qe.w(r.x,u.x)&&qe.w(u.y,d.y)?(c=this.computeCorner(),c=Math.min(c,Math.abs(u.y-r.y)/2),c=p=Math.min(c,Math.abs(d.x-u.x)/2),qe.w(p,0)?(Bu(this,s,o,l,r,u,m),r.assign(u)):(y=v=u.x,g=f=u.y,f=u.y>r.y?u.y-c:u.y+c,y=d.x>u.x?u.x+p:u.x-p,Bu(this,s,o,l,r,new ft(v,f),m),Cl(s,u.x+o,u.y+l,y+o,g+l),r.h(y,g))):(Bu(this,s,o,l,r,u,m),r.assign(u)),o=a}ft.free(r)}Ol=s}else(s=this.i(1).copy()).x-=i,s.y-=h,0!==this.computeShortLength(!0)&&(a=Cu(this,a,!0,r)),0!==this.computeShortLength(!1)&&(s=Cu(this,s,!1,r)),t.type=rn,t.startX=a.x,t.startY=a.y,t.endX=s.x,t.endY=s.y;return this.Pn=!1,t},wu.prototype.cq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isAnimating){var i=!1;for(n=n.layers;n.next();){var a=n.value;if(a.visible)if(a===e){i=!0;for(var r=!1,o=(a=a.Fa.j).length,s=0;s<o;s++){var h=a[s];h instanceof wu&&(h===this?r=!0:r&&Du(this,h,t))}}else if(i)for(a=(r=a.Fa.j).length,o=0;o<a;o++)(s=r[o])instanceof wu&&Du(this,s,t)}}}},wu.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),a=t.i(0);if(i.Qa(a))return!0;if(e=this.i(e-1),t=t.i(n-1),e.Qa(t)||i.Qa(t)||e.Qa(a))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},wu.prototype.isVisible=function(){if(!jl.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},wu.prototype.Lb=function(t){if(jl.prototype.Lb.call(this,t),null!==this.zf&&this.zf.cm(),null!==this.$c)for(var e=this.$c.iterator;e.next();)e.value.Lb(t)},wu.prototype.Ah=function(){return!0},c.Object.defineProperties(wu.prototype,{fromNode:{get:function(){return this.Pe},set:function(t){var e=this.Pe;if(e!==t){var n=this.fromPort;null!==e&&(this.gf!==e&&su(e,this,n),Gu(this),this.B(2)),this.Pe=t,null!==t&&this.Lb(t.isVisible()),this.If=null,this.Ra();var i=this.diagram;null!==i&&i.partManager.setFromNodeForLink(this,t,e);var a=this.fromPort,r=this.fromPortChanged;if(null!==r){var o=!0;null!==i&&(o=i.ea,i.ea=!0),r(this,n,a),null!==i&&(i.ea=o)}null!==t&&(this.gf!==t&&ou(t,this,a),zu(this),this.B(1)),this.g("fromNode",e,t),Su(this)}}},fromPortId:{get:function(){return this.Qe},set:function(t){var e=this.Qe;if(e!==t){var n=this.fromPort;null!==n&&ru(this.fromNode,n),Gu(this),this.Qe=t;var i=this.fromPort;null!==i&&ru(this.fromNode,i);var a=this.diagram;if(null!==a){var r=this.data,o=a.model;null!==r&&o.em()&&o.Ex(r,t)}n!==i&&(this.If=null,this.Ra(),null!==(r=this.fromPortChanged)&&(o=!0,null!==a&&(o=a.ea,a.ea=!0),r(this,n,i),null!==a&&(a.ea=o))),zu(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.Pe;return null===t?null:t.Ss(this.Qe)}},fromPortChanged:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.gf},set:function(t){var e=this.gf;if(e!==t){var n=this.toPort;null!==e&&(this.Pe!==e&&su(e,this,n),Gu(this),this.B(2)),this.gf=t,null!==t&&this.Lb(t.isVisible()),this.If=null,this.Ra();var i=this.diagram;null!==i&&i.partManager.setToNodeForLink(this,t,e);var a=this.toPort,r=this.toPortChanged;if(null!==r){var o=!0;null!==i&&(o=i.ea,i.ea=!0),r(this,n,a),null!==i&&(i.ea=o)}null!==t&&(this.Pe!==t&&ou(t,this,a),zu(this),this.B(1)),this.g("toNode",e,t),Su(this)}}},toPortId:{get:function(){return this.hf},set:function(t){var e=this.hf;if(e!==t){var n=this.toPort;null!==n&&ru(this.toNode,n),Gu(this),this.hf=t;var i=this.toPort;null!==i&&ru(this.toNode,i);var a=this.diagram;if(null!==a){var r=this.data,o=a.model;null!==r&&o.em()&&o.Ix(r,t)}n!==i&&(this.If=null,this.Ra(),null!==(r=this.toPortChanged)&&(o=!0,null!==a&&(o=a.ea,a.ea=!0),r(this,n,i),null!==a&&(a.ea=o))),zu(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.gf;return null===t?null:t.Ss(this.hf)}},toPortChanged:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Og:Fe},set:function(t){this.Hc();var e=this.P.Og;e.A(t)||(t=t.I(),this.P.Og=t,this.g("fromSpot",e,t),this.Ra())}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Mg:NaN},set:function(t){this.Hc();var e=this.P.Mg;e!==t&&(0>t&&P(t,">= 0",wu,"fromEndSegmentLength"),this.P.Mg=t,this.g("fromEndSegmentLength",e,t),this.Ra())}},fromShortLength:{get:function(){return null!==this.P?this.P.Ng:NaN},set:function(t){this.Hc();var e=this.P.Ng;e!==t&&(this.P.Ng=t,this.g("fromShortLength",e,t),this.Ra(),this.ac())}},toSpot:{get:function(){return null!==this.P?this.P.nh:Fe},set:function(t){this.Hc();var e=this.P.nh;e.A(t)||(t=t.I(),this.P.nh=t,this.g("toSpot",e,t),this.Ra())}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.lh:NaN},set:function(t){this.Hc();var e=this.P.lh;e!==t&&(0>t&&P(t,">= 0",wu,"toEndSegmentLength"),this.P.lh=t,this.g("toEndSegmentLength",e,t),this.Ra())}},toShortLength:{get:function(){return null!==this.P?this.P.mh:NaN},set:function(t){this.Hc();var e=this.P.mh;e!==t&&(this.P.mh=t,this.g("toShortLength",e,t),this.Ra(),this.ac())}},isLabeledLink:{get:function(){return null!==this.$c&&0<this.$c.count}},labelNodes:{get:function(){return null===this.$c?J:this.$c.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Ta)},set:function(t){var e=0!=(1&this.Ta);e!==t&&(this.Ta^=1,this.g("relinkableFrom",e,t),this.Jb())}},relinkableTo:{get:function(){return 0!=(2&this.Ta)},set:function(t){var e=0!=(2&this.Ta);e!==t&&(this.Ta^=2,this.g("relinkableTo",e,t),this.Jb())}},resegmentable:{get:function(){return 0!=(4&this.Ta)},set:function(t){var e=0!=(4&this.Ta);e!==t&&(this.Ta^=4,this.g("resegmentable",e,t),this.Jb())}},isTreeLink:{get:function(){return 0!=(8&this.Ta)},set:function(t){var e=0!=(8&this.Ta);e!==t&&(this.Ta^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&hu(this.fromNode),null!==this.toNode&&hu(this.toNode))}},path:{get:function(){var t=this.zb();return t instanceof Oh?t:null}},routeBounds:{get:function(){this.Zi();var t=this.xl,e=1/0,n=1/0,i=this.pointsCount;if(0===i)t.h(NaN,NaN,0,0);else{if(1===i)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(2===i){i=this.i(0);var a=this.i(1);e=Math.min(i.x,a.x),n=Math.min(i.y,a.y),t.h(i.x,i.y,0,0),t.Je(a)}else if(this.computeCurve()===Yu&&3<=i&&!this.isOrthogonal)if(e=(a=this.i(0)).x,n=a.y,t.h(e,n,0,0),3===i){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var r=this.i(2);e=Math.min(r.x,e),n=Math.min(r.y,n),qe.Sl(a.x,a.y,i.x,i.y,i.x,i.y,r.x,r.y,.5,t)}else for(r=3;r<i;r+=3){var o=this.i(r-2);r+3>=i&&(r=i-1);var s=this.i(r-1),h=this.i(r);qe.Sl(a.x,a.y,o.x,o.y,s.x,s.y,h.x,h.y,.5,t),e=Math.min(h.x,e),n=Math.min(h.y,n),a=h}else for(a=this.i(0),r=this.i(1),e=Math.min(a.x,r.x),n=Math.min(a.y,r.y),t.h(a.x,a.y,0,0),t.Je(r),a=2;a<i;a++)r=this.i(a),e=Math.min(r.x,e),n=Math.min(r.y,n),t.Je(r);this.zu.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.Zi(),this.computeMidPoint(new ft)}},midAngle:{get:function(){return this.Zi(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.qr){this.Lc||xu(this);for(var t=this.qr=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),a=this.i(n+1);qe.ca(i.x,a.x)?0>(i=a.y-i.y)&&(i=-i):qe.ca(i.y,a.y)?0>(i=a.x-i.x)&&(i=-i):i=Math.sqrt(i.Ce(a)),t.push(i)}}return this.qr}},flattenedTotalLength:{get:function(){var t=this.$t;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.$t=t}return t}},points:{get:function(){return this.xb},set:function(t){var e=this.xb;if(e!==t){var n=null;if(Array.isArray(t)){var i=0==t.length%2;if(i)for(var a=0;a<t.length;a++)if("number"!=typeof t[a]||isNaN(t[a])){i=!1;break}if(i)for(n=new tt,i=0;i<t.length/2;i++)a=new ft(t[2*i],t[2*i+1]).freeze(),n.add(a);else{for(i=!0,a=0;a<t.length;a++){var r=t[a];if(!k(r)||"number"!=typeof r.x||isNaN(r.x)||"number"!=typeof r.y||isNaN(r.y)){i=!1;break}}if(i)for(n=new tt,i=0;i<t.length;i++)a=t[i],n.add(new ft(a.x,a.y).freeze())}}else if(t instanceof tt)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else w("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.xb=n,this.ac(),this.s(),xu(this),null!==(t=this.diagram)&&(t.Qi||t.undoManager.isUndoingRedoing||t.ft.add(this),t.animationManager.rb&&(this.bh=n)),this.g("points",e,n)}}},pointsCount:{get:function(){return this.xb.count}},Lc:{get:function(){return 0!=(16&this.Ta)},set:function(t){0!=(16&this.Ta)!==t&&(this.Ta^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Ta)},set:function(t){0!=(32&this.Ta)!==t&&(this.Ta^=32)}},Pu:{get:function(){return 0!=(64&this.Ta)},set:function(t){0!=(64&this.Ta)!==t&&(this.Ta^=64)}},defaultFromPoint:{get:function(){return this.u},set:function(t){this.u=t.copy()}},defaultToPoint:{get:function(){return this.K},set:function(t){this.K=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Fj.value)}},isAvoiding:{get:function(){return 4==(4&this.Fj.value)}},geometry:{get:function(){return this.Pn&&(this.Zi(),this.qa=this.makeGeometry()),this.qa}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!Mu(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!Mu(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.Lm},set:function(t){var e=this.Lm;e!==t&&(this.Lm=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.fn},set:function(t){var e=this.fn;e!==t&&(this.fn=t,this.ac(),this.g("corner",e,t))}},curve:{get:function(){return this.jn},set:function(t){var e=this.jn;e!==t&&(this.jn=t,this.Ra(),this.ac(),ju(this,e===Hu||e===Xu||t===Hu||t===Xu),this.g("curve",e,t))}},curviness:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.Ra(),this.ac(),this.g("curviness",e,t))}},routing:{get:function(){return this.Fj},set:function(t){var e=this.Fj;e!==t&&(this.Fj=t,this.If=null,this.Ra(),ju(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.rp},set:function(t){var e=this.rp;e!==t&&(this.rp=t,this.ac(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.em())return t.model.ic(this.data)}}}),wu.prototype.invalidateOtherJumpOvers=wu.prototype.cq,wu.prototype.findClosestSegment=wu.prototype.Fy,wu.prototype.updateRoute=wu.prototype.Zi,wu.prototype.invalidateRoute=wu.prototype.Ra,wu.prototype.rollbackRoute=wu.prototype.zx,wu.prototype.commitRoute=wu.prototype.mf,wu.prototype.startRoute=wu.prototype.Ch,wu.prototype.clearPoints=wu.prototype.Uj,wu.prototype.removePoint=wu.prototype.Av,wu.prototype.addPointAt=wu.prototype.lf,wu.prototype.addPoint=wu.prototype.ze,wu.prototype.insertPointAt=wu.prototype.m,wu.prototype.insertPoint=wu.prototype.mz,wu.prototype.setPointAt=wu.prototype.M,wu.prototype.setPoint=wu.prototype.jd,wu.prototype.getPoint=wu.prototype.i,wu.prototype.getOtherPort=wu.prototype.bz,wu.prototype.getOtherNode=wu.prototype.Ws;var Eu=new X(wu,"Normal",1),Ru=new X(wu,"Orthogonal",2),Iu=new X(wu,"AvoidsNodes",6),_u=new X(wu,"AvoidsNodesStraight",7),Vu=new X(wu,"None",0),Yu=new X(wu,"Bezier",9),Hu=new X(wu,"JumpGap",10),Xu=new X(wu,"JumpOver",11),Uu=new X(wu,"End",17),qu=new X(wu,"Scale",18),Wu=new X(wu,"Stretch",19),Ku=new X(wu,"OrientAlong",21),Ju=new X(wu,"OrientPlus90",22),Zu=new X(wu,"OrientMinus90",23),$u=new X(wu,"OrientOpposite",24),Qu=new X(wu,"OrientUpright",25),td=new X(wu,"OrientPlus90Upright",26),ed=new X(wu,"OrientMinus90Upright",27),nd=new X(wu,"OrientUpright45",28);function id(t,e,n,i){it(this),this.ie=this.Br=!1,this.it=t,this.vx=e,this.pv=n,this.wx=i,this.links=[]}function ad(){it(this),this.Jx=this.group=null,this.$s=!0,this.abort=!1,this.Kd=this.Jd=1,this.lo=this.ko=-1,this.lc=this.kc=8,this.Bb=[[]],this.Nj=this.Mj=0,this.Yz=!1,this.Sz=22,this.vz=111}function rd(t,e,n){return t.Jd<=e&&e<=t.ko&&t.Kd<=n&&n<=t.lo}function od(t,e,n){return rd(t,e,n)?(e-=t.Jd,e/=t.kc,n-=t.Kd,n/=t.lc,t.Bb[0|e][0|n]):md}function sd(t,e,n){rd(t,e,n)&&(e-=t.Jd,e/=t.kc,n-=t.Kd,n/=t.lc,t.Bb[0|e][0|n]=fd)}function hd(t){if(null!==t.Bb)for(var e=0;e<=t.Mj;e++)for(var n=0;n<=t.Nj;n++)t.Bb[e][n]>=gd&&(t.Bb[e][n]=md)}function ld(t,e,n,i,a,r,o,s,h){if(!(e<r||e>o||n<s||n>h)){var l=0|e,u=0|n,d=t.Bb[l][u];if(d>=gd&&d<pd)for(a?u+=i:l+=i,d+=1;r<=l&&l<=o&&s<=u&&u<=h&&!(d>=t.Bb[l][u]);)t.Bb[l][u]=d,d+=1,a?u+=i:l+=i;if(l=a?u:l,a)if(0<i)for(n+=i;n<l;n+=i)ld(t,e,n,1,!a,r,o,s,h),ld(t,e,n,-1,!a,r,o,s,h);else for(n+=i;n>l;n+=i)ld(t,e,n,1,!a,r,o,s,h),ld(t,e,n,-1,!a,r,o,s,h);else if(0<i)for(e+=i;e<l;e+=i)ld(t,e,n,1,!a,r,o,s,h),ld(t,e,n,-1,!a,r,o,s,h);else for(e+=i;e>l;e+=i)ld(t,e,n,1,!a,r,o,s,h),ld(t,e,n,-1,!a,r,o,s,h)}}function ud(t,e,n,i,a,r,o,s,h){e|=0,n|=0;var l=fd,u=gd;for(t.Bb[e][n]=u;l===fd&&e>r&&e<o&&n>s&&n<h;)u+=1,t.Bb[e][n]=u,a?n+=i:e+=i,l=t.Bb[e][n]}function dd(t,e,n,i,a,r,o,s,h){e|=0,n|=0;var l=fd,u=pd;for(t.Bb[e][n]=u;l===fd&&e>r&&e<o&&n>s&&n<h;)t.Bb[e][n]=u,a?n+=i:e+=i,l=t.Bb[e][n]}function cd(t,e,n,i,a,r){if(null!==t.Bb){t.abort=!1;var o=e.x,s=e.y;if(rd(t,o,s)&&(o-=t.Jd,o/=t.kc,s-=t.Kd,s/=t.lc,rd(t,e=i.x,i=i.y)))if(e-=t.Jd,e/=t.kc,i-=t.Kd,i/=t.lc,1>=Math.abs(o-e)&&1>=Math.abs(s-i))t.abort=!0;else{var h=r.x,l=r.y,u=r.x+r.width,d=r.y+r.height;h-=t.Jd,h/=t.kc,l-=t.Kd,l/=t.lc,u-=t.Jd,u/=t.kc,d-=t.Kd,d/=t.lc,r=Math.max(0,Math.min(t.Mj,0|h)),u=Math.min(t.Mj,Math.max(0,0|u)),l=Math.max(0,Math.min(t.Nj,0|l)),d=Math.min(t.Nj,Math.max(0,0|d)),o|=0,s|=0,e|=0,i|=0,h=0===n||90===n?1:-1,n=90===n||270===n,t.Bb[o][s]===fd?(ud(t,o,s,h,n,r,u,l,d),ud(t,o,s,1,!n,r,u,l,d),ud(t,o,s,-1,!n,r,u,l,d)):ud(t,o,s,h,n,o,s,o,s),t.Bb[e][i]===fd?(dd(t,e,i,0===a||90===a?1:-1,90===a||270===a,r,u,l,d),dd(t,e,i,1,!(90===a||270===a),r,u,l,d),dd(t,e,i,-1,!(90===a||270===a),r,u,l,d)):dd(t,e,i,h,n,e,i,e,i),t.abort||(ld(t,o,s,1,!1,r,u,l,d),ld(t,o,s,-1,!1,r,u,l,d),ld(t,o,s,1,!0,r,u,l,d),ld(t,o,s,-1,!0,r,u,l,d))}}}wu.className="Link",wu.Normal=Eu,wu.Orthogonal=Ru,wu.AvoidsNodes=Iu,wu.AvoidsNodesStraight=_u,wu.None=Vu,wu.Bezier=Yu,wu.JumpGap=Hu,wu.JumpOver=Xu,wu.End=Uu,wu.Scale=qu,wu.Stretch=Wu,wu.OrientAlong=Ku,wu.OrientPlus90=Ju,wu.OrientMinus90=Zu,wu.OrientOpposite=$u,wu.OrientUpright=Qu,wu.OrientPlus90Upright=td,wu.OrientMinus90Upright=ed,wu.OrientUpright45=nd,id.prototype.cm=function(){if(!this.Br){var t=this.links;0<t.length&&(null!==(t=t[0].diagram)&&(t.yw.add(this),this.ie=t.undoManager.isUndoingRedoing))}this.Br=!0},id.prototype.Zv=function(){if(this.Br){this.Br=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.Qi&&!this.ie,this.ie=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.zf=null,t.length=0)}0===t.length&&(t=this.it,null!==this&&null!==t.Me&&t.Me.remove(this),t=this.pv,null!==this&&null!==t.Me&&t.Me.remove(this))}},id.className="LinkBundle",ad.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.Jd=Math.floor((t.x-this.kc)/this.kc)*this.kc,this.Kd=Math.floor((e-this.lc)/this.lc)*this.lc,this.ko=Math.ceil((n+2*this.kc)/this.kc)*this.kc,this.lo=Math.ceil((i+2*this.lc)/this.lc)*this.lc,t=1+(0|Math.ceil((this.ko-this.Jd)/this.kc)),e=1+(0|Math.ceil((this.lo-this.Kd)/this.lc)),null===this.Bb||this.Mj<t-1||this.Nj<e-1){for(n=[],i=0;i<=t;i++)n[i]=[];this.Bb=n,this.Mj=t-1,this.Nj=e-1}if(t=md,null!==this.Bb)for(e=0;e<=this.Mj;e++)for(n=0;n<=this.Nj;n++)this.Bb[e][n]=t}},ad.prototype.fk=function(t,e,n,i){if(t>this.ko||t+n<this.Jd||e>this.lo||e+i<this.Kd)return!0;t=(t-this.Jd)/this.kc|0,e=(e-this.Kd)/this.lc|0,n=Math.max(0,n)/this.kc+1|0;var a=Math.max(0,i)/this.lc+1|0;if(0>t&&(n+=t,t=0),0>e&&(a+=e,e=0),0>n||0>a)return!0;for(i=0|Math.min(t+n-1,this.Mj),n=0|Math.min(e+a-1,this.Nj);t<=i;t++)for(a=e;a<=n;a++)if(this.Bb[t][a]===fd)return!1;return!0},c.Object.defineProperties(ad.prototype,{bounds:{get:function(){return new Et(this.Jd,this.Kd,this.ko-this.Jd,this.lo-this.Kd)}},Ul:{get:function(){return this.kc},set:function(t){0<t&&t!==this.kc&&(this.kc=t,this.initialize(this.bounds))}},Tl:{get:function(){return this.lc},set:function(t){0<t&&t!==this.lc&&(this.lc=t,this.initialize(this.bounds))}}});var fd=0,gd=1,pd=999999,md=pd+1;function vd(){it(this),this.port=this.node=null,this.Wd=[],this.iq=!1}function yd(t,e,n,i){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return i&&15!==e&&(0>(n-=15)&&(n+=360)),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function wd(t,e){var n=t.Wd;if(0===n.length){t:if(!t.iq){n=t.iq,t.iq=!0;var i=null,a=t.node;if(null===(a=a instanceof pu?a:null)||a.isSubGraphExpanded)var r=t.node.Xu(t.port.portId);else{if(!a.actualBounds.o()){t.iq=n;break t}r=(i=a).Wu()}var o=t.Wd.length=0,s=t.port.ma(oe,ft.alloc()),h=t.port.ma(ge,ft.alloc());for((a=Et.allocAt(s.x,s.y,0,0)).Je(h),ft.free(s),ft.free(h),s=ft.allocAt(a.x+a.width/2,a.y+a.height/2),h=t.port.Li(),r=r.iterator;r.next();){var l=r.value;if(l.isVisible()&&l.fromPort!==l.toPort){var u=l.fromPort===t.port||null!==l.fromNode&&l.fromNode.Vd(i),d=l.computeSpot(u,t.port);if(d.sf()&&null!==(u=u?l.toPort:l.fromPort)){var c=u.part;if(null!==c){var f=c.findVisibleNode();null!==f&&f!==c&&(u=(c=f).port),u=l.computeOtherPoint(c,u),c=s.Wa(u),0>(c-=h)&&(c+=360),0===(d=yd(a,d,c,l.isOrthogonal))?(d=4,180<c&&(c-=360)):d=90===d?8:180===d?2:1,void 0===(f=t.Wd[o])?(f=new Sd(l,c,d),t.Wd[o]=f):(f.link=l,f.angle=c,f.yc=d),f.tv.set(u),o++}}}}for(ft.free(s),t.Wd.sort(vd.prototype.l),h=t.Wd.length,i=-1,o=s=0;o<h;o++)void 0!==(r=t.Wd[o])&&(r.yc!==i&&(i=r.yc,s=0),r.$p=s,s++);for(i=-1,s=0,o=h-1;0<=o;o--)void 0!==(h=t.Wd[o])&&(h.yc!==i&&(i=h.yc,s=h.$p+1),h.Wl=s);if(o=t.Wd,d=t.port,i=t.node.portSpreading,s=ft.alloc(),h=ft.alloc(),r=ft.alloc(),l=ft.alloc(),d.ma(oe,s),d.ma(he,h),d.ma(ge,r),d.ma(ce,l),f=c=u=d=0,i===gu)for(var g=0;g<o.length;g++){var p=o[g];if(null!==p){var m=p.link.computeThickness();switch(p.yc){case 8:c+=m;break;case 2:f+=m;break;case 1:d+=m;break;default:case 4:u+=m}}}var v=g=0,y=1,w=p=0;for(m=0;m<o.length;m++){var S=o[m];if(null!==S){if(g!==S.yc){switch(g=S.yc){case 8:var P=r;v=l;break;case 2:P=l,v=s;break;case 1:P=s,v=h;break;default:case 4:P=h,v=r}switch(p=v.x-P.x,w=v.y-P.y,g){case 8:c>Math.abs(p)?(y=Math.abs(p)/c,c=Math.abs(p)):y=1;break;case 2:f>Math.abs(w)?(y=Math.abs(w)/f,f=Math.abs(w)):y=1;break;case 1:d>Math.abs(p)?(y=Math.abs(p)/d,d=Math.abs(p)):y=1;break;default:case 4:u>Math.abs(w)?(y=Math.abs(w)/u,u=Math.abs(w)):y=1}v=0}var b=S.gq;if(i===gu){switch(S=S.link.computeThickness(),S*=y,b.set(P),g){case 8:b.x=P.x+p/2+c/2-v-S/2;break;case 2:b.y=P.y+w/2+f/2-v-S/2;break;case 1:b.x=P.x+p/2-d/2+v+S/2;break;default:case 4:b.y=P.y+w/2-u/2+v+S/2}v+=S}else{var x=.5;i===fu&&(x=(S.$p+1)/(S.Wl+1)),b.x=P.x+p*x,b.y=P.y+w*x}}}for(ft.free(s),ft.free(h),ft.free(r),ft.free(l),P=t.Wd,o=0;o<P.length;o++)null!==(i=P[o])&&(i.Uu=t.computeEndSegmentLength(i));t.iq=n,Et.free(a)}n=t.Wd}for(t=0;t<n.length;t++)if(null!==(a=n[t])&&a.link===e)return a;return null}function Sd(t,e,n){this.link=t,this.angle=e,this.yc=n,this.tv=new ft,this.Wl=this.$p=0,this.gq=new ft,this.Uu=0}function Pd(){this.nh=this.Og=Fe,this.mh=this.Ng=this.lh=this.Mg=NaN,this.Bp=this.Cn=null,this.Cp=this.Dn=1/0}function bd(){it(this),this.K=this.C=null,this.Nf=this.Rn=!0,this.Xn=!1,this.Pm=new ft(0,0).freeze(),this.Un=!0,this.Tn=null,this.sw="",this.u=null,this.Wn=!1,this.l=null}function xd(t,e,n,i,a,r,o,s){for(n=n.iterator;n.next();){var h=n.value;i&&!h.isTopLevel||null!==a&&!a(h)||!h.canLayout()||(r&&h instanceof eu?h.isLinkLabel||(h instanceof pu&&null===h.layout?xd(t,e,h.memberParts,!1,a,r,o,s):(kd(h),e.add(h))):o&&h instanceof wu?e.add(h):!s||!h.bc()||h instanceof eu||(kd(h),e.add(h)))}}function kd(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.$b()}function Ld(t){it(this),this.gc=t,this.jf=new nt,this.ee=new nt,this.jt=new ct,this.et=new ct}function Md(t,e){if(null===e)return!1;var n=t.jf.remove(e);return n&&t.jt.remove(e.node),n}function Nd(t,e){null!==e&&t.ee.remove(e)&&t.et.remove(e.link)}function Td(t,e,n){if(null!==n&&n.network!==e){Md(t,n),e.th(n);for(var i=n.sourceEdges;i.next();){var a=i.value;a.network!==e&&(Nd(t,a),e.Pj(a),Td(t,e,a.fromVertex))}for(i=n.destinationEdges;i.next();)(n=i.value).network!==e&&(Nd(t,n),e.Pj(n),Td(t,e,n.toVertex))}}function Cd(t){it(this),this.Vc=t,this.l=new Et(0,0,10,10).freeze(),this.u=new ft(5,5).freeze(),this.li=this.jb=null,this.xg=new tt,this.og=new tt}function Fd(t,e){return t=t.li,e=e.li,t?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function Bd(t){it(this),this.Vb=t,this.ig=this.Kf=this.ml=this.jb=null}function Od(){bd.call(this),this.isViewportSized=!0,this.Ip=this.Jp=NaN,this.Eg=new jt(NaN,NaN).freeze(),this.af=new jt(10,10).freeze(),this.wb=Dd,this.Ab=zd,this.Qc=Id,this.Mc=Ad}function Ad(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}ad.className="PositionArray",vd.prototype.toString=function(){for(var t=this.Wd,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];null!==i&&(e+="\n  "+i.toString())}return e},vd.prototype.cm=function(){this.Wd.length=0},vd.prototype.l=function(t,e){return t===e?0:null===t?-1:null===e?1:t.yc<e.yc?-1:t.yc>e.yc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},vd.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,re,e.fromPort===this.port),i=t.$p;if(0>i)return n;var a=t.Wl;if(1>=a||!e.isOrthogonal)return n;e=t.tv;var r=t.gq;return 2!==t.yc&&8!==t.yc||(i=a-1-i),((t=2===t.yc||4===t.yc)?e.y<r.y:e.x<r.x)?n+8*i:(t?e.y===r.y:e.x===r.x)?n:n+8*(a-1-i)},vd.className="Knot",Sd.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.yc.toString()+":"+this.$p.toString()+"/"+this.Wl.toString()+" "+this.gq.toString()+" "+this.Uu.toString()+" "+this.tv.toString()},Sd.className="LinkInfo",Pd.prototype.copy=function(){var t=new Pd;return t.Og=this.Og.I(),t.nh=this.nh.I(),t.Mg=this.Mg,t.lh=this.lh,t.Ng=this.Ng,t.mh=this.mh,t.Cn=this.Cn,t.Bp=this.Bp,t.Dn=this.Dn,t.Cp=this.Cp,t},Pd.className="LinkSettings",bd.prototype.cloneProtected=function(t){t.Rn=this.Rn,t.Nf=this.Nf,t.Xn=this.Xn,t.Pm.assign(this.Pm),t.Un=this.Un,t.Tn=this.Tn,t.sw=this.sw,t.Wn=!0},bd.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},bd.prototype.fb=function(){},bd.prototype.toString=function(){var t=B(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},bd.prototype.B=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.isAnimating&&e.vd(),this.isOngoing&&t.Qi||this.isInitial&&!t.Qi)&&(this.isValidLayout=!1,t.cc())}}},bd.prototype.createNetwork=function(){return new Ld(this)},bd.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof va?(e.ng(t.nodes,!0),e.ng(t.links,!0)):t instanceof pu?e.ng(t.memberParts):e.ng(t.iterator),e},bd.prototype.updateParts=function(){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}this.isValidLayout=!0;try{null!==t&&t.Aa("Layout"),this.commitLayout()}finally{null!==t&&t.Za("Layout")}},bd.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},bd.prototype.doLayout=function(t){var e=new nt;t instanceof va?(xd(this,e,t.nodes,!0,this.nk,!0,!1,!0),xd(this,e,t.parts,!0,this.nk,!0,!1,!0)):t instanceof pu?xd(this,e,t.memberParts,!1,this.nk,!0,!1,!0):e.addAll(t.iterator);var n=e.count;if(0<n){null!==(t=this.diagram)&&t.Aa("Layout"),n=Math.ceil(Math.sqrt(n)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var i=this.arrangementOrigin.x,a=i,r=this.arrangementOrigin.y,o=0,s=0;for(e=e.iterator;e.next();){var h=e.value;kd(h);var l=h.measuredBounds,u=l.width;l=l.height,h.moveTo(a,r),h instanceof pu&&(h.nk=!1),a+=Math.max(u,50)+20,s=Math.max(s,Math.max(l,50)),o>=n-1?(o=0,a=i,r+=s+20,s=0):o++}null!==t&&t.Za("Layout")}this.isValidLayout=!0},bd.prototype.nk=function(t){return!(t.location.o()&&!(t instanceof pu&&t.nk))},bd.prototype.Ni=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new Et),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},bd.prototype.Vw=function(t){var e=new nt;return t instanceof va?(xd(this,e,t.nodes,!0,null,!0,!0,!0),xd(this,e,t.links,!0,null,!0,!0,!0),xd(this,e,t.parts,!0,null,!0,!0,!0)):xd(this,e,t instanceof pu?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},bd.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.ma(oe),(isNaN(n.x)||isNaN(n.y))&&n.set(t),t=e.padding,n.x+=t.left,n.y+=t.top),n}return t},c.Object.defineProperties(bd.prototype,{diagram:{get:function(){return this.C},set:function(t){this.C=t}},group:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t,null!==t&&(this.C=t.diagram))}},isOngoing:{get:function(){return this.Rn},set:function(t){this.Rn!==t&&(this.Rn=t)}},isInitial:{get:function(){return this.Nf},set:function(t){this.Nf=t,t||(this.Wn=!0)}},isViewportSized:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t)&&this.B()}},isRouting:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t)}},isRealtime:{get:function(){return this.Tn},set:function(t){this.Tn!==t&&(this.Tn=t)}},isValidLayout:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t,t||null!==(t=this.diagram)&&(t.Cg=!0))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t,this.B())}},arrangementOrigin:{get:function(){return this.Pm},set:function(t){this.Pm.A(t)||(this.Pm.assign(t),this.B())}}}),bd.prototype.collectParts=bd.prototype.Vw,bd.prototype.getLayoutBounds=bd.prototype.Ni,bd.prototype.invalidateLayout=bd.prototype.B,bd.className="Layout",Ld.prototype.clear=function(){if(this.jf)for(var t=this.jf.iterator;t.next();)t.value.clear();if(this.ee)for(t=this.ee.iterator;t.next();)t.value.clear();this.jf=new nt,this.ee=new nt,this.jt=new ct,this.et=new ct},Ld.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.jf.count+" edges: "+this.ee.count,1<t){for(var n=this.jf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.ee.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},Ld.prototype.createVertex=function(){return new Cd(this)},Ld.prototype.createEdge=function(){return new Bd(this)},Ld.prototype.ng=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(t){if(t instanceof eu)return!t.isLinkLabel;if(t instanceof wu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&(null!==(t=t.toNode)&&!t.isLinkLabel)}return!1}),t=t.iterator;t.next();){var i=t.value;if(i instanceof eu&&(!e||i.isTopLevel)&&i.canLayout()&&n(i))if(i instanceof pu&&null===i.layout)this.ng(i.memberParts,!1);else if(null===this.Ki(i)){var a=this.createVertex();a.node=i,this.th(a)}}for(t.reset();t.next();)if((i=t.value)instanceof wu&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&null===this.Up(i)){var r=i.fromNode;a=i.toNode,null!==r&&null!==a&&r!==a&&(r=this.findGroupVertex(r),a=this.findGroupVertex(a),null!==r&&null!==a&&this.gk(r,a,i))}}},Ld.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.Ki(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.Ki(e)))return t;e=e.containingGroup}return null},(n=Ld.prototype).th=function(t){if(null!==t){this.jf.add(t);var e=t.node;null!==e&&this.jt.add(e,t),t.network=this}},n.Rl=function(t){if(null===t)return null;var e=this.Ki(t);return null===e&&((e=this.createVertex()).node=t,this.th(e)),e},n.Tu=function(t){if(null!==t&&Md(this,t)){for(var e=t.xg,n=e.count-1;0<=n;n--){var i=e.N(n);this.$j(i)}for(t=(e=t.og).count-1;0<=t;t--)n=e.N(t),this.$j(n)}},n.zy=function(t){null!==t&&(null!==(t=this.Ki(t))&&this.Tu(t))},n.Ki=function(t){return null===t?null:this.jt.J(t)},n.Pj=function(t){if(null!==t){this.ee.add(t);var e=t.link;null!==e&&null===this.Up(e)&&this.et.add(e,t),null!==(e=t.toVertex)&&e.Hu(t),null!==(e=t.fromVertex)&&e.Fu(t),t.network=this}},n.ey=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,i=this.Up(t);return null===i?((i=this.createEdge()).link=t,null!==e&&(i.fromVertex=this.Rl(e)),null!==n&&(i.toVertex=this.Rl(n)),this.Pj(i)):(i.fromVertex=null!==e?this.Rl(e):null,i.toVertex=null!==n?this.Rl(n):null),i},n.$j=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Su(t),null!==(e=t.fromVertex)&&e.Ru(t),Nd(this,t)}},n.yy=function(t){null!==t&&(null!==(t=this.Up(t))&&this.$j(t))},n.Up=function(t){return null===t?null:this.et.J(t)},n.gk=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.Pj(i),i}return null},n.sm=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.Ru(t),n.Su(t),t.sm(),e.Hu(t),n.Fu(t))}},n.Sp=function(){for(var t=C(),e=this.ee.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.$j(t[n]);F(t)},Ld.prototype.deleteArtificialVertexes=function(){for(var t=C(),e=this.jf.iterator;e.next();){var n=e.value;null===n.node&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.Tu(t[e]);for(e=C(),n=this.ee.iterator;n.next();){var i=n.value;null===i.link&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.$j(e[i]);F(t),F(e)},Ld.prototype.Kx=function(){this.deleteArtificialVertexes(),function(t){for(var e=C(),n=t.ee.iterator;n.next();){var i=n.value;null!==i.fromVertex&&null!==i.toVertex||e.push(i)}for(n=e.length,i=0;i<n;i++)t.$j(e[i]);F(e)}(this),this.Sp();for(var t=new tt,e=!0;e;){e=!1;for(var n=this.jf.iterator;n.next();){var i=n.value;if(0<i.xg.count||0<i.og.count){e=this.layout.createNetwork(),t.add(e),Td(this,e,i),e=!0;break}}}return t.sort((function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count})),t},Ld.prototype.Ey=function(){for(var t=new nt,e=this.jf.iterator;e.next();)t.add(e.value.node);for(e=this.ee.iterator;e.next();)t.add(e.value.link);return t},c.Object.defineProperties(Ld.prototype,{layout:{get:function(){return this.gc},set:function(t){null!==t&&(this.gc=t)}},vertexes:{get:function(){return this.jf}},edges:{get:function(){return this.ee}}}),Ld.prototype.findAllParts=Ld.prototype.Ey,Ld.prototype.splitIntoSubNetworks=Ld.prototype.Kx,Ld.prototype.deleteSelfEdges=Ld.prototype.Sp,Ld.prototype.reverseEdge=Ld.prototype.sm,Ld.prototype.linkVertexes=Ld.prototype.gk,Ld.prototype.findEdge=Ld.prototype.Up,Ld.prototype.deleteLink=Ld.prototype.yy,Ld.prototype.deleteEdge=Ld.prototype.$j,Ld.prototype.addLink=Ld.prototype.ey,Ld.prototype.addEdge=Ld.prototype.Pj,Ld.prototype.findVertex=Ld.prototype.Ki,Ld.prototype.deleteNode=Ld.prototype.zy,Ld.prototype.deleteVertex=Ld.prototype.Tu,Ld.prototype.addNode=Ld.prototype.Rl,Ld.prototype.addVertex=Ld.prototype.th,Ld.prototype.addParts=Ld.prototype.ng,Ld.className="LayoutNetwork",Cd.prototype.clear=function(){this.li=this.jb=null,this.xg=new tt,this.og=new tt},Cd.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+rt(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,i=this.xg.iterator;i.next();){var a=i.value;n?n=!1:t+=",",t+=a.toString(0)}for(a="",n=!0,i=this.og.iterator;i.next();){n?n=!1:a+=",",a+=i.value.toString(0)}e+=" sources: "+t+" destinations: "+a}return e},Cd.prototype.commit=function(){var t=this.jb;if(null!==t){var e=this.bounds,n=t.bounds;k(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof pu)){n=Et.alloc();var i=this.network.layout.Ni(t,n),a=t.locationObject.ma(ue);if(i.o()&&a.o())return t.moveTo(e.x+this.focusX-(a.x-i.x),e.y+this.focusY-(a.y-i.y)),void Et.free(n);Et.free(n)}t.moveTo(e.x,e.y)}},Cd.prototype.Hu=function(t){null!==t&&(this.xg.contains(t)||this.xg.add(t))},Cd.prototype.Su=function(t){null!==t&&this.xg.remove(t)},Cd.prototype.Fu=function(t){null!==t&&(this.og.contains(t)||this.og.add(t))},Cd.prototype.Ru=function(t){null!==t&&this.og.remove(t)},c.Object.defineProperties(Cd.prototype,{sourceEdgesArrayAccess:{get:function(){return this.xg._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.og._dataArray}},data:{get:function(){return this.jb},set:function(t){if(this.jb=t,null!==t){var e=t.bounds;t=e.x;var n=e.y,i=e.width;e=e.height,this.u.h(i/2,e/2),this.l.h(t,n,i,e)}}},node:{get:function(){return this.li},set:function(t){if(this.li!==t){this.li=t,t.$b();var e=this.network.layout,n=Et.alloc(),i=e.Ni(t,n);e=i.x;var a=i.y,r=i.width;if(i=i.height,isNaN(e)&&(e=0),isNaN(a)&&(a=0),this.l.h(e,a,r,i),Et.free(n),!(t instanceof pu)&&(t=t.locationObject.ma(ue)).o())return void this.u.h(t.x-e,t.y-a);this.u.h(r/2,i/2)}}},bounds:{get:function(){return this.l},set:function(t){this.l.A(t)||this.l.assign(t)}},focus:{get:function(){return this.u},set:function(t){this.u.A(t)||this.u.assign(t)}},centerX:{get:function(){return this.l.x+this.u.x},set:function(t){var e=this.l;e.x+this.u.x!==t&&(e.ha(),e.x=t-this.u.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.u.y},set:function(t){var e=this.l;e.y+this.u.y!==t&&(e.ha(),e.y=t-this.u.y,e.freeze())}},focusX:{get:function(){return this.u.x},set:function(t){var e=this.u;e.x!==t&&(e.ha(),e.x=t,e.freeze())}},focusY:{get:function(){return this.u.y},set:function(t){var e=this.u;e.y!==t&&(e.ha(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.ha(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.ha(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.ha(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.ha(),e.height=t,e.freeze())}},network:{get:function(){return this.Vc},set:function(t){this.Vc=t}},sourceVertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new nt,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.xg.iterator}},destinationEdges:{get:function(){return this.og.iterator}},edges:{get:function(){for(var t=new tt,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.xg.count+this.og.count}}}),Cd.prototype.deleteDestinationEdge=Cd.prototype.Ru,Cd.prototype.addDestinationEdge=Cd.prototype.Fu,Cd.prototype.deleteSourceEdge=Cd.prototype.Su,Cd.prototype.addSourceEdge=Cd.prototype.Hu,Cd.className="LayoutVertex",Cd.standardComparer=Fd,Cd.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.li;var n=e.li;if(null!==t){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var i=parseFloat(e[n]),a=parseFloat(t[n]);if(isNaN(i)){if(!isNaN(a))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(a))return-1;if(0!=i-a)return i-a}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},Bd.prototype.clear=function(){this.ig=this.Kf=this.ml=this.jb=null},Bd.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+rt(this);return 0<t&&(e+=null!==this.ml?"("+this.ml.toString()+")":"",1<t&&(e+=" "+(this.Kf?this.Kf.toString():"null")+" --\x3e "+(this.ig?this.ig.toString():"null"))),e},Bd.prototype.sm=function(){var t=this.Kf;this.Kf=this.ig,this.ig=t},Bd.prototype.commit=function(){},Bd.prototype.lx=function(t){return this.ig===t?this.Kf:this.Kf===t?this.ig:null},c.Object.defineProperties(Bd.prototype,{network:{get:function(){return this.Vb},set:function(t){this.Vb=t}},data:{get:function(){return this.jb},set:function(t){this.jb!==t&&(this.jb=t)}},link:{get:function(){return this.ml},set:function(t){this.ml!==t&&(this.ml=t)}},fromVertex:{get:function(){return this.Kf},set:function(t){this.Kf!==t&&(this.Kf=t)}},toVertex:{get:function(){return this.ig},set:function(t){this.ig!==t&&(this.ig=t)}}}),Bd.prototype.getOtherVertex=Bd.prototype.lx,Bd.className="LayoutEdge",d(Od,bd),Od.prototype.cloneProtected=function(t){bd.prototype.cloneProtected.call(this,t),t.Jp=this.Jp,t.Ip=this.Ip,t.Eg.assign(this.Eg),t.af.assign(this.af),t.wb=this.wb,t.Ab=this.Ab,t.Qc=this.Qc,t.Mc=this.Mc},Od.prototype.fb=function(t){t.classType===Od?t===Id||t===_d||t===Ed||t===Rd?this.sorting=t:t===zd||t===Gd?this.arrangement=t:t===Dd||t===jd?this.alignment=t:w("Unknown enum value: "+t):bd.prototype.fb.call(this,t)},Od.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Vw(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.Ah()||null===i.fromNode&&null===i.toNode){if(i.$b(),i instanceof pu)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var a=e.Na();if(0!==a.length){switch(this.sorting){case Rd:a.reverse();break;case Id:a.sort(this.comparer);break;case _d:a.sort(this.comparer),a.reverse()}var r=this.wrappingColumn;isNaN(r)&&(r=0);var o=this.wrappingWidth;switch(isNaN(o)&&null!==t?(e=t.padding,o=Math.max(t.viewportBounds.width-e.left-e.right,0)):o=Math.max(this.wrappingWidth,0),0>=r&&0>=o&&(r=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.Aa("Layout"),i=[],this.alignment){case jd:var s=e,h=n,l=Et.alloc(),u=Math.max(this.cellSize.width,1);if(!isFinite(u))for(var d=u=0;d<a.length;d++){var c=this.Ni(a[d],l);u=Math.max(u,c.width)}if(u=Math.max(u+s,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(c=d=0;c<a.length;c++){var f=this.Ni(a[c],l);d=Math.max(d,f.height)}d=Math.max(d+h,1),c=this.arrangement;for(var g=f=this.arrangementOrigin.x,p=this.arrangementOrigin.y,m=0,v=0,y=0;y<a.length;y++){var w=a[y],S=this.Ni(w,l),P=Math.ceil((S.width+s)/u)*u,b=Math.ceil((S.height+h)/d)*d;switch(c){case Gd:var x=Math.abs(g-S.width);break;default:x=g+S.width}switch((0<r&&m>r-1||0<o&&0<m&&x-f>o)&&(i.push(new Et(0,p,o+s,v)),m=0,g=f,p+=v,v=0),v=Math.max(v,b),c){case Gd:S=-S.width;break;default:S=0}switch(w.moveTo(g+S,p),c){case Gd:g-=P;break;default:g+=P}m++}i.push(new Et(0,p,o+s,v)),Et.free(l);break;case Dd:for(h=o,u=r,d=e,c=n,o=Et.alloc(),f=Math.max(this.cellSize.width,1),r=p=l=0,s=ft.alloc(),g=0;g<a.length;g++)v=a[g],m=this.Ni(v,o),v=v.qf(v.locationObject,v.locationSpot,s),l=Math.max(l,v.x),p=Math.max(p,m.width-v.x),r=Math.max(r,v.y);switch(g=this.arrangement){case Gd:l+=d;break;default:p+=d}f=isFinite(f)?Math.max(f+d,1):Math.max(l+p,1);var k=v=this.arrangementOrigin.x;for(y=this.arrangementOrigin.y,p=0,h>=l&&(h-=l),l=w=0,P=Math.max(this.cellSize.height,1),S=r=0,b=!0,m=ft.alloc(),x=0;x<a.length;x++){var L=a[x],M=this.Ni(L,o),N=L.qf(L.locationObject,L.locationSpot,s);if(0<p)switch(g){case Gd:k=(k-v-(M.width-N.x))/f,k=(k=qe.ca(Math.round(k),k)?Math.round(k):Math.floor(k))*f+v;break;default:k=(k-v+N.x)/f,k=(k=qe.ca(Math.round(k),k)?Math.round(k):Math.ceil(k))*f+v}else switch(g){case Gd:w=k+N.x+M.width;break;default:w=k-N.x}switch(g){case Gd:var T=-(k+N.x)+w;break;default:T=k+M.width-N.x-w}if(0<u&&p>u-1||0<h&&0<p&&T>h){for(i.push(new Et(0,b?y-r:y,h+d,S+r+c)),k=0;k<p&&x!==p;k++){var C=(T=a[x-p+k]).qf(T.locationObject,T.locationSpot,m);T.moveTo(T.position.x,T.position.y+r-C.y)}S+=c,y=b?y+S:y+(S+r),p=S=r=0,k=v,b=!1}switch(k===v&&(l=g===Gd?Math.max(l,M.width-N.x):Math.min(l,-N.x)),r=Math.max(r,N.y),S=Math.max(S,M.height-N.y),isFinite(P)&&(S=Math.max(S,Math.max(M.height,P)-N.y)),b?L.moveTo(k-N.x,y-N.y):L.moveTo(k-N.x,y),g){case Gd:k-=N.x+d;break;default:k+=M.width-N.x+d}p++}if(i.push(new Et(0,y,h+d,(b?S:S+r)+c)),a.length!==p)for(h=0;h<p;h++)d=(u=a[a.length-p+h]).qf(u.locationObject,u.locationSpot,s),u.moveTo(u.position.x,u.position.y+r-d.y);if(ft.free(s),ft.free(m),g===Gd)for(a=0;a<i.length;a++)(r=i[a]).width+=l,r.x-=l;else for(a=0;a<i.length;a++)(r=i[a]).x>l&&(r.width+=r.x-l,r.x=l);Et.free(o)}for(s=r=o=a=0;s<i.length;s++)h=i[s],a=Math.min(a,h.x),o=Math.min(o,h.y),r=Math.max(r,h.x+h.width);this.arrangement===Gd?this.commitLayers(i,new ft(a+e/2-(r+a),o-n/2)):this.commitLayers(i,new ft(a-e/2,o-n/2)),null!==t&&t.Za("Layout"),this.isValidLayout=!0}},Od.prototype.commitLayers=function(){},c.Object.defineProperties(Od.prototype,{wrappingWidth:{get:function(){return this.Jp},set:function(t){this.Jp!==t&&(0<t||isNaN(t))&&(this.Jp=t,this.isViewportSized=isNaN(t),this.B())}},wrappingColumn:{get:function(){return this.Ip},set:function(t){this.Ip!==t&&(0<t||isNaN(t))&&(this.Ip=t,this.B())}},cellSize:{get:function(){return this.Eg},set:function(t){this.Eg.A(t)||(this.Eg.assign(t),this.B())}},spacing:{get:function(){return this.af},set:function(t){this.af.A(t)||(this.af.assign(t),this.B())}},alignment:{get:function(){return this.wb},set:function(t){this.wb===t||t!==Dd&&t!==jd||(this.wb=t,this.B())}},arrangement:{get:function(){return this.Ab},set:function(t){this.Ab===t||t!==zd&&t!==Gd||(this.Ab=t,this.B())}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc===t||t!==Ed&&t!==Rd&&t!==Id&&t!==_d||(this.Qc=t,this.B())}},comparer:{get:function(){return this.Mc},set:function(t){this.Mc!==t&&(this.Mc=t,this.B())}}});var jd=new X(Od,"Position",0),Dd=new X(Od,"Location",1),zd=new X(Od,"LeftToRight",2),Gd=new X(Od,"RightToLeft",3),Ed=new X(Od,"Forward",4),Rd=new X(Od,"Reverse",5),Id=new X(Od,"Ascending",6),_d=new X(Od,"Descending",7);function Vd(){this.Eo=new nt,this.fo=new nt,this.Fa=new nt,this.Ne=new ct,this.Gg=new ct,this.pj=new ct,this.C=null,this.Cq=!1}function Yd(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ne.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.C.undoManager.isUndoingRedoing&&!t.Ne.contains(e)){var i=t.Us(e),a=Hd(t,e,i);if(null!==a&&(yh(a),null!==(a=a.copy()))){var r=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,a.Af=i,a.jb=e,t.Cq&&(a.Tg="Tool"),t.diagram.add(a),a.jb=null,a.data=e,t.diagram.skipsModelSourceBindings=r,i=a;break t}}i=null}null!==i&&n&&t.resolveReferencesForData(e)}}function Hd(t,e,n){var i=(t=t.C).model;return i.ek()&&i.lv(e)?null===(e=t.groupTemplateMap.J(n))&&(null===(e=t.groupTemplateMap.J(""))&&(Zd||(Zd=!0,b('No Group template found for category "'+n+'"'),b("  Using default group template")),e=t.pw)):null===(e=t.nodeTemplateMap.J(n))&&(null===(e=t.nodeTemplateMap.J(""))&&(Jd||(Jd=!0,b('No Node template found for category "'+n+'"'),b("  Using default node template")),e=t.rw)),e}function Xd(t,e,n){for(var i in n){var a=e[i],r=n[i];if(L(r)){if(!L(a)||a.length<r.length)return!1;for(var o=0;o<a.length;o++){var s=r[o];if(void 0!==s&&!Ud(t,a[o],s))return!1}}else if(!Ud(t,a,r))return!1}return!0}function Ud(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(k(e)&&k(n)){if(!Xd(t,e,n))return!1}else if(e!==n)return!1;return!0}function qd(t,e){var n=e.fi;if(L(n)){var i=t.pj.J(n);if(null===i)(i=[]).push(e),t.pj.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function Wd(t,e,n){dh(e,(function(t){for(var e=(t=t.Y.j).length,i=0;i<e;i++)pr(n,t[i])}));var i=e.fi;if(L(i)){var a=t.pj.J(i);if(null!==a)for(var r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1),0===a.length&&t.pj.remove(i);break}}}function Kd(t,e,n,i,a){if(null===e||a&&!e.canCopy())return null;if(i.contains(e))return i.J(e);var r=t.copyPartData(e,n);if(!(r instanceof jl))return null;if(r.isSelected=!1,r.isHighlighted=!1,i.add(e,r),e instanceof eu){for(var o=e.linksConnected;o.next();){var s=o.value;if(s.fromNode===e){var h=i.J(s);null!==h&&(h.fromNode=r)}s.toNode===e&&(null!==(s=i.J(s))&&(s.toNode=r))}if(e instanceof pu&&r instanceof pu)for(e=e.memberParts;e.next();)(o=Kd(t,e.value,n,i,a))instanceof wu||null===o||(o.containingGroup=r)}else if(e instanceof wu&&r instanceof wu)for(null!==(o=e.fromNode)&&(null!==(o=i.J(o))&&(r.fromNode=o)),null!==(o=e.toNode)&&(null!==(o=i.J(o))&&(r.toNode=o)),e=e.labelNodes;e.next();)null!==(o=Kd(t,e.value,n,i,a))&&o instanceof eu&&(o.labeledLink=r);return r}Od.className="GridLayout",Od.standardComparer=Ad,Od.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var i=parseFloat(t[n]),a=parseFloat(e[n]);if(isNaN(i)){if(!isNaN(a))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(a))return-1;if(0!=i-a)return i-a}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},Od.Position=jd,Od.Location=Dd,Od.LeftToRight=zd,Od.RightToLeft=Gd,Od.Forward=Ed,Od.Reverse=Rd,Od.Ascending=Id,Od.Descending=_d,(n=Vd.prototype).clear=function(){this.Eo.clear(),this.fo.clear(),this.Fa.clear(),this.Ne.clear(),this.Gg.clear(),this.pj.clear()},n.hb=function(t){this.C=t},n.Pi=function(t){if(t instanceof eu){if(this.Eo.add(t),t instanceof pu){var e=t.containingGroup;null===e?this.C.zi.add(t):e.rl.add(t),null!==(e=t.layout)&&(e.diagram=this.C)}}else t instanceof wu?this.fo.add(t):t instanceof tu||this.Fa.add(t);null===(e=t.data)||t instanceof tu||(t instanceof wu?this.Gg.add(e,t):this.Ne.add(e,t))},n.xc=function(t){if(t.Tj(),t instanceof eu){if(this.Eo.remove(t),t instanceof pu){var e=t.containingGroup;null===e?this.C.zi.remove(t):e.rl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof wu?this.fo.remove(t):t instanceof tu||this.Fa.remove(t);null===(e=t.data)||t instanceof tu||(t instanceof wu?this.Gg.remove(e):this.Ne.remove(e))},n.ud=function(){for(var t=this.C.nodeTemplateMap.iterator;t.next();){var e=t.value,n=t.key;(!e.bc()||e instanceof pu)&&w('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.C.groupTemplateMap.iterator;t.next();)e=t.value,n=t.key,e instanceof pu||w('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+e);for(t=this.C.linkTemplateMap.iterator;t.next();)e=t.value,n=t.key,e instanceof wu||w('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+e);for(t=C(),e=this.C.selection.iterator;e.next();)(n=e.value.data)&&t.push(n);for(e=C(),n=this.C.highlighteds.iterator;n.next();){var i=n.value.data;i&&e.push(i)}for(n=C(),i=this.nodes.iterator;i.next();){var a=i.value;null!==a.data&&(n.push(a.data),n.push(a.location))}for(i=this.links.iterator;i.next();)null!==(a=i.value).data&&(n.push(a.data),n.push(a.location));for(i=this.parts.iterator;i.next();)null!==(a=i.value).data&&(n.push(a.data),n.push(a.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<t.length;i++)null!==(a=this.vc(t[i]))&&(a.isSelected=!0);for(i=0;i<e.length;i++)null!==(a=this.vc(e[i]))&&(a.isHighlighted=!0);for(i=0;i<n.length;i+=2)null!==(a=this.vc(n[i]))&&(a.location=n[i+1]);F(t),F(e),F(n)},Vd.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Vd.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach((function(t){i.Pb(t)&&Yd(n,t,!1)})),t.forEach((function(t){i.Pb(t)&&n.resolveReferencesForData(t)})),!1!==e&&vr(this.diagram,!1)},Vd.prototype.insertLink=function(){return null},Vd.prototype.resolveReferencesForData=function(){},Vd.prototype.Us=function(t){return this.C.model.Us(t)},Vd.prototype.getLinkCategoryForData=function(){return""},Vd.prototype.setLinkCategoryForData=function(){},Vd.prototype.setFromNodeForLink=function(){},Vd.prototype.setToNodeForLink=function(){},Vd.prototype.findLinkTemplateForCategory=function(t){var e=this.C.linkTemplateMap.J(t);return null===e&&(null===(e=this.C.linkTemplateMap.J(""))&&($d||($d=!0,b('No Link template found for category "'+t+'"'),b("  Using default link template")),e=this.C.qw)),e},Vd.prototype.removeAllModeledParts=function(){this.pt(this.diagram.model.nodeDataArray)},Vd.prototype.pt=function(t){var e=this;t.forEach((function(t){e.pq(t)}))},Vd.prototype.pq=function(t){null!==(t=this.vc(t))&&(tr(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Vd.prototype.unresolveReferencesForPart=function(){},Vd.prototype.removeDataForLink=function(){},Vd.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.C.model.Qb(t))?this.Ne.J(t):null},(n=Vd.prototype).Hb=function(t){return null==t||null===(t=this.C.model.Qb(t))?null:(t=this.Ne.J(t))instanceof eu?t:null},n.vc=function(t){if(null===t)return null;var e=this.Ne.J(t);return null!==e?e:e=this.Gg.J(t)},n.Gi=function(t){return null===t?null:(t=this.Ne.J(t))instanceof eu?t:null},n.uc=function(t){return null===t?null:this.Gg.J(t)},n.Rs=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.Eo.iterator;n.next();){var i=n.value,a=i.data;if(null!==a)for(var r=0;r<arguments.length;r++){var o=arguments[r];if(k(o)&&Xd(this,a,o)){e.add(i);break}}}return e.iterator},n.Qs=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.fo.iterator;n.next();){var i=n.value,a=i.data;if(null!==a)for(var r=0;r<arguments.length;r++){var o=arguments[r];if(k(o)&&Xd(this,a,o)){e.add(i);break}}}return e.iterator},Vd.prototype.doModelChanged=function(t){if(this.C){var e=this.C;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.ea){e.ea=!1;try{var i=t.modelChange;if(""!==i)if(n===xn){if("nodeCategory"===i){var a=this.vc(t.object),r=t.newValue;null!==a&&"string"==typeof r&&(a.category=r)}else"nodeDataArray"===i&&(this.pt(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===kn){var o=t.newValue;"nodeDataArray"===i&&k(o)&&Yd(this,o),e.isModified=!0}else if(n===Ln){var s=t.oldValue;"nodeDataArray"===i&&k(s)&&this.pq(s),e.isModified=!0}else n===bn&&("SourceChanged"===i?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.wq(),this.updateAllTargetBindings()):"ModelDisplaced"===i&&this.ud());else if(n===xn){var h=t.propertyName,l=t.object;l===e.model?"nodeKeyProperty"!==h&&"nodeCategoryProperty"!==h||e.undoManager.isUndoingRedoing||this.ud():this.updateDataBindings(l,h),e.isModified=!0}else if(n===kn||n===Ln){var u=t.change===kn,d=u?t.newParam:t.oldParam,c=u?t.newValue:t.oldValue,f=this.pj.J(t.object);if(Array.isArray(f))for(t=0;t<f.length;t++){var g=f[t];if(u)Sh(g,c,d);else if(!(0>d)){var p=d+wh(g);g.xc(p,!0),Ph(g,p,d)}}e.isModified=!0}}finally{e.ea=!0}}}}},Vd.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ea(t);for(e=this.nodes.iterator;e.next();)e.value.Ea(t);for(e=this.links.iterator;e.next();)e.value.Ea(t)},Vd.prototype.wq=function(){for(var t=this.C.model,e=new nt,n=t.nodeDataArray,i=0;i<n.length;i++)e.add(n[i]);var a=[];for(this.nodes.each((function(t){null===t.data||e.contains(t.data)||a.push(t.data)})),this.parts.each((function(t){null===t.data||e.contains(t.data)||a.push(t.data)})),a.forEach((function(e){yc(t,e,!1)})),i=0;i<n.length;i++){var r=n[i];null===this.vc(r)&&vc(t,r,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},Vd.prototype.refreshDataBoundLinks=function(){},Vd.prototype.updateRelationshipsFromData=function(){},Vd.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.vc(t);if(null!==n)n.Ea(e);else{n=null;for(var i=this.pj.iterator;i.next();){for(var a=i.value,r=0;r<a.length;r++){var o=a[r].gx(t);null!==o&&(null===n&&(n=C()),n.push(o))}if(null!==n)break}if(null!==n){for(i=0;i<n.length;i++)n[i].Ea(e);F(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Vd.prototype.Yj=function(t,e,n){var i=new ct;if(L(t))for(var a=0;a<t.length;a++)Kd(this,t[a],e,i,n);else for(t=t.iterator;t.next();)Kd(this,t.value,e,i,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.Mk.dragsLink,a=new nt;for(var r=new ct,o=i.iterator;o.next();){var s=o.value;if(s instanceof wu)t||null!==s.fromNode&&null!==s.toNode||a.add(s);else if(s instanceof eu&&null!==s.data&&n.fm()){var h=s,l=(s=o.key).rg();null!==l&&(null!==(l=i.J(l))?(n.Ie(h.data,n.pa(l.data)),h=e.uc(h.data),null!==(s=s.Ji())&&null!==h&&r.add(s,h)):n.Ie(h.data,void 0))}}if(0<a.count&&e.qt(a,!1),0<r.count)for(n=r.iterator;n.next();)i.add(n.key,n.value)}if(null!==e&&null!==this.C&&null!==(n=(e=e.model).afterCopyFunction)){var u=new ct;i.each((function(t){null!==t.key.data&&u.add(t.key.data,t.value.data)})),n(u,e,this.C.model)}for(e=i.iterator;e.next();)e.value.Ea();return i},Vd.prototype.copyPartData=function(t,e){var n=null,i=t.data;if(null!==i&&null!==e){var a=e.model;t instanceof wu||k(i=a.copyNodeData(i))&&(a.kf(i),n=e.vc(i))}else yh(t),null!==(n=t.copy())&&(a=this.C,null!==e?e.add(n):null!==i&&null!==a&&null!==a.commandHandler&&a.commandHandler.copiesClipboardData&&(e=a.model,a=null,n instanceof wu||(a=e.copyNodeData(i)),k(a)&&(n.data=a)));return n},c.Object.defineProperties(Vd.prototype,{nodes:{get:function(){return this.Eo}},links:{get:function(){return this.fo}},parts:{get:function(){return this.Fa}},diagram:{get:function(){return this.C}},addsToTemporaryLayer:{get:function(){return this.Cq},set:function(t){this.Cq=t}}}),Vd.prototype.updateAllRelationshipsFromData=Vd.prototype.wq,Vd.prototype.findLinksByExample=Vd.prototype.Qs,Vd.prototype.findNodesByExample=Vd.prototype.Rs,Vd.prototype.findLinkForData=Vd.prototype.uc,Vd.prototype.findNodeForData=Vd.prototype.Gi,Vd.prototype.findPartForData=Vd.prototype.vc,Vd.prototype.findNodeForKey=Vd.prototype.Hb,Vd.prototype.removeModeledPart=Vd.prototype.pq,Vd.prototype.removeModeledParts=Vd.prototype.pt,Vd.prototype.rebuildParts=Vd.prototype.ud;var Jd=!1,Zd=!1,$d=!1;function Qd(t){Vd.apply(this,arguments)}function tc(t,e){e.forEach((function(e){ec(t,e)})),vr(t.diagram,!1)}function ec(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Gg.contains(e)){var n=t.getLinkCategoryForData(e),i=t.findLinkTemplateForCategory(n);if(null!==i){yh(i);var a=i.copy();if(null!==a){i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,a.Af=n,a.jb=e;var r=zc(n=t.diagram.model,e,!0);""!==r&&(a.fromPortId=r),void 0!==(r=jc(n,e,!0))&&((r=t.Hb(r))instanceof eu&&(a.fromNode=r)),""!==(r=zc(n,e,!1))&&(a.toPortId=r),void 0!==(r=jc(n,e,!1))&&((r=t.Hb(r))instanceof eu&&(a.toNode=r)),n=n.sg(e),Array.isArray(n)&&n.forEach((function(e){null!==(e=t.Hb(e))&&(e.labeledLink=a)})),t.Cq&&(a.Tg="Tool"),t.diagram.add(a),a.jb=null,a.data=e,t.diagram.skipsModelSourceBindings=i}}}}function nc(t,e){e.forEach((function(e){t.pq(e)}))}function ic(){Vd.apply(this,arguments),this.ah=null}function ac(t,e,n){if(null!==e&&null!==n){var i=t.diagram.toolManager.findTool("Linking"),a=e,r=n;if(t.diagram.isTreePathToChildren){for(e=r.linksConnected;e.next();)if(e.value.toNode===r)return}else for(r=e,e=(a=n).linksConnected;e.next();)if(e.value.fromNode===a)return;if((null===i||!li(i,a,r,null,!0))&&(i=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(i))&&(yh(e),null!==(e=e.copy())))){var o=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Af=i,e.jb=n.data,e.fromNode=a,e.toNode=r,t.diagram.add(e),e.jb=null,e.data=n.data,t.diagram.skipsModelSourceBindings=o}}}function rc(t){this.Dt=',\n  "insertedNodeKeys": ',this.fw=',\n  "modifiedNodeData": ',this.Ft=',\n  "removedNodeKeys": ',it(this),this.ln=this.Ua="",this.Of=!1,this.l={},this.Fc=[],this.cb=new ct,this.mi="key",this.Jk=this.ol=null,this.an=this.bn=!1,this.dn=!0,this.Mm=null,this.xj="category",this.Gf=new ct,this.fu=new tt,this.eh=!1,this.u=null,this.undoManager=new Nn,void 0!==t&&(this.nodeDataArray=t)}function oc(t){return',\n  "modelData": '+fc(t,t.modelData)}function sc(t,e){k(e=e.modelData)&&(t.pm(e),t.modelData=e)}function hc(t,e,n,i){if(e===n)return!0;if(typeof e!=typeof n||"function"==typeof e||"function"==typeof n)return!1;if(Array.isArray(e)&&Array.isArray(n)){if(i.J(e)===n)return!0;if(i.add(e,n),e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(!hc(t,e[a],n[a],i))return!1;return!0}if(k(e)&&k(n)){if(i.J(e)===n)return!0;for(var r in i.add(e,n),e){var o=e[r];if(!dc(r,o)){var s=n[r];if(void 0===s||!hc(t,o,s,i))return!1}}for(a in n)if(!dc(a,r=n[a])&&(void 0===(o=e[a])||!hc(t,o,r,i)))return!1;return!0}return!1}function lc(t,e,n){t[n]!==e[n]&&w("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+e[n]+'"')}function uc(t,e,n){void 0===n&&(n=!1);var i=e.length;if(0>=i)return"[]";var a=new q;a.add("[ "),n&&1<i&&a.add("\n");for(var r=0;r<i;r++){var o=e[r];void 0!==o&&(0<r&&(a.add(","),n&&a.add("\n")),a.add(t.zm(o)))}return n&&1<i&&a.add("\n"),a.add(" ]"),a.toString()}function dc(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function cc(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function fc(t,e){var n=e;if(n instanceof ft)e={class:"go.Point",x:cc(n.x),y:cc(n.y)};else if(n instanceof jt)e={class:"go.Size",width:cc(n.width),height:cc(n.height)};else if(n instanceof Et)e={class:"go.Rect",x:cc(n.x),y:cc(n.y),width:cc(n.width),height:cc(n.height)};else if(n instanceof $t)e={class:"go.Margin",top:cc(n.top),right:cc(n.right),bottom:cc(n.bottom),left:cc(n.left)};else if(n instanceof Ve)e=n.gb()?{class:"go.Spot",x:cc(n.x),y:cc(n.y),offsetX:cc(n.offsetX),offsetY:cc(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof ms){if(e={class:"go.Brush",type:n.type.name},n.type===Cs?e.color=n.color:n.type!==Fs&&n.type!==Bs||(e.start=n.start,e.end=n.end,n.type===Bs&&(0!==n.startRadius&&(e.startRadius=cc(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=cc(n.endRadius)))),null!==n.colorStops){var i={};for(n=n.colorStops.iterator;n.next();)i[n.key]=n.value;e.colorStops=i}}else n instanceof We?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=cc(n.startX)),0!==n.startY&&(e.startY=cc(n.startY)),0!==n.endX&&(e.endX=cc(n.endX)),0!==n.endY&&(e.endY=cc(n.endY)),n.spot1.A(oe)||(e.spot1=n.spot1),n.spot2.A(ge)||(e.spot2=n.spot2),n.type===hn&&(e.path=Je(n))):n instanceof X&&(e={class:"go.EnumValue",classType:kc(t,n.classType),name:n.name});for(var a in i="{",n=!0,e){var r=Lc(e,a);if(!dc(a,r))if(n?n=!1:i+=", ",i+='"'+a+'":',"points"===a&&r instanceof tt){var o="[";for(r=r.iterator;r.next();){var s=r.value;1<o.length&&(o+=","),o+=t.zm(s.x),o+=",",o+=t.zm(s.y)}i+=o+="]"}else i+=t.zm(r)}return i+"}"}function gc(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function pc(t,e,n,i,a,r,o,s,h){void 0===s&&(s=null),void 0===h&&(h=null);var l=new Pn;l.model=t,l.change=n,l.modelChange=e,l.propertyName=i,l.object=a,l.oldValue=r,l.oldParam=s,l.newValue=o,l.newParam=h,t.Ks(l)}function mc(t){return"number"==typeof t||"string"==typeof t}function vc(t,e,n){var i=t.pa(e);void 0!==i&&t.cb.J(i)===e||(t.gt(e),void 0===(i=t.pa(e))?w("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.cb.add(i,e),i=null,n&&(i=t.Fc.length,N(t.Fc,i,e)),pc(t,"nodeDataArray",kn,"nodeDataArray",t,null,e,null,i),t.rm(e),t.qm(e)))}function yc(t,e,n){var i=t.pa(e);if(void 0!==i&&t.cb.remove(i),i=null,n){t:if(n=t.Fc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var a=0;a<i;a++)if(n[a]===e){i=a;break t}i=-1}if(0>i)return;T(t.Fc,i)}pc(t,"nodeDataArray",Ln,"nodeDataArray",t,e,null,i,null),t.vq(e)}function wc(t,e,n){if(void 0!==e){var i=t.Gf.J(e);null===i&&(i=new nt,t.Gf.add(e,i)),i.add(n)}}function Sc(t,e,n){if(void 0!==e){var i=t.Gf.J(e);i instanceof nt&&(null==n?t.Gf.remove(e):(i.remove(n),0===i.count&&t.Gf.remove(e)))}}function Pc(t,e){return void 0===e?null:(t=t.Gf.J(e))instanceof nt?t:null}function bc(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var a=bc(t,e[n],t.copiesArrayObjects);i.push(a)}return it(i),i}if(n&&k(e)){for(i in n=(n=e.constructor)?new n:{},a=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===i)n.__gohashid=void 0;else if(i===a)n[a]=void 0;else{var r=Lc(e,i),o=kc(t,r);"GraphObject"===o||"Diagram"===o||"Layer"===o||"RowColumnDefinition"===o||"AnimationManager"===o||"Tool"===o||"CommandHandler"===o||"Layout"===o||"InputEvent"===o||"DiagramEvent"===o||r instanceof rc||r instanceof Nn||r instanceof Mn||r instanceof Pn||(r=bc(t,r,!1)),Mc(n,i,r)}return it(n),n}return e instanceof ft||e instanceof jt||e instanceof Et||e instanceof Ve||e instanceof $t?e.copy():e}function xc(){return new rc}function kc(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return kc(t,e.constructor);return typeof e}function Lc(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(t){}return n}function Mc(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(t){}}Vd.className="PartManager",d(Qd,Vd),Qd.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),tc(this,t.linkDataArray)},Qd.prototype.addModeledParts=function(t){for(Vd.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)Su(t.value);vr(this.diagram,!1)},Qd.prototype.removeAllModeledParts=function(){var t=this.diagram.model;nc(this,t.linkDataArray),this.pt(t.nodeDataArray)},Qd.prototype.getLinkCategoryForData=function(t){return this.diagram.model.bv(t)},Qd.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.st(t,e)},Qd.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Cx(t.data,n.pa(null!==e?e.data:null))},Qd.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Hx(t.data,n.pa(null!==e?e.data:null))},Qd.prototype.removeDataForLink=function(t){this.diagram.model.nm(t.data)},Qd.prototype.findPartForKey=function(t){var e=Vd.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.xh(t))?this.Gg.J(t):e},Qd.prototype.doModelChanged=function(t){var e=this;if(Vd.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.ea){n.ea=!1;try{var a=t.modelChange;if(""!==a){if(i===xn){if("linkFromKey"===a){var r=this.uc(t.object);if(null!==r){var o=this.Hb(t.newValue);r.fromNode=o}}else if("linkToKey"===a){var s=this.uc(t.object);if(null!==s){var h=this.Hb(t.newValue);s.toNode=h}}else if("linkFromPortId"===a){var l=this.uc(t.object);if(null!==l){var u=t.newValue;"string"==typeof u&&(l.fromPortId=u)}}else if("linkToPortId"===a){var d=this.uc(t.object);if(null!==d){var c=t.newValue;"string"==typeof c&&(d.toPortId=c)}}else if("nodeGroupKey"===a){var f=this.vc(t.object);if(null!==f){var g=t.newValue;if(void 0!==g){var p=this.Hb(g);f.containingGroup=p instanceof pu?p:null}else f.containingGroup=null}}else if("linkLabelKeys"===a){var m=this.uc(t.object);if(null!==m){var v=t.oldValue,y=t.newValue;Array.isArray(v)&&v.forEach((function(t){null!==(t=e.Hb(t))&&(t.labeledLink=null)})),Array.isArray(y)&&y.forEach((function(t){null!==(t=e.Hb(t))&&(t.labeledLink=m)}))}}else if("linkCategory"===a){var w=this.uc(t.object),S=t.newValue;null!==w&&"string"==typeof S&&(w.category=S)}else"linkDataArray"===a&&(nc(this,t.oldValue),tc(this,t.newValue));n.isModified=!0}else if(i===kn){var P=t.newValue;if("linkDataArray"===a&&"object"==typeof P&&null!==P)ec(this,P);else if("linkLabelKeys"===a&&mc(P)){var b=this.uc(t.object),x=this.Hb(P);null!==b&&null!==x&&(x.labeledLink=b)}n.isModified=!0}else if(i===Ln){var k=t.oldValue;if("linkDataArray"===a&&"object"==typeof k&&null!==k)this.pq(k);else if("linkLabelKeys"===a&&mc(k)){var L=this.Hb(k);null!==L&&(L.labeledLink=null)}n.isModified=!0}}else if(i===xn){var M=t.propertyName,N=t.object;N===n.model?"linkFromKeyProperty"!==M&&"linkToKeyProperty"!==M&&"linkFromPortIdProperty"!==M&&"linkToPortIdProperty"!==M&&"linkLabelKeysProperty"!==M&&"nodeIsGroupProperty"!==M&&"nodeGroupKeyProperty"!==M&&"linkCategoryProperty"!==M||n.undoManager.isUndoingRedoing||this.ud():this.updateDataBindings(N,M),n.isModified=!0}}finally{n.ea=!0}}}}},Qd.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new nt,i=e.linkDataArray;i.forEach((function(t){n.add(t)}));var a=[];this.links.each((function(t){null===t.data||n.contains(t.data)||a.push(t.data)})),a.forEach((function(t){Rc(e,t,!1)})),i.forEach((function(n){null===t.uc(n)&&Ec(e,n,!1)}))},Qd.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;if(t instanceof wu){var a=jc(i,e,!0);if(a=n.Hb(a),t.fromNode=a,a=jc(i,e,!1),a=n.Hb(a),t.toNode=a,0<(e=i.sg(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){a=e[0];var r=t.labelNodes.first();if(i.pa(r.data)===a)return}a=(new nt).addAll(e);var o=new nt;t.labelNodes.each((function(t){null!==t.data&&(void 0!==(t=i.pa(t.data))&&o.add(t))})),(e=o.copy()).oq(a),(a=a.copy()).oq(o),(0<e.count||0<a.count)&&(e.each((function(e){null!==(e=n.Hb(e))&&e.labeledLink===t&&(e.labeledLink=null)})),a.each((function(e){null!==(e=n.Hb(e))&&e.labeledLink!==t&&(e.labeledLink=t)})))}}else!(t instanceof tu)&&(e=i.Mi(e),null===(e=n.findPartForKey(e))||e instanceof pu)&&(t.containingGroup=e)}}},Qd.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var i=Pc(e,n),a=this.vc(t);if(null!==i&&null!==a){i=i.iterator;for(var r={};i.next();){var o=i.value;e.Pb(o)?a instanceof pu&&e.Mi(o)===n&&(null!==(o=this.vc(o))&&(o.containingGroup=a)):(r.link=this.uc(o),null!==r.link&&a instanceof eu&&(jc(e,o,!0)===n&&(r.link.fromNode=a),jc(e,o,!1)===n&&(r.link.toNode=a),o=e.sg(o),Array.isArray(o)&&o.some(function(t){return function(e){return e===n&&(a.labeledLink=t.link,!0)}}(r)))),r={link:r.link}}Sc(e,n)}void 0!==(t=e.Mi(t))&&((t=this.Hb(t))instanceof pu&&(a.containingGroup=t))}},Qd.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof eu){var n=e.pa(t.data);if(void 0!==n){for(var i=t.linksConnected;i.next();)wc(e,n,i.value.data);if(t.isLinkLabel&&(null!==(i=t.labeledLink)&&wc(e,n,i.data)),t instanceof pu)for(t=t.memberParts;t.next();)i=t.value.data,e.Pb(i)&&wc(e,n,i)}}},Qd.prototype.copyPartData=function(t,e){var n=Vd.prototype.copyPartData.call(this,t,e);if(t instanceof wu)if(null!==(t=t.data)&&null!==e){var i=e.model;"object"==typeof(t=i.Rp(t))&&null!==t&&(i.Ci(t),n=e.uc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&("object"==typeof(e=e.model.Rp(t))&&null!==e&&(n.data=e)));return n},Qd.prototype.insertLink=function(t,e,n,i){var a=this.diagram,r=a.model,o=a.toolManager.findTool("Linking"),s="";if(null!==t&&(null===e&&(e=t),null===(s=e.portId)&&(s="")),e="",null!==n&&(null===i&&(i=n),null===(e=i.portId)&&(e="")),(i=o.archetypeLinkData)instanceof wu){if(yh(i),null!==(r=i.copy()))return r.fromNode=t,r.fromPortId=s,r.toNode=n,r.toPortId=e,a.add(r),(t=o.archetypeLabelNodeData)instanceof eu&&(yh(t),null!==(t=t.copy())&&(t.labeledLink=r,a.add(t))),r}else if(null!==i&&("object"==typeof(i=r.Rp(i))&&null!==i))return null!==t&&Dc(r,i,r.pa(t.data),!0),Gc(r,i,s,!0),null!==n&&Dc(r,i,r.pa(n.data),!1),Gc(r,i,e,!1),r.Ci(i),null===(t=o.archetypeLabelNodeData)||t instanceof eu||"object"==typeof(t=r.copyNodeData(t))&&null!==t&&(r.kf(t),void 0!==(t=r.pa(t))&&r.Gu(i,t)),a.uc(i);return null},Qd.prototype.findPartForKey=Qd.prototype.findPartForKey,Qd.prototype.removeAllModeledParts=Qd.prototype.removeAllModeledParts,Qd.prototype.addModeledParts=Qd.prototype.addModeledParts,Qd.prototype.addAllModeledParts=Qd.prototype.addAllModeledParts,Qd.className="GraphLinksPartManager",d(ic,Vd),ic.prototype.getLinkCategoryForData=function(t){return this.diagram.model.cv(t)},ic.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Jv(t,e)},ic.prototype.setFromNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)i.Ie(t.data,i.pa(e));else{var a=this.ah;this.ah=t,null!==n&&i.Ie(n.data,void 0),i.Ie(e,i.pa(null!==t.toNode?t.toNode.data:null)),this.ah=a}},ic.prototype.setToNodeForLink=function(t,e,n){var i=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var a=this.ah;this.ah=t,null!==n&&i.Ie(n.data,void 0),i.Ie(e,i.pa(null!==t.fromNode?t.fromNode.data:null)),this.ah=a}else i.Ie(t.data,i.pa(e))},ic.prototype.removeDataForLink=function(t){this.diagram.model.Ie(t.data,void 0)},ic.prototype.doModelChanged=function(t){if(Vd.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.ea){e.ea=!1;try{var i=t.modelChange;if(""!==i){if(n===xn){if("nodeParentKey"===i){var a=t.object,r=this.Hb(t.newValue),o=this.Gi(a);if(null!==this.ah)null!==r&&(this.ah.data=a,this.ah.category=this.getLinkCategoryForData(a));else if(null!==o){var s=o.Ji();null!==s?null===r?e.remove(s):e.isTreePathToChildren?s.fromNode=r:s.toNode=r:ac(this,r,o)}}else if("parentLinkCategory"===i){var h=this.Gi(t.object),l=t.newValue;if(null!==h&&"string"==typeof l){var u=h.Ji();null!==u&&(u.category=l)}}e.isModified=!0}}else if(n===xn){var d=t.propertyName,c=t.object;c===e.model?"nodeParentKeyProperty"===d&&(e.undoManager.isUndoingRedoing||this.ud()):this.updateDataBindings(c,d),e.isModified=!0}}finally{e.ea=!0}}}}},ic.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var i=n.model;t instanceof eu&&(e=i.Oi(e),(e=n.Hb(e))!==(i=t.rg())&&(i=t.Ji(),null!==e?null!==i?n.isTreePathToChildren?i.fromNode=e:i.toNode=e:ac(this,e,t):null!==i&&tr(n,i,!1)))}}},ic.prototype.updateDataBindings=function(t,e){Vd.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.vc(t)&&(null!==(t=this.uc(t))&&t.Ea(e))},ic.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var i=Pc(e,n),a=this.vc(t);if(null!==i&&null!==a){for(i=i.iterator;i.next();){var r=i.value;e.Pb(r)&&a instanceof eu&&e.Oi(r)===n&&ac(this,a,this.Gi(r))}Sc(e,n)}void 0!==(t=e.Oi(t))&&a instanceof eu&&ac(this,t=this.Hb(t),a)}},ic.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof eu){var n=e.pa(t.data),i=this.uc(t.data);if(null!==i){i.isSelected=!1,i.isHighlighted=!1;var a=i.layer;if(null!==a){var r=a.xc(-1,i,!1);0<=r&&this.diagram.ab(Ln,"parts",a,i,null,r,null),null!==(r=i.layerChanged)&&r(i,a,null)}}for(i=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)a=t.value,a=(i?a.toNode:a.fromNode).data,e.Pb(a)&&wc(e,n,a)}},ic.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,a=n;return this.diagram.isTreePathToChildren||(i=n,a=t),null!==i&&null!==a?(e.Ie(a.data,e.pa(i.data)),a.Ji()):null},ic.className="TreePartManager",rc.prototype.cloneProtected=function(t){t.Ua=this.Ua,t.ln=this.ln,t.Of=this.Of,t.mi=this.mi,t.ol=this.ol,t.Jk=this.Jk,t.bn=this.bn,t.an=this.an,t.dn=this.dn,t.Mm=this.Mm,t.xj=this.xj},rc.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},(n=rc.prototype).clear=function(){this.Fc=[],this.cb.clear(),this.Gf.clear(),this.undoManager.clear()},n.toString=function(t){if(void 0===t&&(t=0),1<t)return this.uq();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var a=t[i];e+=" "+this.pa(a)+":"+O(a)}}return e},n.uk=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},n.nq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},n.aw=function(){var t,e=this.modelData,n=!1;for(t in e)if(!dc(t,e[t])){n=!0;break}return e="",n&&(e=oc(this)),e+',\n  "nodeDataArray": '+uc(this,this.nodeDataArray,!0)},n.xv=function(t){sc(this,t),L(t=t.nodeDataArray)&&(this.pm(t),this.nodeDataArray=t)},n.yq=function(t){lc(this,t,"nodeKeyProperty");for(var e=new nt,n=new nt,i=(new nt).addAll(this.cb.iteratorKeys),a=new ct,r=t.nodeDataArray,o=r.length,s=0;s<o;s++){var h=r[s],l=t.pa(h);if(void 0!==l){i.remove(l);var u=this.Qb(l);null===u?(e.add(l),n.add(h)):hc(this,u,h,a)||n.add(h)}else this.gt(h),l=this.pa(h),e.add(l),n.add(h)}return r="",hc(this,this.modelData,t.modelData,a)||(r+=oc(this)),0<e.count&&(r+=this.Dt+uc(this,e.Na(),!0)),0<n.count&&(r+=this.fw+uc(this,n.Na(),!0)),0<i.count&&(r+=this.Ft+uc(this,i.Na(),!0)),r},n.qy=function(t,e){return void 0===e&&(e=kc(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.uk()+this.yq(t)+"}"},n.yt=function(t,e){var n=this,i=!1,a=new nt,r=new nt,o=new nt;t.changes.each((function(t){t.model===n&&("nodeDataArray"===t.modelChange?t.change===kn?a.add(t.newValue):t.change===Ln&&o.add(t.oldValue):n.Pb(t.object)?r.add(t.object):n.modelData===t.object&&t.change===xn&&(i=!0))}));var s=new nt;a.each((function(t){s.add(n.pa(t)),e||r.add(t)}));var h=new nt;return o.each((function(t){h.add(n.pa(t)),e&&r.add(t)})),t="",i&&(t+=oc(this)),0<s.count&&(t+=(e?this.Ft:this.Dt)+uc(this,s.Na(),!0)),0<r.count&&(t+=this.fw+uc(this,r.Na(),!0)),0<h.count&&(t+=(e?this.Dt:this.Ft)+uc(this,h.Na(),!0)),t},n.wv=function(t){sc(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new ct;if(Array.isArray(n))for(var a=0;a<n.length;a++){var r=n[a],o=this.pa(r);null!=o&&i.set(o,r)}if(Array.isArray(e))for(a=e.length,r=0;r<a;r++){o=e[r];var s=this.Qb(o);null===s&&(s=(s=i.get(o))?s:this.copyNodeData({}),this.vm(s,o),this.kf(s))}if(Array.isArray(n))for(e=n.length,i=0;i<e;i++)if(a=n[i],r=this.pa(a),null!==(r=this.Qb(r)))for(var h in a)"__gohashid"===h||h===this.nodeKeyProperty||this.dk()&&h===this.nodeIsGroupProperty||this.setDataProperty(r,h,a[h]);if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,h=0;h<n;h++)null!==(e=this.Qb(t[h]))&&this.om(e)},n.Lx=function(t,e){t.change!==bn&&w("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Mn?(void 0===e&&(e=kc(this,this)),"2"===e?'{ "incremental": 2'+this.yt(n,"FinishedUndo"===t.propertyName)+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.uk()+this.yt(n,"FinishedUndo"===t.propertyName)+"}"):'{ "incremental": 0 }'},n.Wz=function(t,e){return this.Lx(t,e)},n.uq=function(t){return void 0===t&&(t=kc(this,this)),'{ "class": '+this.quote(t)+this.uk()+this.aw()+"}"},n.toJSON=function(t){return this.uq(t)},n.Tw=function(t){var e=null;if("string"==typeof t)try{e=g.JSON.parse(t)}catch(t){}else"object"==typeof t?e=t:w("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&w("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.Aa("applyIncrementalJson"),this.wv(e),this.Za("applyIncrementalJson"))},n.ky=function(t){return this.Tw(t)},rc.constructGraphLinksModel=function(){return new rc},(n=rc.prototype).pm=function(t){if(L(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];if(k(i)){var a=n;i=this.pm(i),Array.isArray(t)?t[a]=i:w("Cannot replace an object in an HTMLCollection or NodeList at "+a)}}else if(k(t)){for(n in t)if(k(a=t[n])&&(a=this.pm(a),t[n]=a,"points"===n&&Array.isArray(a))){i=0==a.length%2;for(var r=0;r<a.length;r++)if("number"!=typeof a[r]){i=!1;break}if(i){for(i=new tt,r=0;r<a.length/2;r++)i.add(new ft(a[2*r],a[2*r+1]));i.freeze(),t[n]=i}}if("object"==typeof t){if(n=t,"NaN"===(a=t.class))n=NaN;else if("Date"===a)n=new Date(t.value);else if("go.Point"===a)n=new ft(gc(t.x),gc(t.y));else if("go.Size"===a)n=new jt(gc(t.width),gc(t.height));else if("go.Rect"===a)n=new Et(gc(t.x),gc(t.y),gc(t.width),gc(t.height));else if("go.Margin"===a)n=new $t(gc(t.top),gc(t.right),gc(t.bottom),gc(t.left));else if("go.Spot"===a)n="string"==typeof t.enum?He(t.enum):new Ve(gc(t.x),gc(t.y),gc(t.offsetX),gc(t.offsetY));else if("go.Brush"===a){if((n=new ms).type=U(ms,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof Ve&&(n.start=t.start),t.end instanceof Ve&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=gc(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=gc(t.endRadius)),k(t=t.colorStops))for(e in t)n.addColorStop(parseFloat(e),t[e])}else"go.Geometry"===a?(e=null,(e="string"==typeof t.path?Ze(t.path):new We).type=U(We,t.type),"number"==typeof t.startX&&(e.startX=gc(t.startX)),"number"==typeof t.startY&&(e.startY=gc(t.startY)),"number"==typeof t.endX&&(e.endX=gc(t.endX)),"number"==typeof t.endY&&(e.endY=gc(t.endY)),t.spot1 instanceof Ve&&(e.spot1=t.spot1),t.spot2 instanceof Ve&&(e.spot2=t.spot2),n=e):"go.EnumValue"===a&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),n=U(Tc[e]?Tc[e]:null,t.name));t=n}}return t},n.quote=function(t){for(var e="",n=t.length,i=0;i<n;i++){var a=t[i];if('"'===a||"\\"===a)e+="\\"+a;else if("\b"===a)e+="\\b";else if("\f"===a)e+="\\f";else if("\n"===a)e+="\\n";else if("\r"===a)e+="\\r";else if("\t"===a)e+="\\t";else{var r=t.charCodeAt(i);e=16>r?e+"\\u000"+t.charCodeAt(i).toString(16):32>r?e+"\\u00"+t.charCodeAt(i).toString(16):8232===r?e+"\\u2028":8233===r?e+"\\u2029":e+a}}return'"'+e+'"'},n.zm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.zm(t.valueOf()):L(t)?uc(this,t):k(t)?fc(this,t):"function"==typeof t?"null":t.toString()},n.rh=function(t){this.fu.add(t)},n.qk=function(t){this.fu.remove(t)},n.Ks=function(t){this.skipsUndoManager||this.undoManager.gv(t);for(var e=this.fu,n=e.length,i=0;i<n;i++)e.N(i)(t)},n.ab=function(t,e,n,i,a,r,o){pc(this,"",t,e,n,i,a,r,o)},n.g=function(t,e,n,i,a){pc(this,"",xn,t,this,e,n,i,a)},n.lt=function(t,e,n,i,a,r){pc(this,"",xn,e,t,n,i,a,r)},n.Sj=function(t,e){if(null!==t&&t.model===this)if(t.change===xn)Mc(t.object,t.propertyName,t.J(e));else if(t.change===kn){var n=t.newParam;if("nodeDataArray"===t.modelChange){if(k(t=t.newValue)&&"number"==typeof n){var i=this.pa(t);e?(this.Fc[n]===t&&T(this.Fc,n),void 0!==i&&this.cb.remove(i)):(this.Fc[n]!==t&&N(this.Fc,n,t),void 0!==i&&this.cb.add(i,t))}}else""===t.modelChange?((i=t.object)&&!L(i)&&t.propertyName&&(i=Lc(t.object,t.propertyName)),L(i)&&"number"==typeof n&&(t=t.newValue,e?T(i,n):N(i,n,t))):w("unknown ChangedEvent.Insert modelChange: "+t.toString())}else t.change===Ln?(n=t.oldParam,"nodeDataArray"===t.modelChange?k(t=t.oldValue)&&"number"==typeof n&&(i=this.pa(t),e?(this.Fc[n]!==t&&N(this.Fc,n,t),void 0!==i&&this.cb.add(i,t)):(this.Fc[n]===t&&T(this.Fc,n),void 0!==i&&this.cb.remove(i))):""===t.modelChange?((i=t.object)&&!L(i)&&t.propertyName&&(i=Lc(t.object,t.propertyName)),L(i)&&"number"==typeof n&&(t=t.oldValue,e?N(i,n,t):T(i,n))):w("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==bn&&w("unknown ChangedEvent: "+t.toString())},n.Aa=function(t){return this.undoManager.Aa(t)},n.Za=function(t){return this.undoManager.Za(t)},n.wf=function(){return this.undoManager.wf()},rc.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.Aa(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Za(e):this.undoManager.wf(),this.skipsUndoManager=n}},(n=rc.prototype).Ea=function(t,e){void 0===e&&(e=""),pc(this,"SourceChanged",bn,e,t,null,null)},n.pa=function(t){if(null!==t){var e=this.mi;if(""!==e&&void 0!==(e=Lc(t,e))){if(mc(e))return e;w("Key value for node data "+t+" is not a number or a string: "+e)}}},n.vm=function(t,e){if(null!==t){var n=this.mi;if(""!==n)if(this.Pb(t)){var i=Lc(t,n);i!==e&&null===this.Qb(e)&&(Mc(t,n,e),void 0!==i&&this.cb.remove(i),this.cb.add(e,t),pc(this,"nodeKey",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n),this.qq(i,e))}else Mc(t,n,e)}},n.Pb=function(t){var e=this.pa(t);return void 0!==e&&this.cb.J(e)===t},n.Qb=function(t){return null===t&&w("Model.findNodeDataForKey:key must not be null"),void 0!==t&&mc(t)?this.cb.J(t):null},n.gt=function(t){if(null!==t){var e=this.mi;if(""!==e){var n=this.pa(t);if(void 0===n||this.cb.contains(n)){var i=this.ol;if(null!==i&&(null!=(n=i(this,t))&&!this.cb.contains(n)))return void Mc(t,e,n);if("string"==typeof n){for(i=2;this.cb.contains(n+i);)i++;Mc(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.cb.count-1;this.cb.contains(n);)n--;Mc(t,e,n)}}}}},n.kf=function(t){null!==t&&(at(t),this.Pb(t)||vc(this,t,!0))},n.hy=function(t){if(L(t))for(var e=t.length,n=0;n<e;n++)this.kf(t[n]);else for(t=t.iterator;t.next();)this.kf(t.value)},n.om=function(t){null!==t&&yc(this,t,!0)},n.Nz=function(t){if(L(t))for(var e=t.length,n=0;n<e;n++)this.om(t[n]);else for(t=t.iterator;t.next();)this.om(t.value)},n.Cz=function(t){if(L(t)){for(var e=new nt(this.cb.iteratorKeys),n=new nt,i=t.length,a=0;a<i;a++){var r=t[a],o=this.pa(r);if(void 0!==o){n.add(o);var s=this.Qb(o);null!==s?this.Rj(s,r):(s={},this.vm(s,o),this.Rj(s,r),this.kf(s))}else this.kf(r),n.add(this.pa(r))}for(t=e.iterator;t.next();)e=t.value,n.contains(e)||(e=this.Qb(e))&&this.om(e)}},n.qq=function(t,e){void 0!==e&&((t=Pc(this,t))instanceof nt&&this.Gf.add(e,t))},n.Xv=function(){},n.rm=function(){},n.qm=function(){},n.vq=function(){},n.Mu=function(t){void 0===t?this.Gf.clear():this.Gf.remove(t)},rc.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Jk;return k(t=null!==e?e(t,this):bc(this,t,!0))&&it(t),t},rc.prototype.setDataProperty=function(t,e,n){if(this.Pb(t)){if(e===this.nodeKeyProperty)this.vm(t,n);else if(e===this.nodeCategoryProperty)return void this.sq(t,n)}else!Nc&&t instanceof Mo&&(Nc=!0,b('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),b("  Is that really your intent?"));var i=Lc(t,e);i!==n&&(Mc(t,e,n),this.lt(t,e,i,n))},(n=rc.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},n.Rj=function(t,e){if(e){var n,i=this.Pb(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},n.ay=function(t,e){this.Xs(t,-1,e)},n.Xs=function(t,e,n){0>e&&(e=t.length),N(t,e,n),pc(this,"",kn,"",t,null,n,null,e)},n.yv=function(t,e){void 0===e&&(e=-1),t===this.Fc&&w("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];T(t,e),pc(this,"",Ln,"",t,n,null,e,null)},n.Us=function(t){if(null===t)return"";var e=this.xj;return""===e||void 0===(e=Lc(t,e))?"":"string"==typeof e?e:(w("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},n.sq=function(t,e){if(null!==t){var n=this.xj;if(""!==n)if(this.Pb(t)){var i=Lc(t,n);void 0===i&&(i=""),i!==e&&(Mc(t,n,e),pc(this,"nodeCategory",xn,n,t,i,e))}else Mc(t,n,e)}},n.fm=function(){return!1},n.dk=function(){return!1},n.em=function(){return!1},n.ct=function(){return!1},n.ek=function(){return!1},c.Object.defineProperties(rc.prototype,{name:{get:function(){return this.Ua},set:function(t){var e=this.Ua;e!==t&&(this.Ua=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.ln},set:function(t){var e=this.ln;e!==t&&(this.ln=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ea(t))}},undoManager:{get:function(){return this.u},set:function(t){var e=this.u;e!==t&&(null!==e&&e.yx(this),this.u=t,null!==t&&t.Rw(this))}},skipsUndoManager:{get:function(){return this.eh},set:function(t){this.eh=t}},nodeKeyProperty:{get:function(){return this.mi},set:function(t){var e=this.mi;e!==t&&(""===t&&w("Model.nodeKeyProperty may not be the empty string"),0<this.cb.count&&w("Cannot set Model.nodeKeyProperty when there is existing node data"),this.mi=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.ol},set:function(t){var e=this.ol;e!==t&&(this.ol=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Fc},set:function(t){var e=this.Fc;if(e!==t){this.cb.clear(),this.Xv();for(var n=t.length,i=0;i<n;i++){var a=t[i];if(!k(a))return void w("Model.nodeDataArray must only contain Objects, not: "+a);at(a)}for(this.Fc=t,i=new tt,a=0;a<n;a++){var r=t[a],o=this.pa(r);void 0===o||null!==this.cb.J(o)?i.add(r):this.cb.add(o,r)}for(i=i.iterator;i.next();)a=i.value,this.gt(a),void 0!==(r=this.pa(a))&&this.cb.add(r,a);for(pc(this,"nodeDataArray",xn,"nodeDataArray",this,e,t),e=0;e<n;e++)i=t[e],this.rm(i),this.qm(i);this.Mu(),Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Jk},set:function(t){var e=this.Jk;e!==t&&(this.Jk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.an},set:function(t){var e=this.an;e!==t&&(this.an=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.dn},set:function(t){var e=this.dn;e!==t&&(this.dn=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Mm},set:function(t){var e=this.Mm;e!==t&&(this.Mm=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.xj},set:function(t){var e=this.xj;e!==t&&(this.xj=t,this.g("nodeCategoryProperty",e,t))}}}),c.Object.defineProperties(rc,{type:{get:function(){return"Model"}}}),rc.prototype.setCategoryForNodeData=rc.prototype.sq,rc.prototype.getCategoryForNodeData=rc.prototype.Us,rc.prototype.removeArrayItem=rc.prototype.yv,rc.prototype.insertArrayItem=rc.prototype.Xs,rc.prototype.addArrayItem=rc.prototype.ay,rc.prototype.assignAllDataProperties=rc.prototype.Rj,rc.prototype.set=rc.prototype.set,rc.prototype.clearUnresolvedReferences=rc.prototype.Mu,rc.prototype.mergeNodeDataArray=rc.prototype.Cz,rc.prototype.removeNodeDataCollection=rc.prototype.Nz,rc.prototype.removeNodeData=rc.prototype.om,rc.prototype.addNodeDataCollection=rc.prototype.hy,rc.prototype.addNodeData=rc.prototype.kf,rc.prototype.makeNodeDataKeyUnique=rc.prototype.gt,rc.prototype.findNodeDataForKey=rc.prototype.Qb,rc.prototype.containsNodeData=rc.prototype.Pb,rc.prototype.setKeyForNodeData=rc.prototype.vm,rc.prototype.getKeyForNodeData=rc.prototype.pa,rc.prototype.updateTargetBindings=rc.prototype.Ea,rc.prototype.commit=rc.prototype.commit,rc.prototype.rollbackTransaction=rc.prototype.wf,rc.prototype.commitTransaction=rc.prototype.Za,rc.prototype.startTransaction=rc.prototype.Aa,rc.prototype.raiseDataChanged=rc.prototype.lt,rc.prototype.raiseChanged=rc.prototype.g,rc.prototype.raiseChangedEvent=rc.prototype.ab,rc.prototype.removeChangedListener=rc.prototype.qk,rc.prototype.addChangedListener=rc.prototype.rh,rc.prototype.writeJsonValue=rc.prototype.zm,rc.prototype.replaceJsonObjects=rc.prototype.pm,rc.prototype.applyIncrementalJSON=rc.prototype.ky,rc.prototype.applyIncrementalJson=rc.prototype.Tw,rc.prototype.toJSON=rc.prototype.toJSON,rc.prototype.toJson=rc.prototype.uq,rc.prototype.toIncrementalJSON=rc.prototype.Wz,rc.prototype.toIncrementalJson=rc.prototype.Lx,rc.prototype.computeJsonDifference=rc.prototype.qy,rc.prototype.clear=rc.prototype.clear;var Nc=!1,Tc={};function Cc(t,e,n){it(this),this.v=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.l=-1,this.Qd=null,this.Ol=t,this.Nl=this.yp=0,this.ws=null,this.Vn=!1,this.El=e,this.$m=n,this.ro=Bc,this.Um=null,this.Yt=new nt}function Fc(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.$a(t)}rc.className="Model",rc.fromJSON=rc.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=g.JSON.parse(t)}catch(t){}else"object"==typeof t?n=t:w("Unable to construct a Model from: "+t);if(null===e){t=null;var i=n.class;if("string"==typeof i)try{var a=null;0===i.indexOf("go.")?(i=i.substr(3),a=Tc[i]?Tc[i]:null):void 0===(a=Tc[i]?Tc[i]:null)&&(a=g[i]),"function"==typeof a&&(t=new a)}catch(t){}null===t||t instanceof rc?e=t:w("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=rc.constructGraphLinksModel()),e.nq(n),e.xv(n),e},rc.safePropertyValue=Lc,rc.safePropertySet=Mc,Tc.Brush=ms,Tc.ChangedEvent=Pn,Tc.Geometry=We,Tc.GraphObject=Mo,Tc.Margin=$t,Tc.Panel=ah,Tc.Point=ft,Tc.Rect=Et,Tc.Size=jt,Tc.Spot=Ve,Tc.Transaction=Mn,Tc.UndoManager=Nn,Cc.prototype.copy=function(){var t=new Cc;return t.Ol=this.Ol,t.yp=this.yp,t.Nl=this.Nl,t.ws=this.ws,t.Vn=this.Vn,t.El=this.El,t.$m=this.$m,t.ro=this.ro,t.Um=this.Um,t},(n=Cc.prototype).fb=function(t){t.classType===Cc&&(this.mode=t)},n.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.Yi?" "+this.Yi:"")+" "+this.mode.name+")"},n.freeze=function(){return this.v=!0,this},n.ha=function(){return this.v=!1,this},n.qx=function(t){return void 0===t&&(t=null),this.mode=Oc,this.backConverter=t,this},n.kq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},n.Ez=function(){return this.sourceName=null,this.isToModel=!0,this},n.Yv=function(t,e,n){var i=this.El;if(void 0===n||""===i||i===n){n=this.Ol;var a=this.$m;if(null===a&&""===n)b("Binding error: target property is the empty string: "+this.toString());else{var r=e;if(""!==i&&(r=Lc(e,i)),void 0!==r)if(null===a)""!==n&&Mc(t,n,r);else try{if(""!==n)Mc(t,n,a(r,t));else a(r,t)}catch(t){}}}},n.xq=function(t,e,n,i){if(this.ro===Oc){var a=this.Ol;if(void 0===n||a===n){n=this.El;var r=this.Um,o=t;if(""!==a&&(o=Lc(t,a)),void 0!==o&&!this.Yt.contains(t))try{this.Yt.add(t);var s=null!==i?i.diagram:null,h=null!==s?s.model:null;if(null===r){if(""!==n)null!==h?h.setDataProperty(e,n,o):Mc(e,n,o);else if(null!==h&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var l=i.itemIndex,u=i.panel.itemArray;h.yv(u,l),h.Xs(u,l,o)}}else try{if(""!==n){var d=r(o,e,h);null!==h?h.setDataProperty(e,n,d):Mc(e,n,d)}else{var c=r(o,e,h);if(void 0!==c&&null!==h&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)){var f=i.itemIndex,g=i.panel.itemArray;h.yv(g,f),h.Xs(g,f,c)}}}catch(t){}}finally{this.Yt.remove(t)}}}},c.Object.defineProperties(Cc.prototype,{Yi:{get:function(){return this.l},set:function(t){this.v&&S(this),this.l=t}},targetProperty:{get:function(){return this.Ol},set:function(t){this.v&&S(this),this.Ol=t}},sourceName:{get:function(){return this.ws},set:function(t){this.v&&S(this),this.ws=t,null!==t&&(this.Vn=!1)}},isToModel:{get:function(){return this.Vn},set:function(t){this.v&&S(this),this.Vn=t}},sourceProperty:{get:function(){return this.El},set:function(t){this.v&&S(this),this.El=t}},converter:{get:function(){return this.$m},set:function(t){this.v&&S(this),this.$m=t}},backConverter:{get:function(){return this.Um},set:function(t){this.v&&S(this),this.Um=t}},mode:{get:function(){return this.ro},set:function(t){this.v&&S(this),this.ro=t}}}),Cc.prototype.updateSource=Cc.prototype.xq,Cc.prototype.updateTarget=Cc.prototype.Yv,Cc.prototype.ofModel=Cc.prototype.Ez,Cc.prototype.ofObject=Cc.prototype.kq,Cc.prototype.makeTwoWay=Cc.prototype.qx;var Bc=new X(Cc,"OneWay",1),Oc=new X(Cc,"TwoWay",2);function Ac(t,e){rc.call(this),this.Ct=',\n  "insertedLinkKeys": ',this.ew=',\n  "modifiedLinkData": ',this.Et=',\n  "removedLinkKeys": ',this.Oc=[],this.Pf=new nt,this.qb=new ct,this.ii="",this.aj=this.Ik=this.pl=null,this.Ve="from",this.We="to",this.uj=this.tj="",this.sj="category",this.Hd="",this.tl="isGroup",this.se="group",this.cn=!1,void 0!==t&&(this.nodeDataArray=t),void 0!==e&&(this.linkDataArray=e)}function jc(t,e,n){if(null!==e&&(""!==(t=n?t.Ve:t.We)&&void 0!==(t=Lc(e,t)))){if(mc(t))return t;w((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function Dc(t,e,n,i){if(null===n&&(n=void 0),null!==e){var a=i?t.Ve:t.We;if(""!==a)if(n=t.gm(n),t.Be(e)){var r=Lc(e,a);r!==n&&(Sc(t,r,e),Mc(e,a,n),null===t.Qb(n)&&wc(t,n,e),pc(t,i?"linkFromKey":"linkToKey",xn,a,e,r,n),"string"==typeof a&&t.Ea(e,a))}else Mc(e,a,n)}}function zc(t,e,n){return null===e||""===(t=n?t.tj:t.uj)||void 0===(e=Lc(e,t))?"":e}function Gc(t,e,n,i){if(null!==e){var a=i?t.tj:t.uj;if(""!==a)if(t.Be(e)){var r=Lc(e,a);void 0===r&&(r=""),r!==n&&(Mc(e,a,n),pc(t,i?"linkFromPortId":"linkToPortId",xn,a,e,r,n),"string"==typeof a&&t.Ea(e,a))}else Mc(e,a,n)}}function Ec(t,e,n){if(""!==t.linkKeyProperty){var i=t.ic(e);if(void 0!==i&&t.qb.J(i)===e)return;if(t.hq(e),void 0===(i=t.ic(e)))return void w("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.qb.add(i,e)}t.Pf.add(e),i=null,n&&(i=t.Oc.length,t.Oc.splice(i,0,e)),pc(t,"linkDataArray",kn,"linkDataArray",t,null,e,null,i),Ic(t,e)}function Rc(t,e,n){t.Pf.remove(e);var i=t.ic(e);if(void 0!==i&&t.qb.remove(i),i=null,n){if(0>(i=t.Oc.indexOf(e)))return;t.Oc.splice(i,1)}if(pc(t,"linkDataArray",Ln,"linkDataArray",t,e,null,i,null),Sc(t,n=jc(t,e,!0),e),Sc(t,n=jc(t,e,!1),e),i=t.sg(e),Array.isArray(i))for(var a=i.length,r=0;r<a;r++)Sc(t,n=i[r],e)}function Ic(t,e){var n=jc(t,e,!0);n=t.gm(n),null===t.Qb(n)&&wc(t,n,e),n=jc(t,e,!1),n=t.gm(n),null===t.Qb(n)&&wc(t,n,e);var i=t.sg(e);if(Array.isArray(i))for(var a=i.length,r=0;r<a;r++)n=i[r],null===t.Qb(n)&&wc(t,n,e)}Cc.className="Binding",Cc.parseEnum=function(t,e){return function(n){return null===(n=U(t,n))?e:n}},Cc.toString=O,Cc.OneWay=Bc,Cc.TwoWay=Oc,d(Ac,rc),Ac.constructGraphLinksModel=rc.constructGraphLinksModel,Ac.prototype.cloneProtected=function(t){rc.prototype.cloneProtected.call(this,t),t.ii=this.ii,t.pl=this.pl,t.Ik=this.Ik,t.Ve=this.Ve,t.We=this.We,t.tj=this.tj,t.uj=this.uj,t.sj=this.sj,t.Hd=this.Hd,t.tl=this.tl,t.se=this.se,t.cn=this.cn},(n=Ac.prototype).clear=function(){rc.prototype.clear.call(this),this.Oc=[],this.qb.clear(),this.Pf.clear()},n.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.uq();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var n,i=(t=this.nodeDataArray).length;for(n=0;n<i;n++){var a=t[n];e+=" "+this.pa(a)+":"+O(a)}for(e+="\n link data:",i=(t=this.linkDataArray).length,n=0;n<i;n++)e+=" "+jc(this,a=t[n],!0)+"--\x3e"+jc(this,a,!1)}return e},n.uk=function(){var t=rc.prototype.uk.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},n.nq=function(t){rc.prototype.nq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},n.aw=function(){return rc.prototype.aw.call(this)+(',\n  "linkDataArray": '+uc(this,this.linkDataArray,!0))},n.xv=function(t){rc.prototype.xv.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.pm(t),this.linkDataArray=t)},n.yq=function(t){if(!(t instanceof Ac))return w("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";var e=rc.prototype.yq.call(this,t);lc(this,t,"linkKeyProperty"),lc(this,t,"linkFromKeyProperty"),lc(this,t,"linkToKeyProperty"),lc(this,t,"linkLabelKeysProperty"),lc(this,t,"nodeIsGroupProperty"),lc(this,t,"nodeGroupKeyProperty");for(var n=new nt,i=new nt,a=(new nt).addAll(this.qb.iteratorKeys),r=new ct,o=t.linkDataArray,s=o.length,h=0;h<s;h++){var l=o[h],u=t.ic(l);if(void 0!==u){a.remove(u);var d=this.xh(u);null===d?(n.add(u),i.add(l)):hc(this,d,l,r)||i.add(l)}else this.hq(l),u=this.ic(l),n.add(u),i.add(l)}return t=e,0<n.count&&(t+=this.Ct+uc(this,n.Na(),!0)),0<i.count&&(t+=this.ew+uc(this,i.Na(),!0)),0<a.count&&(t+=this.Et+uc(this,a.Na(),!0)),t},n.yt=function(t,e){var n=rc.prototype.yt.call(this,t,e),i=this,a=new nt,r=new nt,o=new nt;t.changes.each((function(t){t.model===i&&("linkDataArray"===t.modelChange?t.change===kn?a.add(t.newValue):t.change===Ln&&o.add(t.oldValue):i.Be(t.object)&&r.add(t.object))}));var s=new nt;a.each((function(t){s.add(i.ic(t)),e||r.add(t)}));var h=new nt;return o.each((function(t){h.add(i.ic(t)),e&&r.add(t)})),t=n,0<s.count&&(t+=(e?this.Et:this.Ct)+uc(this,s.Na(),!0)),0<r.count&&(t+=this.ew+uc(this,r.Na(),!0)),0<h.count&&(t+=(e?this.Ct:this.Et)+uc(this,h.Na(),!0)),t},n.wv=function(t){rc.prototype.wv.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var a=e[i],r=this.xh(a);null===r&&(r=this.Rp({}),this.ut(r,a),this.Ci(r))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,i=0;i<n;i++)if(a=e[i],r=this.ic(a),null!==(r=this.xh(r)))for(var o in a)"__gohashid"!==o&&o!==this.linkKeyProperty&&this.setDataProperty(r,o,a[o]);if(t=t.removedLinkKeys,Array.isArray(t))for(o=t.length,e=0;e<o;e++)null!==(n=this.xh(t[e]))&&this.nm(n)},n.Sj=function(t,e){if(t.change===kn){var n=t.newParam;if("linkDataArray"===t.modelChange){if(k(t=t.newValue)&&"number"==typeof n){var i=this.ic(t);e?(this.Pf.remove(t),this.Oc[n]===t&&this.Oc.splice(n,1),void 0!==i&&this.qb.remove(i)):(this.Pf.add(t),this.Oc[n]!==t&&this.Oc.splice(n,0,t),void 0!==i&&this.qb.add(i,t))}return}if("linkLabelKeys"===t.modelChange)return i=this.sg(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1)):0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue)))}else if(t.change===Ln){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(k(t=t.oldValue)&&"number"==typeof n&&(i=this.ic(t),e?(this.Pf.add(t),this.Oc[n]!==t&&this.Oc.splice(n,0,t),void 0!==i&&this.qb.add(i,t)):(this.Pf.remove(t),this.Oc[n]===t&&this.Oc.splice(n,1),void 0!==i&&this.qb.remove(i))));if("linkLabelKeys"===t.modelChange)return i=this.sg(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?0>i.indexOf(t.newValue)&&i.splice(n,0,t.newValue):(n=i.indexOf(t.newValue),0<=n&&i.splice(n,1))))}rc.prototype.Sj.call(this,t,e)},n.gm=function(t){if(void 0!==t){var e=this.aj;if(null!==e){var n=this.Qb(t);null===n&&(Mc(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.kf(n))}return t}},n.Zy=function(t){return jc(this,t,!0)},n.Cx=function(t,e){Dc(this,t,e,!0)},n.dz=function(t){return jc(this,t,!1)},n.Hx=function(t,e){Dc(this,t,e,!1)},n.$y=function(t){return zc(this,t,!0)},n.Ex=function(t,e){Gc(this,t,e,!0)},n.ez=function(t){return zc(this,t,!1)},n.Ix=function(t,e){Gc(this,t,e,!1)},n.sg=function(t){if(null===t)return _c;var e=this.Hd;return""===e||void 0===(t=Lc(t,e))?_c:t},n.Iv=function(t,e){if(null!==t){var n=this.Hd;if(""!==n)if(this.Be(t)){var i=Lc(t,n);if(void 0===i&&(i=_c),i!==e){if(Array.isArray(i))for(var a=i.length,r=0;r<a;r++)Sc(this,i[r],t);for(Mc(t,n,e),a=e.length,r=0;r<a;r++){var o=e[r];null===this.Qb(o)&&wc(this,o,t)}pc(this,"linkLabelKeys",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n)}}else Mc(t,n,e)}},n.Gu=function(t,e){if(null!=e&&null!==t){var n=this.Hd;if(""!==n){var i=Lc(t,n);if(void 0===i)(n=[]).push(e),this.Iv(t,n);else if(Array.isArray(i)){var a=i.indexOf(e);0<=a||(a=i.length,i.push(e),this.Be(t)&&(null===this.Qb(e)&&wc(this,e,t),pc(this,"linkLabelKeys",kn,n,t,null,e,null,a)))}else w(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},n.xx=function(t,e){if(null!=e&&null!==t){var n=this.Hd;if(""!==n){var i=Lc(t,n);if(Array.isArray(i)){var a=i.indexOf(e);0>a||(i.splice(a,1),this.Be(t)&&(Sc(this,e,t),pc(this,"linkLabelKeys",Ln,n,t,e,null,a,null)))}else void 0!==i&&w(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},n.ic=function(t){if(null!==t){var e=this.ii;if(""!==e&&void 0!==(e=Lc(t,e))){if(mc(e))return e;w("Key value for link data "+t+" is not a number or a string: "+e)}}},n.ut=function(t,e){if(null!==t){var n=this.ii;if(""!==n)if(this.Be(t)){var i=Lc(t,n);i!==e&&null===this.xh(e)&&(Mc(t,n,e),void 0!==i&&this.qb.remove(i),this.qb.add(e,t),pc(this,"linkKey",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n))}else Mc(t,n,e)}},n.xh=function(t){return null===t&&w("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&mc(t)?this.qb.J(t):null},n.hq=function(t){if(null!==t){var e=this.ii;if(""!==e){var n=this.ic(t);if(void 0===n||this.qb.contains(n)){var i=this.pl;if(null!==i&&(null!=(n=i(this,t))&&!this.qb.contains(n)))return void Mc(t,e,n);if("string"==typeof n){for(i=2;this.qb.contains(n+i);)i++;Mc(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.qb.count-1;this.qb.contains(n);)n--;Mc(t,e,n)}}}}},n.Be=function(t){return null!==t&&this.Pf.contains(t)},n.Ci=function(t){null!==t&&(at(t),this.Be(t)||Ec(this,t,!0))},n.gy=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Ci(t[n]);else for(t=t.iterator;t.next();)this.Ci(t.value)},n.nm=function(t){null!==t&&Rc(this,t,!0)},n.Lz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.nm(t[n]);else for(t=t.iterator;t.next();)this.nm(t.value)},n.Bz=function(t){if(L(t)){for(var e=new nt(this.qb.iteratorKeys),n=new nt,i=t.length,a=0;a<i;a++){var r=t[a],o=this.ic(r);if(void 0!==o){n.add(o);var s=this.xh(o);null!==s?this.Rj(s,r):(s={},this.ut(s,o),this.Rj(s,r),this.Ci(s))}else this.Ci(r),n.add(this.ic(r))}for(t=e.iterator;t.next();)e=t.value,n.contains(e)||(e=this.xh(e))&&this.nm(e)}},n.Rp=function(t){if(null===t)return null;var e=this.Ik;return k(t=null!==e?e(t,this):bc(this,t,!0))&&(it(t),""!==this.Ve&&Mc(t,this.Ve,void 0),""!==this.We&&Mc(t,this.We,void 0),""!==this.Hd&&Mc(t,this.Hd,[])),t},n.lv=function(t){if(null===t)return!1;var e=this.tl;return""!==e&&!!Lc(t,e)},n.Mi=function(t){if(null!==t){var e=this.se;if(""!==e&&void 0!==(e=Lc(t,e))){if(mc(e))return e;w("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},n.tt=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.se;if(""!==n)if(this.Pb(t)){var i=Lc(t,n);i!==e&&(Sc(this,i,t),Mc(t,n,e),null===this.Qb(e)&&wc(this,e,t),pc(this,"nodeGroupKey",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n))}else Mc(t,n,e)}},Ac.prototype.copyNodeData=function(t){return null===t?null:(t=rc.prototype.copyNodeData.call(this,t),this.Wj||""===this.se||void 0===Lc(t,this.se)||Mc(t,this.se,void 0),t)},Ac.prototype.setDataProperty=function(t,e,n){if(this.Pb(t))if(e===this.nodeKeyProperty)this.vm(t,n);else{if(e===this.nodeCategoryProperty)return void this.sq(t,n);if(e===this.nodeGroupKeyProperty)return void this.tt(t,n)}else if(this.Be(t)){if(e===this.linkFromKeyProperty)return void Dc(this,t,n,!0);if(e===this.linkToKeyProperty)return void Dc(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Gc(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Gc(this,t,n,!1);if(e===this.linkKeyProperty)return void this.ut(t,n);if(e===this.linkCategoryProperty)return void this.st(t,n);if(e===this.linkLabelKeysProperty)return void this.Iv(t,n)}var i=Lc(t,e);i!==n&&(Mc(t,e,n),this.lt(t,e,i,n))},(n=Ac.prototype).Rj=function(t,e){if(e){var n,i=this.Pb(t),a=this.Be(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||a&&n===this.linkKeyProperty||this.setDataProperty(t,n,e[n])}},n.qq=function(t,e){rc.prototype.qq.call(this,t,e);for(var n=this.cb.iterator;n.next();)this.Cv(n.value,t,e);for(n=this.Pf.iterator;n.next();){var i=n.value,a=t,r=e;if(jc(this,i,!0)===a){var o=this.Ve;Mc(i,o,r),pc(this,"linkFromKey",xn,o,i,a,r),"string"==typeof o&&this.Ea(i,o)}if(jc(this,i,!1)===a&&(Mc(i,o=this.We,r),pc(this,"linkToKey",xn,o,i,a,r),"string"==typeof o&&this.Ea(i,o)),o=this.sg(i),Array.isArray(o))for(var s=o.length,h=this.Hd,l=0;l<s;l++)o[l]===a&&(o[l]=r,pc(this,"linkLabelKeys",kn,h,i,a,r,l,l))}},n.Cv=function(t,e,n){if(this.Mi(t)===e){var i=this.se;Mc(t,i,n),pc(this,"nodeGroupKey",xn,i,t,e,n),"string"==typeof i&&this.Ea(t,i)}},n.Xv=function(){rc.prototype.Xv.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)Ic(this,t[n])},n.rm=function(t){rc.prototype.rm.call(this,t);var e=Pc(this,t=this.pa(t));if(null!==e){var n=C();for(e=e.iterator;e.next();){var i=e.value;if(this.Pb(i)){if(this.Mi(i)===t){var a=this.se;pc(this,"nodeGroupKey",xn,a,i,t,t),"string"==typeof a&&this.Ea(i,a),n.push(i)}}else if(jc(this,i,!0)===t&&(a=this.Ve,pc(this,"linkFromKey",xn,a,i,t,t),"string"==typeof a&&this.Ea(i,a),n.push(i)),jc(this,i,!1)===t&&(a=this.We,pc(this,"linkToKey",xn,a,i,t,t),"string"==typeof a&&this.Ea(i,a),n.push(i)),a=this.sg(i),Array.isArray(a))for(var r=a.length,o=this.Hd,s=0;s<r;s++)a[s]===t&&(pc(this,"linkLabelKeys",kn,o,i,t,t,s,s),n.push(i))}for(e=0;e<n.length;e++)Sc(this,t,n[e]);F(n)}},n.qm=function(t){rc.prototype.qm.call(this,t);var e=this.Mi(t);null===this.Qb(e)&&wc(this,e,t)},n.vq=function(t){rc.prototype.vq.call(this,t),Sc(this,this.Mi(t),t)},n.bv=function(t){if(null===t)return"";var e=this.sj;return""===e||void 0===(e=Lc(t,e))?"":"string"==typeof e?e:(w("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Ac.prototype.getLinkCategoryForData=function(t){return this.bv(t)},Ac.prototype.st=function(t,e){if(null!==t){var n=this.sj;if(""!==n)if(this.Be(t)){var i=Lc(t,n);void 0===i&&(i=""),i!==e&&(Mc(t,n,e),pc(this,"linkCategory",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n))}else Mc(t,n,e)}},Ac.prototype.setLinkCategoryForData=function(t,e){this.st(t,e)},Ac.prototype.dk=function(){return!0},Ac.prototype.em=function(){return!0},Ac.prototype.ct=function(){return!0},Ac.prototype.ek=function(){return!0},c.Object.defineProperties(Ac.prototype,{archetypeNodeData:{get:function(){return this.aj},set:function(t){var e=this.aj;e!==t&&(this.aj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.Ve},set:function(t){var e=this.Ve;e!==t&&(this.Ve=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.We},set:function(t){var e=this.We;e!==t&&(this.We=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.tj},set:function(t){var e=this.tj;e!==t&&(this.tj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.uj},set:function(t){var e=this.uj;e!==t&&(this.uj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Hd},set:function(t){var e=this.Hd;e!==t&&(this.Hd=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Oc},set:function(t){var e=this.Oc;if(e!==t){this.qb.clear();for(var n=t.length,i=0;i<n;i++){var a=t[i];if(!k(a))return void w("GraphLinksModel.linkDataArray must only contain Objects, not: "+a);at(a)}if(this.Oc=t,""!==this.linkKeyProperty){for(i=new tt,a=0;a<n;a++){var r=t[a],o=this.ic(r);void 0===o||null!==this.qb.J(o)?i.add(r):this.qb.add(o,r)}for(i=i.iterator;i.next();)a=i.value,this.hq(a),void 0!==(r=this.ic(a))&&this.qb.add(r,a)}for(i=new nt,a=0;a<n;a++)i.add(t[a]);for(this.Pf=i,pc(this,"linkDataArray",xn,"linkDataArray",this,e,t),e=0;e<n;e++)Ic(this,t[e])}}},linkKeyProperty:{get:function(){return this.ii},set:function(t){var e=this.ii;if(e!==t){this.ii=t,this.qb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var a=this.linkDataArray[i],r=this.ic(a);void 0===r&&(this.hq(a),r=this.ic(a)),void 0!==r&&this.qb.add(r,a)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.pl},set:function(t){var e=this.pl;e!==t&&(this.pl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e!==t&&(this.Ik=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.tl},set:function(t){var e=this.tl;e!==t&&(this.tl=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.se},set:function(t){var e=this.se;e!==t&&(this.se=t,this.g("nodeGroupKeyProperty",e,t))}},Wj:{get:function(){return this.cn},set:function(t){this.cn!==t&&(this.cn=t)}},linkCategoryProperty:{get:function(){return this.sj},set:function(t){var e=this.sj;e!==t&&(this.sj=t,this.g("linkCategoryProperty",e,t))}}}),c.Object.defineProperties(Ac,{type:{get:function(){return"GraphLinksModel"}}}),Ac.prototype.setCategoryForLinkData=Ac.prototype.st,Ac.prototype.getCategoryForLinkData=Ac.prototype.bv,Ac.prototype.assignAllDataProperties=Ac.prototype.Rj,Ac.prototype.setGroupKeyForNodeData=Ac.prototype.tt,Ac.prototype.getGroupKeyForNodeData=Ac.prototype.Mi,Ac.prototype.isGroupForNodeData=Ac.prototype.lv,Ac.prototype.copyLinkData=Ac.prototype.Rp,Ac.prototype.mergeLinkDataArray=Ac.prototype.Bz,Ac.prototype.removeLinkDataCollection=Ac.prototype.Lz,Ac.prototype.removeLinkData=Ac.prototype.nm,Ac.prototype.addLinkDataCollection=Ac.prototype.gy,Ac.prototype.addLinkData=Ac.prototype.Ci,Ac.prototype.containsLinkData=Ac.prototype.Be,Ac.prototype.makeLinkDataKeyUnique=Ac.prototype.hq,Ac.prototype.findLinkDataForKey=Ac.prototype.xh,Ac.prototype.setKeyForLinkData=Ac.prototype.ut,Ac.prototype.getKeyForLinkData=Ac.prototype.ic,Ac.prototype.removeLabelKeyForLinkData=Ac.prototype.xx,Ac.prototype.addLabelKeyForLinkData=Ac.prototype.Gu,Ac.prototype.setLabelKeysForLinkData=Ac.prototype.Iv,Ac.prototype.getLabelKeysForLinkData=Ac.prototype.sg,Ac.prototype.setToPortIdForLinkData=Ac.prototype.Ix,Ac.prototype.getToPortIdForLinkData=Ac.prototype.ez,Ac.prototype.setFromPortIdForLinkData=Ac.prototype.Ex,Ac.prototype.getFromPortIdForLinkData=Ac.prototype.$y,Ac.prototype.setToKeyForLinkData=Ac.prototype.Hx,Ac.prototype.getToKeyForLinkData=Ac.prototype.dz,Ac.prototype.setFromKeyForLinkData=Ac.prototype.Cx,Ac.prototype.getFromKeyForLinkData=Ac.prototype.Zy,Ac.prototype.clear=Ac.prototype.clear;var _c=Object.freeze([]);function Vc(t){rc.call(this),this.te="parent",this.en=!1,this.Aj="parentLinkCategory",void 0!==t&&(this.nodeDataArray=t)}function Yc(){bd.call(this),this.vw=this.yn=this.Xb=0,this.jr=360,this.uw=Qc,this.gj=0,this.gw=new ft,this.Wq=this.Rd=0,this.Gs=new pf,this.Lt=this.zj=0,this.Ux=600,this.To=NaN,this.Rm=1,this.vp=0,this.Kl=360,this.Ab=Qc,this.L=af,this.Qc=cf,this.Mc=Fd,this.af=6,this.Do=ff}function Hc(t,e,n,i,a){var r=t.jr,o=t.Xb;t=t.Rd,i=i*Math.PI/180,n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var l=i+(a===af?h*n/(360<=r?s:s-1):-h*n/s),u=e.N(h),d=o*Math.tan(l)/t;d=Math.sqrt((o*o+t*t*d*d)/(1+d*d)),u.centerX=d*Math.cos(l),u.centerY=d*Math.sin(l),u.actualAngle=180*l/Math.PI}}function Xc(t,e,n,i){var a=t.Xb,r=t.Rd,o=t.gj;n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var l=e.N(h),u=e.N(h===s-1?0:h+1),d=r*Math.sin(n);l.centerX=a*Math.cos(n),l.centerY=d,l.actualAngle=180*n/Math.PI,isNaN(l.diameter)&&yf(l,0),isNaN(u.diameter)&&yf(u,0),l=$c(t,a,r,i===af?n:-n,(l.diameter+u.diameter)/2+o),n+=i===af?l:-l}}function Uc(t,e,n,i){var a=t.Xb,r=t.Rd,o=t.Wq;n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var l=e.N(h);l.centerX=a*Math.cos(n),l.centerY=r*Math.sin(n),l.actualAngle=180*n/Math.PI,l=$c(t,a,r,i===af?n:-n,o),n+=i===af?l:-l}}function qc(t,e,n,i,a){var r=t.jr;if(t.zj=0,t.Gs=new pf,360>n){for(r=i+(a===af?r:-r);0>r;)r+=360;180<(r%=360)&&(r-=360),r*=Math.PI/180,t.Lt=r,function t(e,n,i,a,r){for(var o=e.Xb,s=e.Rd,h=e.yn,l=o*Math.cos(a*Math.PI/180),u=s*Math.sin(a*Math.PI/180),d=ft.alloc(),c=n.Na(),f=0;f<c.length&&(c[f].centerX=l,c[f].centerY=u,!(f>=c.length-1));f++)Wc(e,l,u,c,f,r,d)||Kc(e,l,u,c,f,r,d),l=d.x,u=d.y;if(ft.free(d),e.zj++,!(23<e.zj)){if(l=Math.atan2(u,l),l=r===af?e.Lt-l:l-e.Lt,l=Math.abs(l)<Math.abs(l-2*Math.PI)?l:l-2*Math.PI,o=l*(o+s)/2,s=e.Gs,Math.abs(o)<Math.abs(s.am))for(s.am=o,s.vk=[],s.Am=[],l=0;l<c.length;l++)s.vk[l]=c[l].bounds.x,s.Am[l]=c[l].bounds.y;1<Math.abs(o)&&(e.Xb=8>e.zj?e.Xb-o/(2*Math.PI):e.Xb-(0<o?1.7:-2.3),e.Rd=e.Xb*h,t(e,n,i,a,r))}}(t,e,n,i,a)}else!function t(e,n,i,a,r){var o=e.Xb,s=e.gj,h=e.yn,l=o*Math.cos(a*Math.PI/180),u=e.Rd*Math.sin(a*Math.PI/180),d=n.Na();if(3===d.length)d[0].centerX=o,d[0].centerY=0,d[1].centerX=d[0].centerX-d[0].width/2-d[1].width/2-s,d[1].y=d[0].y,d[2].centerX=(d[0].centerX+d[1].centerX)/2,d[2].y=d[0].y-d[2].height-s;else if(4===d.length)d[0].centerX=o,d[0].centerY=0,d[2].centerX=-d[0].centerX,d[2].centerY=d[0].centerY,d[1].centerX=0,d[1].y=Math.min(d[0].y,d[2].y)-d[1].height-s,d[3].centerX=0,d[3].y=Math.max(d[0].y+d[0].height+s,d[2].y+d[2].height+s);else{o=ft.alloc();for(var c=0;c<d.length&&(d[c].centerX=l,d[c].centerY=u,!(c>=d.length-1));c++)Wc(e,l,u,d,c,r,o)||Kc(e,l,u,d,c,r,o),l=o.x,u=o.y;if(ft.free(o),e.zj++,!(23<e.zj)){l=d[0].centerX,u=d[0].centerY,o=d[d.length-1].centerX,c=d[d.length-1].centerY;var f=Math.abs(l-o)-((d[0].width+d[d.length-1].width)/2+s),g=Math.abs(u-c)-((d[0].height+d[d.length-1].height)/2+s);s=0,1>Math.abs(g)?Math.abs(l-o)<(d[0].width+d[d.length-1].width)/2&&(s=0):s=0<g?g:1>Math.abs(f)?0:f,l=Math.abs(o)>Math.abs(c)?0<o!=u>c:0<c!=l<o,(l=r===af?l:!l)&&(s=-Math.abs(s),s=Math.min(s,-d[d.length-1].width),s=Math.min(s,-d[d.length-1].height)),e.Gs.compare(s,d),1<Math.abs(s)&&(e.Xb=8>e.zj?e.Xb-s/(2*Math.PI):5>d.length&&10<s?e.Xb/2:e.Xb-(0<s?1.7:-2.3),e.Rd=e.Xb*h,t(e,n,i,a,r))}}}(t,e,n,i,a);t.Gs.commit(e)}function Wc(t,e,n,i,a,r,o){var s=t.Xb,h=t.Rd,l=0;t=(i[a].width+i[a+1].width)/2+t.gj;var u=!1;if(0<=n!=(r===af)){if((r=e+t)>s){if((r=e-t)<-s)return o.x=r,o.y=l,!1;u=!0}}else if((r=e-t)<-s){if((r=e+t)>s)return o.x=r,o.y=l,!1;u=!0}return l=Math.sqrt(1-Math.min(1,r*r/(s*s)))*h,0>n!==u&&(l=-l),Math.abs(n-l)>(i[a].height+i[a+1].height)/2?(o.x=r,o.y=l,!1):(o.x=r,o.y=l,!0)}function Kc(t,e,n,i,a,r,o){var s=t.Xb,h=t.Rd,l=0;if(t=(i[a].height+i[a+1].height)/2+t.gj,i=!1,0<=e!=(r===af)){if((r=n-t)<-h){if((r=n+t)>h)return o.x=l,void(o.y=r);i=!0}}else if((r=n+t)>h){if((r=n-t)<-h)return o.x=l,void(o.y=r);i=!0}l=Math.sqrt(1-Math.min(1,r*r/(h*h)))*s,0>e!==i&&(l=-l),o.x=l,o.y=r}function Jc(t,e,n,i,a){var r=t.Ux;if(.001>Math.abs(t.yn-1))return void 0!==i&&void 0!==a?a*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var o=0,s=void 0!==i&&void 0!==a?a/(r+1):Math.PI/(2*(r+1)),h=0,l=0;l<=r;l++){h=void 0!==i&&void 0!==a?i+l*a/r:l*Math.PI/(2*r);var u=Math.sin(h);o+=Math.sqrt(1-t*t*u*u)*s}return void 0!==i&&void 0!==a?(e>n?e:n)*o:4*(e>n?e:n)*o}function Zc(t,e,n,i,a){return e/(void 0!==i&&void 0!==a?Jc(t,1,n,i,a):Jc(t,1,n))}function $c(t,e,n,i,a){if(.001>Math.abs(t.yn-1))return a/e;var r=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,o=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(i+=Math.PI/2);for(var s=0;;s++){var h=Math.sin(i+s*t);if((o+=(e>n?e:n)*Math.sqrt(1-r*r*h*h)*t)>=a)return s*t}}Ac.className="GraphLinksModel",Tc.GraphLinksModel=Ac,rc.constructGraphLinksModel=rc.constructGraphLinksModel=function(){return new Ac},rc.initDiagramModel=xc=function(){return new Ac},d(Vc,rc),Vc.constructGraphLinksModel=rc.constructGraphLinksModel,Vc.prototype.cloneProtected=function(t){rc.prototype.cloneProtected.call(this,t),t.te=this.te,t.en=this.en,t.Aj=this.Aj},(n=Vc.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.uq();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var a=t[i];e+=" "+this.pa(a)+":"+O(a)}}return e},n.uk=function(){var t=rc.prototype.uk.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},n.nq=function(t){rc.prototype.nq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},n.yq=function(t){return lc(this,t,"nodeParentKeyProperty"),rc.prototype.yq.call(this,t)},n.gm=function(t){return t},n.Oi=function(t){if(null!==t){var e=this.te;if(""!==e&&void 0!==(e=Lc(t,e))){if(mc(e))return e;w("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},n.Ie=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.te;if(""!==n)if(e=this.gm(e),this.Pb(t)){var i=Lc(t,n);i!==e&&(Sc(this,i,t),Mc(t,n,e),null===this.Qb(e)&&wc(this,e,t),pc(this,"nodeParentKey",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n))}else Mc(t,n,e)}},n.cv=function(t){if(null===t)return"";var e=this.Aj;return""===e||void 0===(e=Lc(t,e))?"":"string"==typeof e?e:(w("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},Vc.prototype.getLinkCategoryForData=function(t){return this.cv(t)},Vc.prototype.Jv=function(t,e){if(null!==t){var n=this.Aj;if(""!==n)if(this.Pb(t)){var i=Lc(t,n);void 0===i&&(i=""),i!==e&&(Mc(t,n,e),pc(this,"parentLinkCategory",xn,n,t,i,e),"string"==typeof n&&this.Ea(t,n))}else Mc(t,n,e)}},Vc.prototype.setLinkCategoryForData=function(t,e){this.Jv(t,e)},Vc.prototype.copyNodeData=function(t){return null===t?null:(t=rc.prototype.copyNodeData.call(this,t),this.Xj||""===this.te||void 0===Lc(t,this.te)||Mc(t,this.te,void 0),t)},Vc.prototype.setDataProperty=function(t,e,n){if(this.Pb(t))if(e===this.nodeKeyProperty)this.vm(t,n);else{if(e===this.nodeCategoryProperty)return void this.sq(t,n);if(e===this.nodeParentKeyProperty)return void this.Ie(t,n)}var i=Lc(t,e);i!==n&&(Mc(t,e,n),this.lt(t,e,i,n))},(n=Vc.prototype).qq=function(t,e){rc.prototype.qq.call(this,t,e);for(var n=this.cb.iterator;n.next();)this.Cv(n.value,t,e)},n.Cv=function(t,e,n){if(this.Oi(t)===e){var i=this.te;Mc(t,i,n),pc(this,"nodeParentKey",xn,i,t,e,n),"string"==typeof i&&this.Ea(t,i)}},n.rm=function(t){rc.prototype.rm.call(this,t);var e=Pc(this,t=this.pa(t));if(null!==e){var n=C();for(e=e.iterator;e.next();){var i=e.value;if(this.Pb(i)&&this.Oi(i)===t){var a=this.te;pc(this,"nodeParentKey",xn,a,i,t,t),"string"==typeof a&&this.Ea(i,a),n.push(i)}}for(e=0;e<n.length;e++)Sc(this,t,n[e]);F(n)}},n.qm=function(t){rc.prototype.qm.call(this,t);var e=this.Oi(t);e=this.gm(e),null===this.Qb(e)&&wc(this,e,t)},n.vq=function(t){rc.prototype.vq.call(this,t),Sc(this,this.Oi(t),t)},n.fm=function(){return!0},n.ct=function(){return!0},c.Object.defineProperties(Vc.prototype,{nodeParentKeyProperty:{get:function(){return this.te},set:function(t){var e=this.te;e!==t&&(this.te=t,this.g("nodeParentKeyProperty",e,t))}},Xj:{get:function(){return this.en},set:function(t){this.en!==t&&(this.en=t)}},parentLinkCategoryProperty:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}}}),c.Object.defineProperties(Vc,{type:{get:function(){return"TreeModel"}}}),Vc.prototype.setParentLinkCategoryForNodeData=Vc.prototype.Jv,Vc.prototype.getParentLinkCategoryForNodeData=Vc.prototype.cv,Vc.prototype.setParentKeyForNodeData=Vc.prototype.Ie,Vc.prototype.getParentKeyForNodeData=Vc.prototype.Oi,Vc.className="TreeModel",Tc.TreeModel=Vc,d(Yc,bd),Yc.prototype.cloneProtected=function(t){bd.prototype.cloneProtected.call(this,t),t.To=this.To,t.Rm=this.Rm,t.vp=this.vp,t.Kl=this.Kl,t.Ab=this.Ab,t.L=this.L,t.Qc=this.Qc,t.Mc=this.Mc,t.af=this.af,t.Do=this.Do},Yc.prototype.fb=function(t){t.classType===Yc?t===uf||t===df||t===hf||t===lf||t===cf?this.sorting=t:t===of||t===sf||t===af||t===rf?this.direction=t:t===ef||t===tf||t===Qc||t===nf?this.arrangement=t:t!==gf&&t!==ff||(this.nodeDiameterFormula=t):bd.prototype.fb.call(this,t)},Yc.prototype.createNetwork=function(){return new mf(this)},Yc.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new tt;e.addAll(t.iterator),t=new tt;var n,i,a=new tt,r=this.sort(e),o=this.Wq,s=this.arrangement,h=this.nodeDiameterFormula,l=this.radius;(!isFinite(l)||0>=l)&&(l=NaN);var u=this.aspectRatio;(!isFinite(u)||0>=u)&&(u=1);var d=this.startAngle;isFinite(d)||(d=0);var c=this.sweepAngle;if((!isFinite(c)||360<c||1>c)&&(c=360),e=this.spacing,isFinite(e)||(e=NaN),s===nf&&h===gf?s=Qc:s===nf&&h!==gf&&(s=this.arrangement),(this.direction===of||this.direction===sf)&&this.sorting!==cf){for(h=0;!(h>=r.length)&&(t.add(r.N(h)),!(h+1>=r.length));h+=2)a.add(r.N(h+1));this.direction===of?(this.arrangement===nf&&t.reverse(),(r=new tt).addAll(t),r.addAll(a)):(this.arrangement===nf&&a.reverse(),(r=new tt).addAll(a),r.addAll(t))}h=r.length;for(var f=i=n=0;f<r.length;f++){var g=d+c*i*(this.direction===af?1:-1)/h,p=r.N(f).diameter;isNaN(p)&&(p=yf(r.N(f),g)),360>c&&(0===f||f===r.length-1)&&(p/=2),n+=p,i++}if(isNaN(l)||s===nf){if(isNaN(e)&&(e=6),s!==Qc&&s!==nf){for(i=-1/0,o=0;o<h;o++)f=r.N(o),n=r.N(o===h-1?0:o+1),isNaN(f.diameter)&&yf(f,0),isNaN(n.diameter)&&yf(n,0),i=Math.max(i,(f.diameter+n.diameter)/2);o=i+e,l=s===ef?(i+e)/(2*Math.PI/h):Zc(this,o*(360<=c?h:h-1),u,d*Math.PI/180,c*Math.PI/180)}else l=Zc(this,n+(360<=c?h:h-1)*(s!==nf?e:1.6*e),u,d*Math.PI/180,c*Math.PI/180);i=l*u}else if(f=Jc(this,l,i=l*u,d*Math.PI/180,c*Math.PI/180),isNaN(e))s!==Qc&&s!==nf||(e=(f-n)/(360<=c?h:h-1));else if(s===Qc||s===nf)(f=(f-n)/(360<=c?h:h-1))<e?i=(l=Zc(this,n+e*(360<=c?h:h-1),u,d*Math.PI/180,c*Math.PI/180))*u:e=f;else{for(o=-1/0,n=0;n<h;n++)g=r.N(n),p=r.N(n===h-1?0:n+1),isNaN(g.diameter)&&yf(g,0),isNaN(p.diameter)&&yf(p,0),o=Math.max(o,(g.diameter+p.diameter)/2);(n=Zc(this,(o+=e)*(360<=c?h:h-1),u,d*Math.PI/180,c*Math.PI/180))>l?i=(l=n)*u:o=f/(360<=c?h:h-1)}if(this.uw=s,this.Xb=l,this.yn=u,this.vw=d,this.jr=c,this.gj=e,this.Rd=i,this.Wq=o,e=r,r=this.uw,s=this.Xb,l=this.vw,u=this.jr,d=this.gj,c=this.Rd,h=this.Wq,this.direction!==of&&this.direction!==sf||r!==nf)if(this.direction===of||this.direction===sf){switch(o=0,r){case tf:o=180*$c(this,s,c,l,h)/Math.PI;break;case Qc:h=e=0,null!==(o=t.first())&&(e=yf(o,Math.PI/2)),null!==(o=a.first())&&(h=yf(o,Math.PI/2)),o=180*$c(this,s,c,l,d+(e+h)/2)/Math.PI;break;case ef:o=u/e.length}if(this.direction===of){switch(r){case tf:Uc(this,t,l,rf);break;case Qc:Xc(this,t,l,rf);break;case ef:Hc(this,t,u/2,l,rf)}switch(r){case tf:Uc(this,a,l+o,af);break;case Qc:Xc(this,a,l+o,af);break;case ef:Hc(this,a,u/2,l+o,af)}}else{switch(r){case tf:Uc(this,a,l,rf);break;case Qc:Xc(this,a,l,rf);break;case ef:Hc(this,a,u/2,l,rf)}switch(r){case tf:Uc(this,t,l+o,af);break;case Qc:Xc(this,t,l+o,af);break;case ef:Hc(this,t,u/2,l+o,af)}}}else switch(r){case tf:Uc(this,e,l,this.direction);break;case Qc:Xc(this,e,l,this.direction);break;case ef:Hc(this,e,u,l,this.direction);break;case nf:qc(this,e,u,l,this.direction)}else qc(this,e,u,l-u/2,af)}this.updateParts(),this.network=null,this.isValidLayout=!0},Yc.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},Yc.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new ft(0,0):(n.x=this.arrangementOrigin.x+this.Xb,n.y=this.arrangementOrigin.y+this.Rd);for(var i=this.network.vertexes.iterator;i.next();){var a=i.value;a.x+=n.x,a.y+=n.y,a.commit()}t&&(this.group.$b(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.Xd(n.Xd(t)),this.group.move(e),this.gw=e.Xd(t))},Yc.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Yc.prototype.sort=function(t){switch(this.sorting){case hf:break;case lf:t.reverse();break;case uf:t.sort(this.comparer);break;case df:t.sort(this.comparer),t.reverse();break;case cf:for(var e=[],n=0;n<t.length;n++)e.push(0);n=new tt;for(var i=0;i<t.length;i++){var a=-1,r=-1;if(0===i)for(var o=0;o<t.length;o++){var s=t.N(o).edgesCount;s>a&&(a=s,r=o)}else for(o=0;o<t.length;o++)(s=e[o])>a&&(a=s,r=o);for(n.add(t.N(r)),e[r]=-1,o=(r=t.N(r)).sourceEdges;o.next();)0>(a=t.indexOf(o.value.fromVertex))||0<=e[a]&&e[a]++;for(r=r.destinationEdges;r.next();)0>(a=t.indexOf(r.value.toVertex))||0<=e[a]&&e[a]++}for(t=[],e=0;e<n.length;e++){for(a=n.N(e),t[e]=[],r=a.destinationEdges;r.next();)(i=n.indexOf(r.value.toVertex))!==e&&0>t[e].indexOf(i)&&t[e].push(i);for(a=a.sourceEdges;a.next();)(i=n.indexOf(a.value.fromVertex))!==e&&0>t[e].indexOf(i)&&t[e].push(i)}for(r=[],e=0;e<t.length;e++)r[e]=0;e=[],o=[],s=[],a=[],i=new tt;for(var h=0,l=0;l<t.length;l++){var u=t[l].length;if(1===u)a.push(l);else if(0===u)i.add(n.N(l));else{if(0===h)e.push(l);else{for(var d=u=1/0,c=-1,f=[],g=0;g<e.length;g++)0>t[e[g]].indexOf(e[g===e.length-1?0:g+1])&&f.push(g===e.length-1?0:g+1);if(0===f.length)for(g=0;g<e.length;g++)f.push(g);for(g=0;g<f.length;g++){for(var p=f[g],m=t[l],v=0,y=0;y<o.length;y++){var S=r[o[y]],P=r[s[y]];if(S<P){var b=S;S=P}else b=P;if(b<p&&p<=S)for(P=0;P<m.length;P++){var x=m[P];0>e.indexOf(x)||b<r[x]&&r[x]<S||b===r[x]||S===r[x]||v++}else for(P=0;P<m.length;P++)x=m[P],0>e.indexOf(x)||b<r[x]&&r[x]<S&&b!==r[x]&&S!==r[x]&&v++}for(m=v,y=v=0;y<t[l].length;y++)0<=(b=e.indexOf(t[l][y]))&&(v+=(b=Math.abs(p-(b>=p?b+1:b)))<e.length+1-b?b:e.length+1-b);for(y=0;y<o.length;y++)(b=r[o[y]])>=p&&b++,(S=r[s[y]])>=p&&S++,b>S&&(P=S,S=b,b=P),S-b<(e.length+2)/2==(b<p&&p<=S)&&v++;(m<u||m===u&&v<d)&&(u=m,d=v,c=p)}for(e.splice(c,0,l),u=0;u<e.length;u++)r[e[u]]=u;for(u=0;u<t[l].length;u++)d=t[l][u],0<=e.indexOf(d)&&(o.push(l),s.push(d))}h++}}for(o=e.length;;){for(r=!0,s=0;s<a.length;s++)if(l=t[h=a[s]][0],0<=(u=e.indexOf(l))){for(c=d=0;c<t[l].length;c++)0>(f=e.indexOf(t[l][c]))||f===u||(d+=f<u!=(g=f>u?f-u:u-f)>o-g?1:-1);e.splice(0>d?u:u+1,0,h),a.splice(s,1),s--}else r=!1;if(r)break;e.push(a[0]),a.splice(0,1)}for(t=0;t<e.length;t++)i.add(n.N(e[t]));return i;default:w("Invalid sorting type.")}return t},c.Object.defineProperties(Yc.prototype,{radius:{get:function(){return this.To},set:function(t){this.To!==t&&(0<t||isNaN(t))&&(this.To=t,this.B())}},aspectRatio:{get:function(){return this.Rm},set:function(t){this.Rm!==t&&0<t&&(this.Rm=t,this.B())}},startAngle:{get:function(){return this.vp},set:function(t){this.vp!==t&&(this.vp=t,this.B())}},sweepAngle:{get:function(){return this.Kl},set:function(t){this.Kl!==t&&(this.Kl=0<t&&360>=t?t:360,this.B())}},arrangement:{get:function(){return this.Ab},set:function(t){this.Ab===t||t!==nf&&t!==Qc&&t!==tf&&t!==ef||(this.Ab=t,this.B())}},direction:{get:function(){return this.L},set:function(t){this.L===t||t!==af&&t!==rf&&t!==of&&t!==sf||(this.L=t,this.B())}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc===t||t!==hf&&t!==lf&&t!==uf&&!df&&t!==cf||(this.Qc=t,this.B())}},comparer:{get:function(){return this.Mc},set:function(t){this.Mc!==t&&(this.Mc=t,this.B())}},spacing:{get:function(){return this.af},set:function(t){this.af!==t&&(this.af=t,this.B())}},nodeDiameterFormula:{get:function(){return this.Do},set:function(t){this.Do===t||t!==ff&&t!==gf||(this.Do=t,this.B())}},actualXRadius:{get:function(){return this.Xb}},actualYRadius:{get:function(){return this.Rd}},actualSpacing:{get:function(){return this.gj}},actualCenter:{get:function(){return this.gw}}});var Qc=new X(Yc,"ConstantSpacing",0),tf=new X(Yc,"ConstantDistance",1),ef=new X(Yc,"ConstantAngle",2),nf=new X(Yc,"Packed",3),af=new X(Yc,"Clockwise",4),rf=new X(Yc,"Counterclockwise",5),of=new X(Yc,"BidirectionalLeft",6),sf=new X(Yc,"BidirectionalRight",7),hf=new X(Yc,"Forwards",8),lf=new X(Yc,"Reverse",9),uf=new X(Yc,"Ascending",10),df=new X(Yc,"Descending",11),cf=new X(Yc,"Optimized",12),ff=new X(Yc,"Pythagorean",13),gf=new X(Yc,"Circular",14);function pf(){this.am=-1/0,this.Am=this.vk=null}function mf(t){Ld.call(this,t)}function vf(t){Cd.call(this,t),this.K=this.fj=NaN}function yf(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===nf)if(n.nodeDiameterFormula===gf)t.fj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.fj=Math.min(t.height/n,t.width/e)}else t.fj=n.nodeDiameterFormula===gf?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.fj}function wf(t){Bd.call(this,t)}function Sf(){bd.call(this),this.ph=null,this.Zn=0,this.wd=new jt(100,100).freeze(),this.Qm=!1,this.$e=!0,this.Xc=!1,this.ql=100,this.Bn=1,this.Lf=1e3,this.uo=10,this.Uo=Math,this.Qk=.05,this.Pk=50,this.Nk=150,this.Ok=0,this.on=10,this.nn=5}function Pf(t,e,n){if(function(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.ph=t.network.vertexes.Na(),(t=t.ph).sort((function(t,e){return null===t||null===e||t===e?0:e.td-t.td})),e=t.length-1;0<=e&&1>=t[e].td;)e--;return 1<t.length-e}(t,e)){var i=t.Lf;t.Lf*=1+1/(e+1);var a=function(t,e){for(var n=t.network,i=new Tf(t),a=0;a<t.ph.length;a++){var r=t.ph[a];if(!(1<r.td))break;i.th(r);var o=new Nf;o.At=r.td,o.Bt=r.width,o.zt=r.height,o.bw=r.focus.x,o.cw=r.focus.y,null===r.He&&(r.He=new tt),r.He.add(o),r.Fv=r.He.count-1}for(r=n.edges.iterator;r.next();){var s=r.value;a=s.fromVertex,o=s.toVertex,a.network===i&&o.network===i?i.Pj(s):a.network===i?(null===(s=a.Vj)&&(s=new tt,a.Vj=s),s.add(o),a.td--,a.Bh+=o.Bh):o.network===i&&(null===(s=o.Vj)&&(s=new tt,o.Vj=s),s.add(a),o.td--,o.Bh+=a.Bh)}for(a=i.edges.iterator;a.next();)(r=a.value).length*=Math.max(1,qe.sqrt((r.fromVertex.Bh+r.toVertex.Bh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){var h=(a=e.value).Vj;if(null!==h&&0<h.count&&!(0>=(o=a.He.N(a.He.count-1).At-a.td))){for(var l=s=0,u=h.count-o;u<h.count;u++){var d=h.N(u),c=null;for(r=d.edges.iterator;r.next();){var f=r.value;if(f.lx(d)===a){c=f;break}}null!==c&&(l+=c.length,s+=d.width*d.height)}r=a.centerX,h=a.centerY,u=a.width,d=a.height,c=a.focus,1>(f=u*d)&&(f=1),s=qe.sqrt((s+f+l*l*4/(o*o))/f),o=(s-1)*u/2,s=(s-1)*d/2,a.bounds=new Et(r-c.x-o,h-c.y-s,u+2*o,d+2*s),a.focus=new ft(c.x+o,c.y+s)}}return t.network=i,n}(t,e),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=r,Pf(t,e+1,n),Lf(t,r),function(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i=n.value;if(i.network=e,null!==i.He){var a=i.He.N(i.Fv);i.td=a.At;var r=a.bw,o=a.cw;i.bounds=new Et(i.centerX-r,i.centerY-o,a.Bt,a.zt),i.focus=new ft(r,o),i.Fv--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,a),(e=a.vertexes.Na()).sort((function(t,e){return null===t||null===e||t===e?0:e.td-t.td})),n=0;n<e.length;n++)bf(t,e[n]);t.Lf=i}}function bf(t,e){var n=e.Vj;if(null!==n&&0!==n.count){var i=e.centerX,a=e.centerY,r=e.width,o=e.height;null!==e.He&&0<e.He.count&&(r=(o=e.He.N(0)).Bt,o=o.zt),r=qe.sqrt(r*r+o*o)/2;for(var s=!1,h=o=0,l=0,u=e.vertexes.iterator;u.next();){var d=u.value;1>=d.td?h++:(s=!0,l++,o+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(0!==h)for(0<l&&(o/=l),l=e=0,e=s?2*Math.PI/(h+1):2*Math.PI/h,0==h%2&&(l=e/2),1<n.count&&n.sort((function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height})),s=0==h%2?0:1,n=n.iterator;n.next();)if(!(1<(h=n.value).td||t.isFixed(h))){for(u=null,d=h.edges.iterator;d.next();){u=d.value;break}d=h.width;var c=h.height;d=qe.sqrt(d*d+c*c)/2,u=r+u.length+d,d=o+(e*(s/2>>1)+l)*(0==s%2?1:-1),h.centerX=i+u*Math.cos(d),h.centerY=a+u*Math.sin(d),s++}}}function xf(t,e,n,i,a,r,o){var s=9e19,h=-1,l=0;t:for(;l<e;l++){var u=t[l],d=u.x-n,c=u.y-i;if((d=d*d+c*c)<s){for(c=l-1;0<=c;c--)if(t[c].y>u.y&&t[c].x-u.x<a+o.width)continue t;for(c=l+1;c<e;c++)if(t[c].x>u.x&&t[c].y-u.y<r+o.height)continue t;h=l,s=d}}return h}function kf(t,e){var n=t.bounds,i=n.x;t=n.y;var a=n.width;n=n.height;var r=e.bounds,o=r.x;e=r.y;var s=r.width;return r=r.height,i+a<o?t>e+r?(n=i+a-o,t=t-e-r,qe.sqrt(n*n+t*t)):t+n<e?(i=i+a-o,t=t+n-e,qe.sqrt(i*i+t*t)):o-(i+a):i>o+s?t>e+r?(n=i-o-s,t=t-e-r,qe.sqrt(n*n+t*t)):t+n<e?(i=i-o-s,t=t+n-e,qe.sqrt(i*i+t*t)):i-(o+s):t>e+r?t-(e+r):t+n<e?e-(t+n):.1}function Lf(t,e){for(t.ph=null,e=t.Zn+e;t.Zn<e&&(t.Zn++,Mf(t)););t.ph=null}function Mf(t){null===t.ph&&(t.ph=t.network.vertexes.Na());var e=t.ph;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,a=i,r=n=n.centerY,o=1;o<e.length;o++){var s=e[o];s.forceX=0,s.forceY=0;var h=s.centerX;s=s.centerY,i=Math.min(i,h),a=Math.max(a,h),n=Math.min(n,s),r=Math.max(r,s)}(a=a-i>r-n)?e.sort((function(t,e){return null===t||null===e||t===e?0:t.centerX-e.centerX})):e.sort((function(t,e){return null===t||null===e||t===e?0:t.centerY-e.centerY})),n=t.Lf;var l=i=s=0;for(r=0;r<e.length;r++){i=(o=e[r]).bounds,s=o.focus,h=i.x+s.x;var u=i.y+s.y;i=o.charge*t.electricalFieldX(h,u),l=o.charge*t.electricalFieldY(h,u),i+=o.mass*t.gravitationalFieldX(h,u),l+=o.mass*t.gravitationalFieldY(h,u),o.forceX+=i,o.forceY+=l;for(var d=r+1;d<e.length;d++){var c=e[d];if(c!==o){i=c.bounds,s=c.focus,l=i.x+s.x;var f=i.y+s.y;if(h-l>n||l-h>n){if(a)break}else if(u-f>n||f-u>n){if(!a)break}else{var g=kf(o,c);1>g?(null===(i=t.randomNumberGenerator)&&(t.randomNumberGenerator=i=new Bf),g=i.random(),s=i.random(),h>l?i=(1+(i=Math.abs(c.bounds.right-o.bounds.x)))*g:h<l?i=-(1+(i=Math.abs(c.bounds.x-o.bounds.right)))*g:i=(1+(i=Math.max(c.width,o.width)))*g-i/2,u>f?l=(1+(l=Math.abs(c.bounds.bottom-o.bounds.y)))*s:h<l?l=-(1+(l=Math.abs(c.bounds.y-o.bounds.bottom)))*s:l=(1+(l=Math.max(c.height,o.height)))*s-l/2):(i=(l-h)/g*(s=-o.charge*c.charge/(g*g)),l=(f-u)/g*s),o.forceX+=i,o.forceY+=l,c.forceX-=i,c.forceY-=l}}}}for(a=t.network.edges.iterator;a.next();)n=(s=a.value).fromVertex,r=s.toVertex,o=n.bounds,h=n.focus,i=o.x+h.x,o=o.y+h.y,u=r.bounds,d=r.focus,h=u.x+d.x,u=u.y+d.y,1>(d=kf(n,r))?(null===(d=t.randomNumberGenerator)&&(t.randomNumberGenerator=d=new Bf),s=d.random(),d=d.random(),i=(i>h?1:-1)*(1+(r.width>n.width?r.width:n.width))*s,l=(o>u?1:-1)*(1+(r.height>n.height?r.height:n.height))*d):(i=(h-i)/d*(s=s.stiffness*(d-s.length)),l=(u-o)/d*s),n.forceX+=i,n.forceY+=l,r.forceX-=i,r.forceY-=l;for(i=0,a=t.moveLimit,n=0;n<e.length;n++)r=e[n],t.isFixed(r)?t.moveFixedVertex(r):((o=r.forceX)<-a?o=-a:o>a&&(o=a),(h=r.forceY)<-a?h=-a:h>a&&(h=a),r.centerX+=o,r.centerY+=h,i=Math.max(i,o*o+h*h));return i>t.epsilonDistance*t.epsilonDistance}function Nf(){this.cw=this.bw=this.zt=this.Bt=this.At=0}function Tf(t){Ld.call(this,t)}function Cf(t){Cd.call(this,t),this.Ma=!1,this.Ub=this.K=NaN,this.Bh=this.td=this.La=this.ba=0,this.He=this.Vj=null,this.Fv=0}function Ff(t){Bd.call(this,t),this.l=this.u=NaN}function Bf(){var t=0;void 0===t&&(t=42),this.seed=t,this.Mx=48271,this.Ox=2147483647,this.Q=44488.07041494893,this.Qx=3399,this.Nx=1/2147483647,this.random()}function Of(){bd.call(this),this.Wb=this.ke=25,this.L=0,this.Lk=dg,this.ll=gg,this.bl=vg,this.qj=4,this.xk=Pg,this.bg=7,this.$e=!0,this.eo=4,this.Ha=this.Pr=this.ya=-1,this.od=this.po=0,this.Ka=this.ld=this.md=this.Gd=this.fc=null,this.zo=0,this.yo=this.vj=null,this.Ld=0,this.Ao=null,this.iw=new ft,this.qe=[],this.qe.length=100}function Af(t){var e=t.fromVertex.node;return t=t.toVertex.node,null===e&&null===t?8:null===e||null===t?4:1}function jf(t){null===t.vj&&(t.vj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.vj[e]=i.layer,e++,t.vj[e]=i.column,e++,t.vj[e]=i.index,e++}return t.vj}function Df(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function zf(t,e,n){var i=lg(t,e),a=t.fc[e];(null===t.yo||t.yo.length<a*a)&&(t.yo=[]);for(var r=t.yo,o=0;o<a;o++){var s,h=0,l=i[o],u=l.near;if(null!==u&&u.layer===l.layer)if((l=u.index)>o)for(var d=o+1;d<l;d++){var c=i[d];c.near===u&&c.Qj===u.Qj||h++}else for(d=o-1;d>l;d--)(c=i[d]).near===u&&c.Qj===u.Qj||h++;if(0<=n)for(l=i[o].sourceEdgesArrayAccess,u=0;u<l.length;u++){var f=l[u];if(f.valid&&f.fromVertex.layer!==e)for(c=f.fromVertex.index,d=f.portToPos,f=f.portFromPos,s=u+1;s<l.length;s++){var g=l[s];if(g.valid&&g.fromVertex.layer!==e){var p=g.fromVertex.index,m=g.portToPos;g=g.portFromPos,d<m&&(c>p||c===p&&f>g)&&h++,m<d&&(p>c||p===c&&g>f)&&h++}}}if(0>=n)for(l=i[o].destinationEdgesArrayAccess,u=0;u<l.length;u++)if((f=l[u]).valid&&f.toVertex.layer!==e)for(c=f.toVertex.index,d=f.portToPos,f=f.portFromPos,s=u+1;s<l.length;s++)(g=l[s]).valid&&g.toVertex.layer!==e&&(p=g.toVertex.index,m=g.portToPos,f<(g=g.portFromPos)&&(c>p||c===p&&d>m)&&h++,g<f&&(p>c||p===c&&m>d)&&h++);for(r[o*a+o]=h,l=o+1;l<a;l++){var v=0,y=0;if(0<=n){h=i[o].sourceEdgesArrayAccess;var w=i[l].sourceEdgesArrayAccess;for(u=0;u<h.length;u++)if((f=h[u]).valid&&f.fromVertex.layer!==e)for(c=f.fromVertex.index,f=f.portFromPos,s=0;s<w.length;s++)(g=w[s]).valid&&g.fromVertex.layer!==e&&(p=g.fromVertex.index,g=g.portFromPos,(c<p||c===p&&f<g)&&y++,(p<c||p===c&&g<f)&&v++)}if(0>=n)for(h=i[o].destinationEdgesArrayAccess,w=i[l].destinationEdgesArrayAccess,u=0;u<h.length;u++)if((f=h[u]).valid&&f.toVertex.layer!==e)for(c=f.toVertex.index,d=f.portToPos,s=0;s<w.length;s++)(g=w[s]).valid&&g.toVertex.layer!==e&&(p=g.toVertex.index,m=g.portToPos,(c<p||c===p&&d<m)&&y++,(p<c||p===c&&m<d)&&v++);r[o*a+l]=v,r[l*a+o]=y}}return ug(t,e,i),r}function Gf(t){for(var e=0,n=0;n<=t.ya;n++){for(var i=t,a=n,r=lg(i,a),o=i.fc[a],s=0,h=0;h<o;h++){var l=r[h].destinationEdgesArrayAccess;if(null!==l)for(var u=0;u<l.length;u++){var d=l[u];if(d.valid&&d.toVertex.layer!==a){var c=d.fromVertex.column+d.portFromColOffset,f=d.toVertex.column+d.portToColOffset;s+=(Math.abs(c-f)+1)*Af(d)}}}ug(i,a,r),e+=s}return e}function Ef(t,e,n){for(var i=lg(t,e),a=t.fc[e],r=[],o=0;o<a;o++){var s=i[o],h=null;0>=n&&(h=s.sourceEdgesArrayAccess);var l=null;0<=n&&(l=s.destinationEdgesArrayAccess);var u=0,d=0,c=s.near;if(null!==c&&c.layer===s.layer&&(u+=c.column-1,d++),null!==h)for(c=0;c<h.length;c++){var f=(s=h[c]).fromVertex;s.valid&&!s.rev&&f.layer!==e&&(u+=f.column,d++)}if(null!==l)for(h=0;h<l.length;h++)c=(s=l[h]).toVertex,s.valid&&!s.rev&&c.layer!==e&&(u+=c.column,d++);r[o]=0===d?-1:u/d}return ug(t,e,i),r}function Rf(t,e,n){for(var i=lg(t,e),a=t.fc[e],r=[],o=0;o<a;o++){var s=i[o],h=null;0>=n&&(h=s.sourceEdgesArrayAccess);var l=null;0<=n&&(l=s.destinationEdgesArrayAccess);var u=0,d=[],c=s.near;if(null!==c&&c.layer===s.layer&&(d[u]=c.column-1,u++),s=void 0,null!==h)for(c=0;c<h.length;c++){var f=(s=h[c]).fromVertex;s.valid&&!s.rev&&f.layer!==e&&(d[u]=f.column+s.portFromColOffset,u++)}if(null!==l)for(h=0;h<l.length;h++)c=(s=l[h]).toVertex,s.valid&&!s.rev&&c.layer!==e&&(d[u]=c.column+s.portToColOffset,u++);0===u?r[o]=-1:(d.sort((function(t,e){return t-e})),l=u>>1,r[o]=0!=(1&u)?d[l]:d[l-1]+d[l]>>1)}return ug(t,e,i),r}function If(t,e,n,i,a,r){if(e.component===i){if(e.component=n,a)for(var o=e.destinationEdges;o.next();){var s=o.value,h=s.toVertex,l=e.layer-h.layer;l===(s=t.linkMinLength(s))&&If(t,h,n,i,a,r)}if(r)for(o=e.sourceEdges;o.next();)(l=(h=(s=o.value).fromVertex).layer-e.layer)===(s=t.linkMinLength(s))&&If(t,h,n,i,a,r)}}function _f(t,e,n,i,a,r){if(e.component===i){if(e.component=n,a)for(var o=e.destinationEdges;o.next();)_f(t,o.value.toVertex,n,i,a,r);if(r)for(e=e.sourceEdges;e.next();)_f(t,e.value.fromVertex,n,i,a,r)}}function Vf(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function Yf(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function Hf(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function Xf(t,e){e.Xl=t.zo,t.zo++;for(var n=e.destinationEdges;n.next();){var i=n.value,a=i.toVertex;-1===a.Xl&&(i.forest=!0,Xf(t,a))}e.finish=t.zo,t.zo++}function Uf(t){for(var e=t.network.vertexes.iterator;e.next();){var n=qf(t,e.value);t.ya=Math.max(n,t.ya)}}function qf(t,e){var n=0;if(-1===e.layer){for(var i=e.destinationEdges;i.next();){var a=i.value,r=a.toVertex;a=t.linkMinLength(a),n=Math.max(n,qf(t,r)+a)}e.layer=n}else n=e.layer;return n}function Wf(t,e){var n=0;if(-1===e.layer){for(var i=e.sourceEdges;i.next();){var a=i.value,r=a.fromVertex;a=t.linkMinLength(a),n=Math.max(n,Wf(t,r)+a)}e.layer=n}else n=e.layer;return n}function Kf(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)Kf(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var i=e.sourceEdgesArrayAccess,a=i.length,r=0;r<a;r++){var o=i[r],s=o.fromVertex,h=o.toVertex;o=t.linkMinLength(o),s.layer-h.layer>o&&If(t,s,0,-1,!0,!1)}for(If(t,e,1,-1,!0,!0);0!==e.component;){for(r=0,i=1/0,s=0,h=null,o=t.network.vertexes.iterator;o.next();){var l=o.value;if(1===l.component){var u=0,d=!1,c=l.sourceEdgesArrayAccess;a=c.length;for(var f=0;f<a;f++){var g=c[f],p=g.fromVertex;u+=1,1!==p.component&&(r+=1,p=p.layer-l.layer,g=t.linkMinLength(g),i=Math.min(i,p-g))}for(a=(c=l.destinationEdgesArrayAccess).length,f=0;f<a;f++)--u,1!==(g=c[f].toVertex).component?--r:d=!0;(null===h||u<s)&&!d&&(h=l,s=u)}}if(0<r){for(n.reset();n.next();)1===(a=n.value).component&&(a.layer+=i);e.component=0}else h.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(If(t,e,1,-1,!0,!1);0!==e.component;){for(i=0,a=1/0,r=0,s=null,h=t.network.vertexes.iterator;h.next();)if(1===(o=h.value).component){for(l=0,u=!1,d=(c=o.sourceEdgesArrayAccess).length,f=0;f<d;f++)l+=1,1!==(g=c[f].fromVertex).component?i+=1:u=!0;for(d=(c=o.destinationEdgesArrayAccess).length,f=0;f<d;f++)--l,1!==(p=(g=c[f]).toVertex).component&&(--i,p=o.layer-p.layer,g=t.linkMinLength(g),a=Math.min(a,p-g));(null===s||l>r)&&!u&&(s=o,r=l)}if(0>i){for(n.reset();n.next();)1===(i=n.value).component&&(i.layer-=a);e.component=0}else s.component=0}}}function Jf(t,e,n){return 90===t.L?n&&!e.rev||!n&&e.rev?270:90:180===t.L?n&&!e.rev||!n&&e.rev?0:180:270===t.L?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function Zf(t,e){var n=e.layer;for(e.index=t.fc[n],t.fc[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var i=0;i<e.length-1;i++){var a=e[i],r=e[i+1];a.portFromColOffset>r.portFromColOffset&&(n=!0,e[i]=r,e[i+1]=a)}}for(n=0;n<e.length;n++)(i=e[n]).valid&&(-1===(i=i.toVertex).index&&Zf(t,i))}function $f(t,e){var n=e.layer;e.index=t.fc[n],t.fc[n]++,e=e.sourceEdgesArrayAccess;for(var i=!0;i;)for(i=!1,n=0;n<e.length-1;n++){var a=e[n],r=e[n+1];a.portToColOffset>r.portToColOffset&&(i=!0,e[n]=r,e[n+1]=a)}for(n=0;n<e.length;n++)(i=e[n]).valid&&(-1===(i=i.fromVertex).index&&$f(t,i))}function Qf(t,e,n){var i=lg(t,e),a=t.fc[e],r=Rf(t,e,n),o=Ef(t,e,n);for(n=0;n<a;n++)-1===o[n]&&(o[n]=i[n].column),-1===r[n]&&(r[n]=i[n].column);for(var s,h=!0;h;)for(h=!1,n=0;n<a-1;n++)(r[n+1]<r[n]||r[n+1]===r[n]&&o[n+1]<o[n])&&(h=!0,s=r[n],r[n]=r[n+1],r[n+1]=s,s=o[n],o[n]=o[n+1],o[n+1]=s,s=i[n],i[n]=i[n+1],i[n+1]=s);for(n=r=0;n<a;n++)(s=i[n]).index=n,r+=t.nodeMinColumnSpace(s,!0),s.column=r,r+=1,r+=t.nodeMinColumnSpace(s,!1);ug(t,e,i)}function tg(t,e,n){var i,a=lg(t,e),r=t.fc[e];n=zf(t,e,n);var o=[];for(i=0;i<r;i++)o[i]=-1;var s=[];for(i=0;i<r;i++)s[i]=-1;for(var h=!1,l=!0;l;)for(l=!1,i=0;i<r-1;i++){var u=n[a[i].index*r+a[i+1].index],d=n[a[i+1].index*r+a[i].index],c=0,f=0,g=a[i].column,p=a[i+1].column,m=t.nodeMinColumnSpace(a[i],!0),v=t.nodeMinColumnSpace(a[i],!1),y=t.nodeMinColumnSpace(a[i+1],!0),w=t.nodeMinColumnSpace(a[i+1],!1);m=g-m+y,v=p-v+w;var S=a[i].sourceEdges.iterator;for(S.reset();S.next();)if(w=(y=S.value).fromVertex,y.valid&&w.layer===e){for(y=0;a[y]!==w;)y++;y<i&&(c+=2*(i-y),f+=2*(i+1-y)),y===i+1&&(c+=1),y>i+1&&(c+=4*(y-i),f+=4*(y-(i+1)))}for((S=a[i].destinationEdges.iterator).reset();S.next();)if(w=(y=S.value).toVertex,y.valid&&w.layer===e){for(y=0;a[y]!==w;)y++;y===i+1&&(f+=1)}for((S=a[i+1].sourceEdges.iterator).reset();S.next();)if(w=(y=S.value).fromVertex,y.valid&&w.layer===e){for(y=0;a[y]!==w;)y++;y<i&&(c+=2*(i+1-y),f+=2*(i-y)),y===i&&(f+=1),y>i+1&&(c+=4*(y-(i+1)),f+=4*(y-i))}for((S=a[i+1].destinationEdges.iterator).reset();S.next();)if(w=(y=S.value).toVertex,y.valid&&w.layer===e){for(y=0;a[y]!==w;)y++;y===i&&(c+=1)}y=w=0,S=o[a[i].index];var P=s[a[i].index],b=o[a[i+1].index],x=s[a[i+1].index];-1!==S&&(w+=Math.abs(S-g),y+=Math.abs(S-v)),-1!==P&&(w+=Math.abs(P-g),y+=Math.abs(P-v)),-1!==b&&(w+=Math.abs(b-p),y+=Math.abs(b-m)),-1!==x&&(w+=Math.abs(x-p),y+=Math.abs(x-m)),(f<c-.5||f===c&&d<u-.5||f===c&&d===u&&y<w-.5)&&(l=h=!0,a[i].column=v,a[i+1].column=m,u=a[i],a[i]=a[i+1],a[i+1]=u)}for(i=0;i<r;i++)a[i].index=i;return ug(t,e,a),h}function eg(t,e,n){for(var i=!1;ng(t,e,n);)i=!0;return i}function ng(t,e,n){var i,a=lg(t,e),r=t.fc[e],o=Ef(t,e,-1);if(0<n)for(i=0;i<r;i++)o[i]=-1;var s=Ef(t,e,1);if(0>n)for(i=0;i<r;i++)s[i]=-1;for(var h=!1,l=!0;l;)for(l=!1,i=0;i<r;i++){var u=a[i].column,d=t.nodeMinColumnSpace(a[i],!0),c=t.nodeMinColumnSpace(a[i],!1),f=0;f=0>i-1||u-a[i-1].column-1>d+t.nodeMinColumnSpace(a[i-1],!1)?u-1:u,d=i+1>=r||a[i+1].column-u-1>c+t.nodeMinColumnSpace(a[i+1],!0)?u+1:u;var g=c=0,p=0;if(0>=n)for(var m=a[i].sourceEdges.iterator;m.next();){var v=m.value,y=v.fromVertex;if(v.valid&&y.layer!==e){var w=Af(v),S=v.portFromColOffset;v=v.portToColOffset,y=y.column,c+=(Math.abs(u+v-(y+S))+1)*w,g+=(Math.abs(f+v-(y+S))+1)*w,p+=(Math.abs(d+v-(y+S))+1)*w}}if(0<=n)for(m=a[i].destinationEdges.iterator;m.next();)y=(v=m.value).toVertex,v.valid&&y.layer!==e&&(w=Af(v),S=v.portFromColOffset,v=v.portToColOffset,y=y.column,c+=(Math.abs(u+S-(y+v))+1)*w,g+=(Math.abs(f+S-(y+v))+1)*w,p+=(Math.abs(d+S-(y+v))+1)*w);v=S=w=0,m=o[a[i].index],y=s[a[i].index],-1!==m&&(w+=Math.abs(m-u),S+=Math.abs(m-f),v+=Math.abs(m-d)),-1!==y&&(w+=Math.abs(y-u),S+=Math.abs(y-f),v+=Math.abs(y-d)),g<c||g===c&&S<w?(l=h=!0,a[i].column=f):(p<c||p===c&&v<w)&&(l=h=!0,a[i].column=d)}return ug(t,e,a),t.normalize(),h}function ig(t,e,n){var i=lg(t,e),a=t.fc[e],r=Rf(t,e,n),o=[];for(n=0;n<a;n++)o[n]=r[n];for(r=!0;r;)for(r=!1,n=0;n<a;n++){var s=i[n].column,h=t.nodeMinColumnSpace(i[n],!0),l=t.nodeMinColumnSpace(i[n],!1),u=0;if(-1===o[n])if(0===n&&n===a-1)u=s;else if(0===n){var d=i[n+1].column;u=d-s===l+t.nodeMinColumnSpace(i[n+1],!0)?s-1:s}else n===a-1?u=s-(d=i[n-1].column)===h+t.nodeMinColumnSpace(i[n-1],!1)?s+1:s:u=((h=(d=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+h+1)+(l=(d=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-l-1))/2|0;else 0===n&&n===a-1?u=o[n]:0===n?(l=(d=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-l-1,u=Math.min(o[n],l)):n===a-1?(h=(d=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+h+1,u=Math.max(o[n],h)):(h=(d=i[n-1].column)+t.nodeMinColumnSpace(i[n-1],!1)+h+1,l=(d=i[n+1].column)-t.nodeMinColumnSpace(i[n+1],!0)-l-1,h<o[n]&&o[n]<l?u=o[n]:h>=o[n]?u=h:l<=o[n]&&(u=l));u!==s&&(r=!0,i[n].column=u)}ug(t,e,i),t.normalize()}function ag(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var a=i.value,r=t.nodeMinColumnSpace(a,!0),o=t.nodeMinColumnSpace(a,!1);if(a.column-r<=e&&a.column+o>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)(n=i.value).column>e&&(--n.column,t=!0);return t}function rg(t,e){var n,i=e+1,a=[],r=[];for(n=0;n<=t.ya;n++)a[n]=!1,r[n]=!1;for(var o=t.network.vertexes.iterator;o.next();){var s=(n=o.value).column-t.nodeMinColumnSpace(n,!0),h=n.column+t.nodeMinColumnSpace(n,!1);s<=e&&h>=e&&(a[n.layer]=!0),s<=i&&h>=i&&(r[n.layer]=!0)}for(s=!0,i=!1,n=0;n<=t.ya;n++)s=s&&!(a[n]&&r[n]);if(s)for(o.reset();o.next();)(t=o.value).column>e&&(--t.column,i=!0);return i}function og(t,e){for(var n=0;n<=t.Ha;n++)for(;ag(t,n););for(t.normalize(),n=0;n<t.Ha;n++)for(;rg(t,n););var i;if(t.normalize(),0<e)for(n=0;n<=t.Ha;n++){var a=jf(t),r=Gf(t);for(i=r+1;r<i;){i=r,sg(t,n,1);var o=Gf(t);o>r?Df(t,a):o<r&&(r=o,a=jf(t))}}if(0>e)for(n=t.Ha;0<=n;n--)for(a=jf(t),i=(r=Gf(t))+1;r<i;)i=r,sg(t,n,-1),(o=Gf(t))>r?Df(t,a):o<r&&(r=o,a=jf(t));t.normalize()}function sg(t,e,n){t.Ld=0;for(var i=t.network.vertexes.iterator;i.next();)i.value.component=-1;if(0<n)for(i.reset();i.next();){var a=i.value;a.column-t.nodeMinColumnSpace(a,!0)<=e&&(a.component=t.Ld)}if(0>n)for(i.reset();i.next();)(a=i.value).column+t.nodeMinColumnSpace(a,!1)>=e&&(a.component=t.Ld);for(t.Ld++,i.reset();i.next();)-1===(e=i.value).component&&(_f(t,e,t.Ld,-1,!0,!0),t.Ld++);var r;for(e=[],r=0;r<t.Ld*t.Ld;r++)e[r]=!1;for(a=[],r=0;r<(t.ya+1)*(t.Ha+1);r++)a[r]=-1;for(i.reset();i.next();)for(var o=(r=i.value).layer,s=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),h=Math.min(t.Ha,r.column+t.nodeMinColumnSpace(r,!1));s<=h;s++)a[o*(t.Ha+1)+s]=r.component;for(r=0;r<=t.ya;r++){if(0<n)for(o=0;o<t.Ha;o++)-1!==a[r*(t.Ha+1)+o]&&-1!==a[r*(t.Ha+1)+o+1]&&a[r*(t.Ha+1)+o]!==a[r*(t.Ha+1)+o+1]&&(e[a[r*(t.Ha+1)+o]*t.Ld+a[r*(t.Ha+1)+o+1]]=!0);if(0>n)for(o=t.Ha;0<o;o--)-1!==a[r*(t.Ha+1)+o]&&-1!==a[r*(t.Ha+1)+o-1]&&a[r*(t.Ha+1)+o]!==a[r*(t.Ha+1)+o-1]&&(e[a[r*(t.Ha+1)+o]*t.Ld+a[r*(t.Ha+1)+o-1]]=!0)}for(a=[],r=0;r<t.Ld;r++)a[r]=!0;for((o=[]).push(0);0!==o.length;)if(h=o[o.length-1],o.pop(),a[h])for(a[h]=!1,r=0;r<t.Ld;r++)e[h*t.Ld+r]&&o.splice(0,0,r);if(0<n)for(i.reset();i.next();)a[(t=i.value).component]&&--t.column;if(0>n)for(i.reset();i.next();)a[(n=i.value).component]&&(n.column+=1)}function hg(t,e){return 270===t.L?e?De:Ee:90===t.L?e?Ee:De:180===t.L?e?ze:Ge:e?Ge:ze}function lg(t,e){var n=t.fc[e];if(n>=t.qe.length){for(var i=[],a=0;a<t.qe.length;a++)i[a]=t.qe[a];t.qe=i}for(void 0===t.qe[n]||null===t.qe[n]?i=[]:(i=t.qe[n],t.qe[n]=null),t=t.Ao[e],e=0;e<t.length;e++)i[(n=t[e]).index]=n;return i}function ug(t,e,n){t.qe[t.fc[e]]=n}Yc.className="CircularLayout",Yc.ConstantSpacing=Qc,Yc.ConstantDistance=tf,Yc.ConstantAngle=ef,Yc.Packed=nf,Yc.Clockwise=af,Yc.Counterclockwise=rf,Yc.BidirectionalLeft=of,Yc.BidirectionalRight=sf,Yc.Forwards=hf,Yc.Reverse=lf,Yc.Ascending=uf,Yc.Descending=df,Yc.Optimized=cf,Yc.Pythagorean=ff,Yc.Circular=gf,pf.prototype.compare=function(t,e){if(0<t&&0>this.am||Math.abs(t)<Math.abs(this.am)&&!(0>t&&0<this.am))for(this.am=t,this.vk=[],this.Am=[],t=0;t<e.length;t++)this.vk[t]=e[t].bounds.x,this.Am[t]=e[t].bounds.y},pf.prototype.commit=function(t){if(null!==this.vk&&null!==this.Am)for(var e=0;e<this.vk.length;e++){var n=t.N(e);n.x=this.vk[e],n.y=this.Am[e]}},pf.className="VertexArrangement",d(mf,Ld),mf.prototype.createVertex=function(){return new vf(this)},mf.prototype.createEdge=function(){return new wf(this)},mf.className="CircularNetwork",d(vf,Cd),c.Object.defineProperties(vf.prototype,{diameter:{get:function(){return this.fj},set:function(t){this.fj!==t&&(this.fj=t)}},actualAngle:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t)}}}),vf.className="CircularVertex",d(wf,Bd),wf.className="CircularEdge",d(Sf,bd),Sf.prototype.cloneProtected=function(t){bd.prototype.cloneProtected.call(this,t),t.wd.assign(this.wd),t.Qm=this.Qm,t.$e=this.$e,t.Xc=this.Xc,t.ql=this.ql,t.Bn=this.Bn,t.Lf=this.Lf,t.uo=this.uo,t.Uo=this.Uo,t.Qk=this.Qk,t.Pk=this.Pk,t.Nk=this.Nk,t.Ok=this.Ok,t.on=this.on,t.nn=this.nn},Sf.prototype.createNetwork=function(){return new Tf(this)},Sf.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),t=this.maxIterations,0<this.network.vertexes.count){this.network.Sp();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Iu(),this.Zn=0,this.needsClusterLayout()){for(n=(e=this.network).Kx().iterator;n.next();){this.network=n.value;for(var i=this.network.vertexes.iterator;i.next();){var a=i.value;a.td=a.vertexes.count,a.Bh=1,a.Vj=null,a.He=null}Pf(this,0,t)}this.network=e,n.reset(),i=this.arrangementSpacing;for(var r=n.count,o=!0,s=a=0,h=C(),l=0;l<r+e.vertexes.count+2;l++)h[l]=null;r=0,n.reset();for(var u=Et.alloc();n.next();)if(l=n.value,this.computeBounds(l,u),o)o=!1,a=u.x+u.width/2,s=u.y+u.height/2,h[0]=new ft(u.x+u.width+i.width,u.y),h[1]=new ft(u.x,u.y+u.height+i.height),r=2;else{var d=xf(h,r,a,s,u.width,u.height,i),c=h[d],f=new ft(c.x+u.width+i.width,c.y),g=new ft(c.x,c.y+u.height+i.height);for(d+1<r&&h.splice(d+1,0,null),h[d]=f,h[d+1]=g,r++,d=c.x-u.x,c=c.y-u.y,l=l.vertexes.iterator;l.next();)(f=l.value).centerX+=d,f.centerY+=c}for(Et.free(u),l=e.vertexes.iterator;l.next();)f=(o=l.value).bounds,2>r?(a=f.x+f.width/2,s=f.y+f.height/2,h[0]=new ft(f.x+f.width+i.width,f.y),h[1]=new ft(f.x,f.y+f.height+i.height),r=2):(d=new ft((c=h[u=xf(h,r,a,s,f.width,f.height,i)]).x+f.width+i.width,c.y),f=new ft(c.x,c.y+f.height+i.height),u+1<r&&h.splice(u+1,0,null),h[u]=d,h[u+1]=f,r++,o.centerX=c.x+o.width/2,o.centerY=c.y+o.height/2);for(F(h),n.reset();n.next();){for(a=(i=n.value).vertexes.iterator;a.next();)e.th(a.value);for(i=i.edges.iterator;i.next();)e.Pj(i.value)}}Lf(this,t),this.updateParts()}this.ql=t,this.network=null,this.isValidLayout=!0},Sf.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Ic(n)&&2<++t)return!0;if(10<e)break;e++}return!1},Sf.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Jc(i.bounds)}return e},Sf.prototype.Iu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Sf.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Yu();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var i=this.network.Ki(n);null===i&&(i=this.network.Rl(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var a=i.destinationEdges;a.next();){var r=a.value;if(r.toVertex===t){n=r;break}}if(null===n)for(a=i.sourceEdges;a.next();)if((r=a.value).fromVertex===t){n=r;break}null===n&&(n=this.network.gk(t,i,null)),n.length=this.defaultCommentSpringLength}}},Sf.prototype.moveFixedVertex=function(){},Sf.prototype.commitLayout=function(){this.Kv(),this.commitNodes(),this.isRouting&&this.commitLinks()},Sf.prototype.Kv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Fe,e.toSpot=Fe)}},Sf.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=Et.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,Et.free(n)}n=Et.alloc();for(var i=this.network.vertexes.iterator;i.next();){var a=i.value;0===t&&0===e||(n.assign(a.bounds),n.x+=t,n.y+=e,a.bounds=n),a.commit()}Et.free(n)},Sf.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Sf.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Qk:t},Sf.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Pk:t},Sf.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Nk:t},Sf.prototype.electricalFieldX=function(){return 0},Sf.prototype.electricalFieldY=function(){return 0},Sf.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Ok:t},Sf.prototype.gravitationalFieldX=function(){return 0},Sf.prototype.gravitationalFieldY=function(){return 0},Sf.prototype.isFixed=function(t){return t.isFixed},c.Object.defineProperties(Sf.prototype,{currentIteration:{get:function(){return this.Zn}},arrangementSpacing:{get:function(){return this.wd},set:function(t){this.wd.A(t)||(this.wd.assign(t),this.B())}},arrangesToOrigin:{get:function(){return this.Qm},set:function(t){this.Qm!==t&&(this.Qm=t,this.B())}},setsPortSpots:{get:function(){return this.$e},set:function(t){this.$e!==t&&(this.$e=t,this.B())}},comments:{get:function(){return this.Xc},set:function(t){this.Xc!==t&&(this.Xc=t,this.B())}},maxIterations:{get:function(){return this.ql},set:function(t){this.ql!==t&&0<=t&&(this.ql=t,this.B())}},epsilonDistance:{get:function(){return this.Bn},set:function(t){this.Bn!==t&&0<t&&(this.Bn=t,this.B())}},infinityDistance:{get:function(){return this.Lf},set:function(t){this.Lf!==t&&1<t&&(this.Lf=t,this.B())}},moveLimit:{get:function(){return this.uo},set:function(t){this.uo!==t&&1<t&&(this.uo=t,this.B())}},randomNumberGenerator:{get:function(){return this.Uo},set:function(t){this.Uo!==t&&(null!==t&&"function"!=typeof t.random&&w('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Uo=t)}},defaultSpringStiffness:{get:function(){return this.Qk},set:function(t){this.Qk!==t&&(this.Qk=t,this.B())}},defaultSpringLength:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t,this.B())}},defaultElectricalCharge:{get:function(){return this.Nk},set:function(t){this.Nk!==t&&(this.Nk=t,this.B())}},defaultGravitationalMass:{get:function(){return this.Ok},set:function(t){this.Ok!==t&&(this.Ok=t,this.B())}},defaultCommentSpringLength:{get:function(){return this.on},set:function(t){this.on!==t&&(this.on=t,this.B())}},defaultCommentElectricalCharge:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.B())}}}),Sf.className="ForceDirectedLayout",Nf.className="ForceDirectedSubnet",d(Tf,Ld),Tf.prototype.createVertex=function(){return new Cf(this)},Tf.prototype.createEdge=function(){return new Ff(this)},Tf.className="ForceDirectedNetwork",d(Cf,Cd),c.Object.defineProperties(Cf.prototype,{isFixed:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},charge:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t)}},mass:{get:function(){return this.Ub},set:function(t){this.Ub!==t&&(this.Ub=t)}},forceX:{get:function(){return this.ba},set:function(t){this.ba!==t&&(this.ba=t)}},forceY:{get:function(){return this.La},set:function(t){this.La!==t&&(this.La=t)}}}),Cf.className="ForceDirectedVertex",d(Ff,Bd),c.Object.defineProperties(Ff.prototype,{stiffness:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),Ff.className="ForceDirectedEdge",Bf.prototype.random=function(){var t=this.seed%this.Q*this.Mx-this.seed/this.Q*this.Qx;return this.seed=0<t?t:t+this.Ox,this.seed*this.Nx},Bf.className="RandomNumberGenerator",d(Of,bd),Of.prototype.cloneProtected=function(t){bd.prototype.cloneProtected.call(this,t),t.ke=this.ke,t.Wb=this.Wb,t.L=this.L,t.Lk=this.Lk,t.ll=this.ll,t.bl=this.bl,t.qj=this.qj,t.xk=this.xk,t.bg=this.bg,t.$e=this.$e,t.eo=this.eo},Of.prototype.fb=function(t){t.classType===Of?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:w("Unknown enum value: "+t):bd.prototype.fb.call(this,t)},Of.prototype.createNetwork=function(){return new kg(this)},Of.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Pr=-1,this.od=this.po=0,this.Ao=this.yo=this.vj=null,t=0;t<this.qe.length;t++)this.qe[t]=null;if(0<this.network.vertexes.count){for(this.network.Sp(),this.cycleRemoveOption!==fg&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ya=-1,this.assignLayers(),t.reset();t.next();)this.ya=Math.max(this.ya,t.value.layer);this.cycleRemoveOption===fg&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){var a=(i=e[n]).fromVertex,r=i.toVertex;if(!i.valid&&(null!==a.node&&null!==r.node||a.layer!==r.layer)){var o=0,s=0,h=0,l=0;if(null!==i.link){if(null===(s=i.link))continue;var u=a.node;if(o=r.node,null===u||null===o)continue;var d=s.fromNode;h=s.toNode;var c=s.fromPort;if(s=s.toPort,i.rev){l=d;var f=c;d=h,c=s,h=l,s=f}var g=a.focus;l=r.focus;var p=i.rev?r.bounds:a.bounds;f=ft.alloc(),u!==d?p.o()&&d.isVisible()?d.actualBounds.o()?(d.qf(c,ue,f),f.x+=d.actualBounds.x-p.x,f.y+=d.actualBounds.y-p.y):(d.qf(c,ue,f),f.o()||f.assign(g)):f.assign(g):p.o()?(d.qf(c,ue,f),f.o()||f.assign(g)):f.assign(g),d=i.rev?a.bounds:r.bounds,u=ft.alloc(),o!==h?d.o()&&h.isVisible()?h.actualBounds.o()?(h.qf(s,ue,u),u.x+=h.actualBounds.x-d.x,u.y+=h.actualBounds.y-d.y):(h.qf(s,ue,u),u.o()||u.assign(l)):u.assign(l):d.o()?(h.qf(s,ue,u),u.o()||u.assign(l)):u.assign(l),90===this.L||270===this.L?(o=Math.round((f.x-g.x)/this.Wb),h=f.x,s=Math.round((u.x-l.x)/this.Wb),l=u.x):(o=Math.round((f.y-g.y)/this.Wb),h=f.y,s=Math.round((u.y-l.y)/this.Wb),l=u.y),ft.free(f),ft.free(u),i.portFromColOffset=o,i.portFromPos=h,i.portToColOffset=s,i.portToPos=l}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(f=a.layer,u=r.layer,d=0,null!==(p=i.link)){var m=p.fromPort,v=p.toPort;if(null!==m&&null!==v){var y=p.fromNode;if(c=p.toNode,null!==y&&null!==c){var w=hg(this,!0),S=hg(this,!1),P=this.setsPortSpots?w:p.computeSpot(!0,m);g=this.setsPortSpots?S:p.computeSpot(!1,v);var b=p.isOrthogonal;P.sf()&&P.rf(S)&&g.sf()&&g.rf(w)?d=0:(w=p.getLinkPoint(y,m,P,!0,b,c,v,ft.alloc()),S=p.getLinkDirection(y,m,w,P,!0,b,c,v),ft.free(w),P.dt()||S!==Jf(this,i,!0)?this.setsPortSpots&&null!==y&&1===y.ports.count&&i.rev&&(d+=1):d+=1,P=p.getLinkPoint(c,v,g,!1,b,y,m,ft.alloc()),p=p.getLinkDirection(c,v,P,g,!1,b,y,m),ft.free(P),g.dt()||p!==Jf(this,i,!1)?this.setsPortSpots&&null!==c&&1===c.ports.count&&i.rev&&(d+=2):d+=2)}}}if(d=1===(c=d)||3===c,(c=2===c||3===c)&&((g=t.createVertex()).node=null,g.Qj=1,g.layer=f,g.near=a,t.th(g),(a=t.gk(a,g,i.link)).valid=!1,a.rev=i.rev,a.portFromColOffset=o,a.portToColOffset=0,a.portFromPos=h,a.portToPos=0,a=g),p=1,d&&p--,f-u>p&&0<f){for(i.valid=!1,(g=t.createVertex()).node=null,g.Qj=2,g.layer=f-1,t.th(g),(a=t.gk(a,g,i.link)).valid=!0,a.rev=i.rev,a.portFromColOffset=c?0:o,a.portToColOffset=0,a.portFromPos=c?0:h,a.portToPos=0,a=g,f--;f-u>p&&0<f;)(g=t.createVertex()).node=null,g.Qj=3,g.layer=f-1,t.th(g),(a=t.gk(a,g,i.link)).valid=!0,a.rev=i.rev,a.portFromColOffset=0,a.portToColOffset=0,a.portFromPos=0,a.portToPos=0,a=g,f--;(a=t.gk(g,r,i.link)).valid=!d,d&&(g.near=r),a.rev=i.rev,a.portFromColOffset=0,a.portToColOffset=s,a.portFromPos=0,a.portToPos=l}else i.valid=!0}}for(t=this.fc=[],e=0;e<=this.ya;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Pr=-1,n=this.od=this.po=0;n<=this.ya;n++)t[n]>t[this.od]&&(this.Pr=t[n]-1,this.od=n),t[n]<t[this.po]&&(this.po=n);for(this.Ao=[],n=0;n<t.length;n++)this.Ao[n]=[];for(e.reset();e.next();)t=e.value,this.Ao[t.layer][t.index]=t;for(this.Ha=-1,t=0;t<=this.ya;t++){for(e=lg(this,t),n=0,i=this.fc[t],r=0;r<i;r++)a=e[r],n+=this.nodeMinColumnSpace(a,!0),a.column=n,n+=1,n+=this.nodeMinColumnSpace(a,!1);this.Ha=Math.max(this.Ha,n-1),ug(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Of.prototype.linkMinLength=function(){return 1},Of.prototype.nodeMinLayerSpace=function(t,e){return null===t.node?0:90===this.L||270===this.L?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Of.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node)return 0;var n=e?t.rv:t.qv;return null!==n?n:90===(n=this.L)||270===n?e?t.rv=t.focus.x/this.Wb+1|0:t.qv=(t.bounds.width-t.focus.x)/this.Wb+1|0:e?t.rv=t.focus.y/this.Wb+1|0:t.qv=(t.bounds.height-t.focus.y)/this.Wb+1|0},Of.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ya;e++)for(var n=zf(this,e,1),i=this.fc[e],a=0;a<i;a++)for(var r=a;r<i;r++)t+=n[a*i+r];return t},Of.prototype.normalize=function(){var t=1/0;this.Ha=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ha=Math.max(this.Ha,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ha-=t},Of.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Lk){default:case cg:var e=0,n=(t=this.network).vertexes.count-1,i=[];i.length=n+1;for(var a=t.vertexes.iterator;a.next();)a.value.valid=!0;for(;null!==Vf(t);){for(a=Yf(t);null!==a;)i[n]=a,n--,a.valid=!1,a=Yf(t);for(a=Hf(t);null!==a;)i[e]=a,e++,a.valid=!1,a=Hf(t);a=null;for(var r=0,o=this.network.vertexes.iterator;o.next();){var s=o.value;if(s.valid){for(var h=0,l=s.destinationEdges;l.next();)l.value.toVertex.valid&&h++;l=0;for(var u=s.sourceEdges;u.next();)u.value.fromVertex.valid&&l++;(null===a||r<h-l)&&(a=s,r=h-l)}}null!==a&&(i[e]=a,e++,a.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.index>e.toVertex.index&&(t.sm(e),e.rev=!0);break;case dg:for(i=this.network.vertexes.iterator;i.next();)(t=i.value).Xl=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.zo=0,i.reset();i.next();)0===(e=i.value).sourceEdges.count&&Xf(this,e);for(i.reset();i.next();)-1===(e=i.value).Xl&&Xf(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,r=(a=i.toVertex).finish,a.Xl<e.Xl&&n<r&&(this.network.sm(i),i.rev=!0));break;case fg:for(e=(t=this.network).vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(1/0>i){if(0>i)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)void 0===(a=i[(n=e.value).layer])?i[n.layer]=[n]:a.push(n);for(n=e=0;n<i.length;n++)if((a=i[n])&&0!==a.length){if(0<n)for(r=0;r<a.length;r++)a[r].layer-=e}else e++;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.layer<e.toVertex.layer&&(t.sm(e),e.rev=!0)}}},Of.prototype.assignLayers=function(){switch(this.ll){case pg:Uf(this);break;case mg:for(var t,e=this.network.vertexes.iterator;e.next();)t=Wf(this,e.value),this.ya=Math.max(t,this.ya);for(e.reset();e.next();)(t=e.value).layer=this.ya-t.layer;break;default:case gg:for(Uf(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&Kf(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ya=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ya=Math.max(this.ya,n.layer)}}},Of.prototype.initializeIndices=function(){switch(this.bl){default:case wg:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.fc[n],this.fc[n]++}break;case vg:for(t=this.network.vertexes.iterator,e=this.ya;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&Zf(this,n);break;case yg:for(t=this.network.vertexes.iterator,e=0;e<=this.ya;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&$f(this,n)}},Of.prototype.reduceCrossings=function(){var t,e,n,i,a,r=this.countCrossings(),o=jf(this);for(t=0;t<this.qj;t++){for(e=0;e<=this.ya;e++)Qf(this,e,1),tg(this,e,1);var s=this.countCrossings();for(s<r&&(r=s,o=jf(this)),e=this.ya;0<=e;e--)Qf(this,e,-1),tg(this,e,-1);(s=this.countCrossings())<r&&(r=s,o=jf(this))}for(Df(this,o),t=0;t<this.qj;t++){for(e=0;e<=this.ya;e++)Qf(this,e,0),tg(this,e,0);for((s=this.countCrossings())<r&&(r=s,o=jf(this)),e=this.ya;0<=e;e--)Qf(this,e,0),tg(this,e,0);(s=this.countCrossings())<r&&(r=s,o=jf(this))}switch(Df(this,o),this.xk){case Sg:break;case bg:for(a=r+1;(e=this.countCrossings())<a;)for(a=e,t=this.ya;0<=t;t--)for(i=0;i<=t;i++){for(n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,-1)||n;for((s=this.countCrossings())>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,1)||n;for((s=this.countCrossings())>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,1)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,-1)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,0)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,0)||n;s>=r?Df(this,o):(r=s,o=jf(this))}break;default:case Pg:for(t=this.ya,i=0,a=r+1;(e=this.countCrossings())<a;){for(a=e,n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,-1)||n;for((s=this.countCrossings())>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,1)||n;for((s=this.countCrossings())>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,1)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,-1)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=t;e>=i;e--)n=tg(this,e,0)||n;for(s>=r?Df(this,o):(r=s,o=jf(this)),n=!0;n;)for(n=!1,e=i;e<=t;e++)n=tg(this,e,0)||n;s>=r?Df(this,o):(r=s,o=jf(this))}}Df(this,o)},Of.prototype.straightenAndPack=function(){var t=0!=(1&this.bg),e=7===this.bg;if(1e3<this.network.edges.count&&!e&&(t=!1),t){var n=[];for(e=0;e<=this.ya;e++)n[e]=0;for(var i,a=this.network.vertexes.iterator;a.next();){var r=a.value;e=r.layer,i=r.column,r=this.nodeMinColumnSpace(r,!1),n[e]=Math.max(n[e],i+r)}for(a.reset();a.next();)e=(r=a.value).layer,i=r.column,r.column=(8*(this.Ha-n[e])>>1)+8*i;this.Ha*=8}if(0!=(2&this.bg))for(n=!0;n;){for(n=!1,e=this.od+1;e<=this.ya;e++)n=eg(this,e,1)||n;for(e=this.od-1;0<=e;e--)n=eg(this,e,-1)||n;n=eg(this,this.od,0)||n}if(0!=(4&this.bg)){for(e=this.od+1;e<=this.ya;e++)ig(this,e,1);for(e=this.od-1;0<=e;e--)ig(this,e,-1);ig(this,this.od,0)}if(t&&(og(this,-1),og(this,1)),0!=(2&this.bg))for(n=!0;n;){for(n=!1,n=eg(this,this.od,0)||n,e=this.od+1;e<=this.ya;e++)n=eg(this,e,0)||n;for(e=this.od-1;0<=e;e--)n=eg(this,e,0)||n}},Of.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=hg(this,!0),e=hg(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;null!==i&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.Nu(),this.isRouting&&this.commitLinks()},Of.prototype.commitNodes=function(){this.Gd=[],this.md=[],this.ld=[],this.Ka=[];for(var t=0;t<=this.ya;t++)this.Gd[t]=0,this.md[t]=0,this.ld[t]=0,this.Ka[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Gd[n]=Math.max(this.Gd[n],this.nodeMinLayerSpace(e,!0)),this.md[n]=Math.max(this.md[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.ke;for(var i=0;i<=this.ya;i++){var a=n;0>=this.Gd[i]+this.md[i]&&(a=0),0<i&&(e+=a/2),90===this.L||0===this.L?(e+=this.md[i],this.ld[i]=e,e+=this.Gd[i]):(e+=this.Gd[i],this.ld[i]=e,e+=this.md[i]),i<this.ya&&(e+=a/2),this.Ka[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.ya;i++)270===this.L?this.ld[i]=e.y+this.ld[i]:90===this.L?(this.ld[i]=e.y+n-this.ld[i],this.Ka[i]=n-this.Ka[i]):180===this.L?this.ld[i]=e.x+this.ld[i]:(this.ld[i]=e.x+n-this.ld[i],this.Ka[i]=n-this.Ka[i]);for(t.reset(),n=i=1/0;t.next();){var r=(a=t.value).layer,o=0|a.column;if(270===this.L||90===this.L){var s=e.x+this.Wb*o;r=this.ld[r]}else s=this.ld[r],r=e.y+this.Wb*o;a.centerX=s,a.centerY=r,i=Math.min(a.x,i),n=Math.min(a.y,n)}for(i=e.x-i,e=e.y-n,this.iw=new ft(i,e),t.reset();t.next();)(n=t.value).x+=i,n.y+=e,n.commit()},Of.prototype.Nu=function(){for(var t=0,e=this.ke,n=0;n<=this.ya;n++)t+=this.Gd[n],t+=this.md[n];t+=this.ya*e,e=[],n=this.Wb*this.Ha;for(var i=this.maxLayer;0<=i;i--)270===this.L?0===i?e.push(new Et(0,0,n,Math.abs(this.Ka[0]))):e.push(new Et(0,this.Ka[i-1],n,Math.abs(this.Ka[i-1]-this.Ka[i]))):90===this.L?0===i?e.push(new Et(0,this.Ka[0],n,Math.abs(this.Ka[0]-t))):e.push(new Et(0,this.Ka[i],n,Math.abs(this.Ka[i-1]-this.Ka[i]))):180===this.L?0===i?e.push(new Et(0,0,Math.abs(this.Ka[0]),n)):e.push(new Et(this.Ka[i-1],0,Math.abs(this.Ka[i-1]-this.Ka[i]),n)):0===i?e.push(new Et(this.Ka[0],0,Math.abs(this.Ka[0]-t),n)):e.push(new Et(this.Ka[i],0,Math.abs(this.Ka[i-1]-this.Ka[i]),n));this.commitLayers(e,this.iw)},Of.prototype.commitLayers=function(){},Of.prototype.commitLinks=function(){for(var t,e=this.network.edges.iterator;e.next();)null!==(t=e.value.link)&&(t.Ch(),t.Uj(),t.mf());for(e.reset();e.next();)null!==(t=e.value.link)&&t.Zi();for(e.reset();e.next();){var n=e.value;if(null!==(t=n.link)){t.Ch();var i=t,a=i.fromNode,r=i.toNode,o=i.fromPort,s=i.toPort;if(null!==a){var h=a.findVisibleNode();null!==h&&h!==a&&(a=h,o=h.port)}if(null!==r){var l=r.findVisibleNode();null!==l&&l!==r&&(r=l,s=l.port)}var u=t.computeSpot(!0,o),d=t.computeSpot(!1,s),c=n.fromVertex,f=n.toVertex;if(n.valid){if(t.curve===Yu&&4===t.pointsCount)if(c.column===f.column){var g=t.getLinkPoint(a,o,u,!0,!1,r,s),p=t.getLinkPoint(r,s,d,!1,!1,a,o);g.o()||g.set(a.actualBounds.center),p.o()||p.set(r.actualBounds.center),t.Uj(),t.lf(g.x,g.y),t.lf((2*g.x+p.x)/3,(2*g.y+p.y)/3),t.lf((g.x+2*p.x)/3,(g.y+2*p.y)/3),t.lf(p.x,p.y)}else{var m=!1,v=!1;if(null!==o&&u===re&&(m=!0),null!==s&&d===re&&(v=!0),m||v){var y=t.i(0).x,w=t.i(0).y,S=t.i(3).x,P=t.i(3).y;if(m){if(90===this.L||270===this.L)var b=y,x=(w+P)/2;else b=(y+S)/2,x=w;t.M(1,b,x);var k=t.getLinkPoint(a,o,u,!0,!1,r,s);k.o()||k.set(a.actualBounds.center),t.M(0,k.x,k.y)}if(v){if(90===this.L||270===this.L)var L=S,M=(w+P)/2;else L=(y+S)/2,M=P;t.M(2,L,M);var N=t.getLinkPoint(r,s,d,!1,!1,a,o);N.o()||N.set(r.actualBounds.center),t.M(3,N.x,N.y)}}}t.mf()}else if(c.layer===f.layer)t.mf();else{var T,C=!1,F=!1,B=t.firstPickIndex+1;if(t.isOrthogonal){F=!0;var O=t.pointsCount;4<O&&t.points.removeRange(2,O-3)}else if(t.curve===Yu)C=!0,4<(O=t.pointsCount)&&t.points.removeRange(2,O-3),4===O&&(B=2);else{O=t.pointsCount;var A=u===re,j=d===re;2<O&&A&&j?t.points.removeRange(1,O-2):3<O&&A&&!j?t.points.removeRange(1,O-3):3<O&&!A&&j?t.points.removeRange(2,O-2):4<O&&!A&&!j&&t.points.removeRange(2,O-3)}if(n.rev){for(var D;null!==f&&c!==f;){for(var z=T=null,G=f.sourceEdges.iterator;G.next();){var E=G.value;if(E.link===n.link&&(T=E.fromVertex,z=E.toVertex,null===T.node))break}if(T!==c){var R=t.i(B-1).x,I=t.i(B-1).y,_=T.centerX,V=T.centerY;if(F)if(180===this.L||0===this.L){if(B===t.firstPickIndex+1)t.m(B++,R,I),t.m(B++,R,V);else if((null!==z?z.centerY:I)!==V){var Y=this.Ka[T.layer-1];t.m(B++,Y,I),t.m(B++,Y,V)}}else B===t.firstPickIndex+1?(t.m(B++,R,I),t.m(B++,_,I)):(null!==z?z.centerX:R)!==_&&(Y=this.Ka[T.layer-1],t.m(B++,R,Y),t.m(B++,_,Y));else if(B===t.firstPickIndex+1){var H=Math.max(10,this.Gd[f.layer]),X=Math.max(10,this.md[f.layer]);if(C)180===this.L?_<=f.bounds.x?(D=f.bounds.x,t.m(B++,D-H,V),t.m(B++,D,V),t.m(B++,D+X,V)):(t.m(B++,_-H,V),t.m(B++,_,V),t.m(B++,_+X,V)):90===this.L?V>=f.bounds.bottom?(D=f.bounds.y+f.bounds.height,t.m(B++,_,D+X),t.m(B++,_,D),t.m(B++,_,D-H)):(t.m(B++,_,V+X),t.m(B++,_,V),t.m(B++,_,V-H)):270===this.L?V<=f.bounds.y?(D=f.bounds.y,t.m(B++,_,D-H),t.m(B++,_,D),t.m(B++,_,D+X)):(t.m(B++,_,V-H),t.m(B++,_,V),t.m(B++,_,V+X)):0===this.L&&(_>=f.bounds.right?(D=f.bounds.x+f.bounds.width,t.m(B++,D+X,V),t.m(B++,D,V),t.m(B++,D-H,V)):(t.m(B++,_+X,V),t.m(B++,_,V),t.m(B++,_-H,V)));else{t.m(B++,R,I);var U=0;180===this.L||0===this.L?((180===this.L?_>=f.bounds.right:_<=f.bounds.x)&&(U=(0===this.L?-H:X)/2),t.m(B++,R+U,V)):((270===this.L?V>=f.bounds.bottom:V<=f.bounds.y)&&(U=(90===this.L?-H:X)/2),t.m(B++,_,I+U)),t.m(B++,_,V)}}else H=Math.max(10,this.Gd[T.layer]),X=Math.max(10,this.md[T.layer]),180===this.L?(C&&t.m(B++,_-H,V),t.m(B++,_,V),C&&t.m(B++,_+X,V)):90===this.L?(C&&t.m(B++,_,V+X),t.m(B++,_,V),C&&t.m(B++,_,V-H)):270===this.L?(C&&t.m(B++,_,V-H),t.m(B++,_,V),C&&t.m(B++,_,V+X)):(C&&t.m(B++,_+X,V),t.m(B++,_,V),C&&t.m(B++,_-H,V))}f=T}if(null===s||u!==re||F)if(R=t.i(B-1).x,I=t.i(B-1).y,_=t.i(B).x,V=t.i(B).y,F){var q=this.md[c.layer];if(180===this.L||0===this.L){var W=I;W>=c.bounds.y&&W<=c.bounds.bottom&&(180===this.L?_>=c.bounds.x:_<=c.bounds.right)&&(D=c.centerX+(180===this.L?-q:q),W=W<c.bounds.y+c.bounds.height/2?c.bounds.y-this.Wb/2:c.bounds.bottom+this.Wb/2,t.m(B++,D,I),t.m(B++,D,W)),t.m(B++,_,W)}else(W=R)>=c.bounds.x&&W<=c.bounds.right&&(270===this.L?V>=c.bounds.y:V<=c.bounds.bottom)&&(D=c.centerY+(270===this.L?-q:q),W=W<c.bounds.x+c.bounds.width/2?c.bounds.x-this.Wb/2:c.bounds.right+this.Wb/2,t.m(B++,R,D),t.m(B++,W,D)),t.m(B++,W,V);t.m(B++,_,V)}else if(C)H=Math.max(10,this.Gd[c.layer]),X=Math.max(10,this.md[c.layer]),180===this.L&&_>=c.bounds.x?(D=c.bounds.x+c.bounds.width,t.M(B-2,D,I),t.M(B-1,D+X,I)):90===this.L&&V<=c.bounds.bottom?(D=c.bounds.y,t.M(B-2,R,D),t.M(B-1,R,D-H)):270===this.L&&V>=c.bounds.y?(D=c.bounds.y+c.bounds.height,t.M(B-2,R,D),t.M(B-1,R,D+X)):0===this.L&&_<=c.bounds.right&&(D=c.bounds.x,t.M(B-2,D,I),t.M(B-1,D-H,I));else{H=Math.max(10,this.Gd[c.layer]),X=Math.max(10,this.md[c.layer]);var K=0;180===this.L||0===this.L?((180===this.L?_<=c.bounds.x:_>=c.bounds.right)&&(K=(0===this.L?X:-H)/2),t.m(B++,_+K,I)):((270===this.L?V<=c.bounds.y:V>=c.bounds.bottom)&&(K=(90===this.L?X:-H)/2),t.m(B++,R,V+K)),t.m(B++,_,V)}}else{for(;null!==c&&c!==f;){z=T=null;for(var J=c.destinationEdges.iterator;J.next();){var Z=J.value;if(Z.link===n.link&&(T=Z.toVertex,null!==(z=Z.fromVertex).node&&(z=null),null===T.node))break}T!==f&&(R=t.i(B-1).x,I=t.i(B-1).y,_=T.centerX,V=T.centerY,F?180===this.L||0===this.L?(null!==z?z.centerY:I)!==V&&(Y=this.Ka[T.layer],B===t.firstPickIndex+1&&(Y=0===this.L?Math.max(Y,R):Math.min(Y,R)),t.m(B++,Y,I),t.m(B++,Y,V)):(null!==z?z.centerX:R)!==_&&(Y=this.Ka[T.layer],B===t.firstPickIndex+1&&(Y=90===this.L?Math.max(Y,I):Math.min(Y,I)),t.m(B++,R,Y),t.m(B++,_,Y)):(H=Math.max(10,this.Gd[T.layer]),X=Math.max(10,this.md[T.layer]),180===this.L?(t.m(B++,_+X,V),C&&t.m(B++,_,V),t.m(B++,_-H,V)):90===this.L?(t.m(B++,_,V-H),C&&t.m(B++,_,V),t.m(B++,_,V+X)):270===this.L?(t.m(B++,_,V+X),C&&t.m(B++,_,V),t.m(B++,_,V-H)):(t.m(B++,_-H,V),C&&t.m(B++,_,V),t.m(B++,_+X,V)))),c=T}F&&(R=t.i(B-1).x,I=t.i(B-1).y,_=t.i(B).x,V=t.i(B).y,180===this.L||0===this.L?I!==V&&(Y=0===this.L?Math.min(Math.max((_+R)/2,this.Ka[f.layer]),_):Math.max(Math.min((_+R)/2,this.Ka[f.layer]),_),t.m(B++,Y,I),t.m(B++,Y,V)):R!==_&&(Y=90===this.L?Math.min(Math.max((V+I)/2,this.Ka[f.layer]),V):Math.max(Math.min((V+I)/2,this.Ka[f.layer]),V),t.m(B++,R,Y),t.m(B++,_,Y)))}if(null!==i&&C){if(null!==o){if(u===re){var $=t.i(0),Q=t.i(2);$.A(Q)||t.M(1,($.x+Q.x)/2,($.y+Q.y)/2)}var et=t.getLinkPoint(a,o,re,!0,!1,r,s);et.o()||et.set(a.actualBounds.center),t.M(0,et.x,et.y)}if(null!==s){if(d===re){var nt=t.i(t.pointsCount-1),it=t.i(t.pointsCount-3);nt.A(it)||t.M(t.pointsCount-2,(nt.x+it.x)/2,(nt.y+it.y)/2)}var at=t.getLinkPoint(r,s,re,!1,!1,a,o);at.o()||at.set(r.actualBounds.center),t.M(t.pointsCount-1,at.x,at.y)}}t.mf(),n.commit()}}}for(var rt=new tt,ot=this.network.edges.iterator;ot.next();){var st=ot.value.link;null!==st&&st.isOrthogonal&&!rt.contains(st)&&rt.add(st)}if(0<rt.count)if(90===this.L||270===this.L){for(var ht,lt,ut=[],dt=rt.iterator;dt.next();){var ct=dt.value;if(null!==ct&&ct.isOrthogonal)for(var ft=2;ft<ct.pointsCount-3;ft++)if(ht=ct.i(ft),lt=ct.i(ft+1),this.w(ht.y,lt.y)&&!this.w(ht.x,lt.x)){var gt=new xg;gt.layer=Math.floor(ht.y/2);var pt=ct.i(0),mt=ct.i(ct.pointsCount-1);if(gt.first=pt.x*pt.x+pt.y,gt.Sb=mt.x*mt.x+mt.y,gt.Sc=Math.min(ht.x,lt.x),gt.sc=Math.max(ht.x,lt.x),gt.index=ft,gt.link=ct,ft+2<ct.pointsCount){var vt=ct.i(ft-1),yt=ct.i(ft+2),wt=0;vt.y<ht.y?wt=yt.y<ht.y?3:ht.x<lt.x?2:1:vt.y>ht.y&&(wt=yt.y>ht.y?0:lt.x<ht.x?2:1),gt.l=wt}ut.push(gt)}}if(1<ut.length){ut.sort(this.Bx);for(var St=0;St<ut.length;){for(var Pt=ut[St].layer,bt=St+1;bt<ut.length&&ut[bt].layer===Pt;)bt++;if(1<bt-St)for(var xt=St;xt<bt;){for(var kt=ut[xt].sc,Lt=St+1;Lt<bt&&ut[Lt].Sc<kt;)kt=Math.max(kt,ut[Lt].sc),Lt++;var Mt=Lt-xt;if(1<Mt){this.Wi(ut,this.rt,xt,xt+Mt);for(var Nt=1,Tt=ut[xt].Sb,Ct=xt;Ct<Lt;Ct++){var Ft=ut[Ct];Ft.Sb!==Tt&&(Nt++,Tt=Ft.Sb)}this.Wi(ut,this.Ax,xt,xt+Mt);var Bt=1;Tt=ut[xt].first;for(var Ot=xt;Ot<Lt;Ot++){var At=ut[Ot];At.first!==Tt&&(Bt++,Tt=At.first)}var jt=!0,Dt=Bt;Nt<Bt?(jt=!1,Dt=Nt,Tt=ut[xt].Sb,this.Wi(ut,this.rt,xt,xt+Mt)):Tt=ut[xt].first;for(var zt=0,Gt=xt;Gt<Lt;Gt++){var Et=ut[Gt];(jt?Et.first:Et.Sb)!==Tt&&(zt++,Tt=jt?Et.first:Et.Sb);var Rt=Et.link;ht=Rt.i(Et.index),lt=Rt.i(Et.index+1);var It=this.linkSpacing*(zt-(Dt-1)/2);Rt.Ch(),Rt.M(Et.index,ht.x,ht.y+It),Rt.M(Et.index+1,lt.x,lt.y+It),Rt.mf()}}xt=Lt}St=bt}}}else{for(var _t,Vt,Yt=[],Ht=rt.iterator;Ht.next();){var Xt=Ht.value;if(null!==Xt&&Xt.isOrthogonal)for(var Ut=2;Ut<Xt.pointsCount-3;Ut++)if(_t=Xt.i(Ut),Vt=Xt.i(Ut+1),this.w(_t.x,Vt.x)&&!this.w(_t.y,Vt.y)){var qt=new xg;qt.layer=Math.floor(_t.x/2);var Wt=Xt.i(0),Kt=Xt.i(Xt.pointsCount-1);if(qt.first=Wt.x+Wt.y*Wt.y,qt.Sb=Kt.x+Kt.y*Kt.y,qt.Sc=Math.min(_t.y,Vt.y),qt.sc=Math.max(_t.y,Vt.y),qt.index=Ut,qt.link=Xt,Ut+2<Xt.pointsCount){var Jt=Xt.i(Ut-1),Zt=Xt.i(Ut+2),$t=0;Jt.x<_t.x?$t=Zt.x<_t.x?3:_t.y<Vt.y?2:1:Jt.x>_t.x&&($t=Zt.x>_t.x?0:Vt.y<_t.y?2:1),qt.l=$t}Yt.push(qt)}}if(1<Yt.length){Yt.sort(this.Bx);for(var Qt=0;Qt<Yt.length;){for(var te=Yt[Qt].layer,ee=Qt+1;ee<Yt.length&&Yt[ee].layer===te;)ee++;if(1<ee-Qt)for(var ne=Qt;ne<ee;){for(var ie=Yt[ne].sc,ae=Qt+1;ae<ee&&Yt[ae].Sc<ie;)ie=Math.max(ie,Yt[ae].sc),ae++;var oe=ae-ne;if(1<oe){this.Wi(Yt,this.rt,ne,ne+oe);for(var se=1,he=Yt[ne].Sb,le=ne;le<ae;le++){var ue=Yt[le];ue.Sb!==he&&(se++,he=ue.Sb)}this.Wi(Yt,this.Ax,ne,ne+oe);var de=1;he=Yt[ne].first;for(var ce=ne;ce<ae;ce++){var fe=Yt[ce];fe.first!==he&&(de++,he=fe.first)}var ge=!0,pe=de;se<de?(ge=!1,pe=se,he=Yt[ne].Sb,this.Wi(Yt,this.rt,ne,ne+oe)):he=Yt[ne].first;for(var me=0,ve=ne;ve<ae;ve++){var ye=Yt[ve];(ge?ye.first:ye.Sb)!==he&&(me++,he=ge?ye.first:ye.Sb);var we=ye.link;_t=we.i(ye.index),Vt=we.i(ye.index+1);var Se=this.linkSpacing*(me-(pe-1)/2);we.Ch(),we.M(ye.index,_t.x+Se,_t.y),we.M(ye.index+1,Vt.x+Se,Vt.y),we.mf()}}ne=ae}Qt=ee}}}},(n=Of.prototype).Bx=function(t,e){return t instanceof xg&&e instanceof xg&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.Sc<e.Sc?-1:t.Sc>e.Sc?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},n.Ax=function(t,e){return t instanceof xg&&e instanceof xg&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.Sc<e.Sc?-1:t.Sc>e.Sc?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},n.rt=function(t,e){return t instanceof xg&&e instanceof xg&&t!==e?t.Sb<e.Sb?-1:t.Sb>e.Sb||t.l<e.l?1:t.l>e.l||t.Sc<e.Sc?-1:t.Sc>e.Sc?1:t.sc<e.sc?-1:t.sc>e.sc?1:0:0},n.w=function(t,e){return-1<(t-=e)&&1>t},n.Wi=function(t,e,n,i){var a=t.length,r=i-n;if(!(1>=r))if((0>n||n>=a-1)&&w("not in range 0 <= from < length: "+n),2===r)0<e(i=t[n],a=t[n+1])&&(t[n]=a,t[n+1]=i);else if(0===n)if(i>=a)t.sort(e);else for((n=t.slice(0,i)).sort(e),e=0;e<i;e++)t[e]=n[e];else if(i>=a)for((i=t.slice(n)).sort(e),e=n;e<a;e++)t[e]=i[e-n];else for((a=t.slice(n,i)).sort(e),e=n;e<i;e++)t[e]=a[e-n]},c.Object.defineProperties(Of.prototype,{layerSpacing:{get:function(){return this.ke},set:function(t){this.ke!==t&&0<=t&&(this.ke=t,this.B())}},columnSpacing:{get:function(){return this.Wb},set:function(t){this.Wb!==t&&0<t&&(this.Wb=t,this.B())}},direction:{get:function(){return this.L},set:function(t){this.L!==t&&(0===t||90===t||180===t||270===t?(this.L=t,this.B()):w("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Lk},set:function(t){this.Lk===t||t!==cg&&t!==dg&&t!==fg||(this.Lk=t,this.B())}},layeringOption:{get:function(){return this.ll},set:function(t){this.ll===t||t!==gg&&t!==pg&&t!==mg||(this.ll=t,this.B())}},initializeOption:{get:function(){return this.bl},set:function(t){this.bl===t||t!==vg&&t!==yg&&t!==wg||(this.bl=t,this.B())}},iterations:{get:function(){return this.qj},set:function(t){this.qj!==t&&0<=t&&(this.qj=t,this.B())}},aggressiveOption:{get:function(){return this.xk},set:function(t){this.xk===t||t!==Sg&&t!==Pg&&t!==bg||(this.xk=t,this.B())}},packOption:{get:function(){return this.bg},set:function(t){this.bg!==t&&0<=t&&8>t&&(this.bg=t,this.B())}},setsPortSpots:{get:function(){return this.$e},set:function(t){this.$e!==t&&(this.$e=t,this.B())}},linkSpacing:{get:function(){return this.eo},set:function(t){this.eo!==t&&0<=t&&(this.eo=t,this.B())}},maxLayer:{get:function(){return this.ya}},maxIndex:{get:function(){return this.Pr}},maxColumn:{get:function(){return this.Ha}},minIndexLayer:{get:function(){return this.po}},maxIndexLayer:{get:function(){return this.od}}});var dg=new X(Of,"CycleDepthFirst",0),cg=new X(Of,"CycleGreedy",1),fg=new X(Of,"CycleFromLayers",2),gg=new X(Of,"LayerOptimalLinkLength",0),pg=new X(Of,"LayerLongestPathSink",1),mg=new X(Of,"LayerLongestPathSource",2),vg=new X(Of,"InitDepthFirstOut",0),yg=new X(Of,"InitDepthFirstIn",1),wg=new X(Of,"InitNaive",2),Sg=new X(Of,"AggressiveNone",0),Pg=new X(Of,"AggressiveLess",1),bg=new X(Of,"AggressiveMore",2);function xg(){this.index=this.sc=this.Sc=this.Sb=this.first=this.layer=0,this.link=null,this.l=0}function kg(t){Ld.call(this,t)}function Lg(t){Cd.call(this,t),this.Sa=this.Fg=this.gi=-1,this.K=NaN,this.ba=null,this.valid=!1,this.finish=this.Xl=NaN,this.Qj=0,this.qv=this.rv=null}function Mg(t){Bd.call(this,t),this.l=this.Ma=this.Ub=!1,this.La=this.K=NaN,this.ba=this.u=0}function Ng(){bd.call(this),this.Fb=new nt,this.Oo=ap,this.Zc=rp,this.Fp=Pp,this.Nr=Tp,this.hw=[],this.Xc=!0,this.Ab=Lp,this.wd=new jt(10,10).freeze();var t=new Bp(this);this.U=new Op(t),this.V=new Op(t),this.xu=[]}function Tg(t){var e=new nt;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function Cg(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var a=e.value;switch(t.Zc){case rp:a.sourceEdges.count<n&&(n=a.sourceEdges.count,i=a);break;case op:a.destinationEdges.count<n&&(n=a.destinationEdges.count,i=a);break;default:w("Unhandled path value "+t.Zc.toString())}}return i}function Fg(t,e){if(null!==e){switch(t.Zc){case rp:if(0<e.destinationEdges.count){for(var n=new tt,i=e.destinationVertexes;i.next();){var a=i.value;Bg(t,e,a)&&n.add(a)}0<n.count&&(e.children=n.Na())}break;case op:if(0<e.sourceEdges.count){for(n=new tt,i=e.sourceVertexes;i.next();)Bg(t,e,a=i.value)&&n.add(a);0<n.count&&(e.children=n.Na())}break;default:w("Unhandled path value"+t.Zc.toString())}for(i=(n=e.children).length,a=0;a<i;a++){var r=n[a];r.initialized=!0,r.level=e.level+1,r.parent=e,t.Fb.remove(r)}for(e=0;e<i;e++)Fg(t,n[e])}}function Bg(t,e,n){if(n.initialized){if(null===e)var i=!1;else{for(i=e.parent;null!==i&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function Og(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===mp&&t.sortTreeVertexChildren(e);for(var n=0,i=e.childrenCount,a=0,r=e.children,o=r.length,s=0;s<o;s++){var h=r[s];Og(t,h),n+=h.descendantCount+1,i=Math.max(i,h.maxChildrenCount),a=Math.max(a,h.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=i,e.maxGenerationCount=0<i?a+1:0}}function Ag(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,i=0;i<n;i++)Ag(t,e[i])}}function jg(t,e){if(null!==e){e.alignment!==mp&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,i=0;i<n;i++)jg(t,e[i])}}function Dg(t){return t===pp||t===mp||t===vp||t===yp}function zg(t){return t===pp||t===mp}function Gg(t){var e=t.parent;if(null!==e){var n=e.alignment;if(Dg(n)){if(zg(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return 0==n%2}if(n===vp)return!0}}return!1}function Eg(t,e){if(0===e.childrenCount){var n=!1,i=0;null!==e.parent&&(i=e.parent.angle,n=Dg(n=e.parent.alignment));var a=Gg(e);e.T.h(0,0),e.ua.h(e.width,e.height),null===e.parent||null===e.comments||(180!==i&&270!==i||n)&&!a?e.ia.h(0,0):180===i&&!n||(90===i||270===i)&&a?e.ia.h(e.width-2*e.focus.x,0):e.ia.h(0,e.height-2*e.focus.y)}else{n=90===(i=ep(e))||270===i;for(var r=0,o=(a=e.children).length,s=0;s<o;s++){var h=a[s];r=Math.max(r,n?h.ua.width:h.ua.height)}var l=e.alignment,u=l===fp,d=l===gp;s=Dg(l);var c=Math.max(0,e.breadthLimit);h=np(e);var f=e.nodeSpacing,g=ip(e),p=u||d?0:g/2,m=e.rowSpacing,v=0;(u||d||e.tm||e.um&&1===e.maxGenerationCount)&&(v=Math.max(0,e.rowIndent)),u=e.width;var y=e.height,S=0,P=0,b=0,x=0,k=0,L=0,M=0,N=0,T=0;if(s&&!zg(l)&&135<i&&a.reverse(),zg(l))if(1<o)for(var C=0;C<o;C++){var F=a[C],B=F.ua;0==C%2&&C!==o-1&&(T=Math.max(T,(n?B.width:B.height)+_g(F)-f))}else 1===o&&(T=n?a[0].ua.width:a[0].ua.height);if(s)switch(l){case pp:case mp:T=(P=135>i?Rg(e,a,T,S,P):Ig(e,a,T,S,P)).x,S=P.width,P=P.height;break;case vp:for(t=0;t<o;t++)p=(c=a[t]).ua,b=0===M?0:m,n?(c.T.h(r-p.width,k+b),S=Math.max(S,p.width),P=Math.max(P,k+b+p.height),k+=b+p.height):(c.T.h(x+b,r-p.height),S=Math.max(S,x+b+p.width),P=Math.max(P,p.height),x+=b+p.width),M++;break;case yp:for(r=0;r<o;r++)c=(t=a[r]).ua,p=0===M?0:m,n?(t.T.h(f/2+e.focus.x,k+p),S=Math.max(S,c.width),P=Math.max(P,k+p+c.height),k+=p+c.height):(t.T.h(x+p,f/2+e.focus.y),S=Math.max(S,x+p+c.width),P=Math.max(P,c.height),x+=p+c.width),M++}else for(C=0;C<o;C++){if(B=(F=a[C]).ua,n){0<c&&0<M&&x+f+B.width>c&&(x<r&&Ug(e,l,r-x,0,N,C-1),L++,M=0,N=C,b=P,x=0,k=135<i?-P-m:P+m);var O=0===M?p:f;Wg(t,F,0,k),F.T.h(x+O,k),S=Math.max(S,x+O+B.width),P=Math.max(P,b+(0===L?0:m)+B.height),x+=O+B.width}else 0<c&&0<M&&k+f+B.height>c&&(k<r&&Ug(e,l,0,r-k,N,C-1),L++,M=0,N=C,b=S,k=0,x=135<i?-S-m:S+m),O=0===M?p:f,Wg(t,F,x,0),F.T.h(x,k+O),P=Math.max(P,k+O+B.height),S=Math.max(S,b+(0===L?0:m)+B.width),k+=O+B.height;M++}switch(0<L&&(n?(P+=Math.max(0,h),x<S&&Ug(e,l,S-x,0,N,o-1),0<v&&(d||qg(e,v,0,0,o-1),S+=v)):(S+=Math.max(0,h),k<P&&Ug(e,l,0,P-k,N,o-1),0<v&&(d||qg(e,0,v,0,o-1),P+=v))),v=d=0,l){case dp:n?d+=S/2-e.focus.x-g/2:v+=P/2-e.focus.y-g/2;break;case cp:0<L?n?d+=S/2-e.focus.x-g/2:v+=P/2-e.focus.y-g/2:n?d+=(l=a[0].T.x+a[0].ia.x)+(a[o-1].T.x+a[o-1].ia.x+2*a[o-1].focus.x-l)/2-e.focus.x-g/2:v+=(l=a[0].T.y+a[0].ia.y)+(a[o-1].T.y+a[o-1].ia.y+2*a[o-1].focus.y-l)/2-e.focus.y-g/2;break;case fp:n?(d-=g,S+=g):(v-=g,P+=g);break;case gp:n?(d+=S-e.width+g,S+=g):(v+=P-e.height+g,P+=g);break;case pp:case mp:n?d+=1<o?T+f/2-e.focus.x:a[0].focus.x-e.focus.x+a[0].ia.x:v+=1<o?T+f/2-e.focus.y:a[0].focus.y-e.focus.y+a[0].ia.y;break;case vp:n?d+=S+f/2-e.focus.x:v+=P+f/2-e.focus.y;break;case yp:break;default:w("Unhandled alignment value "+l.toString())}for(g=0;g<o;g++)l=a[g],n?l.T.h(l.T.x+l.ia.x-d,l.T.y+(135<i?(s?-P:-l.ua.height)+l.ia.y-h:y+h+l.ia.y)):l.T.h(l.T.x+(135<i?(s?-S:-l.ua.width)+l.ia.x-h:u+h+l.ia.x),l.T.y+l.ia.y-v);n?(S=Yg(e,S,d),0>d&&(d=0),135<i&&(v+=P+h),P+=y+h):(135<i&&(d+=S+h),S+=u+h,P=Hg(e,P,v),0>v&&(v=0)),e.ia.h(d,v),e.ua.h(S,P)}}function Rg(t,e,n,i,a){var r=e.length;if(0===r)return new Et(n,0,i,a);if(1===r)return new Et(n,0,i=(t=e[0]).ua.width,a=t.ua.height);for(var o=t.nodeSpacing,s=t.rowSpacing,h=90===ep(t),l=0,u=0,d=0,c=0;c<r;c++)if(!(0!=c%2||1<r&&c===r-1)){var f=e[c],g=f.ua,p=0===l?0:s;if(h){var m=_g(f)-o;f.T.h(n-(g.width+m),d+p),i=Math.max(i,g.width+m),a=Math.max(a,d+p+g.height),d+=p+g.height}else m=_g(f)-o,f.T.h(u+p,n-(g.height+m)),a=Math.max(a,g.height+m),i=Math.max(i,u+p+g.width),u+=p+g.width;l++}for(l=0,f=u,c=d,h?(u=n+o,d=0):(u=0,d=n+o),g=0;g<r;g++)if(0!=g%2){m=(p=e[g]).ua;var v=0===l?0:s;if(h){var y=_g(p)-o;p.T.h(u+y,d+v),i=Math.max(i,u+m.width+y),a=Math.max(a,d+v+m.height),d+=v+m.height}else y=_g(p)-o,p.T.h(u+v,d+y),i=Math.max(i,u+v+m.width),a=Math.max(a,d+m.height+y),u+=v+m.width;l++}return 1<r&&1==r%2&&(r=(e=e[r-1]).ua,s=null===e.parent?0:e.parent.rowSpacing,h?(e.T.h(n+o/2-e.focus.x-e.ia.x,a+s),h=n+o/2-e.focus.x-e.ia.x,i=Math.max(i,h+r.width),0>h&&(i-=h),a=Math.max(a,Math.max(c,d)+s+r.height),0>e.T.x&&(n=Vg(t,e.T.x,!1,n,o))):(e.T.h(i+s,n+o/2-e.focus.y-e.ia.y),i=Math.max(i,Math.max(f,u)+s+r.width),d=n+o/2-e.focus.y-e.ia.y,a=Math.max(a,d+r.height),0>d&&(a-=d),0>e.T.y&&(n=Vg(t,e.T.y,!0,n,o)))),new Et(n,0,i,a)}function Ig(t,e,n,i,a){var r=e.length;if(0===r)return new Et(n,0,i,a);if(1===r)return new Et(n,0,i=(e=e[0]).ua.width,a=e.ua.height);for(var o=t.nodeSpacing,s=t.rowSpacing,h=270===ep(t),l=0,u=0,d=0,c=0;c<r;c++)if(!(0!=c%2||1<r&&c===r-1)){var f=e[c],g=f.ua,p=0===l?0:s;if(h){var m=_g(f)-o;d-=p+g.height,f.T.h(n-(g.width+m),d),i=Math.max(i,g.width+m),a=Math.max(a,Math.abs(d))}else m=_g(f)-o,u-=p+g.width,f.T.h(u,n-(g.height+m)),a=Math.max(a,g.height+m),i=Math.max(i,Math.abs(u));l++}for(l=0,f=u,c=d,h?(u=n+o,d=0):(u=0,d=n+o),g=0;g<r;g++)if(0!=g%2){m=(p=e[g]).ua;var v=0===l?0:s;if(h){var y=_g(p)-o;d-=v+m.height,p.T.h(u+y,d),i=Math.max(i,u+m.width+y),a=Math.max(a,Math.abs(d))}else y=_g(p)-o,u-=v+m.width,p.T.h(u,d+y),a=Math.max(a,d+m.height+y),i=Math.max(i,Math.abs(u));l++}for(1<r&&1==r%2&&(l=(s=e[r-1]).ua,g=null===s.parent?0:s.parent.rowSpacing,h?(s.T.h(n+o/2-s.focus.x-s.ia.x,-a-l.height-g),u=n+o/2-s.focus.x-s.ia.x,i=Math.max(i,u+l.width),0>u&&(i-=u),a=Math.max(a,Math.abs(Math.min(c,d))+g+l.height),0>s.T.x&&(n=Vg(t,s.T.x,!1,n,o))):(s.T.h(-i-l.width-g,n+o/2-s.focus.y-s.ia.y),i=Math.max(i,Math.abs(Math.min(f,u))+g+l.width),d=n+o/2-s.focus.y-s.ia.y,a=Math.max(a,d+l.height),0>d&&(a-=d),0>s.T.y&&(n=Vg(t,s.T.y,!0,n,o)))),t=0;t<r;t++)o=e[t],h?o.T.h(o.T.x,o.T.y+a):o.T.h(o.T.x+i,o.T.y);return new Et(n,0,i,a)}function _g(t){return null===t.parent?0:t.parent.nodeSpacing}function Vg(t,e,n,i,a){for(var r=(t=t.children).length,o=0;o<r;o++)n?t[o].T.h(t[o].T.x,t[o].T.y-e):t[o].T.h(t[o].T.x-e,t[o].T.y);return e=t[r-1],Math.max(i,n?e.ia.y+e.focus.y-a/2:e.ia.x+e.focus.x-a/2)}function Yg(t,e,n){switch(t.alignment){case cp:case dp:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case fp:return t.width>e?t.width:e;case gp:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case pp:case mp:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case vp:return t.width-t.focus.x+t.nodeSpacing/2+e;case yp:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Hg(t,e,n){switch(t.alignment){case cp:case dp:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case fp:return t.height>e?t.height:e;case gp:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case pp:case mp:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case vp:return t.height-t.focus.y+t.nodeSpacing/2+e;case yp:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Xg(t,e,n){switch(t){case dp:case cp:e/=2,n/=2;break;case fp:n=e=0;break;case gp:break;default:w("Unhandled alignment value "+t.toString())}return new ft(e,n)}function Ug(t,e,n,i,a,r){qg(t,(e=Xg(e,n,i)).x,e.y,a,r)}function qg(t,e,n,i,a){if(0!==e||0!==n)for(t=t.children;i<=a;i++){var r=t[i].T;r.x+=e,r.y+=n}}function Wg(t,e,n,i){var a=e.parent;switch(t.Zc){case rp:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===a&&e.relativePoint.h(n,i);break;case op:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===a&&e.relativePoint.h(n,i);break;default:w("Unhandled path value "+t.Zc.toString())}}function Kg(t,e,n){for(var i=0;i<t.length;i++){var a=t[i];a.x+=e,a.y+=n}}function Jg(t,e,n,i,a,r,o,s){var h=ep(e),l=90===h||270===h,u=e.nodeSpacing;e=i;var d=a;i=r;var c=o,f=n.fq,g=n.rq;o=n.ua;var p=l?Math.max(c,o.height):Math.max(i,o.width);if(null!==f&&h===ep(n)||(f=Zg(t,2),g=Zg(t,2),l?(f[0].h(0,0),f[1].h(0,o.height),g[0].h(o.width,0),g[1].h(g[0].x,f[1].y)):(f[0].h(0,0),f[1].h(o.width,0),g[0].h(0,o.height),g[1].h(f[1].x,g[0].y))),l){if(c=9999999,!(null===d||2>d.length||null===f||2>f.length))for(a=n=0;n<d.length&&a<f.length;){r=d[n];var m=f[a];h=m.x,l=m.y,h+=i;var v=r;n+1<d.length&&(v=d[n+1]);var y=m;m=y.x,y=y.y,a+1<f.length&&(m=(y=f[a+1]).x,y=y.y,m+=i);var w=c;r.y===l?w=h-r.x:r.y>l&&r.y<y?w=h+(r.y-l)/(y-l)*(m-h)-r.x:l>r.y&&l<v.y&&(w=h-(r.x+(l-r.y)/(v.y-r.y)*(v.x-r.x))),w<c&&(c=w),v.y<=r.y?n++:y<=l?a++:(v.y<=y&&n++,y<=v.y&&a++)}if(c=i-c,n=f,a=c+=u,null===e||2>e.length||null===n||2>n.length)i=null;else{for(u=Zg(t,e.length+n.length),i=r=h=0;r<n.length&&n[r].y<e[0].y;)l=n[r++],u[i++].h(l.x+a,l.y);for(;h<e.length;)l=e[h++],u[i++].h(l.x,l.y);for(h=e[e.length-1].y;r<n.length&&n[r].y<=h;)r++;for(;r<n.length&&n[r].y>h;)l=n[r++],u[i++].h(l.x+a,l.y);for(n=Zg(t,i),h=0;h<i;h++)n[h].assign(u[h]);$g(t,u),i=n}if(r=g,h=c,null===d||2>d.length||null===r||2>r.length)a=null;else{for(u=Zg(t,d.length+r.length),a=l=n=0;n<d.length&&d[n].y<r[0].y;)v=d[n++],u[a++].h(v.x,v.y);for(;l<r.length;)v=r[l++],u[a++].h(v.x+h,v.y);for(r=r[r.length-1].y;n<d.length&&d[n].y<=r;)n++;for(;n<d.length&&d[n].y>r;)h=d[n++],u[a++].h(h.x,h.y);for(r=Zg(t,a),n=0;n<a;n++)r[n].assign(u[n]);$g(t,u),a=r}return r=Math.max(0,c)+o.width,o=p,$g(t,e),$g(t,f),$g(t,d),$g(t,g),s[0]=i,s[1]=a,new Et(c,0,r,o)}if(i=9999999,!(null===d||2>d.length||null===f||2>f.length))for(a=n=0;n<d.length&&a<f.length;)r=d[n],h=(m=f[a]).x,l=m.y,l+=c,v=r,n+1<d.length&&(v=d[n+1]),m=(y=m).x,y=y.y,a+1<f.length&&(m=(y=f[a+1]).x,y=y.y,y+=c),w=i,r.x===h?w=l-r.y:r.x>h&&r.x<m?w=l+(r.x-h)/(m-h)*(y-l)-r.y:h>r.x&&h<v.x&&(w=l-(r.y+(h-r.x)/(v.x-r.x)*(v.y-r.y))),w<i&&(i=w),v.x<=r.x?n++:m<=h?a++:(v.x<=m&&n++,m<=v.x&&a++);if(c-=i,n=f,a=c+=u,null===e||2>e.length||null===n||2>n.length)i=null;else{for(u=Zg(t,e.length+n.length),i=r=h=0;r<n.length&&n[r].x<e[0].x;)l=n[r++],u[i++].h(l.x,l.y+a);for(;h<e.length;)l=e[h++],u[i++].h(l.x,l.y);for(h=e[e.length-1].x;r<n.length&&n[r].x<=h;)r++;for(;r<n.length&&n[r].x>h;)l=n[r++],u[i++].h(l.x,l.y+a);for(n=Zg(t,i),h=0;h<i;h++)n[h].assign(u[h]);$g(t,u),i=n}if(r=g,h=c,null===d||2>d.length||null===r||2>r.length)a=null;else{for(u=Zg(t,d.length+r.length),a=l=n=0;n<d.length&&d[n].x<r[0].x;)v=d[n++],u[a++].h(v.x,v.y);for(;l<r.length;)v=r[l++],u[a++].h(v.x,v.y+h);for(r=r[r.length-1].x;n<d.length&&d[n].x<=r;)n++;for(;n<d.length&&d[n].x>r;)h=d[n++],u[a++].h(h.x,h.y);for(r=Zg(t,a),n=0;n<a;n++)r[n].assign(u[n]);$g(t,u),a=r}return r=p,o=Math.max(0,c)+o.height,$g(t,e),$g(t,f),$g(t,d),$g(t,g),s[0]=i,s[1]=a,new Et(c,0,r,o)}function Zg(t,e){if(void 0!==(t=t.xu[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new ft;return t}function $g(t,e){var n=e.length,i=t.xu[n];void 0===i&&(i=[],t.xu[n]=i),i.push(e)}function Qg(t,e,n,i){if(null!==e){e.x=n,e.y=i;for(var a=(e=e.children).length,r=0;r<a;r++){var o=e[r];Qg(t,o,n+o.T.x,i+o.T.y)}}}function tp(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,i=0;i<n;i++)tp(t,e[i])}}function ep(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function np(t){var e=ep(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var i=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*i:t.width*i}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function ip(t){var e=ep(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var i=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*i:t.height*i}return Math.max(0,n)}Of.className="LayeredDigraphLayout",Of.CycleDepthFirst=dg,Of.CycleGreedy=cg,Of.CycleFromLayers=fg,Of.LayerOptimalLinkLength=gg,Of.LayerLongestPathSink=pg,Of.LayerLongestPathSource=mg,Of.InitDepthFirstOut=vg,Of.InitDepthFirstIn=yg,Of.InitNaive=wg,Of.AggressiveNone=Sg,Of.AggressiveLess=Pg,Of.AggressiveMore=bg,Of.PackNone=0,Of.PackExpand=1,Of.PackStraighten=2,Of.PackMedian=4,Of.PackAll=7,xg.className="SegInfo",d(kg,Ld),kg.prototype.createVertex=function(){return new Lg(this)},kg.prototype.createEdge=function(){return new Mg(this)},kg.className="LayeredDigraphNetwork",d(Lg,Cd),c.Object.defineProperties(Lg.prototype,{layer:{get:function(){return this.gi},set:function(t){this.gi!==t&&(this.gi=t)}},column:{get:function(){return this.Fg},set:function(t){this.Fg!==t&&(this.Fg=t)}},index:{get:function(){return this.Sa},set:function(t){this.Sa!==t&&(this.Sa=t)}},component:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t)}},near:{get:function(){return this.ba},set:function(t){this.ba!==t&&(this.ba=t)}}}),Lg.className="LayeredDigraphVertex",d(Mg,Bd),c.Object.defineProperties(Mg.prototype,{valid:{get:function(){return this.Ub},set:function(t){this.Ub!==t&&(this.Ub=t)}},rev:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.K},set:function(t){this.K!==t&&(this.K=t)}},portToPos:{get:function(){return this.La},set:function(t){this.La!==t&&(this.La=t)}},portFromColOffset:{get:function(){return this.u},set:function(t){this.u!==t&&(this.u=t)}},portToColOffset:{get:function(){return this.ba},set:function(t){this.ba!==t&&(this.ba=t)}}}),Mg.className="LayeredDigraphEdge",d(Ng,bd),Ng.prototype.cloneProtected=function(t){bd.prototype.cloneProtected.call(this,t),t.Oo=this.Oo,t.Fp=this.Fp,t.Nr=this.Nr,t.Xc=this.Xc,t.Ab=this.Ab,t.wd.assign(this.wd),t.U.copyInheritedPropertiesFrom(this.U),t.V.copyInheritedPropertiesFrom(this.V)},Ng.prototype.fb=function(t){t.classType===Ng?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:w("Unknown enum value: "+t):bd.prototype.fb.call(this,t)},Ng.prototype.createNetwork=function(){return new Bp(this)},Ng.prototype.makeNetwork=function(t){function e(t){if(t instanceof eu)return!t.isLinkLabel&&"Comment"!==t.category;if(t instanceof wu){var e=t.fromNode;return null!==e&&!e.isLinkLabel&&"Comment"!==e.category&&(null!==(t=t.toNode)&&!t.isLinkLabel&&"Comment"!==t.category)}return!1}var n=this.createNetwork();return t instanceof va?(n.ng(t.nodes,!0,e),n.ng(t.links,!0,e)):t instanceof pu?n.ng(t.memberParts,!1,e):n.ng(t.iterator,!1,e),n},Ng.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Np&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof va&&(e=t),this.path===ap&&null!==e?this.Zc=e.isTreePathToChildren?rp:op:this.Zc=this.path===ap?rp:this.path,0<this.network.vertexes.count){for(this.network.Sp(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Fb.count){for(t=new nt,e=this.Fb.iterator;e.next();){var n=e.value;n instanceof eu?null!==(n=this.network.Ki(n))&&t.add(n):n instanceof Op&&t.add(n)}this.Fb=t}for(0===this.Fb.count&&this.findRoots(),t=this.Fb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Fg(this,e));for(e=this.network.vertexes,t=null;0<(t=Tg(e)).count;)null!==(e=Cg(this,t))&&this.Fb.add(e),e.initialized=!0,Fg(this,e),e=t;for(t=this.Fb.iterator;t.next();)(e=t.value)instanceof Op&&Og(this,e);for(t=this.Fb.iterator;t.next();)(e=t.value)instanceof Op&&Ag(this,e);for(t=this.Fb.iterator;t.next();)(e=t.value)instanceof Op&&jg(this,e);if(this.Iu(),this.layerStyle===Fp){for(t=[],e=this.network.vertexes.iterator;e.next();){var i=(n=e.value).parent;null===i&&(i=n),i=0===i.angle||180===i.angle;var a=t[n.level];void 0===a&&(a=0),t[n.level]=Math.max(a,i?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.hw=t,e=this.network.vertexes.iterator;e.next();)null===(i=(n=e.value).parent)&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===i.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Cp)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,i=-1,a=0;a<e.children.length;a++){var r=e.children[a];i=Math.max(i,n?r.width:r.height)}if(0<=i)for(a=0;a<e.children.length;a++)r=e.children[a],n?(180===e.angle&&(r.focusX+=i-r.width),r.width=i):(270===e.angle&&(r.focusY+=i-r.height),r.height=i)}for(t=this.Fb.iterator;t.next();)(e=t.value)instanceof Op&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Fb=new nt,this.isValidLayout=!0},Ng.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.Zc){case rp:0===n.sourceEdges.count&&this.Fb.add(n);break;case op:0===n.destinationEdges.count&&this.Fb.add(n);break;default:w("Unhandled path value "+this.Zc.toString())}}0===this.Fb.count&&(null!==(t=Cg(this,t))&&this.Fb.add(t))},Ng.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,i=0,a=0;a<n.length;a++)n[a]===e&&i++;if(0<i){i=Array(n.length-i);for(var r=a=0;r<n.length;r++)n[r]!==e&&(i[a++]=n[r]);t.children=i}}},Ng.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function(t,e){switch(t.Fp){default:case Pp:return null!==e.parent?e.parent:t.U;case kp:return null===e.parent?t.U:null===e.parent.parent?t.V:e.parent;case xp:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.V:t.U;case bp:var n=!0;if(0===e.childrenCount)n=!1;else for(var i=e.children,a=i.length,r=0;r<a;r++)if(0<i[r].childrenCount){n=!1;break}return n&&null!==e.parent?t.V:null!==e.parent?e.parent:t.U}}(this,t)),null!==t.parent&&t.parent.alignment===mp){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;0==i%2?i!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Ng.prototype.assignTreeVertexValues=function(){},Ng.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case sp:break;case hp:t.children.reverse();break;case lp:t.children.sort(t.comparer);break;case up:t.children.sort(t.comparer),t.children.reverse();break;default:w("Unhandled sorting value "+t.sorting.toString())}},Ng.prototype.Iu=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ng.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,a=!1;null!==n&&(i=n.angle,a=Dg(a=n.alignment)),e=90===e||270===e,i=90===i||270===i,n=0===t.childrenCount;var r=0,o=0,s=0,h=t.commentSpacing;if(null!==t.node)for(var l=t.node.Yu();l.next();){var u=l.value;"Comment"===u.category&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.$b(),u=u.measuredBounds,e&&!n||!a&&!i&&n||a&&i&&n?(r=Math.max(r,u.width),o+=u.height+Math.abs(s)):(r+=u.width+Math.abs(s),o=Math.max(o,u.height)),s=h)}null!==t.comments&&(e&&!n||!a&&!i&&n||a&&i&&n?(r+=Math.abs(t.commentMargin),o=Math.max(0,o-t.height)):(o+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),a=Et.allocAt(0,0,t.bounds.width+r,t.bounds.height+o),t.bounds=a,Et.free(a))},Ng.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,i=t.angle,a=0,r=!1;null!==n&&(a=n.angle,r=Dg(r=n.alignment)),i=90===i||270===i,n=90===a||270===a;for(var o=0===t.childrenCount,s=Gg(t),h=0,l=t.comments,u=l.length,d=ft.alloc(),c=0;c<u;c++){var f=l[c],g=f.measuredBounds;if(i&&!o||!r&&!n&&o||r&&n&&o){if(135<a&&!r||n&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-g.width,t.bounds.y+h),f.move(d),f=f.sd();f.next();){var p=f.value;p.fromSpot=ze,p.toSpot=Ge}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+h),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=Ge,p.toSpot=ze;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+h),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=Ge,p.toSpot=ze;else for(d.h(t.bounds.x+t.commentMargin-g.width,t.bounds.y+h),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=ze,p.toSpot=Ge;h=0<=t.commentSpacing?h+(g.height+t.commentSpacing):h+(t.commentSpacing-g.height)}else{if(135<a&&!r||!n&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x+h,t.bounds.y-t.commentMargin-g.height),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=De,p.toSpot=Ee;else for(d.h(t.bounds.x+h,t.bounds.y+2*t.focus.y-t.commentMargin),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=Ee,p.toSpot=De;else if(0<=t.commentMargin)for(d.h(t.bounds.x+h,t.bounds.y+2*t.focus.y+t.commentMargin),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=Ee,p.toSpot=De;else for(d.h(t.bounds.x+h,t.bounds.y+t.commentMargin-g.height),f.move(d),f=f.sd();f.next();)(p=f.value).fromSpot=De,p.toSpot=Ee;h=0<=t.commentSpacing?h+(g.width+t.commentSpacing):h+(t.commentSpacing-g.width)}}if(ft.free(d),e=h-t.commentSpacing-(i?e.height:e.width),this.Zc===rp)for(t=t.destinationEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.toEndSegmentLength=0<e?e:NaN)}},Ng.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,i=0;i<n;i++)this.layoutTree(e[i]);switch(t.compaction){case wp:Eg(this,t);break;case Sp:if(t.alignment===mp)Eg(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(i=t.parent)&&(e=i.angle,n=Dg(n=i.alignment)),i=Gg(t),t.T.h(0,0),t.ua.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!i?t.ia.h(0,0):180===e&&!n||(90===e||270===e)&&i?t.ia.h(t.width-2*t.focus.x,0):t.ia.h(0,t.height-2*t.focus.y),t.fq=null,t.rq=null;else{var a=ep(t);e=90===a||270===a;var r=0,o=t.children,s=o.length;for(n=0;n<s;n++)i=o[n],r=Math.max(r,e?i.ua.width:i.ua.height);var h=t.alignment,l=h===gp,u=Dg(h),d=Math.max(0,t.breadthLimit);n=np(t);var c=t.nodeSpacing,f=ip(t),g=t.rowSpacing,p=0;(h===fp||l||t.tm||t.um&&1===t.maxGenerationCount)&&(p=Math.max(0,t.rowIndent)),i=t.width;var m=t.height,v=0,y=0,S=0,P=null,b=null,x=0,k=0,L=0,M=0,N=0,T=0,B=0,O=0;if(u&&!zg(h)&&135<a&&o.reverse(),zg(h))if(1<s)for(var A=0;A<s;A++)0==A%2&&A!==s-1&&(O=Math.max(O,e?o[A].ua.width:o[A].ua.height));else 1===s&&(O=e?o[0].ua.width:o[0].ua.height);if(u){switch(h){case pp:O=(y=135>a?Rg(t,o,O,v,y):Ig(t,o,O,v,y)).x,v=y.width,y=y.height;break;case vp:for(P=0;P<s;P++)d=(b=o[P]).ua,S=0===T?0:g,e?(b.T.h(r-d.width,M+S),v=Math.max(v,d.width),y=Math.max(y,M+S+d.height),M+=S+d.height):(b.T.h(L+S,r-d.height),v=Math.max(v,L+S+d.width),y=Math.max(y,d.height),L+=S+d.width),T++;break;case yp:for(P=0;P<s;P++)r=(b=o[P]).ua,d=0===T?0:g,e?(b.T.h(c/2+t.focus.x,M+d),v=Math.max(v,r.width),y=Math.max(y,M+d+r.height),M+=d+r.height):(b.T.h(L+d,c/2+t.focus.y),v=Math.max(v,L+d+r.width),y=Math.max(y,r.height),L+=d+r.width),T++}P=Zg(this,2),b=Zg(this,2),e?(P[0].h(0,0),P[1].h(0,y),b[0].h(v,0)):(P[0].h(0,0),P[1].h(v,0),b[0].h(0,y)),b[1].h(v,y)}else for(A=0;A<s;A++){var j=o[A],D=j.ua;if(e){0<d&&0<T&&L+c+D.width>d&&(L<r&&Ug(t,h,r-L,0,B,A-1),N++,T=0,B=A,S=y,L=0,M=135<a?-y-g:y+g),Wg(this,j,0,M);var z=0;if(0===T)P=j.fq,b=j.rq,x=D.width,k=D.height,(null===P||null===b||a!==ep(j))&&(P=Zg(this,2),b=Zg(this,2),P[0].h(0,0),P[1].h(0,k),b[0].h(x,0),b[1].h(x,k));else{var G=C();z=(k=Jg(this,t,j,P,b,x,k,G)).x,P=G[0],b=G[1],x=k.width,k=k.height,F(G),L<D.width&&0>z&&(qg(t,-z,0,B,A-1),Kg(P,-z,0),Kg(b,-z,0),z=0)}j.T.h(z,M),v=Math.max(v,x),y=Math.max(y,S+(0===N?0:g)+D.height),L=x}else 0<d&&0<T&&M+c+D.height>d&&(M<r&&Ug(t,h,0,r-M,B,A-1),N++,T=0,B=A,S=v,M=0,L=135<a?-v-g:v+g),Wg(this,j,L,0),z=0,0===T?(P=j.fq,b=j.rq,x=D.width,k=D.height,(null===P||null===b||a!==ep(j))&&(P=Zg(this,2),b=Zg(this,2),P[0].h(0,0),P[1].h(x,0),b[0].h(0,k),b[1].h(x,k))):(z=(k=Jg(this,t,j,P,b,x,k,G=C())).x,P=G[0],b=G[1],x=k.width,k=k.height,F(G),M<D.height&&0>z&&(qg(t,0,-z,B,A-1),Kg(P,0,-z),Kg(b,0,-z),z=0)),j.T.h(L,z),y=Math.max(y,k),v=Math.max(v,S+(0===N?0:g)+D.width),M=k;T++}switch(0<N&&(e?(y+=Math.max(0,n),L<v&&Ug(t,h,v-L,0,B,s-1),0<p&&(l||qg(t,p,0,0,s-1),v+=p)):(v+=Math.max(0,n),M<y&&Ug(t,h,0,y-M,B,s-1),0<p&&(l||qg(t,0,p,0,s-1),y+=p))),p=l=0,h){case dp:e?l+=v/2-t.focus.x-f/2:p+=y/2-t.focus.y-f/2;break;case cp:0<N?e?l+=v/2-t.focus.x-f/2:p+=y/2-t.focus.y-f/2:e?l+=(O=o[0].T.x+o[0].ia.x)+(o[s-1].T.x+o[s-1].ia.x+2*o[s-1].focus.x-O)/2-t.focus.x-f/2:p+=(O=o[0].T.y+o[0].ia.y)+(o[s-1].T.y+o[s-1].ia.y+2*o[s-1].focus.y-O)/2-t.focus.y-f/2;break;case fp:e?(l-=f,v+=f):(p-=f,y+=f);break;case gp:e?(l+=v-t.width+f,v+=f):(p+=y-t.height+f,y+=f);break;case pp:e?l+=1<s?O+c/2-t.focus.x:o[0].focus.x-t.focus.x+o[0].ia.x:p+=1<s?O+c/2-t.focus.y:o[0].focus.y-t.focus.y+o[0].ia.y;break;case vp:e?l+=v+c/2-t.focus.x:p+=y+c/2-t.focus.y;break;case yp:break;default:w("Unhandled alignment value "+h.toString())}for(f=0;f<s;f++)O=o[f],e?O.T.h(O.T.x+O.ia.x-l,O.T.y+(135<a?(u?-y:-O.ua.height)+O.ia.y-n:m+n+O.ia.y)):O.T.h(O.T.x+(135<a?(u?-v:-O.ua.width)+O.ia.x-n:i+n+O.ia.x),O.T.y+O.ia.y-p);if(s=o=0,u?e?(v=Yg(t,v,l),0>l&&(l=0),135<a&&(p+=y+n),y+=m+n,h===yp&&(o+=c/2+t.focus.x),s+=m+n):(135<a&&(l+=v+n),v+=i+n,y=Hg(t,y,p),0>p&&(p=0),h===yp&&(s+=c/2+t.focus.y),o+=i+n):e?(null===t.comments?i>v&&(o=(v=Xg(h,i-v,0)).x,s=v.y,v=i,l=0):v=Yg(t,v,l),0>l&&(o-=l,l=0),135<a&&(p+=y+n),y=Math.max(Math.max(y,m),y+m+n),s+=m+n):(135<a&&(l+=v+n),v=Math.max(Math.max(v,i),v+i+n),null===t.comments?m>y&&(o=(y=Xg(h,0,m-y)).x,s=y.y,y=m,p=0):y=Hg(t,y,p),0>p&&(s-=p,p=0),o+=i+n),0<N)a=Zg(this,4),N=Zg(this,4),e?(a[2].h(0,m+n),a[3].h(a[2].x,y),N[2].h(v,a[2].y),N[3].h(N[2].x,a[3].y)):(a[2].h(i+n,0),a[3].h(v,a[2].y),N[2].h(a[2].x,y),N[3].h(a[3].x,N[2].y));else{for(a=Zg(this,P.length+2),N=Zg(this,b.length+2),h=0;h<P.length;h++)u=P[h],a[h+2].h(u.x+o,u.y+s);for(h=0;h<b.length;h++)u=b[h],N[h+2].h(u.x+o,u.y+s)}e?(a[0].h(l,0),a[1].h(a[0].x,m),a[2].y<a[1].y&&(a[2].x>a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x>a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),N[0].h(l+i,0),N[1].h(N[0].x,m),N[2].y<N[1].y&&(N[2].x<N[0].x?N[2].assign(N[1]):N[1].assign(N[2])),N[3].y<N[2].y&&(N[3].x<N[0].x?N[3].assign(N[2]):N[2].assign(N[3])),a[2].y-=n/2,N[2].y-=n/2):(a[0].h(0,p),a[1].h(i,a[0].y),a[2].x<a[1].x&&(a[2].y>a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y>a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),N[0].h(0,p+m),N[1].h(i,N[0].y),N[2].x<N[1].x&&(N[2].y<N[0].y?N[2].assign(N[1]):N[1].assign(N[2])),N[3].x<N[2].x&&(N[3].y<N[0].y?N[3].assign(N[2]):N[2].assign(N[3])),a[2].x-=n/2,N[2].x-=n/2),$g(this,P),$g(this,b),t.fq=a,t.rq=N,t.ia.h(l,p),t.ua.h(v,y)}break;default:w("Unhandled compaction value "+t.compaction.toString())}}},Ng.prototype.arrangeTrees=function(){if(this.Ab===Np)for(var t=this.Fb.iterator;t.next();){var e=t.value;if(e instanceof Op){var n=e.node;if(null!==n){var i=n.position;n=i.x,i=i.y,isFinite(n)||(n=0),isFinite(i)||(i=0),Qg(this,e,n,i)}}}else{for(t=[],e=this.Fb.iterator;e.next();)(n=e.value)instanceof Op&&t.push(n);switch(this.sorting){case sp:break;case hp:t.reverse();break;case lp:t.sort(this.comparer);break;case up:t.sort(this.comparer),t.reverse();break;default:w("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,i=0;i<t.length;i++){var a=t[i];switch(Qg(this,a,e+a.ia.x,n+a.ia.y),this.Ab){case Lp:n+=a.ua.height+this.wd.height;break;case Mp:e+=a.ua.width+this.wd.width;break;default:w("Unhandled arrangement value "+this.Ab.toString())}}}},Ng.prototype.commitLayout=function(){this.Kv(),this.commitNodes(),this.Nu(),this.isRouting&&this.commitLinks()},Ng.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Ng.prototype.Nu=function(){if(this.layerStyle===Fp){for(var t=this.hw,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var a=i.value;null===n?n=a.bounds.copy():n.Jc(a.bounds);var r=e[a.level];r=void 0===r?np(a):Math.max(r,np(a)),e[a.level]=r}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);if(90===this.angle||270===this.angle?(n.Uc(this.nodeSpacing/2,this.layerSpacing),i=new ft(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Uc(this.layerSpacing,this.nodeSpacing/2),i=new ft(-this.layerSpacing/2,-this.nodeSpacing/2)),a=[],n=90===this.angle||270===this.angle?n.width:n.height,r=0,180===this.angle||270===this.angle)for(var o=0;o<t.length;o++)r+=t[o]+e[o];for(o=0;o<t.length;o++){var s=t[o]+e[o];270===this.angle?(r-=s,a.push(new Et(0,r,n,s))):90===this.angle?(a.push(new Et(0,r,n,s)),r+=s):180===this.angle?(r-=s,a.push(new Et(r,0,s,n))):(a.push(new Et(r,0,s,n)),r+=s)}this.commitLayers(a,i)}},Ng.prototype.commitLayers=function(){},Ng.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ng.prototype.Kv=function(){for(var t=this.Fb.iterator;t.next();){var e=t.value;e instanceof Op&&tp(this,e)}},Ng.prototype.setPortSpots=function(t){var e=t.alignment;if(Dg(e)){var n=this.Zc===rp,i=ep(t);switch(i){case 0:var a=Ge;break;case 90:a=Ee;break;case 180:a=ze;break;default:a=De}var r=t.children,o=r.length;switch(e){case pp:case mp:for(e=0;e<o;e++){var s=r[e];if(null!==(s=(n?s.sourceEdges:s.destinationEdges).first())&&null!==(s=s.link)){var h=90===i||270===i?ze:De;if(1===o||e===o-1&&1==o%2)switch(i){case 0:h=ze;break;case 90:h=De;break;case 180:h=Ge;break;default:h=Ee}else 0==e%2&&(h=90===i||270===i?Ge:Ee);n?(t.setsPortSpot&&(s.fromSpot=a),t.setsChildPortSpot&&(s.toSpot=h)):(t.setsPortSpot&&(s.fromSpot=h),t.setsChildPortSpot&&(s.toSpot=a))}}break;case vp:for(i=90===i||270===i?Ge:Ee,r=n?t.destinationEdges:t.sourceEdges;r.next();)null!==(o=r.value.link)&&(n?(t.setsPortSpot&&(o.fromSpot=a),t.setsChildPortSpot&&(o.toSpot=i)):(t.setsPortSpot&&(o.fromSpot=i),t.setsChildPortSpot&&(o.toSpot=a)));break;case yp:for(i=90===i||270===i?ze:De,r=n?t.destinationEdges:t.sourceEdges;r.next();)null!==(o=r.value.link)&&(n?(t.setsPortSpot&&(o.fromSpot=a),t.setsChildPortSpot&&(o.toSpot=i)):(t.setsPortSpot&&(o.fromSpot=i),t.setsChildPortSpot&&(o.toSpot=a)))}}else if(n=ep(t),this.Zc===rp){for(a=t.destinationEdges;a.next();)if(null!==(i=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Kb())switch(n){case 0:i.fromSpot=Ge;break;case 90:i.fromSpot=Ee;break;case 180:i.fromSpot=ze;break;default:i.fromSpot=De}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Kb())switch(n){case 0:i.toSpot=ze;break;case 90:i.toSpot=De;break;case 180:i.toSpot=Ge;break;default:i.toSpot=Ee}else i.toSpot=t.childPortSpot}}else for(a=t.sourceEdges;a.next();)if(null!==(i=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Kb())switch(n){case 0:i.toSpot=Ge;break;case 90:i.toSpot=Ee;break;case 180:i.toSpot=ze;break;default:i.toSpot=De}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Kb())switch(n){case 0:i.fromSpot=ze;break;case 90:i.fromSpot=De;break;case 180:i.fromSpot=Ge;break;default:i.fromSpot=Ee}else i.fromSpot=t.childPortSpot}},c.Object.defineProperties(Ng.prototype,{roots:{get:function(){return this.Fb},set:function(t){this.Fb!==t&&(this.Fb=t,this.B())}},path:{get:function(){return this.Oo},set:function(t){this.Oo!==t&&(this.Oo=t,this.B())}},treeStyle:{get:function(){return this.Fp},set:function(t){this.Ab===t||t!==Pp&&t!==xp&&t!==bp&&t!==kp||(this.Fp=t,this.B())}},layerStyle:{get:function(){return this.Nr},set:function(t){this.Ab===t||t!==Tp&&t!==Cp&&t!==Fp||(this.Nr=t,this.B())}},comments:{get:function(){return this.Xc},set:function(t){this.Xc!==t&&(this.Xc=t,this.B())}},arrangement:{get:function(){return this.Ab},set:function(t){this.Ab===t||t!==Lp&&t!==Mp&&t!==Np||(this.Ab=t,this.B())}},arrangementSpacing:{get:function(){return this.wd},set:function(t){this.wd.A(t)||(this.wd.assign(t),this.B())}},rootDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.B())}},alternateDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.B())}},sorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==sp&&t!==hp&&t!==lp&&!up||(this.U.sorting=t,this.B())}},comparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.B())}},angle:{get:function(){return this.U.angle},set:function(t){this.U.angle!==t&&(0===t||90===t||180===t||270===t?(this.U.angle=t,this.B()):w("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.B())}},nodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.B())}},nodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.U.nodeIndentPastParent=t,this.B())}},nodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.B())}},layerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.B())}},layerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.U.layerSpacingParentOverlap=t,this.B())}},compaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==wp&&t!==Sp||(this.U.compaction=t,this.B())}},breadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.B())}},rowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.B())}},rowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.B())}},commentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.B())}},commentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.B())}},setsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.B())}},portSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.A(t)||(this.U.portSpot=t,this.B())}},setsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.B())}},childPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.A(t)||(this.U.childPortSpot=t,this.B())}},alternateSorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==sp&&t!==hp&&t!==lp&&!up||(this.V.sorting=t,this.B())}},alternateComparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.B())}},alternateAngle:{get:function(){return this.V.angle},set:function(t){this.V.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.V.angle=t,this.B())}},alternateAlignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.B())}},alternateNodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.B())}},alternateNodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.B())}},alternateNodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.B())}},alternateLayerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.B())}},alternateLayerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.B())}},alternateCompaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==wp&&t!==Sp||(this.V.compaction=t,this.B())}},alternateBreadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.B())}},alternateRowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.B())}},alternateRowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.B())}},alternateCommentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.B())}},alternateCommentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.B())}},alternateSetsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.B())}},alternatePortSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.A(t)||(this.V.portSpot=t,this.B())}},alternateSetsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.B())}},alternateChildPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.A(t)||(this.V.childPortSpot=t,this.B())}}});var ap=new X(Ng,"PathDefault",-1),rp=new X(Ng,"PathDestination",0),op=new X(Ng,"PathSource",1),sp=new X(Ng,"SortingForwards",10),hp=new X(Ng,"SortingReverse",11),lp=new X(Ng,"SortingAscending",12),up=new X(Ng,"SortingDescending",13),dp=new X(Ng,"AlignmentCenterSubtrees",20),cp=new X(Ng,"AlignmentCenterChildren",21),fp=new X(Ng,"AlignmentStart",22),gp=new X(Ng,"AlignmentEnd",23),pp=new X(Ng,"AlignmentBus",24),mp=new X(Ng,"AlignmentBusBranching",25),vp=new X(Ng,"AlignmentTopLeftBus",26),yp=new X(Ng,"AlignmentBottomRightBus",27),wp=new X(Ng,"CompactionNone",30),Sp=new X(Ng,"CompactionBlock",31),Pp=new X(Ng,"StyleLayered",40),bp=new X(Ng,"StyleLastParents",41),xp=new X(Ng,"StyleAlternating",42),kp=new X(Ng,"StyleRootOnly",43),Lp=new X(Ng,"ArrangementVertical",50),Mp=new X(Ng,"ArrangementHorizontal",51),Np=new X(Ng,"ArrangementFixedRoots",52),Tp=new X(Ng,"LayerIndividual",60),Cp=new X(Ng,"LayerSiblings",61),Fp=new X(Ng,"LayerUniform",62);function Bp(t){Ld.call(this,t)}function Op(t){Cd.call(this,t),this.La=!1,this.Kc=null,this.K=[],this.Vb=this.Ub=this.ba=this.Ma=0,this.Xc=null,this.T=new ft(0,0),this.ua=new jt(0,0),this.ia=new ft(0,0),this.um=this.tm=this.Pz=!1,this.rq=this.fq=null,this.Qc=sp,this.Mc=Fd,this.zc=0,this.wb=cp,this.Yr=this.Xr=0,this.$r=20,this.ke=50,this.Mr=0,this.Uq=Sp,this.Nq=0,this.ms=25,this.Tq=this.ls=10,this.Sq=20,this.vs=!0,this.hs=Fe,this.us=!0,this.Qq=Fe}function Ap(t){Bd.call(this,t),this.ou=new ft(0,0)}Ng.className="TreeLayout",Ng.PathDefault=ap,Ng.PathDestination=rp,Ng.PathSource=op,Ng.SortingForwards=sp,Ng.SortingReverse=hp,Ng.SortingAscending=lp,Ng.SortingDescending=up,Ng.AlignmentCenterSubtrees=dp,Ng.AlignmentCenterChildren=cp,Ng.AlignmentStart=fp,Ng.AlignmentEnd=gp,Ng.AlignmentBus=pp,Ng.AlignmentBusBranching=mp,Ng.AlignmentTopLeftBus=vp,Ng.AlignmentBottomRightBus=yp,Ng.CompactionNone=wp,Ng.CompactionBlock=Sp,Ng.StyleLayered=Pp,Ng.StyleLastParents=bp,Ng.StyleAlternating=xp,Ng.StyleRootOnly=kp,Ng.ArrangementVertical=Lp,Ng.ArrangementHorizontal=Mp,Ng.ArrangementFixedRoots=Np,Ng.LayerIndividual=Tp,Ng.LayerSiblings=Cp,Ng.LayerUniform=Fp,d(Bp,Ld),Bp.prototype.createVertex=function(){return new Op(this)},Bp.prototype.createEdge=function(){return new Ap(this)},Bp.className="TreeNetwork",d(Op,Cd),Op.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.Qc=t.sorting,this.Mc=t.comparer,this.zc=t.angle,this.wb=t.alignment,this.Xr=t.nodeIndent,this.Yr=t.nodeIndentPastParent,this.$r=t.nodeSpacing,this.ke=t.layerSpacing,this.Mr=t.layerSpacingParentOverlap,this.Uq=t.compaction,this.Nq=t.breadthLimit,this.ms=t.rowSpacing,this.ls=t.rowIndent,this.Tq=t.commentSpacing,this.Sq=t.commentMargin,this.vs=t.setsPortSpot,this.hs=t.portSpot,this.us=t.setsChildPortSpot,this.Qq=t.childPortSpot)},c.Object.defineProperties(Op.prototype,{initialized:{get:function(){return this.La},set:function(t){this.La!==t&&(this.La=t)}},parent:{get:function(){return this.Kc},set:function(t){this.Kc!==t&&(this.Kc=t)}},children:{get:function(){return this.K},set:function(t){if(this.K!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.K=t}}},level:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},descendantCount:{get:function(){return this.ba},set:function(t){this.ba!==t&&(this.ba=t)}},maxChildrenCount:{get:function(){return this.Ub},set:function(t){this.Ub!==t&&(this.Ub=t)}},maxGenerationCount:{get:function(){return this.Vb},set:function(t){this.Vb!==t&&(this.Vb=t)}},comments:{get:function(){return this.Xc},set:function(t){if(this.Xc!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.Xc=t}}},sorting:{get:function(){return this.Qc},set:function(t){this.Qc!==t&&(this.Qc=t)}},comparer:{get:function(){return this.Mc},set:function(t){this.Mc!==t&&(this.Mc=t)}},angle:{get:function(){return this.zc},set:function(t){this.zc!==t&&(this.zc=t)}},alignment:{get:function(){return this.wb},set:function(t){this.wb!==t&&(this.wb=t)}},nodeIndent:{get:function(){return this.Xr},set:function(t){this.Xr!==t&&(this.Xr=t)}},nodeIndentPastParent:{get:function(){return this.Yr},set:function(t){this.Yr!==t&&(this.Yr=t)}},nodeSpacing:{get:function(){return this.$r},set:function(t){this.$r!==t&&(this.$r=t)}},layerSpacing:{get:function(){return this.ke},set:function(t){this.ke!==t&&(this.ke=t)}},layerSpacingParentOverlap:{get:function(){return this.Mr},set:function(t){this.Mr!==t&&(this.Mr=t)}},compaction:{get:function(){return this.Uq},set:function(t){this.Uq!==t&&(this.Uq=t)}},breadthLimit:{get:function(){return this.Nq},set:function(t){this.Nq!==t&&(this.Nq=t)}},rowSpacing:{get:function(){return this.ms},set:function(t){this.ms!==t&&(this.ms=t)}},rowIndent:{get:function(){return this.ls},set:function(t){this.ls!==t&&(this.ls=t)}},commentSpacing:{get:function(){return this.Tq},set:function(t){this.Tq!==t&&(this.Tq=t)}},commentMargin:{get:function(){return this.Sq},set:function(t){this.Sq!==t&&(this.Sq=t)}},setsPortSpot:{get:function(){return this.vs},set:function(t){this.vs!==t&&(this.vs=t)}},portSpot:{get:function(){return this.hs},set:function(t){this.hs.A(t)||(this.hs=t)}},setsChildPortSpot:{get:function(){return this.us},set:function(t){this.us!==t&&(this.us=t)}},childPortSpot:{get:function(){return this.Qq},set:function(t){this.Qq.A(t)||(this.Qq=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.T},set:function(t){this.T.set(t)}},subtreeSize:{get:function(){return this.ua},set:function(t){this.ua.set(t)}},subtreeOffset:{get:function(){return this.ia},set:function(t){this.ia.set(t)}}}),Op.className="TreeVertex",d(Ap,Bd),Ap.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.Zc){case rp:n=this.fromVertex,i=this.toVertex;break;case op:n=this.toVertex,i=this.fromVertex;break;default:w("Unhandled path value "+e.Zc.toString())}if(null!==n&&null!==i)if(0!==(e=this.ou).x||0!==e.y||n.Pz){i=n.bounds;var a=ep(n),r=np(n),o=n.rowSpacing;t.Zi();var s,h=t.curve===Yu,l=t.isOrthogonal;if(t.Ch(),l||h){for(s=2;4<t.pointsCount;)t.Av(2);var u=t.i(1),d=t.i(2)}else{for(s=1;3<t.pointsCount;)t.Av(1);u=t.i(0),d=t.i(t.pointsCount-1)}var c=t.i(t.pointsCount-1);0===a?(n.alignment===gp?(a=i.bottom+e.y,0===e.y&&u.y>c.y+n.rowIndent&&(a=Math.min(a,Math.max(u.y,a-ip(n))))):n.alignment===fp?(a=i.top+e.y,0===e.y&&u.y<c.y-n.rowIndent&&(a=Math.max(a,Math.min(u.y,a+ip(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?i.top-n.ia.y+e.y:i.y+i.height/2+e.y,h?(t.m(s,u.x,a),s++,t.m(s,i.right+r,a),s++,t.m(s,i.right+r+(e.x-o)/3,a),s++,t.m(s,i.right+r+2*(e.x-o)/3,a),s++,t.m(s,i.right+r+(e.x-o),a),s++,t.m(s,d.x,a)):(l&&(t.m(s,i.right+r/2,u.y),s++),t.m(s,i.right+r/2,a),s++,t.m(s,i.right+r+e.x-(l?o/2:o),a),s++,l&&t.m(s,t.i(s-1).x,d.y))):90===a?(n.alignment===gp?(a=i.right+e.x,0===e.x&&u.x>c.x+n.rowIndent&&(a=Math.min(a,Math.max(u.x,a-ip(n))))):n.alignment===fp?(a=i.left+e.x,0===e.x&&u.x<c.x-n.rowIndent&&(a=Math.max(a,Math.min(u.x,a+ip(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?i.left-n.ia.x+e.x:i.x+i.width/2+e.x,h?(t.m(s,a,u.y),s++,t.m(s,a,i.bottom+r),s++,t.m(s,a,i.bottom+r+(e.y-o)/3),s++,t.m(s,a,i.bottom+r+2*(e.y-o)/3),s++,t.m(s,a,i.bottom+r+(e.y-o)),s++,t.m(s,a,d.y)):(l&&(t.m(s,u.x,i.bottom+r/2),s++),t.m(s,a,i.bottom+r/2),s++,t.m(s,a,i.bottom+r+e.y-(l?o/2:o)),s++,l&&t.m(s,d.x,t.i(s-1).y))):180===a?(n.alignment===gp?(a=i.bottom+e.y,0===e.y&&u.y>c.y+n.rowIndent&&(a=Math.min(a,Math.max(u.y,a-ip(n))))):n.alignment===fp?(a=i.top+e.y,0===e.y&&u.y<c.y-n.rowIndent&&(a=Math.max(a,Math.min(u.y,a+ip(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?i.top-n.ia.y+e.y:i.y+i.height/2+e.y,h?(t.m(s,u.x,a),s++,t.m(s,i.left-r,a),s++,t.m(s,i.left-r+(e.x+o)/3,a),s++,t.m(s,i.left-r+2*(e.x+o)/3,a),s++,t.m(s,i.left-r+(e.x+o),a),s++,t.m(s,d.x,a)):(l&&(t.m(s,i.left-r/2,u.y),s++),t.m(s,i.left-r/2,a),s++,t.m(s,i.left-r+e.x+(l?o/2:o),a),s++,l&&t.m(s,t.i(s-1).x,d.y))):270===a?(n.alignment===gp?(a=i.right+e.x,0===e.x&&u.x>c.x+n.rowIndent&&(a=Math.min(a,Math.max(u.x,a-ip(n))))):n.alignment===fp?(a=i.left+e.x,0===e.x&&u.x<c.x-n.rowIndent&&(a=Math.max(a,Math.min(u.x,a+ip(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?i.left-n.ia.x+e.x:i.x+i.width/2+e.x,h?(t.m(s,a,u.y),s++,t.m(s,a,i.top-r),s++,t.m(s,a,i.top-r+(e.y+o)/3),s++,t.m(s,a,i.top-r+2*(e.y+o)/3),s++,t.m(s,a,i.top-r+(e.y+o)),s++,t.m(s,a,d.y)):(l&&(t.m(s,u.x,i.top-r/2),s++),t.m(s,a,i.top-r/2),s++,t.m(s,a,i.top-r+e.y+(l?o/2:o)),s++,l&&t.m(s,d.x,t.i(s-1).y))):w("Invalid angle "+a),t.mf()}else t=this.link,(r=ep(n))!==ep(i)&&(o=np(n),h=n.bounds,n=i.bounds,0===r&&n.left-h.right<o+1||90===r&&n.top-h.bottom<o+1||180===r&&h.left-n.right<o+1||270===r&&h.top-n.bottom<o+1||(t.Zi(),n=t.curve===Yu,e=t.isOrthogonal,i=Dg(this.fromVertex.alignment),t.Ch(),0===r?(r=h.right+o/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,r-20,t.i(1).y),t.m(2,r-20,n),t.m(3,r,n),t.m(4,r+20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,r,t.i(2).y),t.M(3,r,t.i(3).y)):4===t.pointsCount?t.m(2,r,t.i(2).y):3===t.pointsCount?t.M(1,r,t.i(2).y):2===t.pointsCount&&t.m(1,r,t.i(1).y)):90===r?(r=h.bottom+o/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,r-20),t.m(2,n,r-20),t.m(3,n,r),t.m(4,n,r+20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,r),t.M(3,t.i(3).x,r)):4===t.pointsCount?t.m(2,t.i(2).x,r):3===t.pointsCount?t.M(1,t.i(2).x,r):2===t.pointsCount&&t.m(1,t.i(1).x,r)):180===r?(r=h.left-o/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,r+20,t.i(1).y),t.m(2,r+20,n),t.m(3,r,n),t.m(4,r-20,n),t.M(5,t.i(5).x,n)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,r,t.i(2).y),t.M(3,r,t.i(3).y)):4===t.pointsCount?t.m(2,r,t.i(2).y):3===t.pointsCount?t.M(1,r,t.i(2).y):2===t.pointsCount&&t.m(1,r,t.i(1).y)):270===r&&(r=h.top-o/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,r+20),t.m(2,n,r+20),t.m(3,n,r),t.m(4,n,r-20),t.M(5,n,t.i(5).y)):e?i?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,r),t.M(3,t.i(3).x,r)):4===t.pointsCount?t.m(2,t.i(2).x,r):3===t.pointsCount?t.M(1,t.i(2).x,r):2===t.pointsCount&&t.m(1,t.i(1).x,r)),t.mf()))}},c.Object.defineProperties(Ap.prototype,{relativePoint:{get:function(){return this.ou},set:function(t){this.ou.set(t)}}}),Ap.className="TreeEdge",Fn.prototype.initializeStandardTools=function(){On(this,"Action",new Li,this.mouseDownTools),On(this,"Relinking",new gi,this.mouseDownTools),On(this,"LinkReshaping",new mi,this.mouseDownTools),On(this,"Rotating",new xi,this.mouseDownTools),On(this,"Resizing",new bi,this.mouseDownTools),On(this,"Linking",new ui,this.mouseMoveTools),On(this,"Dragging",new Rn,this.mouseMoveTools),On(this,"DragSelecting",new Ni,this.mouseMoveTools),On(this,"Panning",new Ti,this.mouseMoveTools),On(this,"ContextMenu",new Bi,this.mouseUpTools),On(this,"TextEditing",new Ri,this.mouseUpTools),On(this,"ClickCreating",new Mi,this.mouseUpTools),On(this,"ClickSelecting",new ki,this.mouseUpTools)},xh("Horizontal",new Us),xh("Spot",new Ws),xh("Table",new Js),xh("Viewbox",new Qs),xh("TableRow",new Zs),xh("TableColumn",new $s),xh("Graduated",new ih),Vr.add(Ac.type,Qd),Vr.add(Vc.type,ic);var jp=g.go,Dp={get licenseKey(){return va.licenseKey},set licenseKey(t){va.licenseKey=t},get version(){return va.version},Group:pu,EnumValue:X,List:tt,Set:nt,Map:ct,Point:ft,Size:jt,Rect:Et,Margin:$t,Spot:Ve,Geometry:We,PathFigure:ln,PathSegment:un,InputEvent:wn,DiagramEvent:Sn,ChangedEvent:Pn,Model:rc,GraphLinksModel:Ac,TreeModel:Vc,Binding:Cc,Transaction:Mn,UndoManager:Nn,CommandHandler:ko,Tool:Cn,DraggingTool:Rn,DraggingInfo:vo,LinkingBaseTool:hi,LinkingTool:ui,RelinkingTool:gi,LinkReshapingTool:mi,ResizingTool:bi,RotatingTool:xi,ClickSelectingTool:ki,ActionTool:Li,ClickCreatingTool:Mi,HTMLInfo:Ci,ContextMenuTool:Bi,DragSelectingTool:Ni,PanningTool:Ti,TextEditingTool:Ri,ToolManager:Fn,AnimationManager:ta,Layer:ga,Diagram:va,Palette:So,Overview:Po,Brush:ms,GraphObject:Mo,Panel:ah,RowColumnDefinition:Nh,Shape:Oh,TextBlock:Vh,TextBlockMetrics:gl,Picture:pl,Part:jl,Adornment:tu,Node:eu,Link:wu,Placeholder:yu,Layout:bd,LayoutNetwork:Ld,LayoutVertex:Cd,LayoutEdge:Bd,GridLayout:Od,PanelLayout:Hs,CircularLayout:Yc,CircularNetwork:mf,CircularVertex:vf,CircularEdge:wf,ForceDirectedLayout:Sf,ForceDirectedNetwork:Tf,ForceDirectedVertex:Cf,ForceDirectedEdge:Ff,LayeredDigraphLayout:Of,LayeredDigraphNetwork:kg,LayeredDigraphVertex:Lg,LayeredDigraphEdge:Mg,TreeLayout:Ng,TreeNetwork:Bp,TreeVertex:Op,TreeEdge:Ap};jp&&jp.version!==Dp.version&&w("WARNING: a `go` object on the root object is already defined with a version mismatch."+jp.version+". Replaced with version: "+Dp.version),g.go=Dp,(void 0===g||void 0===g.module||"object"!=typeof g.module.exports)&&g.define&&"function"==typeof g.define&&g.define.amd&&g.define(Dp),"object"==typeof t.exports&&(t.exports=void 0!==e?e.go:self.go)}()}).call(this,n(4))},function(t,e,n){(function(t,i){var a;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var r="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],h="[object Arguments]",l="[object Array]",u="[object Boolean]",d="[object Date]",c="[object Error]",f="[object Function]",g="[object GeneratorFunction]",p="[object Map]",m="[object Number]",v="[object Object]",y="[object RegExp]",w="[object Set]",S="[object String]",P="[object Symbol]",b="[object WeakMap]",x="[object ArrayBuffer]",k="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",T="[object Int16Array]",C="[object Int32Array]",F="[object Uint8Array]",B="[object Uint16Array]",O="[object Uint32Array]",A=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,E=RegExp(z.source),R=RegExp(G.source),I=/<%-([\s\S]+?)%>/g,_=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/[\\^$.*+?()[\]{}|]/g,q=RegExp(U.source),W=/^\s+|\s+$/g,K=/^\s+/,J=/\s+$/,Z=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,at=/^[-+]0x[0-9a-f]+$/i,rt=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ht=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,dt=/['\n\r\u2028\u2029\\]/g,ct="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ft="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gt="[\\ud800-\\udfff]",pt="["+ft+"]",mt="["+ct+"]",vt="\\d+",yt="[\\u2700-\\u27bf]",wt="[a-z\\xdf-\\xf6\\xf8-\\xff]",St="[^\\ud800-\\udfff"+ft+vt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Pt="\\ud83c[\\udffb-\\udfff]",bt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Mt="(?:"+wt+"|"+St+")",Nt="(?:"+Lt+"|"+St+")",Tt="(?:"+mt+"|"+Pt+")"+"?",Ct="[\\ufe0e\\ufe0f]?"+Tt+("(?:\\u200d(?:"+[bt,xt,kt].join("|")+")[\\ufe0e\\ufe0f]?"+Tt+")*"),Ft="(?:"+[yt,xt,kt].join("|")+")"+Ct,Bt="(?:"+[bt+mt+"?",mt,xt,kt,gt].join("|")+")",Ot=RegExp("[']","g"),At=RegExp(mt,"g"),jt=RegExp(Pt+"(?="+Pt+")|"+Bt+Ct,"g"),Dt=RegExp([Lt+"?"+wt+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[pt,Lt,"$"].join("|")+")",Nt+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[pt,Lt+Mt,"$"].join("|")+")",Lt+"?"+Mt+"+(?:['](?:d|ll|m|re|s|t|ve))?",Lt+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vt,Ft].join("|"),"g"),zt=RegExp("[\\u200d\\ud800-\\udfff"+ct+"\\ufe0e\\ufe0f]"),Gt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rt=-1,It={};It[L]=It[M]=It[N]=It[T]=It[C]=It[F]=It["[object Uint8ClampedArray]"]=It[B]=It[O]=!0,It[h]=It[l]=It[x]=It[u]=It[k]=It[d]=It[c]=It[f]=It[p]=It[m]=It[v]=It[y]=It[w]=It[S]=It[b]=!1;var _t={};_t[h]=_t[l]=_t[x]=_t[k]=_t[u]=_t[d]=_t[L]=_t[M]=_t[N]=_t[T]=_t[C]=_t[p]=_t[m]=_t[v]=_t[y]=_t[w]=_t[S]=_t[P]=_t[F]=_t["[object Uint8ClampedArray]"]=_t[B]=_t[O]=!0,_t[c]=_t[f]=_t[b]=!1;var Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=parseFloat,Ht=parseInt,Xt="object"==typeof t&&t&&t.Object===Object&&t,Ut="object"==typeof self&&self&&self.Object===Object&&self,qt=Xt||Ut||Function("return this")(),Wt=e&&!e.nodeType&&e,Kt=Wt&&"object"==typeof i&&i&&!i.nodeType&&i,Jt=Kt&&Kt.exports===Wt,Zt=Jt&&Xt.process,$t=function(){try{var t=Kt&&Kt.require&&Kt.require("util").types;return t||Zt&&Zt.binding&&Zt.binding("util")}catch(t){}}(),Qt=$t&&$t.isArrayBuffer,te=$t&&$t.isDate,ee=$t&&$t.isMap,ne=$t&&$t.isRegExp,ie=$t&&$t.isSet,ae=$t&&$t.isTypedArray;function re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function oe(t,e,n,i){for(var a=-1,r=null==t?0:t.length;++a<r;){var o=t[a];e(i,o,n(o),t)}return i}function se(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function he(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function le(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function ue(t,e){for(var n=-1,i=null==t?0:t.length,a=0,r=[];++n<i;){var o=t[n];e(o,n,t)&&(r[a++]=o)}return r}function de(t,e){return!!(null==t?0:t.length)&&Pe(t,e,0)>-1}function ce(t,e,n){for(var i=-1,a=null==t?0:t.length;++i<a;)if(n(e,t[i]))return!0;return!1}function fe(t,e){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=e(t[n],n,t);return a}function ge(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}function pe(t,e,n,i){var a=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++a]);++a<r;)n=e(n,t[a],a,t);return n}function me(t,e,n,i){var a=null==t?0:t.length;for(i&&a&&(n=t[--a]);a--;)n=e(n,t[a],a,t);return n}function ve(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var ye=Le("length");function we(t,e,n){var i;return n(t,(function(t,n,a){if(e(t,n,a))return i=n,!1})),i}function Se(t,e,n,i){for(var a=t.length,r=n+(i?1:-1);i?r--:++r<a;)if(e(t[r],r,t))return r;return-1}function Pe(t,e,n){return e==e?function(t,e,n){var i=n-1,a=t.length;for(;++i<a;)if(t[i]===e)return i;return-1}(t,e,n):Se(t,xe,n)}function be(t,e,n,i){for(var a=n-1,r=t.length;++a<r;)if(i(t[a],e))return a;return-1}function xe(t){return t!=t}function ke(t,e){var n=null==t?0:t.length;return n?Te(t,e)/n:NaN}function Le(t){return function(e){return null==e?void 0:e[t]}}function Me(t){return function(e){return null==t?void 0:t[e]}}function Ne(t,e,n,i,a){return a(t,(function(t,a,r){n=i?(i=!1,t):e(n,t,a,r)})),n}function Te(t,e){for(var n,i=-1,a=t.length;++i<a;){var r=e(t[i]);void 0!==r&&(n=void 0===n?r:n+r)}return n}function Ce(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Fe(t){return function(e){return t(e)}}function Be(t,e){return fe(e,(function(e){return t[e]}))}function Oe(t,e){return t.has(e)}function Ae(t,e){for(var n=-1,i=t.length;++n<i&&Pe(e,t[n],0)>-1;);return n}function je(t,e){for(var n=t.length;n--&&Pe(e,t[n],0)>-1;);return n}function De(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var ze=Me({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Ge=Me({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ee(t){return"\\"+Vt[t]}function Re(t){return zt.test(t)}function Ie(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function _e(t,e){return function(n){return t(e(n))}}function Ve(t,e){for(var n=-1,i=t.length,a=0,r=[];++n<i;){var s=t[n];s!==e&&s!==o||(t[n]=o,r[a++]=n)}return r}function Ye(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Xe(t){return Re(t)?function(t){var e=jt.lastIndex=0;for(;jt.test(t);)++e;return e}(t):ye(t)}function Ue(t){return Re(t)?function(t){return t.match(jt)||[]}(t):function(t){return t.split("")}(t)}var qe=Me({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var We=function t(e){var n,i=(e=null==e?qt:We.defaults(qt.Object(),e,We.pick(qt,Et))).Array,a=e.Date,ct=e.Error,ft=e.Function,gt=e.Math,pt=e.Object,mt=e.RegExp,vt=e.String,yt=e.TypeError,wt=i.prototype,St=ft.prototype,Pt=pt.prototype,bt=e["__core-js_shared__"],xt=St.toString,kt=Pt.hasOwnProperty,Lt=0,Mt=(n=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Nt=Pt.toString,Tt=xt.call(pt),Ct=qt._,Ft=mt("^"+xt.call(kt).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=Jt?e.Buffer:void 0,jt=e.Symbol,zt=e.Uint8Array,Vt=Bt?Bt.allocUnsafe:void 0,Xt=_e(pt.getPrototypeOf,pt),Ut=pt.create,Wt=Pt.propertyIsEnumerable,Kt=wt.splice,Zt=jt?jt.isConcatSpreadable:void 0,$t=jt?jt.iterator:void 0,ye=jt?jt.toStringTag:void 0,Me=function(){try{var t=Qa(pt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ke=e.clearTimeout!==qt.clearTimeout&&e.clearTimeout,Je=a&&a.now!==qt.Date.now&&a.now,Ze=e.setTimeout!==qt.setTimeout&&e.setTimeout,$e=gt.ceil,Qe=gt.floor,tn=pt.getOwnPropertySymbols,en=Bt?Bt.isBuffer:void 0,nn=e.isFinite,an=wt.join,rn=_e(pt.keys,pt),on=gt.max,sn=gt.min,hn=a.now,ln=e.parseInt,un=gt.random,dn=wt.reverse,cn=Qa(e,"DataView"),fn=Qa(e,"Map"),gn=Qa(e,"Promise"),pn=Qa(e,"Set"),mn=Qa(e,"WeakMap"),vn=Qa(pt,"create"),yn=mn&&new mn,wn={},Sn=Mr(cn),Pn=Mr(fn),bn=Mr(gn),xn=Mr(pn),kn=Mr(mn),Ln=jt?jt.prototype:void 0,Mn=Ln?Ln.valueOf:void 0,Nn=Ln?Ln.toString:void 0;function Tn(t){if(Ho(t)&&!Ao(t)&&!(t instanceof On)){if(t instanceof Bn)return t;if(kt.call(t,"__wrapped__"))return Nr(t)}return new Bn(t)}var Cn=function(){function t(){}return function(e){if(!Yo(e))return{};if(Ut)return Ut(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Fn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function On(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function An(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function jn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Dn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new jn(t);this.size=e.size}function En(t,e){var n=Ao(t),i=!n&&Oo(t),a=!n&&!i&&Go(t),r=!n&&!i&&!a&&$o(t),o=n||i||a||r,s=o?Ce(t.length,vt):[],h=s.length;for(var l in t)!e&&!kt.call(t,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||or(l,h))||s.push(l);return s}function Rn(t){var e=t.length;return e?t[zi(0,e-1)]:void 0}function In(t,e){return xr(va(t),Kn(e,0,t.length))}function _n(t){return xr(va(t))}function Vn(t,e,n){(void 0===n||Co(t[e],n))&&(void 0!==n||e in t)||qn(t,e,n)}function Yn(t,e,n){var i=t[e];kt.call(t,e)&&Co(i,n)&&(void 0!==n||e in t)||qn(t,e,n)}function Hn(t,e){for(var n=t.length;n--;)if(Co(t[n][0],e))return n;return-1}function Xn(t,e,n,i){return ti(t,(function(t,a,r){e(i,t,n(t),r)})),i}function Un(t,e){return t&&ya(e,Ss(e),t)}function qn(t,e,n){"__proto__"==e&&Me?Me(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Wn(t,e){for(var n=-1,a=e.length,r=i(a),o=null==t;++n<a;)r[n]=o?void 0:ps(t,e[n]);return r}function Kn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Jn(t,e,n,i,a,r){var o,s=1&e,l=2&e,c=4&e;if(n&&(o=a?n(t,i,a,r):n(t)),void 0!==o)return o;if(!Yo(t))return t;var b=Ao(t);if(b){if(o=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&kt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return va(t,o)}else{var A=nr(t),j=A==f||A==g;if(Go(t))return da(t,s);if(A==v||A==h||j&&!a){if(o=l||j?{}:ar(t),!s)return l?function(t,e){return ya(t,er(t),e)}(t,function(t,e){return t&&ya(e,Ps(e),t)}(o,t)):function(t,e){return ya(t,tr(t),e)}(t,Un(o,t))}else{if(!_t[A])return a?t:{};o=function(t,e,n){var i=t.constructor;switch(e){case x:return ca(t);case u:case d:return new i(+t);case k:return function(t,e){var n=e?ca(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case M:case N:case T:case C:case F:case"[object Uint8ClampedArray]":case B:case O:return fa(t,n);case p:return new i;case m:case S:return new i(t);case y:return function(t){var e=new t.constructor(t.source,it.exec(t));return e.lastIndex=t.lastIndex,e}(t);case w:return new i;case P:return a=t,Mn?pt(Mn.call(a)):{}}var a}(t,A,s)}}r||(r=new Gn);var D=r.get(t);if(D)return D;r.set(t,o),Ko(t)?t.forEach((function(i){o.add(Jn(i,e,n,i,t,r))})):Xo(t)&&t.forEach((function(i,a){o.set(a,Jn(i,e,n,a,t,r))}));var z=b?void 0:(c?l?Ua:Xa:l?Ps:Ss)(t);return se(z||t,(function(i,a){z&&(i=t[a=i]),Yn(o,a,Jn(i,e,n,a,t,r))})),o}function Zn(t,e,n){var i=n.length;if(null==t)return!i;for(t=pt(t);i--;){var a=n[i],r=e[a],o=t[a];if(void 0===o&&!(a in t)||!r(o))return!1}return!0}function $n(t,e,n){if("function"!=typeof t)throw new yt(r);return wr((function(){t.apply(void 0,n)}),e)}function Qn(t,e,n,i){var a=-1,r=de,o=!0,s=t.length,h=[],l=e.length;if(!s)return h;n&&(e=fe(e,Fe(n))),i?(r=ce,o=!1):e.length>=200&&(r=Oe,o=!1,e=new zn(e));t:for(;++a<s;){var u=t[a],d=null==n?u:n(u);if(u=i||0!==u?u:0,o&&d==d){for(var c=l;c--;)if(e[c]===d)continue t;h.push(u)}else r(e,d,i)||h.push(u)}return h}Tn.templateSettings={escape:I,evaluate:_,interpolate:V,variable:"",imports:{_:Tn}},Tn.prototype=Fn.prototype,Tn.prototype.constructor=Tn,Bn.prototype=Cn(Fn.prototype),Bn.prototype.constructor=Bn,On.prototype=Cn(Fn.prototype),On.prototype.constructor=On,An.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},An.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},An.prototype.get=function(t){var e=this.__data__;if(vn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return kt.call(e,t)?e[t]:void 0},An.prototype.has=function(t){var e=this.__data__;return vn?void 0!==e[t]:kt.call(e,t)},An.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vn&&void 0===e?"__lodash_hash_undefined__":e,this},jn.prototype.clear=function(){this.__data__=[],this.size=0},jn.prototype.delete=function(t){var e=this.__data__,n=Hn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Kt.call(e,n,1),--this.size,!0)},jn.prototype.get=function(t){var e=this.__data__,n=Hn(e,t);return n<0?void 0:e[n][1]},jn.prototype.has=function(t){return Hn(this.__data__,t)>-1},jn.prototype.set=function(t,e){var n=this.__data__,i=Hn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Dn.prototype.clear=function(){this.size=0,this.__data__={hash:new An,map:new(fn||jn),string:new An}},Dn.prototype.delete=function(t){var e=Za(this,t).delete(t);return this.size-=e?1:0,e},Dn.prototype.get=function(t){return Za(this,t).get(t)},Dn.prototype.has=function(t){return Za(this,t).has(t)},Dn.prototype.set=function(t,e){var n=Za(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},zn.prototype.add=zn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},zn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new jn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof jn){var i=n.__data__;if(!fn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Dn(i)}return n.set(t,e),this.size=n.size,this};var ti=Pa(hi),ei=Pa(li,!0);function ni(t,e){var n=!0;return ti(t,(function(t,i,a){return n=!!e(t,i,a)})),n}function ii(t,e,n){for(var i=-1,a=t.length;++i<a;){var r=t[i],o=e(r);if(null!=o&&(void 0===s?o==o&&!Zo(o):n(o,s)))var s=o,h=r}return h}function ai(t,e){var n=[];return ti(t,(function(t,i,a){e(t,i,a)&&n.push(t)})),n}function ri(t,e,n,i,a){var r=-1,o=t.length;for(n||(n=rr),a||(a=[]);++r<o;){var s=t[r];e>0&&n(s)?e>1?ri(s,e-1,n,i,a):ge(a,s):i||(a[a.length]=s)}return a}var oi=ba(),si=ba(!0);function hi(t,e){return t&&oi(t,e,Ss)}function li(t,e){return t&&si(t,e,Ss)}function ui(t,e){return ue(e,(function(e){return Io(t[e])}))}function di(t,e){for(var n=0,i=(e=sa(e,t)).length;null!=t&&n<i;)t=t[Lr(e[n++])];return n&&n==i?t:void 0}function ci(t,e,n){var i=e(t);return Ao(t)?i:ge(i,n(t))}function fi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ye&&ye in pt(t)?function(t){var e=kt.call(t,ye),n=t[ye];try{t[ye]=void 0;var i=!0}catch(t){}var a=Nt.call(t);i&&(e?t[ye]=n:delete t[ye]);return a}(t):function(t){return Nt.call(t)}(t)}function gi(t,e){return t>e}function pi(t,e){return null!=t&&kt.call(t,e)}function mi(t,e){return null!=t&&e in pt(t)}function vi(t,e,n){for(var a=n?ce:de,r=t[0].length,o=t.length,s=o,h=i(o),l=1/0,u=[];s--;){var d=t[s];s&&e&&(d=fe(d,Fe(e))),l=sn(d.length,l),h[s]=!n&&(e||r>=120&&d.length>=120)?new zn(s&&d):void 0}d=t[0];var c=-1,f=h[0];t:for(;++c<r&&u.length<l;){var g=d[c],p=e?e(g):g;if(g=n||0!==g?g:0,!(f?Oe(f,p):a(u,p,n))){for(s=o;--s;){var m=h[s];if(!(m?Oe(m,p):a(t[s],p,n)))continue t}f&&f.push(p),u.push(g)}}return u}function yi(t,e,n){var i=null==(t=pr(t,e=sa(e,t)))?t:t[Lr(Er(e))];return null==i?void 0:re(i,t,n)}function wi(t){return Ho(t)&&fi(t)==h}function Si(t,e,n,i,a){return t===e||(null==t||null==e||!Ho(t)&&!Ho(e)?t!=t&&e!=e:function(t,e,n,i,a,r){var o=Ao(t),s=Ao(e),f=o?l:nr(t),g=s?l:nr(e),b=(f=f==h?v:f)==v,L=(g=g==h?v:g)==v,M=f==g;if(M&&Go(t)){if(!Go(e))return!1;o=!0,b=!1}if(M&&!b)return r||(r=new Gn),o||$o(t)?Ya(t,e,n,i,a,r):function(t,e,n,i,a,r,o){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!r(new zt(t),new zt(e)));case u:case d:case m:return Co(+t,+e);case c:return t.name==e.name&&t.message==e.message;case y:case S:return t==e+"";case p:var s=Ie;case w:var h=1&i;if(s||(s=Ye),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;i|=2,o.set(t,e);var f=Ya(s(t),s(e),i,a,r,o);return o.delete(t),f;case P:if(Mn)return Mn.call(t)==Mn.call(e)}return!1}(t,e,f,n,i,a,r);if(!(1&n)){var N=b&&kt.call(t,"__wrapped__"),T=L&&kt.call(e,"__wrapped__");if(N||T){var C=N?t.value():t,F=T?e.value():e;return r||(r=new Gn),a(C,F,n,i,r)}}if(!M)return!1;return r||(r=new Gn),function(t,e,n,i,a,r){var o=1&n,s=Xa(t),h=s.length,l=Xa(e).length;if(h!=l&&!o)return!1;var u=h;for(;u--;){var d=s[u];if(!(o?d in e:kt.call(e,d)))return!1}var c=r.get(t);if(c&&r.get(e))return c==e;var f=!0;r.set(t,e),r.set(e,t);var g=o;for(;++u<h;){d=s[u];var p=t[d],m=e[d];if(i)var v=o?i(m,p,d,e,t,r):i(p,m,d,t,e,r);if(!(void 0===v?p===m||a(p,m,n,i,r):v)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(f=!1)}return r.delete(t),r.delete(e),f}(t,e,n,i,a,r)}(t,e,n,i,Si,a))}function Pi(t,e,n,i){var a=n.length,r=a,o=!i;if(null==t)return!r;for(t=pt(t);a--;){var s=n[a];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<r;){var h=(s=n[a])[0],l=t[h],u=s[1];if(o&&s[2]){if(void 0===l&&!(h in t))return!1}else{var d=new Gn;if(i)var c=i(l,u,h,t,e,d);if(!(void 0===c?Si(u,l,3,i,d):c))return!1}}return!0}function bi(t){return!(!Yo(t)||(e=t,Mt&&Mt in e))&&(Io(t)?Ft:ot).test(Mr(t));var e}function xi(t){return"function"==typeof t?t:null==t?Us:"object"==typeof t?Ao(t)?Ci(t[0],t[1]):Ti(t):eh(t)}function ki(t){if(!dr(t))return rn(t);var e=[];for(var n in pt(t))kt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Li(t){if(!Yo(t))return function(t){var e=[];if(null!=t)for(var n in pt(t))e.push(n);return e}(t);var e=dr(t),n=[];for(var i in t)("constructor"!=i||!e&&kt.call(t,i))&&n.push(i);return n}function Mi(t,e){return t<e}function Ni(t,e){var n=-1,a=Do(t)?i(t.length):[];return ti(t,(function(t,i,r){a[++n]=e(t,i,r)})),a}function Ti(t){var e=$a(t);return 1==e.length&&e[0][2]?fr(e[0][0],e[0][1]):function(n){return n===t||Pi(n,t,e)}}function Ci(t,e){return hr(t)&&cr(e)?fr(Lr(t),e):function(n){var i=ps(n,t);return void 0===i&&i===e?ms(n,t):Si(e,i,3)}}function Fi(t,e,n,i,a){t!==e&&oi(e,(function(r,o){if(a||(a=new Gn),Yo(r))!function(t,e,n,i,a,r,o){var s=vr(t,n),h=vr(e,n),l=o.get(h);if(l)return void Vn(t,n,l);var u=r?r(s,h,n+"",t,e,o):void 0,d=void 0===u;if(d){var c=Ao(h),f=!c&&Go(h),g=!c&&!f&&$o(h);u=h,c||f||g?Ao(s)?u=s:zo(s)?u=va(s):f?(d=!1,u=da(h,!0)):g?(d=!1,u=fa(h,!0)):u=[]:qo(h)||Oo(h)?(u=s,Oo(s)?u=os(s):Yo(s)&&!Io(s)||(u=ar(h))):d=!1}d&&(o.set(h,u),a(u,h,i,r,o),o.delete(h));Vn(t,n,u)}(t,e,o,n,Fi,i,a);else{var s=i?i(vr(t,o),r,o+"",t,e,a):void 0;void 0===s&&(s=r),Vn(t,o,s)}}),Ps)}function Bi(t,e){var n=t.length;if(n)return or(e+=e<0?n:0,n)?t[e]:void 0}function Oi(t,e,n){var i=-1;return e=fe(e.length?e:[Us],Fe(Ja())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ni(t,(function(t,n,a){return{criteria:fe(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){var i=-1,a=t.criteria,r=e.criteria,o=a.length,s=n.length;for(;++i<o;){var h=ga(a[i],r[i]);if(h){if(i>=s)return h;var l=n[i];return h*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)}))}function Ai(t,e,n){for(var i=-1,a=e.length,r={};++i<a;){var o=e[i],s=di(t,o);n(s,o)&&_i(r,sa(o,t),s)}return r}function ji(t,e,n,i){var a=i?be:Pe,r=-1,o=e.length,s=t;for(t===e&&(e=va(e)),n&&(s=fe(t,Fe(n)));++r<o;)for(var h=0,l=e[r],u=n?n(l):l;(h=a(s,u,h,i))>-1;)s!==t&&Kt.call(s,h,1),Kt.call(t,h,1);return t}function Di(t,e){for(var n=t?e.length:0,i=n-1;n--;){var a=e[n];if(n==i||a!==r){var r=a;or(a)?Kt.call(t,a,1):Qi(t,a)}}return t}function zi(t,e){return t+Qe(un()*(e-t+1))}function Gi(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Qe(e/2))&&(t+=t)}while(e);return n}function Ei(t,e){return Sr(gr(t,e,Us),t+"")}function Ri(t){return Rn(Cs(t))}function Ii(t,e){var n=Cs(t);return xr(n,Kn(e,0,n.length))}function _i(t,e,n,i){if(!Yo(t))return t;for(var a=-1,r=(e=sa(e,t)).length,o=r-1,s=t;null!=s&&++a<r;){var h=Lr(e[a]),l=n;if(a!=o){var u=s[h];void 0===(l=i?i(u,h,s):void 0)&&(l=Yo(u)?u:or(e[a+1])?[]:{})}Yn(s,h,l),s=s[h]}return t}var Vi=yn?function(t,e){return yn.set(t,e),t}:Us,Yi=Me?function(t,e){return Me(t,"toString",{configurable:!0,enumerable:!1,value:Ys(e),writable:!0})}:Us;function Hi(t){return xr(Cs(t))}function Xi(t,e,n){var a=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=i(r);++a<r;)o[a]=t[a+e];return o}function Ui(t,e){var n;return ti(t,(function(t,i,a){return!(n=e(t,i,a))})),!!n}function qi(t,e,n){var i=0,a=null==t?i:t.length;if("number"==typeof e&&e==e&&a<=2147483647){for(;i<a;){var r=i+a>>>1,o=t[r];null!==o&&!Zo(o)&&(n?o<=e:o<e)?i=r+1:a=r}return a}return Wi(t,e,Us,n)}function Wi(t,e,n,i){e=n(e);for(var a=0,r=null==t?0:t.length,o=e!=e,s=null===e,h=Zo(e),l=void 0===e;a<r;){var u=Qe((a+r)/2),d=n(t[u]),c=void 0!==d,f=null===d,g=d==d,p=Zo(d);if(o)var m=i||g;else m=l?g&&(i||c):s?g&&c&&(i||!f):h?g&&c&&!f&&(i||!p):!f&&!p&&(i?d<=e:d<e);m?a=u+1:r=u}return sn(r,4294967294)}function Ki(t,e){for(var n=-1,i=t.length,a=0,r=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!Co(s,h)){var h=s;r[a++]=0===o?0:o}}return r}function Ji(t){return"number"==typeof t?t:Zo(t)?NaN:+t}function Zi(t){if("string"==typeof t)return t;if(Ao(t))return fe(t,Zi)+"";if(Zo(t))return Nn?Nn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function $i(t,e,n){var i=-1,a=de,r=t.length,o=!0,s=[],h=s;if(n)o=!1,a=ce;else if(r>=200){var l=e?null:Ga(t);if(l)return Ye(l);o=!1,a=Oe,h=new zn}else h=e?[]:s;t:for(;++i<r;){var u=t[i],d=e?e(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var c=h.length;c--;)if(h[c]===d)continue t;e&&h.push(d),s.push(u)}else a(h,d,n)||(h!==s&&h.push(d),s.push(u))}return s}function Qi(t,e){return null==(t=pr(t,e=sa(e,t)))||delete t[Lr(Er(e))]}function ta(t,e,n,i){return _i(t,e,n(di(t,e)),i)}function ea(t,e,n,i){for(var a=t.length,r=i?a:-1;(i?r--:++r<a)&&e(t[r],r,t););return n?Xi(t,i?0:r,i?r+1:a):Xi(t,i?r+1:0,i?a:r)}function na(t,e){var n=t;return n instanceof On&&(n=n.value()),pe(e,(function(t,e){return e.func.apply(e.thisArg,ge([t],e.args))}),n)}function ia(t,e,n){var a=t.length;if(a<2)return a?$i(t[0]):[];for(var r=-1,o=i(a);++r<a;)for(var s=t[r],h=-1;++h<a;)h!=r&&(o[r]=Qn(o[r]||s,t[h],e,n));return $i(ri(o,1),e,n)}function aa(t,e,n){for(var i=-1,a=t.length,r=e.length,o={};++i<a;){var s=i<r?e[i]:void 0;n(o,t[i],s)}return o}function ra(t){return zo(t)?t:[]}function oa(t){return"function"==typeof t?t:Us}function sa(t,e){return Ao(t)?t:hr(t,e)?[t]:kr(ss(t))}var ha=Ei;function la(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:Xi(t,e,n)}var ua=Ke||function(t){return qt.clearTimeout(t)};function da(t,e){if(e)return t.slice();var n=t.length,i=Vt?Vt(n):new t.constructor(n);return t.copy(i),i}function ca(t){var e=new t.constructor(t.byteLength);return new zt(e).set(new zt(t)),e}function fa(t,e){var n=e?ca(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ga(t,e){if(t!==e){var n=void 0!==t,i=null===t,a=t==t,r=Zo(t),o=void 0!==e,s=null===e,h=e==e,l=Zo(e);if(!s&&!l&&!r&&t>e||r&&o&&h&&!s&&!l||i&&o&&h||!n&&h||!a)return 1;if(!i&&!r&&!l&&t<e||l&&n&&a&&!i&&!r||s&&n&&a||!o&&a||!h)return-1}return 0}function pa(t,e,n,a){for(var r=-1,o=t.length,s=n.length,h=-1,l=e.length,u=on(o-s,0),d=i(l+u),c=!a;++h<l;)d[h]=e[h];for(;++r<s;)(c||r<o)&&(d[n[r]]=t[r]);for(;u--;)d[h++]=t[r++];return d}function ma(t,e,n,a){for(var r=-1,o=t.length,s=-1,h=n.length,l=-1,u=e.length,d=on(o-h,0),c=i(d+u),f=!a;++r<d;)c[r]=t[r];for(var g=r;++l<u;)c[g+l]=e[l];for(;++s<h;)(f||r<o)&&(c[g+n[s]]=t[r++]);return c}function va(t,e){var n=-1,a=t.length;for(e||(e=i(a));++n<a;)e[n]=t[n];return e}function ya(t,e,n,i){var a=!n;n||(n={});for(var r=-1,o=e.length;++r<o;){var s=e[r],h=i?i(n[s],t[s],s,n,t):void 0;void 0===h&&(h=t[s]),a?qn(n,s,h):Yn(n,s,h)}return n}function wa(t,e){return function(n,i){var a=Ao(n)?oe:Xn,r=e?e():{};return a(n,t,Ja(i,2),r)}}function Sa(t){return Ei((function(e,n){var i=-1,a=n.length,r=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(r=t.length>3&&"function"==typeof r?(a--,r):void 0,o&&sr(n[0],n[1],o)&&(r=a<3?void 0:r,a=1),e=pt(e);++i<a;){var s=n[i];s&&t(e,s,i,r)}return e}))}function Pa(t,e){return function(n,i){if(null==n)return n;if(!Do(n))return t(n,i);for(var a=n.length,r=e?a:-1,o=pt(n);(e?r--:++r<a)&&!1!==i(o[r],r,o););return n}}function ba(t){return function(e,n,i){for(var a=-1,r=pt(e),o=i(e),s=o.length;s--;){var h=o[t?s:++a];if(!1===n(r[h],h,r))break}return e}}function xa(t){return function(e){var n=Re(e=ss(e))?Ue(e):void 0,i=n?n[0]:e.charAt(0),a=n?la(n,1).join(""):e.slice(1);return i[t]()+a}}function ka(t){return function(e){return pe(Is(Os(e).replace(Ot,"")),t,"")}}function La(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Cn(t.prototype),i=t.apply(n,e);return Yo(i)?i:n}}function Ma(t){return function(e,n,i){var a=pt(e);if(!Do(e)){var r=Ja(n,3);e=Ss(e),n=function(t){return r(a[t],t,a)}}var o=t(e,n,i);return o>-1?a[r?e[o]:o]:void 0}}function Na(t){return Ha((function(e){var n=e.length,i=n,a=Bn.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new yt(r);if(a&&!s&&"wrapper"==Wa(o))var s=new Bn([],!0)}for(i=s?i:n;++i<n;){var h=Wa(o=e[i]),l="wrapper"==h?qa(o):void 0;s=l&&lr(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Wa(l[0])].apply(s,l[3]):1==o.length&&lr(o)?s[h]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&Ao(i))return s.plant(i).value();for(var a=0,r=n?e[a].apply(this,t):i;++a<n;)r=e[a].call(this,r);return r}}))}function Ta(t,e,n,a,r,o,s,h,l,u){var d=128&e,c=1&e,f=2&e,g=24&e,p=512&e,m=f?void 0:La(t);return function v(){for(var y=arguments.length,w=i(y),S=y;S--;)w[S]=arguments[S];if(g)var P=Ka(v),b=De(w,P);if(a&&(w=pa(w,a,r,g)),o&&(w=ma(w,o,s,g)),y-=b,g&&y<u){var x=Ve(w,P);return Da(t,e,Ta,v.placeholder,n,w,x,h,l,u-y)}var k=c?n:this,L=f?k[t]:t;return y=w.length,h?w=mr(w,h):p&&y>1&&w.reverse(),d&&l<y&&(w.length=l),this&&this!==qt&&this instanceof v&&(L=m||La(L)),L.apply(k,w)}}function Ca(t,e){return function(n,i){return function(t,e,n,i){return hi(t,(function(t,a,r){e(i,n(t),a,r)})),i}(n,t,e(i),{})}}function Fa(t,e){return function(n,i){var a;if(void 0===n&&void 0===i)return e;if(void 0!==n&&(a=n),void 0!==i){if(void 0===a)return i;"string"==typeof n||"string"==typeof i?(n=Zi(n),i=Zi(i)):(n=Ji(n),i=Ji(i)),a=t(n,i)}return a}}function Ba(t){return Ha((function(e){return e=fe(e,Fe(Ja())),Ei((function(n){var i=this;return t(e,(function(t){return re(t,i,n)}))}))}))}function Oa(t,e){var n=(e=void 0===e?" ":Zi(e)).length;if(n<2)return n?Gi(e,t):e;var i=Gi(e,$e(t/Xe(e)));return Re(e)?la(Ue(i),0,t).join(""):i.slice(0,t)}function Aa(t){return function(e,n,a){return a&&"number"!=typeof a&&sr(e,n,a)&&(n=a=void 0),e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n,a){for(var r=-1,o=on($e((e-t)/(n||1)),0),s=i(o);o--;)s[a?o:++r]=t,t+=n;return s}(e,n,a=void 0===a?e<n?1:-1:ns(a),t)}}function ja(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=rs(e),n=rs(n)),t(e,n)}}function Da(t,e,n,i,a,r,o,s,h,l){var u=8&e;e|=u?32:64,4&(e&=~(u?64:32))||(e&=-4);var d=[t,e,a,u?r:void 0,u?o:void 0,u?void 0:r,u?void 0:o,s,h,l],c=n.apply(void 0,d);return lr(t)&&yr(c,d),c.placeholder=i,Pr(c,t,e)}function za(t){var e=gt[t];return function(t,n){if(t=rs(t),(n=null==n?0:sn(is(n),292))&&nn(t)){var i=(ss(t)+"e").split("e");return+((i=(ss(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var Ga=pn&&1/Ye(new pn([,-0]))[1]==1/0?function(t){return new pn(t)}:Zs;function Ea(t){return function(e){var n=nr(e);return n==p?Ie(e):n==w?He(e):function(t,e){return fe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Ra(t,e,n,a,s,h,l,u){var d=2&e;if(!d&&"function"!=typeof t)throw new yt(r);var c=a?a.length:0;if(c||(e&=-97,a=s=void 0),l=void 0===l?l:on(is(l),0),u=void 0===u?u:is(u),c-=s?s.length:0,64&e){var f=a,g=s;a=s=void 0}var p=d?void 0:qa(t),m=[t,e,n,a,s,f,g,h,l,u];if(p&&function(t,e){var n=t[1],i=e[1],a=n|i,r=a<131,s=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!r&&!s)return t;1&i&&(t[2]=e[2],a|=1&n?0:4);var h=e[3];if(h){var l=t[3];t[3]=l?pa(l,h,e[4]):h,t[4]=l?Ve(t[3],o):e[4]}(h=e[5])&&(l=t[5],t[5]=l?ma(l,h,e[6]):h,t[6]=l?Ve(t[5],o):e[6]);(h=e[7])&&(t[7]=h);128&i&&(t[8]=null==t[8]?e[8]:sn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=a}(m,p),t=m[0],e=m[1],n=m[2],a=m[3],s=m[4],!(u=m[9]=void 0===m[9]?d?0:t.length:on(m[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)v=8==e||16==e?function(t,e,n){var a=La(t);return function r(){for(var o=arguments.length,s=i(o),h=o,l=Ka(r);h--;)s[h]=arguments[h];var u=o<3&&s[0]!==l&&s[o-1]!==l?[]:Ve(s,l);if((o-=u.length)<n)return Da(t,e,Ta,r.placeholder,void 0,s,u,void 0,void 0,n-o);var d=this&&this!==qt&&this instanceof r?a:t;return re(d,this,s)}}(t,e,u):32!=e&&33!=e||s.length?Ta.apply(void 0,m):function(t,e,n,a){var r=1&e,o=La(t);return function e(){for(var s=-1,h=arguments.length,l=-1,u=a.length,d=i(u+h),c=this&&this!==qt&&this instanceof e?o:t;++l<u;)d[l]=a[l];for(;h--;)d[l++]=arguments[++s];return re(c,r?n:this,d)}}(t,e,n,a);else var v=function(t,e,n){var i=1&e,a=La(t);return function e(){var r=this&&this!==qt&&this instanceof e?a:t;return r.apply(i?n:this,arguments)}}(t,e,n);return Pr((p?Vi:yr)(v,m),t,e)}function Ia(t,e,n,i){return void 0===t||Co(t,Pt[n])&&!kt.call(i,n)?e:t}function _a(t,e,n,i,a,r){return Yo(t)&&Yo(e)&&(r.set(e,t),Fi(t,e,void 0,_a,r),r.delete(e)),t}function Va(t){return qo(t)?void 0:t}function Ya(t,e,n,i,a,r){var o=1&n,s=t.length,h=e.length;if(s!=h&&!(o&&h>s))return!1;var l=r.get(t);if(l&&r.get(e))return l==e;var u=-1,d=!0,c=2&n?new zn:void 0;for(r.set(t,e),r.set(e,t);++u<s;){var f=t[u],g=e[u];if(i)var p=o?i(g,f,u,e,t,r):i(f,g,u,t,e,r);if(void 0!==p){if(p)continue;d=!1;break}if(c){if(!ve(e,(function(t,e){if(!Oe(c,e)&&(f===t||a(f,t,n,i,r)))return c.push(e)}))){d=!1;break}}else if(f!==g&&!a(f,g,n,i,r)){d=!1;break}}return r.delete(t),r.delete(e),d}function Ha(t){return Sr(gr(t,void 0,Ar),t+"")}function Xa(t){return ci(t,Ss,tr)}function Ua(t){return ci(t,Ps,er)}var qa=yn?function(t){return yn.get(t)}:Zs;function Wa(t){for(var e=t.name+"",n=wn[e],i=kt.call(wn,e)?n.length:0;i--;){var a=n[i],r=a.func;if(null==r||r==t)return a.name}return e}function Ka(t){return(kt.call(Tn,"placeholder")?Tn:t).placeholder}function Ja(){var t=Tn.iteratee||qs;return t=t===qs?xi:t,arguments.length?t(arguments[0],arguments[1]):t}function Za(t,e){var n,i,a=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function $a(t){for(var e=Ss(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,cr(a)]}return e}function Qa(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return bi(n)?n:void 0}var tr=tn?function(t){return null==t?[]:(t=pt(t),ue(tn(t),(function(e){return Wt.call(t,e)})))}:ah,er=tn?function(t){for(var e=[];t;)ge(e,tr(t)),t=Xt(t);return e}:ah,nr=fi;function ir(t,e,n){for(var i=-1,a=(e=sa(e,t)).length,r=!1;++i<a;){var o=Lr(e[i]);if(!(r=null!=t&&n(t,o)))break;t=t[o]}return r||++i!=a?r:!!(a=null==t?0:t.length)&&Vo(a)&&or(o,a)&&(Ao(t)||Oo(t))}function ar(t){return"function"!=typeof t.constructor||dr(t)?{}:Cn(Xt(t))}function rr(t){return Ao(t)||Oo(t)||!!(Zt&&t&&t[Zt])}function or(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ht.test(t))&&t>-1&&t%1==0&&t<e}function sr(t,e,n){if(!Yo(n))return!1;var i=typeof e;return!!("number"==i?Do(n)&&or(e,n.length):"string"==i&&e in n)&&Co(n[e],t)}function hr(t,e){if(Ao(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Zo(t))||(H.test(t)||!Y.test(t)||null!=e&&t in pt(e))}function lr(t){var e=Wa(t),n=Tn[e];if("function"!=typeof n||!(e in On.prototype))return!1;if(t===n)return!0;var i=qa(n);return!!i&&t===i[0]}(cn&&nr(new cn(new ArrayBuffer(1)))!=k||fn&&nr(new fn)!=p||gn&&"[object Promise]"!=nr(gn.resolve())||pn&&nr(new pn)!=w||mn&&nr(new mn)!=b)&&(nr=function(t){var e=fi(t),n=e==v?t.constructor:void 0,i=n?Mr(n):"";if(i)switch(i){case Sn:return k;case Pn:return p;case bn:return"[object Promise]";case xn:return w;case kn:return b}return e});var ur=bt?Io:rh;function dr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pt)}function cr(t){return t==t&&!Yo(t)}function fr(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in pt(n)))}}function gr(t,e,n){return e=on(void 0===e?t.length-1:e,0),function(){for(var a=arguments,r=-1,o=on(a.length-e,0),s=i(o);++r<o;)s[r]=a[e+r];r=-1;for(var h=i(e+1);++r<e;)h[r]=a[r];return h[e]=n(s),re(t,this,h)}}function pr(t,e){return e.length<2?t:di(t,Xi(e,0,-1))}function mr(t,e){for(var n=t.length,i=sn(e.length,n),a=va(t);i--;){var r=e[i];t[i]=or(r,n)?a[r]:void 0}return t}function vr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yr=br(Vi),wr=Ze||function(t,e){return qt.setTimeout(t,e)},Sr=br(Yi);function Pr(t,e,n){var i=e+"";return Sr(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Z,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return se(s,(function(n){var i="_."+n[0];e&n[1]&&!de(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match($);return e?e[1].split(Q):[]}(i),n)))}function br(t){var e=0,n=0;return function(){var i=hn(),a=16-(i-n);if(n=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xr(t,e){var n=-1,i=t.length,a=i-1;for(e=void 0===e?i:e;++n<e;){var r=zi(n,a),o=t[r];t[r]=t[n],t[n]=o}return t.length=e,t}var kr=function(t){var e=xo(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(X,(function(t,n,i,a){e.push(i?a.replace(et,"$1"):n||t)})),e}));function Lr(t){if("string"==typeof t||Zo(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Mr(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Nr(t){if(t instanceof On)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=va(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Tr=Ei((function(t,e){return zo(t)?Qn(t,ri(e,1,zo,!0)):[]})),Cr=Ei((function(t,e){var n=Er(e);return zo(n)&&(n=void 0),zo(t)?Qn(t,ri(e,1,zo,!0),Ja(n,2)):[]})),Fr=Ei((function(t,e){var n=Er(e);return zo(n)&&(n=void 0),zo(t)?Qn(t,ri(e,1,zo,!0),void 0,n):[]}));function Br(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=null==n?0:is(n);return a<0&&(a=on(i+a,0)),Se(t,Ja(e,3),a)}function Or(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return void 0!==n&&(a=is(n),a=n<0?on(i+a,0):sn(a,i-1)),Se(t,Ja(e,3),a,!0)}function Ar(t){return(null==t?0:t.length)?ri(t,1):[]}function jr(t){return t&&t.length?t[0]:void 0}var Dr=Ei((function(t){var e=fe(t,ra);return e.length&&e[0]===t[0]?vi(e):[]})),zr=Ei((function(t){var e=Er(t),n=fe(t,ra);return e===Er(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?vi(n,Ja(e,2)):[]})),Gr=Ei((function(t){var e=Er(t),n=fe(t,ra);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?vi(n,void 0,e):[]}));function Er(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Rr=Ei(Ir);function Ir(t,e){return t&&t.length&&e&&e.length?ji(t,e):t}var _r=Ha((function(t,e){var n=null==t?0:t.length,i=Wn(t,e);return Di(t,fe(e,(function(t){return or(t,n)?+t:t})).sort(ga)),i}));function Vr(t){return null==t?t:dn.call(t)}var Yr=Ei((function(t){return $i(ri(t,1,zo,!0))})),Hr=Ei((function(t){var e=Er(t);return zo(e)&&(e=void 0),$i(ri(t,1,zo,!0),Ja(e,2))})),Xr=Ei((function(t){var e=Er(t);return e="function"==typeof e?e:void 0,$i(ri(t,1,zo,!0),void 0,e)}));function Ur(t){if(!t||!t.length)return[];var e=0;return t=ue(t,(function(t){if(zo(t))return e=on(t.length,e),!0})),Ce(e,(function(e){return fe(t,Le(e))}))}function qr(t,e){if(!t||!t.length)return[];var n=Ur(t);return null==e?n:fe(n,(function(t){return re(e,void 0,t)}))}var Wr=Ei((function(t,e){return zo(t)?Qn(t,e):[]})),Kr=Ei((function(t){return ia(ue(t,zo))})),Jr=Ei((function(t){var e=Er(t);return zo(e)&&(e=void 0),ia(ue(t,zo),Ja(e,2))})),Zr=Ei((function(t){var e=Er(t);return e="function"==typeof e?e:void 0,ia(ue(t,zo),void 0,e)})),$r=Ei(Ur);var Qr=Ei((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,qr(t,n)}));function to(t){var e=Tn(t);return e.__chain__=!0,e}function eo(t,e){return e(t)}var no=Ha((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return Wn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof On&&or(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:eo,args:[a],thisArg:void 0}),new Bn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(a)}));var io=wa((function(t,e,n){kt.call(t,n)?++t[n]:qn(t,n,1)}));var ao=Ma(Br),ro=Ma(Or);function oo(t,e){return(Ao(t)?se:ti)(t,Ja(e,3))}function so(t,e){return(Ao(t)?he:ei)(t,Ja(e,3))}var ho=wa((function(t,e,n){kt.call(t,n)?t[n].push(e):qn(t,n,[e])}));var lo=Ei((function(t,e,n){var a=-1,r="function"==typeof e,o=Do(t)?i(t.length):[];return ti(t,(function(t){o[++a]=r?re(e,t,n):yi(t,e,n)})),o})),uo=wa((function(t,e,n){qn(t,n,e)}));function co(t,e){return(Ao(t)?fe:Ni)(t,Ja(e,3))}var fo=wa((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var go=Ei((function(t,e){if(null==t)return[];var n=e.length;return n>1&&sr(t,e[0],e[1])?e=[]:n>2&&sr(e[0],e[1],e[2])&&(e=[e[0]]),Oi(t,ri(e,1),[])})),po=Je||function(){return qt.Date.now()};function mo(t,e,n){return e=n?void 0:e,Ra(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function vo(t,e){var n;if("function"!=typeof e)throw new yt(r);return t=is(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var yo=Ei((function(t,e,n){var i=1;if(n.length){var a=Ve(n,Ka(yo));i|=32}return Ra(t,i,e,n,a)})),wo=Ei((function(t,e,n){var i=3;if(n.length){var a=Ve(n,Ka(wo));i|=32}return Ra(e,i,t,n,a)}));function So(t,e,n){var i,a,o,s,h,l,u=0,d=!1,c=!1,f=!0;if("function"!=typeof t)throw new yt(r);function g(e){var n=i,r=a;return i=a=void 0,u=e,s=t.apply(r,n)}function p(t){return u=t,h=wr(v,e),d?g(t):s}function m(t){var n=t-l;return void 0===l||n>=e||n<0||c&&t-u>=o}function v(){var t=po();if(m(t))return y(t);h=wr(v,function(t){var n=e-(t-l);return c?sn(n,o-(t-u)):n}(t))}function y(t){return h=void 0,f&&i?g(t):(i=a=void 0,s)}function w(){var t=po(),n=m(t);if(i=arguments,a=this,l=t,n){if(void 0===h)return p(l);if(c)return ua(h),h=wr(v,e),g(l)}return void 0===h&&(h=wr(v,e)),s}return e=rs(e)||0,Yo(n)&&(d=!!n.leading,o=(c="maxWait"in n)?on(rs(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==h&&ua(h),u=0,i=l=a=h=void 0},w.flush=function(){return void 0===h?s:y(po())},w}var Po=Ei((function(t,e){return $n(t,1,e)})),bo=Ei((function(t,e,n){return $n(t,rs(e)||0,n)}));function xo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(r);var n=function(){var i=arguments,a=e?e.apply(this,i):i[0],r=n.cache;if(r.has(a))return r.get(a);var o=t.apply(this,i);return n.cache=r.set(a,o)||r,o};return n.cache=new(xo.Cache||Dn),n}function ko(t){if("function"!=typeof t)throw new yt(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}xo.Cache=Dn;var Lo=ha((function(t,e){var n=(e=1==e.length&&Ao(e[0])?fe(e[0],Fe(Ja())):fe(ri(e,1),Fe(Ja()))).length;return Ei((function(i){for(var a=-1,r=sn(i.length,n);++a<r;)i[a]=e[a].call(this,i[a]);return re(t,this,i)}))})),Mo=Ei((function(t,e){return Ra(t,32,void 0,e,Ve(e,Ka(Mo)))})),No=Ei((function(t,e){return Ra(t,64,void 0,e,Ve(e,Ka(No)))})),To=Ha((function(t,e){return Ra(t,256,void 0,void 0,void 0,e)}));function Co(t,e){return t===e||t!=t&&e!=e}var Fo=ja(gi),Bo=ja((function(t,e){return t>=e})),Oo=wi(function(){return arguments}())?wi:function(t){return Ho(t)&&kt.call(t,"callee")&&!Wt.call(t,"callee")},Ao=i.isArray,jo=Qt?Fe(Qt):function(t){return Ho(t)&&fi(t)==x};function Do(t){return null!=t&&Vo(t.length)&&!Io(t)}function zo(t){return Ho(t)&&Do(t)}var Go=en||rh,Eo=te?Fe(te):function(t){return Ho(t)&&fi(t)==d};function Ro(t){if(!Ho(t))return!1;var e=fi(t);return e==c||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qo(t)}function Io(t){if(!Yo(t))return!1;var e=fi(t);return e==f||e==g||"[object AsyncFunction]"==e||"[object Proxy]"==e}function _o(t){return"number"==typeof t&&t==is(t)}function Vo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Yo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ho(t){return null!=t&&"object"==typeof t}var Xo=ee?Fe(ee):function(t){return Ho(t)&&nr(t)==p};function Uo(t){return"number"==typeof t||Ho(t)&&fi(t)==m}function qo(t){if(!Ho(t)||fi(t)!=v)return!1;var e=Xt(t);if(null===e)return!0;var n=kt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xt.call(n)==Tt}var Wo=ne?Fe(ne):function(t){return Ho(t)&&fi(t)==y};var Ko=ie?Fe(ie):function(t){return Ho(t)&&nr(t)==w};function Jo(t){return"string"==typeof t||!Ao(t)&&Ho(t)&&fi(t)==S}function Zo(t){return"symbol"==typeof t||Ho(t)&&fi(t)==P}var $o=ae?Fe(ae):function(t){return Ho(t)&&Vo(t.length)&&!!It[fi(t)]};var Qo=ja(Mi),ts=ja((function(t,e){return t<=e}));function es(t){if(!t)return[];if(Do(t))return Jo(t)?Ue(t):va(t);if($t&&t[$t])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[$t]());var e=nr(t);return(e==p?Ie:e==w?Ye:Cs)(t)}function ns(t){return t?(t=rs(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function is(t){var e=ns(t),n=e%1;return e==e?n?e-n:e:0}function as(t){return t?Kn(is(t),0,4294967295):0}function rs(t){if("number"==typeof t)return t;if(Zo(t))return NaN;if(Yo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Yo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(W,"");var n=rt.test(t);return n||st.test(t)?Ht(t.slice(2),n?2:8):at.test(t)?NaN:+t}function os(t){return ya(t,Ps(t))}function ss(t){return null==t?"":Zi(t)}var hs=Sa((function(t,e){if(dr(e)||Do(e))ya(e,Ss(e),t);else for(var n in e)kt.call(e,n)&&Yn(t,n,e[n])})),ls=Sa((function(t,e){ya(e,Ps(e),t)})),us=Sa((function(t,e,n,i){ya(e,Ps(e),t,i)})),ds=Sa((function(t,e,n,i){ya(e,Ss(e),t,i)})),cs=Ha(Wn);var fs=Ei((function(t,e){t=pt(t);var n=-1,i=e.length,a=i>2?e[2]:void 0;for(a&&sr(e[0],e[1],a)&&(i=1);++n<i;)for(var r=e[n],o=Ps(r),s=-1,h=o.length;++s<h;){var l=o[s],u=t[l];(void 0===u||Co(u,Pt[l])&&!kt.call(t,l))&&(t[l]=r[l])}return t})),gs=Ei((function(t){return t.push(void 0,_a),re(xs,void 0,t)}));function ps(t,e,n){var i=null==t?void 0:di(t,e);return void 0===i?n:i}function ms(t,e){return null!=t&&ir(t,e,mi)}var vs=Ca((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),t[e]=n}),Ys(Us)),ys=Ca((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),kt.call(t,e)?t[e].push(n):t[e]=[n]}),Ja),ws=Ei(yi);function Ss(t){return Do(t)?En(t):ki(t)}function Ps(t){return Do(t)?En(t,!0):Li(t)}var bs=Sa((function(t,e,n){Fi(t,e,n)})),xs=Sa((function(t,e,n,i){Fi(t,e,n,i)})),ks=Ha((function(t,e){var n={};if(null==t)return n;var i=!1;e=fe(e,(function(e){return e=sa(e,t),i||(i=e.length>1),e})),ya(t,Ua(t),n),i&&(n=Jn(n,7,Va));for(var a=e.length;a--;)Qi(n,e[a]);return n}));var Ls=Ha((function(t,e){return null==t?{}:function(t,e){return Ai(t,e,(function(e,n){return ms(t,n)}))}(t,e)}));function Ms(t,e){if(null==t)return{};var n=fe(Ua(t),(function(t){return[t]}));return e=Ja(e),Ai(t,n,(function(t,n){return e(t,n[0])}))}var Ns=Ea(Ss),Ts=Ea(Ps);function Cs(t){return null==t?[]:Be(t,Ss(t))}var Fs=ka((function(t,e,n){return e=e.toLowerCase(),t+(n?Bs(e):e)}));function Bs(t){return Rs(ss(t).toLowerCase())}function Os(t){return(t=ss(t))&&t.replace(lt,ze).replace(At,"")}var As=ka((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),js=ka((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ds=xa("toLowerCase");var zs=ka((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Gs=ka((function(t,e,n){return t+(n?" ":"")+Rs(e)}));var Es=ka((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Rs=xa("toUpperCase");function Is(t,e,n){return t=ss(t),void 0===(e=n?void 0:e)?function(t){return Gt.test(t)}(t)?function(t){return t.match(Dt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var _s=Ei((function(t,e){try{return re(t,void 0,e)}catch(t){return Ro(t)?t:new ct(t)}})),Vs=Ha((function(t,e){return se(e,(function(e){e=Lr(e),qn(t,e,yo(t[e],t))})),t}));function Ys(t){return function(){return t}}var Hs=Na(),Xs=Na(!0);function Us(t){return t}function qs(t){return xi("function"==typeof t?t:Jn(t,1))}var Ws=Ei((function(t,e){return function(n){return yi(n,t,e)}})),Ks=Ei((function(t,e){return function(n){return yi(t,n,e)}}));function Js(t,e,n){var i=Ss(e),a=ui(e,i);null!=n||Yo(e)&&(a.length||!i.length)||(n=e,e=t,t=this,a=ui(e,Ss(e)));var r=!(Yo(n)&&"chain"in n&&!n.chain),o=Io(t);return se(a,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__),a=n.__actions__=va(this.__actions__);return a.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,ge([this.value()],arguments))})})),t}function Zs(){}var $s=Ba(fe),Qs=Ba(le),th=Ba(ve);function eh(t){return hr(t)?Le(Lr(t)):function(t){return function(e){return di(e,t)}}(t)}var nh=Aa(),ih=Aa(!0);function ah(){return[]}function rh(){return!1}var oh=Fa((function(t,e){return t+e}),0),sh=za("ceil"),hh=Fa((function(t,e){return t/e}),1),lh=za("floor");var uh,dh=Fa((function(t,e){return t*e}),1),ch=za("round"),fh=Fa((function(t,e){return t-e}),0);return Tn.after=function(t,e){if("function"!=typeof e)throw new yt(r);return t=is(t),function(){if(--t<1)return e.apply(this,arguments)}},Tn.ary=mo,Tn.assign=hs,Tn.assignIn=ls,Tn.assignInWith=us,Tn.assignWith=ds,Tn.at=cs,Tn.before=vo,Tn.bind=yo,Tn.bindAll=Vs,Tn.bindKey=wo,Tn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ao(t)?t:[t]},Tn.chain=to,Tn.chunk=function(t,e,n){e=(n?sr(t,e,n):void 0===e)?1:on(is(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var r=0,o=0,s=i($e(a/e));r<a;)s[o++]=Xi(t,r,r+=e);return s},Tn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,a=[];++e<n;){var r=t[e];r&&(a[i++]=r)}return a},Tn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],a=t;a--;)e[a-1]=arguments[a];return ge(Ao(n)?va(n):[n],ri(e,1))},Tn.cond=function(t){var e=null==t?0:t.length,n=Ja();return t=e?fe(t,(function(t){if("function"!=typeof t[1])throw new yt(r);return[n(t[0]),t[1]]})):[],Ei((function(n){for(var i=-1;++i<e;){var a=t[i];if(re(a[0],this,n))return re(a[1],this,n)}}))},Tn.conforms=function(t){return function(t){var e=Ss(t);return function(n){return Zn(n,t,e)}}(Jn(t,1))},Tn.constant=Ys,Tn.countBy=io,Tn.create=function(t,e){var n=Cn(t);return null==e?n:Un(n,e)},Tn.curry=function t(e,n,i){var a=Ra(e,8,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return a.placeholder=t.placeholder,a},Tn.curryRight=function t(e,n,i){var a=Ra(e,16,void 0,void 0,void 0,void 0,void 0,n=i?void 0:n);return a.placeholder=t.placeholder,a},Tn.debounce=So,Tn.defaults=fs,Tn.defaultsDeep=gs,Tn.defer=Po,Tn.delay=bo,Tn.difference=Tr,Tn.differenceBy=Cr,Tn.differenceWith=Fr,Tn.drop=function(t,e,n){var i=null==t?0:t.length;return i?Xi(t,(e=n||void 0===e?1:is(e))<0?0:e,i):[]},Tn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Xi(t,0,(e=i-(e=n||void 0===e?1:is(e)))<0?0:e):[]},Tn.dropRightWhile=function(t,e){return t&&t.length?ea(t,Ja(e,3),!0,!0):[]},Tn.dropWhile=function(t,e){return t&&t.length?ea(t,Ja(e,3),!0):[]},Tn.fill=function(t,e,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&sr(t,e,n)&&(n=0,i=a),function(t,e,n,i){var a=t.length;for((n=is(n))<0&&(n=-n>a?0:a+n),(i=void 0===i||i>a?a:is(i))<0&&(i+=a),i=n>i?0:as(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Tn.filter=function(t,e){return(Ao(t)?ue:ai)(t,Ja(e,3))},Tn.flatMap=function(t,e){return ri(co(t,e),1)},Tn.flatMapDeep=function(t,e){return ri(co(t,e),1/0)},Tn.flatMapDepth=function(t,e,n){return n=void 0===n?1:is(n),ri(co(t,e),n)},Tn.flatten=Ar,Tn.flattenDeep=function(t){return(null==t?0:t.length)?ri(t,1/0):[]},Tn.flattenDepth=function(t,e){return(null==t?0:t.length)?ri(t,e=void 0===e?1:is(e)):[]},Tn.flip=function(t){return Ra(t,512)},Tn.flow=Hs,Tn.flowRight=Xs,Tn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var a=t[e];i[a[0]]=a[1]}return i},Tn.functions=function(t){return null==t?[]:ui(t,Ss(t))},Tn.functionsIn=function(t){return null==t?[]:ui(t,Ps(t))},Tn.groupBy=ho,Tn.initial=function(t){return(null==t?0:t.length)?Xi(t,0,-1):[]},Tn.intersection=Dr,Tn.intersectionBy=zr,Tn.intersectionWith=Gr,Tn.invert=vs,Tn.invertBy=ys,Tn.invokeMap=lo,Tn.iteratee=qs,Tn.keyBy=uo,Tn.keys=Ss,Tn.keysIn=Ps,Tn.map=co,Tn.mapKeys=function(t,e){var n={};return e=Ja(e,3),hi(t,(function(t,i,a){qn(n,e(t,i,a),t)})),n},Tn.mapValues=function(t,e){var n={};return e=Ja(e,3),hi(t,(function(t,i,a){qn(n,i,e(t,i,a))})),n},Tn.matches=function(t){return Ti(Jn(t,1))},Tn.matchesProperty=function(t,e){return Ci(t,Jn(e,1))},Tn.memoize=xo,Tn.merge=bs,Tn.mergeWith=xs,Tn.method=Ws,Tn.methodOf=Ks,Tn.mixin=Js,Tn.negate=ko,Tn.nthArg=function(t){return t=is(t),Ei((function(e){return Bi(e,t)}))},Tn.omit=ks,Tn.omitBy=function(t,e){return Ms(t,ko(Ja(e)))},Tn.once=function(t){return vo(2,t)},Tn.orderBy=function(t,e,n,i){return null==t?[]:(Ao(e)||(e=null==e?[]:[e]),Ao(n=i?void 0:n)||(n=null==n?[]:[n]),Oi(t,e,n))},Tn.over=$s,Tn.overArgs=Lo,Tn.overEvery=Qs,Tn.overSome=th,Tn.partial=Mo,Tn.partialRight=No,Tn.partition=fo,Tn.pick=Ls,Tn.pickBy=Ms,Tn.property=eh,Tn.propertyOf=function(t){return function(e){return null==t?void 0:di(t,e)}},Tn.pull=Rr,Tn.pullAll=Ir,Tn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ji(t,e,Ja(n,2)):t},Tn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?ji(t,e,void 0,n):t},Tn.pullAt=_r,Tn.range=nh,Tn.rangeRight=ih,Tn.rearg=To,Tn.reject=function(t,e){return(Ao(t)?ue:ai)(t,ko(Ja(e,3)))},Tn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,a=[],r=t.length;for(e=Ja(e,3);++i<r;){var o=t[i];e(o,i,t)&&(n.push(o),a.push(i))}return Di(t,a),n},Tn.rest=function(t,e){if("function"!=typeof t)throw new yt(r);return Ei(t,e=void 0===e?e:is(e))},Tn.reverse=Vr,Tn.sampleSize=function(t,e,n){return e=(n?sr(t,e,n):void 0===e)?1:is(e),(Ao(t)?In:Ii)(t,e)},Tn.set=function(t,e,n){return null==t?t:_i(t,e,n)},Tn.setWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:_i(t,e,n,i)},Tn.shuffle=function(t){return(Ao(t)?_n:Hi)(t)},Tn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&sr(t,e,n)?(e=0,n=i):(e=null==e?0:is(e),n=void 0===n?i:is(n)),Xi(t,e,n)):[]},Tn.sortBy=go,Tn.sortedUniq=function(t){return t&&t.length?Ki(t):[]},Tn.sortedUniqBy=function(t,e){return t&&t.length?Ki(t,Ja(e,2)):[]},Tn.split=function(t,e,n){return n&&"number"!=typeof n&&sr(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!Wo(e))&&!(e=Zi(e))&&Re(t)?la(Ue(t),0,n):t.split(e,n):[]},Tn.spread=function(t,e){if("function"!=typeof t)throw new yt(r);return e=null==e?0:on(is(e),0),Ei((function(n){var i=n[e],a=la(n,0,e);return i&&ge(a,i),re(t,this,a)}))},Tn.tail=function(t){var e=null==t?0:t.length;return e?Xi(t,1,e):[]},Tn.take=function(t,e,n){return t&&t.length?Xi(t,0,(e=n||void 0===e?1:is(e))<0?0:e):[]},Tn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Xi(t,(e=i-(e=n||void 0===e?1:is(e)))<0?0:e,i):[]},Tn.takeRightWhile=function(t,e){return t&&t.length?ea(t,Ja(e,3),!1,!0):[]},Tn.takeWhile=function(t,e){return t&&t.length?ea(t,Ja(e,3)):[]},Tn.tap=function(t,e){return e(t),t},Tn.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new yt(r);return Yo(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),So(t,e,{leading:i,maxWait:e,trailing:a})},Tn.thru=eo,Tn.toArray=es,Tn.toPairs=Ns,Tn.toPairsIn=Ts,Tn.toPath=function(t){return Ao(t)?fe(t,Lr):Zo(t)?[t]:va(kr(ss(t)))},Tn.toPlainObject=os,Tn.transform=function(t,e,n){var i=Ao(t),a=i||Go(t)||$o(t);if(e=Ja(e,4),null==n){var r=t&&t.constructor;n=a?i?new r:[]:Yo(t)&&Io(r)?Cn(Xt(t)):{}}return(a?se:hi)(t,(function(t,i,a){return e(n,t,i,a)})),n},Tn.unary=function(t){return mo(t,1)},Tn.union=Yr,Tn.unionBy=Hr,Tn.unionWith=Xr,Tn.uniq=function(t){return t&&t.length?$i(t):[]},Tn.uniqBy=function(t,e){return t&&t.length?$i(t,Ja(e,2)):[]},Tn.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?$i(t,void 0,e):[]},Tn.unset=function(t,e){return null==t||Qi(t,e)},Tn.unzip=Ur,Tn.unzipWith=qr,Tn.update=function(t,e,n){return null==t?t:ta(t,e,oa(n))},Tn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:ta(t,e,oa(n),i)},Tn.values=Cs,Tn.valuesIn=function(t){return null==t?[]:Be(t,Ps(t))},Tn.without=Wr,Tn.words=Is,Tn.wrap=function(t,e){return Mo(oa(e),t)},Tn.xor=Kr,Tn.xorBy=Jr,Tn.xorWith=Zr,Tn.zip=$r,Tn.zipObject=function(t,e){return aa(t||[],e||[],Yn)},Tn.zipObjectDeep=function(t,e){return aa(t||[],e||[],_i)},Tn.zipWith=Qr,Tn.entries=Ns,Tn.entriesIn=Ts,Tn.extend=ls,Tn.extendWith=us,Js(Tn,Tn),Tn.add=oh,Tn.attempt=_s,Tn.camelCase=Fs,Tn.capitalize=Bs,Tn.ceil=sh,Tn.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=rs(n))==n?n:0),void 0!==e&&(e=(e=rs(e))==e?e:0),Kn(rs(t),e,n)},Tn.clone=function(t){return Jn(t,4)},Tn.cloneDeep=function(t){return Jn(t,5)},Tn.cloneDeepWith=function(t,e){return Jn(t,5,e="function"==typeof e?e:void 0)},Tn.cloneWith=function(t,e){return Jn(t,4,e="function"==typeof e?e:void 0)},Tn.conformsTo=function(t,e){return null==e||Zn(t,e,Ss(e))},Tn.deburr=Os,Tn.defaultTo=function(t,e){return null==t||t!=t?e:t},Tn.divide=hh,Tn.endsWith=function(t,e,n){t=ss(t),e=Zi(e);var i=t.length,a=n=void 0===n?i:Kn(is(n),0,i);return(n-=e.length)>=0&&t.slice(n,a)==e},Tn.eq=Co,Tn.escape=function(t){return(t=ss(t))&&R.test(t)?t.replace(G,Ge):t},Tn.escapeRegExp=function(t){return(t=ss(t))&&q.test(t)?t.replace(U,"\\$&"):t},Tn.every=function(t,e,n){var i=Ao(t)?le:ni;return n&&sr(t,e,n)&&(e=void 0),i(t,Ja(e,3))},Tn.find=ao,Tn.findIndex=Br,Tn.findKey=function(t,e){return we(t,Ja(e,3),hi)},Tn.findLast=ro,Tn.findLastIndex=Or,Tn.findLastKey=function(t,e){return we(t,Ja(e,3),li)},Tn.floor=lh,Tn.forEach=oo,Tn.forEachRight=so,Tn.forIn=function(t,e){return null==t?t:oi(t,Ja(e,3),Ps)},Tn.forInRight=function(t,e){return null==t?t:si(t,Ja(e,3),Ps)},Tn.forOwn=function(t,e){return t&&hi(t,Ja(e,3))},Tn.forOwnRight=function(t,e){return t&&li(t,Ja(e,3))},Tn.get=ps,Tn.gt=Fo,Tn.gte=Bo,Tn.has=function(t,e){return null!=t&&ir(t,e,pi)},Tn.hasIn=ms,Tn.head=jr,Tn.identity=Us,Tn.includes=function(t,e,n,i){t=Do(t)?t:Cs(t),n=n&&!i?is(n):0;var a=t.length;return n<0&&(n=on(a+n,0)),Jo(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Pe(t,e,n)>-1},Tn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=null==n?0:is(n);return a<0&&(a=on(i+a,0)),Pe(t,e,a)},Tn.inRange=function(t,e,n){return e=ns(e),void 0===n?(n=e,e=0):n=ns(n),function(t,e,n){return t>=sn(e,n)&&t<on(e,n)}(t=rs(t),e,n)},Tn.invoke=ws,Tn.isArguments=Oo,Tn.isArray=Ao,Tn.isArrayBuffer=jo,Tn.isArrayLike=Do,Tn.isArrayLikeObject=zo,Tn.isBoolean=function(t){return!0===t||!1===t||Ho(t)&&fi(t)==u},Tn.isBuffer=Go,Tn.isDate=Eo,Tn.isElement=function(t){return Ho(t)&&1===t.nodeType&&!qo(t)},Tn.isEmpty=function(t){if(null==t)return!0;if(Do(t)&&(Ao(t)||"string"==typeof t||"function"==typeof t.splice||Go(t)||$o(t)||Oo(t)))return!t.length;var e=nr(t);if(e==p||e==w)return!t.size;if(dr(t))return!ki(t).length;for(var n in t)if(kt.call(t,n))return!1;return!0},Tn.isEqual=function(t,e){return Si(t,e)},Tn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?Si(t,e,void 0,n):!!i},Tn.isError=Ro,Tn.isFinite=function(t){return"number"==typeof t&&nn(t)},Tn.isFunction=Io,Tn.isInteger=_o,Tn.isLength=Vo,Tn.isMap=Xo,Tn.isMatch=function(t,e){return t===e||Pi(t,e,$a(e))},Tn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,Pi(t,e,$a(e),n)},Tn.isNaN=function(t){return Uo(t)&&t!=+t},Tn.isNative=function(t){if(ur(t))throw new ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bi(t)},Tn.isNil=function(t){return null==t},Tn.isNull=function(t){return null===t},Tn.isNumber=Uo,Tn.isObject=Yo,Tn.isObjectLike=Ho,Tn.isPlainObject=qo,Tn.isRegExp=Wo,Tn.isSafeInteger=function(t){return _o(t)&&t>=-9007199254740991&&t<=9007199254740991},Tn.isSet=Ko,Tn.isString=Jo,Tn.isSymbol=Zo,Tn.isTypedArray=$o,Tn.isUndefined=function(t){return void 0===t},Tn.isWeakMap=function(t){return Ho(t)&&nr(t)==b},Tn.isWeakSet=function(t){return Ho(t)&&"[object WeakSet]"==fi(t)},Tn.join=function(t,e){return null==t?"":an.call(t,e)},Tn.kebabCase=As,Tn.last=Er,Tn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i;return void 0!==n&&(a=(a=is(n))<0?on(i+a,0):sn(a,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,a):Se(t,xe,a,!0)},Tn.lowerCase=js,Tn.lowerFirst=Ds,Tn.lt=Qo,Tn.lte=ts,Tn.max=function(t){return t&&t.length?ii(t,Us,gi):void 0},Tn.maxBy=function(t,e){return t&&t.length?ii(t,Ja(e,2),gi):void 0},Tn.mean=function(t){return ke(t,Us)},Tn.meanBy=function(t,e){return ke(t,Ja(e,2))},Tn.min=function(t){return t&&t.length?ii(t,Us,Mi):void 0},Tn.minBy=function(t,e){return t&&t.length?ii(t,Ja(e,2),Mi):void 0},Tn.stubArray=ah,Tn.stubFalse=rh,Tn.stubObject=function(){return{}},Tn.stubString=function(){return""},Tn.stubTrue=function(){return!0},Tn.multiply=dh,Tn.nth=function(t,e){return t&&t.length?Bi(t,is(e)):void 0},Tn.noConflict=function(){return qt._===this&&(qt._=Ct),this},Tn.noop=Zs,Tn.now=po,Tn.pad=function(t,e,n){t=ss(t);var i=(e=is(e))?Xe(t):0;if(!e||i>=e)return t;var a=(e-i)/2;return Oa(Qe(a),n)+t+Oa($e(a),n)},Tn.padEnd=function(t,e,n){t=ss(t);var i=(e=is(e))?Xe(t):0;return e&&i<e?t+Oa(e-i,n):t},Tn.padStart=function(t,e,n){t=ss(t);var i=(e=is(e))?Xe(t):0;return e&&i<e?Oa(e-i,n)+t:t},Tn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(ss(t).replace(K,""),e||0)},Tn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&sr(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=ns(t),void 0===e?(e=t,t=0):e=ns(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var a=un();return sn(t+a*(e-t+Yt("1e-"+((a+"").length-1))),e)}return zi(t,e)},Tn.reduce=function(t,e,n){var i=Ao(t)?pe:Ne,a=arguments.length<3;return i(t,Ja(e,4),n,a,ti)},Tn.reduceRight=function(t,e,n){var i=Ao(t)?me:Ne,a=arguments.length<3;return i(t,Ja(e,4),n,a,ei)},Tn.repeat=function(t,e,n){return e=(n?sr(t,e,n):void 0===e)?1:is(e),Gi(ss(t),e)},Tn.replace=function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Tn.result=function(t,e,n){var i=-1,a=(e=sa(e,t)).length;for(a||(a=1,t=void 0);++i<a;){var r=null==t?void 0:t[Lr(e[i])];void 0===r&&(i=a,r=n),t=Io(r)?r.call(t):r}return t},Tn.round=ch,Tn.runInContext=t,Tn.sample=function(t){return(Ao(t)?Rn:Ri)(t)},Tn.size=function(t){if(null==t)return 0;if(Do(t))return Jo(t)?Xe(t):t.length;var e=nr(t);return e==p||e==w?t.size:ki(t).length},Tn.snakeCase=zs,Tn.some=function(t,e,n){var i=Ao(t)?ve:Ui;return n&&sr(t,e,n)&&(e=void 0),i(t,Ja(e,3))},Tn.sortedIndex=function(t,e){return qi(t,e)},Tn.sortedIndexBy=function(t,e,n){return Wi(t,e,Ja(n,2))},Tn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=qi(t,e);if(i<n&&Co(t[i],e))return i}return-1},Tn.sortedLastIndex=function(t,e){return qi(t,e,!0)},Tn.sortedLastIndexBy=function(t,e,n){return Wi(t,e,Ja(n,2),!0)},Tn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=qi(t,e,!0)-1;if(Co(t[n],e))return n}return-1},Tn.startCase=Gs,Tn.startsWith=function(t,e,n){return t=ss(t),n=null==n?0:Kn(is(n),0,t.length),e=Zi(e),t.slice(n,n+e.length)==e},Tn.subtract=fh,Tn.sum=function(t){return t&&t.length?Te(t,Us):0},Tn.sumBy=function(t,e){return t&&t.length?Te(t,Ja(e,2)):0},Tn.template=function(t,e,n){var i=Tn.templateSettings;n&&sr(t,e,n)&&(e=void 0),t=ss(t),e=us({},e,i,Ia);var a,r,o=us({},e.imports,i.imports,Ia),s=Ss(o),h=Be(o,s),l=0,u=e.interpolate||ut,d="__p += '",c=mt((e.escape||ut).source+"|"+u.source+"|"+(u===V?nt:ut).source+"|"+(e.evaluate||ut).source+"|$","g"),f="//# sourceURL="+(kt.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Rt+"]")+"\n";t.replace(c,(function(e,n,i,o,s,h){return i||(i=o),d+=t.slice(l,h).replace(dt,Ee),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(r=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=h+e.length,e})),d+="';\n";var g=kt.call(e,"variable")&&e.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(r?d.replace(A,""):d).replace(j,"$1").replace(D,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var p=_s((function(){return ft(s,f+"return "+d).apply(void 0,h)}));if(p.source=d,Ro(p))throw p;return p},Tn.times=function(t,e){if((t=is(t))<1||t>9007199254740991)return[];var n=4294967295,i=sn(t,4294967295);t-=4294967295;for(var a=Ce(i,e=Ja(e));++n<t;)e(n);return a},Tn.toFinite=ns,Tn.toInteger=is,Tn.toLength=as,Tn.toLower=function(t){return ss(t).toLowerCase()},Tn.toNumber=rs,Tn.toSafeInteger=function(t){return t?Kn(is(t),-9007199254740991,9007199254740991):0===t?t:0},Tn.toString=ss,Tn.toUpper=function(t){return ss(t).toUpperCase()},Tn.trim=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(W,"");if(!t||!(e=Zi(e)))return t;var i=Ue(t),a=Ue(e);return la(i,Ae(i,a),je(i,a)+1).join("")},Tn.trimEnd=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(J,"");if(!t||!(e=Zi(e)))return t;var i=Ue(t);return la(i,0,je(i,Ue(e))+1).join("")},Tn.trimStart=function(t,e,n){if((t=ss(t))&&(n||void 0===e))return t.replace(K,"");if(!t||!(e=Zi(e)))return t;var i=Ue(t);return la(i,Ae(i,Ue(e))).join("")},Tn.truncate=function(t,e){var n=30,i="...";if(Yo(e)){var a="separator"in e?e.separator:a;n="length"in e?is(e.length):n,i="omission"in e?Zi(e.omission):i}var r=(t=ss(t)).length;if(Re(t)){var o=Ue(t);r=o.length}if(n>=r)return t;var s=n-Xe(i);if(s<1)return i;var h=o?la(o,0,s).join(""):t.slice(0,s);if(void 0===a)return h+i;if(o&&(s+=h.length-s),Wo(a)){if(t.slice(s).search(a)){var l,u=h;for(a.global||(a=mt(a.source,ss(it.exec(a))+"g")),a.lastIndex=0;l=a.exec(u);)var d=l.index;h=h.slice(0,void 0===d?s:d)}}else if(t.indexOf(Zi(a),s)!=s){var c=h.lastIndexOf(a);c>-1&&(h=h.slice(0,c))}return h+i},Tn.unescape=function(t){return(t=ss(t))&&E.test(t)?t.replace(z,qe):t},Tn.uniqueId=function(t){var e=++Lt;return ss(t)+e},Tn.upperCase=Es,Tn.upperFirst=Rs,Tn.each=oo,Tn.eachRight=so,Tn.first=jr,Js(Tn,(uh={},hi(Tn,(function(t,e){kt.call(Tn.prototype,e)||(uh[e]=t)})),uh),{chain:!1}),Tn.VERSION="4.17.15",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Tn[t].placeholder=Tn})),se(["drop","take"],(function(t,e){On.prototype[t]=function(n){n=void 0===n?1:on(is(n),0);var i=this.__filtered__&&!e?new On(this):this.clone();return i.__filtered__?i.__takeCount__=sn(n,i.__takeCount__):i.__views__.push({size:sn(n,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},On.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;On.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ja(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");On.prototype[t]=function(){return this[n](1).value()[0]}})),se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");On.prototype[t]=function(){return this.__filtered__?new On(this):this[n](1)}})),On.prototype.compact=function(){return this.filter(Us)},On.prototype.find=function(t){return this.filter(t).head()},On.prototype.findLast=function(t){return this.reverse().find(t)},On.prototype.invokeMap=Ei((function(t,e){return"function"==typeof t?new On(this):this.map((function(n){return yi(n,t,e)}))})),On.prototype.reject=function(t){return this.filter(ko(Ja(t)))},On.prototype.slice=function(t,e){t=is(t);var n=this;return n.__filtered__&&(t>0||e<0)?new On(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=is(e))<0?n.dropRight(-e):n.take(e-t)),n)},On.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},On.prototype.toArray=function(){return this.take(4294967295)},hi(On.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=Tn[i?"take"+("last"==e?"Right":""):e],r=i||/^find/.test(e);a&&(Tn.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,s=e instanceof On,h=o[0],l=s||Ao(e),u=function(t){var e=a.apply(Tn,ge([t],o));return i&&d?e[0]:e};l&&n&&"function"==typeof h&&1!=h.length&&(s=l=!1);var d=this.__chain__,c=!!this.__actions__.length,f=r&&!d,g=s&&!c;if(!r&&l){e=g?e:new On(this);var p=t.apply(e,o);return p.__actions__.push({func:eo,args:[u],thisArg:void 0}),new Bn(p,d)}return f&&g?t.apply(this,o):(p=this.thru(u),f?i?p.value()[0]:p.value():p)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=wt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Tn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var a=this.value();return e.apply(Ao(a)?a:[],t)}return this[n]((function(n){return e.apply(Ao(n)?n:[],t)}))}})),hi(On.prototype,(function(t,e){var n=Tn[e];if(n){var i=n.name+"";kt.call(wn,i)||(wn[i]=[]),wn[i].push({name:e,func:n})}})),wn[Ta(void 0,2).name]=[{name:"wrapper",func:void 0}],On.prototype.clone=function(){var t=new On(this.__wrapped__);return t.__actions__=va(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=va(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=va(this.__views__),t},On.prototype.reverse=function(){if(this.__filtered__){var t=new On(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},On.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ao(t),i=e<0,a=n?t.length:0,r=function(t,e,n){var i=-1,a=n.length;for(;++i<a;){var r=n[i],o=r.size;switch(r.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=sn(e,t+o);break;case"takeRight":t=on(t,e-o)}}return{start:t,end:e}}(0,a,this.__views__),o=r.start,s=r.end,h=s-o,l=i?s:o-1,u=this.__iteratees__,d=u.length,c=0,f=sn(h,this.__takeCount__);if(!n||!i&&a==h&&f==h)return na(t,this.__actions__);var g=[];t:for(;h--&&c<f;){for(var p=-1,m=t[l+=e];++p<d;){var v=u[p],y=v.iteratee,w=v.type,S=y(m);if(2==w)m=S;else if(!S){if(1==w)continue t;break t}}g[c++]=m}return g},Tn.prototype.at=no,Tn.prototype.chain=function(){return to(this)},Tn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},Tn.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Tn.prototype.plant=function(t){for(var e,n=this;n instanceof Fn;){var i=Nr(n);i.__index__=0,i.__values__=void 0,e?a.__wrapped__=i:e=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,e},Tn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof On){var e=t;return this.__actions__.length&&(e=new On(this)),(e=e.reverse()).__actions__.push({func:eo,args:[Vr],thisArg:void 0}),new Bn(e,this.__chain__)}return this.thru(Vr)},Tn.prototype.toJSON=Tn.prototype.valueOf=Tn.prototype.value=function(){return na(this.__wrapped__,this.__actions__)},Tn.prototype.first=Tn.prototype.head,$t&&(Tn.prototype[$t]=function(){return this}),Tn}();qt._=We,void 0===(a=function(){return We}.call(e,n,e,i))||(i.exports=a)}).call(this)}).call(this,n(4),n(6)(t))},function(t,e,n){"use strict";var i,a,r,o,s,h,l,u=n(7),d=n(24),c=Function.prototype.apply,f=Function.prototype.call,g=Object.create,p=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};a=function(t,e){var n,a;return d(e),a=this,i.call(this,t,n=function(){r.call(a,t,n),c.call(e,this,arguments)}),n.__eeOnceListener__=e,this},s={on:i=function(t,e){var n;return d(e),v.call(this,"__ee__")?n=this.__ee__:(n=y.value=g(null),p(this,"__ee__",y),y.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:a,off:r=function(t,e){var n,i,a,r;if(d(e),!v.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(i=n[t]))for(r=0;a=i[r];++r)a!==e&&a.__eeOnceListener__!==e||(2===i.length?n[t]=i[r?0:1]:i.splice(r,1));else i!==e&&i.__eeOnceListener__!==e||delete n[t];return this},emit:o=function(t){var e,n,i,a,r;if(v.call(this,"__ee__")&&(a=this.__ee__[t]))if("object"==typeof a){for(n=arguments.length,r=new Array(n-1),e=1;e<n;++e)r[e-1]=arguments[e];for(a=a.slice(),e=0;i=a[e];++e)c.call(i,this,r)}else switch(arguments.length){case 1:f.call(a,this);break;case 2:f.call(a,this,arguments[1]);break;case 3:f.call(a,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,r=new Array(n-1),e=1;e<n;++e)r[e-1]=arguments[e];c.call(a,this,r)}}},h={on:u(i),once:u(a),off:u(r),emit:u(o)},l=m({},h),t.exports=e=function(t){return null==t?g(l):m(Object(t),h)},e.methods=s},function(t,e,n){"use strict";var i=n(18)();t.exports=function(t){return t!==i&&null!==t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t){return null!=t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var i=n(5),a=n(8),r=n(12),o=n(20),s=n(21);(t.exports=function(t,e){var n,a,h,l,u;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],i(t)?(n=s.call(t,"c"),a=s.call(t,"e"),h=s.call(t,"w")):(n=h=!0,a=!1),u={value:e,configurable:n,enumerable:a,writable:h},l?r(o(l),u):u}).gs=function(t,e,n){var h,l,u,d;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],i(e)?a(e)?i(n)?a(n)||(u=n,n=void 0):n=void 0:(u=e,e=n=void 0):e=void 0,i(t)?(h=s.call(t,"c"),l=s.call(t,"e")):(h=!0,l=!1),d={get:e,set:n,configurable:h,enumerable:l},u?r(o(u),d):d}},function(t,e,n){"use strict";var i=n(9),a=/^\s*class[\s{/}]/,r=Function.prototype.toString;t.exports=function(t){return!!i(t)&&!a.test(r.call(t))}},function(t,e,n){"use strict";var i=n(10);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!i(t)}},function(t,e,n){"use strict";var i=n(11);t.exports=function(t){if(!i(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},function(t,e,n){"use strict";var i=n(5),a={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!i(t)&&hasOwnProperty.call(a,typeof t)}},function(t,e,n){"use strict";t.exports=n(13)()?Object.assign:n(14)},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var i=n(15),a=n(19),r=Math.max;t.exports=function(t,e){var n,o,s,h=r(arguments.length,2);for(t=Object(a(t)),s=function(i){try{t[i]=e[i]}catch(t){n||(n=t)}},o=1;o<h;++o)e=arguments[o],i(e).forEach(s);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(16)()?Object.keys:n(17)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var i=n(3),a=Object.keys;t.exports=function(t){return a(i(t)?Object(t):t)}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var i=n(3);t.exports=function(t){if(!i(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";var i=n(3),a=Array.prototype.forEach,r=Object.create,o=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=r(null);return a.call(arguments,(function(t){i(t)&&o(Object(t),e)})),e}},function(t,e,n){"use strict";t.exports=n(22)()?String.prototype.contains:n(23)},function(t,e,n){"use strict";var i="razdwatrzy";t.exports=function(){return"function"==typeof i.contains&&(!0===i.contains("dwa")&&!1===i.contains("foo"))}},function(t,e,n){"use strict";var i=String.prototype.indexOf;t.exports=function(t){return i.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";n.r(e),n.d(e,"Maps",(function(){return xn})),n.d(e,"MindMap",(function(){return jn})),n.d(e,"FlowChart",(function(){return Un})),n.d(e,"TemplateMaker",(function(){return Ze})),n.d(e,"ToolMaker",(function(){return At})),n.d(e,"Actions",(function(){return Ge})),n.d(e,"Action",(function(){return ze})),n.d(e,"SequenceMap",(function(){return wi})),n.d(e,"StructMap",(function(){return Bi}));var i=n(0),a=n.n(i),r=n(1),o=n.n(r);function s(t){t.layout.invalidateLayout(),t.findTopLevelGroups().each((function(t){"verticalPool"!==t.category&&"horizontalPool"!==t.category||t.layout.invalidateLayout()})),t.layoutDiagram()}function h(t,e){var n=200;return t.memberParts.each((function(t){if(t instanceof a.a.Group){var i=t.placeholder;if(null!==i){var r=i.actualBounds;n="Horizontal"===e?Math.max(n,r.width):Math.max(n,r.height)}}})),"Horizontal"===e?new a.a.Size(n,NaN):new a.a.Size(NaN,n)}function l(t,e){var n=u(t,e),i=null;return"Horizontal"===e?(t.isSubGraphExpanded&&t.placeholder,null!==(i=t.findObject("HEADER"))&&(n.height=Math.max(n.height,i.actualBounds.height)),n):(t.isSubGraphExpanded&&t.placeholder,null!==(i=t.findObject("HEADER"))&&(n.width=Math.max(n.width,i.actualBounds.width)),n)}function u(t,e){return"Horizontal"===e?t.isSubGraphExpanded?new a.a.Size(200,20):new a.a.Size(200,1):t.isSubGraphExpanded?new a.a.Size(20,200):new a.a.Size(1,200)}function d(){a.a.GridLayout.call(this),this._direction="Horizontal",this.cellSize=new a.a.Size(1,1),this.isRealtime=!1,this.alignment=a.a.GridLayout.Position}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}a.a.Diagram.inherit(d,a.a.GridLayout),d.prototype.doLayout=function(t){var e=this,n=this.diagram;if(null!==n){n.startTransaction("PoolLayout");var i=this.group;if(null!==i&&"verticalPool"===i.category||"horizontalPool"===i.category){var r=h(i,this.direction);i.memberParts.each((function(t){if(t instanceof a.a.Group&&("verticalPool"!==t.category||"horizontalPool"!==t.category)){var n=t.resizeObject;if(null!==n)if("Horizontal"===e.direction){var i=l(t);n.width=isNaN(n.width)?r.width:Math.max(n.width,r.width),n.height=isNaN(n.height)?i.height:Math.max(n.height,i.height);var o=t.resizeCellSize;!isNaN(n.width)&&!isNaN(o.width)&&o.width>0&&(n.width=Math.ceil(n.width/o.width)*o.width),!isNaN(n.height)&&!isNaN(o.height)&&o.height>0&&(n.height=Math.ceil(n.height/o.height)*o.height)}else i=l(t),n.width=isNaN(n.width)?i.width:Math.max(n.width,i.width),n.height=isNaN(n.height)?r.height:Math.max(n.height,r.height),o=t.resizeCellSize,!isNaN(n.width)&&!isNaN(o.width)&&o.width>0&&(n.width=Math.ceil(n.width/o.width)*o.width),!isNaN(n.height)&&!isNaN(o.height)&&o.height>0&&(n.height=Math.ceil(n.height/o.height)*o.height)}}))}a.a.GridLayout.prototype.doLayout.call(this,t),n.commitTransaction("PoolLayout")}},Object.defineProperty(d.prototype,"direction",{get:function(){return this._direction},set:function(t){"Horizontal"===t?(this.wrappingColumn=1,this.wrappingWidth=1/0):(this.wrappingColumn=1/0,this.wrappingWidth=1/0),this.comparer=function(e,n){if("Horizontal"===t){var i=e.location.y,a=n.location.y;return isNaN(i)||isNaN(a)?0:i<a?-1:i>a?1:0}var r=e.location.x,o=n.location.x;return isNaN(r)||isNaN(o)?0:r<o?-1:r>o?1:0},this._direction!==t&&(this._direction=t,this.invalidateLayout())}});var w=a.a.GraphObject.make("ToolTip",{name:"SIZE_TOOLTIP"},a.a.GraphObject.make(a.a.Panel,a.a.GraphObject.make(a.a.TextBlock,{name:"TEXT",margin:4}))),S=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?g(t):e}(this,m(e).call(this)),y(g(t),"name","ResizeMultiple"),y(g(t),"isLengthening",(function(t){return"Horizontal"===t?this.handle.alignment===a.a.Spot.Right:this.handle.alignment===a.a.Spot.Bottom})),t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),n=e,(i=[{key:"computeMinSize",value:function(){var t=null,n=this.adornedObject.part;if("HorizontalLane"===n.category){var i=u(n,"Horizontal");return this.isLengthening("Horizontal")?(t=h(n.containingGroup,"Horizontal"),i.width=Math.max(i.width,t.width)):(t=l(n),i.width=Math.max(i.width,t.width),i.height=Math.max(i.height,t.height)),i}return p(m(e.prototype),"computeMinSize",this).call(this)}},{key:"resize",value:function(t){var e=this,n=this.diagram;n.selection.each((function(i){if(!(i instanceof a.a.Link))if(i instanceof a.a.Group&&"HorizontalLane"===i.category)e.isLengthening("Horizontal")?i.containingGroup.memberParts.each((function(e){var n=e.resizeObject;null!==n&&(n.width=t.width,l(e))})):a.a.ResizingTool.prototype.resize.call(e,t),s(i.diagram);else if(i instanceof a.a.Group&&"verticalLane"===i.category)e.isLengthening("Vertical")?i.containingGroup.memberParts.each((function(e){if(e instanceof a.a.Group){var n=e.resizeObject;null!==n&&(n.height=t.height)}})):a.a.ResizingTool.prototype.resize.call(e,t),s(i.diagram);else if(i instanceof a.a.Node){var r=i.resizeObject,o=i.position.copy(),h=r.getDocumentAngle(),u=r.getDocumentScale(),d=Math.PI*h/180,c=Math.cos(d),f=Math.sin(d),g=t.width-r.naturalBounds.width,p=t.height-r.naturalBounds.height,m=h>0&&h<180?1:0,v=h>90&&h<270?1:0,y=h>180&&h<360?1:0;o.x+=u*((t.x+g*v)*c-(t.y+p*m)*f),o.y+=u*((t.x+g*y)*f+(t.y+p*v)*c),r.desiredSize=t.size,i.position=o,w.findObject("TEXT").text="W:"+t.size.width+" H:"+t.size.height,n.toolManager.showToolTip(w,i)}}))}}])&&f(n.prototype,i),r&&f(n,r),e}(a.a.ResizingTool);function P(){a.a.DraggingTool.call(this);var t=a.a.GraphObject.make,e={layerName:"Tool",isInDocumentBounds:!1},n={stroke:"gray",isGeometryPositioned:!0};this.guidelineHtop=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 100 0"})),this.guidelineHbottom=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 100 0"})),this.guidelineHcenter=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 100 0"})),this.guidelineVleft=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 0 100"})),this.guidelineVright=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 0 100"})),this.guidelineVcenter=t(a.a.Part,e,t(a.a.Shape,n,{geometryString:"M0 0 0 100"})),this._guidelineSnapDistance=6,this._isGuidelineEnabled=!0,this._horizontalGuidelineColor="gray",this._verticalGuidelineColor="gray",this._centerGuidelineColor="gray",this._guidelineWidth=1,this._searchDistance=1e3,this._isGuidelineSnapEnabled=!0}a.a.Diagram.inherit(P,a.a.DraggingTool),P.prototype.clearGuidelines=function(){this.diagram.remove(this.guidelineHbottom),this.diagram.remove(this.guidelineHcenter),this.diagram.remove(this.guidelineHtop),this.diagram.remove(this.guidelineVleft),this.diagram.remove(this.guidelineVright),this.diagram.remove(this.guidelineVcenter)},P.prototype.doDeactivate=function(){a.a.DraggingTool.prototype.doDeactivate.call(this),this.clearGuidelines()},P.prototype.doDragOver=function(t,e){this.clearGuidelines();var n=(this.copiedParts||this.draggedParts).iterator;if(n.next()){var i=n.key;this.showHorizontalMatches(i,this.isGuidelineEnabled,!1),this.showVerticalMatches(i,this.isGuidelineEnabled,!1)}},P.prototype.doDropOnto=function(t,e){this.clearGuidelines();var n=(this.copiedParts||this.draggedParts).iterator;if(n.next()){var i=n.key,a=this.diagram.lastInput,r=this.isGuidelineSnapEnabled&&!a.shift;this.showHorizontalMatches(i,!1,r),this.showVerticalMatches(i,!1,r)}},P.prototype.invalidateLinks=function(t){t instanceof a.a.Node&&t.invalidateConnectedLinks()},P.prototype.showHorizontalMatches=function(t,e,n){var i=t.locationObject.getDocumentBounds(),r=i.y,o=i.y+i.height/2,s=i.y+i.height,h=this.guidelineSnapDistance,l=this.searchDistance,u=i.copy();u.inflate(l,h+1);var d,c,f=this.diagram.findObjectsIn(u,(function(t){return t.part}),(function(t){return t instanceof a.a.Part&&!t.isSelected&&!(t instanceof a.a.Link)&&!(t instanceof a.a.Group)&&t.isTopLevel&&!t.layer.isTemporary}),!0),g=h,p=null;if(f.each((function(e){if(e!==t){var n=e.locationObject.getDocumentBounds(),i=n.y,h=n.y+n.height/2,l=n.y+n.height;Math.abs(o-h)<g&&(g=Math.abs(o-h),p=e,d=a.a.Spot.Center,c=a.a.Spot.Center),Math.abs(r-i)<g?(g=Math.abs(r-i),p=e,d=a.a.Spot.Top,c=a.a.Spot.Top):Math.abs(r-l)<g&&(g=Math.abs(r-l),p=e,d=a.a.Spot.Top,c=a.a.Spot.Bottom),Math.abs(s-i)<g?(g=Math.abs(s-i),p=e,d=a.a.Spot.Bottom,c=a.a.Spot.Top):Math.abs(s-l)<g&&(g=Math.abs(s-l),p=e,d=a.a.Spot.Bottom,c=a.a.Spot.Bottom)}})),null!==p){var m=i.x-t.actualBounds.x,v=i.y-t.actualBounds.y,y=p.locationObject.getDocumentBounds(),w=Math.min(i.x,y.x)-10,S=Math.max(i.x+i.width,y.x+y.width)+10,P=(new a.a.Point).setRectSpot(y,c);d===a.a.Spot.Center?(n&&(t.move(new a.a.Point(i.x-m,P.y-i.height/2-v)),this.invalidateLinks(t)),e&&(this.guidelineHcenter.position=new a.a.Point(w,P.y),this.guidelineHcenter.elt(0).width=S-w,this.diagram.add(this.guidelineHcenter))):d===a.a.Spot.Top?(n&&(t.move(new a.a.Point(i.x-m,P.y-v)),this.invalidateLinks(t)),e&&(this.guidelineHtop.position=new a.a.Point(w,P.y),this.guidelineHtop.elt(0).width=S-w,this.diagram.add(this.guidelineHtop))):d===a.a.Spot.Bottom&&(n&&(t.move(new a.a.Point(i.x-m,P.y-i.height-v)),this.invalidateLinks(t)),e&&(this.guidelineHbottom.position=new a.a.Point(w,P.y),this.guidelineHbottom.elt(0).width=S-w,this.diagram.add(this.guidelineHbottom)))}},P.prototype.showVerticalMatches=function(t,e,n){var i=t.locationObject.getDocumentBounds(),r=i.x,o=i.x+i.width/2,s=i.x+i.width,h=this.guidelineSnapDistance,l=this.searchDistance,u=i.copy();u.inflate(h+1,l);var d,c,f=this.diagram.findObjectsIn(u,(function(t){return t.part}),(function(t){return t instanceof a.a.Part&&!t.isSelected&&!(t instanceof a.a.Link)&&!(t instanceof a.a.Group)&&t.isTopLevel&&!t.layer.isTemporary}),!0),g=h,p=null;if(f.each((function(e){if(e!==t){var n=e.locationObject.getDocumentBounds(),i=n.x,h=n.x+n.width/2,l=n.x+n.width;Math.abs(o-h)<g&&(g=Math.abs(o-h),p=e,d=a.a.Spot.Center,c=a.a.Spot.Center),Math.abs(r-i)<g?(g=Math.abs(r-i),p=e,d=a.a.Spot.Left,c=a.a.Spot.Left):Math.abs(r-l)<g&&(g=Math.abs(r-l),p=e,d=a.a.Spot.Left,c=a.a.Spot.Right),Math.abs(s-i)<g?(g=Math.abs(s-i),p=e,d=a.a.Spot.Right,c=a.a.Spot.Left):Math.abs(s-l)<g&&(g=Math.abs(s-l),p=e,d=a.a.Spot.Right,c=a.a.Spot.Right)}})),null!==p){var m=i.x-t.actualBounds.x,v=i.y-t.actualBounds.y,y=p.locationObject.getDocumentBounds(),w=Math.min(i.y,y.y)-10,S=Math.max(i.y+i.height,y.y+y.height)+10,P=(new a.a.Point).setRectSpot(y,c);d===a.a.Spot.Center?(n&&(t.move(new a.a.Point(P.x-i.width/2-m,i.y-v)),this.invalidateLinks(t)),e&&(this.guidelineVcenter.position=new a.a.Point(P.x,w),this.guidelineVcenter.elt(0).height=S-w,this.diagram.add(this.guidelineVcenter))):d===a.a.Spot.Left?(n&&(t.move(new a.a.Point(P.x-m,i.y-v)),this.invalidateLinks(t)),e&&(this.guidelineVleft.position=new a.a.Point(P.x,w),this.guidelineVleft.elt(0).height=S-w,this.diagram.add(this.guidelineVleft))):d===a.a.Spot.Right&&(n&&(t.move(new a.a.Point(P.x-i.width-m,i.y-v)),this.invalidateLinks(t)),e&&(this.guidelineVright.position=new a.a.Point(P.x,w),this.guidelineVright.elt(0).height=S-w,this.diagram.add(this.guidelineVright)))}},Object.defineProperty(P.prototype,"guidelineSnapDistance",{get:function(){return this._guidelineSnapDistance},set:function(t){if("number"!=typeof t||isNaN(t)||t<0)throw new Error("new value for GuidedDraggingTool.guidelineSnapDistance must be a non-negative number.");this._guidelineSnapDistance!==t&&(this._guidelineSnapDistance=t)}}),Object.defineProperty(P.prototype,"isGuidelineEnabled",{get:function(){return this._isGuidelineEnabled},set:function(t){if("boolean"!=typeof t)throw new Error("new value for GuidedDraggingTool.isGuidelineEnabled must be a boolean value.");this._isGuidelineEnabled!==t&&(this._isGuidelineEnabled=t)}}),Object.defineProperty(P.prototype,"horizontalGuidelineColor",{get:function(){return this._horizontalGuidelineColor},set:function(t){this._horizontalGuidelineColor!==t&&(this._horizontalGuidelineColor=t,this.guidelineHbottom.elements.first().stroke=this._horizontalGuidelineColor,this.guidelineHtop.elements.first().stroke=this._horizontalGuidelineColor)}}),Object.defineProperty(P.prototype,"verticalGuidelineColor",{get:function(){return this._verticalGuidelineColor},set:function(t){this._verticalGuidelineColor!==t&&(this._verticalGuidelineColor=t,this.guidelineVleft.elements.first().stroke=this._verticalGuidelineColor,this.guidelineVright.elements.first().stroke=this._verticalGuidelineColor)}}),Object.defineProperty(P.prototype,"centerGuidelineColor",{get:function(){return this._centerGuidelineColor},set:function(t){this._centerGuidelineColor!==t&&(this._centerGuidelineColor=t,this.guidelineVcenter.elements.first().stroke=this._centerGuidelineColor,this.guidelineHcenter.elements.first().stroke=this._centerGuidelineColor)}}),Object.defineProperty(P.prototype,"guidelineWidth",{get:function(){return this._guidelineWidth},set:function(t){if("number"!=typeof t||isNaN(t)||t<0)throw new Error("New value for GuidedDraggingTool.guidelineWidth must be a non-negative number.");this._guidelineWidth!==t&&(this._guidelineWidth=t,this.guidelineVcenter.elements.first().strokeWidth=t,this.guidelineHcenter.elements.first().strokeWidth=t,this.guidelineVleft.elements.first().strokeWidth=t,this.guidelineVright.elements.first().strokeWidth=t,this.guidelineHbottom.elements.first().strokeWidth=t,this.guidelineHtop.elements.first().strokeWidth=t)}}),Object.defineProperty(P.prototype,"searchDistance",{get:function(){return this._searchDistance},set:function(t){if("number"!=typeof t||isNaN(t)||t<=0)throw new Error("new value for GuidedDraggingTool.searchDistance must be a positive number.");this._searchDistance!==t&&(this._searchDistance=t)}}),Object.defineProperty(P.prototype,"isGuidelineSnapEnabled",{get:function(){return this._isGuidelineSnapEnabled},set:function(t){if("boolean"!=typeof t)throw new Error("new value for GuidedDraggingTool.isGuidelineSnapEnabled must be a boolean.");this._isGuidelineSnapEnabled!==t&&(this._isGuidelineSnapEnabled=t)}});var b=P;function x(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=1/0),this._name=t,this._defaultValue=e,this._minimum=n,this._maximum=i}Object.defineProperty(x.prototype,"name",{get:function(){return this._name},set:function(t){if("string"!=typeof t||""===t)throw new Error("Shape name must be a valid string.");this._name=t}}),Object.defineProperty(x.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("The default value must be a real number, not: "+t);this._defaultValue=t}}),Object.defineProperty(x.prototype,"minimum",{get:function(){return this._minimum},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("Minimum must be a real number, not: "+t);this._minimum=t}}),Object.defineProperty(x.prototype,"maximum",{get:function(){return this._maximum},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("Maximum must be a real number, not: "+t);this._maximum=t}}),a.a.Shape._FigureParameters={},a.a.Shape.getFigureParameter=function(t,e){var n=a.a.Shape._FigureParameters[t];return n?n[e]:null},a.a.Shape.setFigureParameter=function(t,e,n){if(!(n instanceof x))throw new Error("Third argument to Shape.setFigureParameter is not FigureParameter: "+n);if(n.defaultValue<n.minimum||n.defaultValue>n.maximum)throw new Error("defaultValue must be between minimum and maximum, not: "+n.defaultValue);var i=a.a.Shape._FigureParameters[t];i||(i=[],a.a.Shape._FigureParameters[t]=i),i[e]=n};var k=[];function L(t,e){var n=k.pop();return void 0===n?new a.a.Point(t,e):(n.x=t,n.y=e,n)}function M(){var t=k.pop();return void 0===t?new a.a.Point:t}function N(t){k.push(t)}function T(t,e,n,i,a,r,o,s,h){var l,u,d,c,f,g=t-n,p=a-o;0===g||0===p?u=0===g?(c=(r-s)/p)*(l=t)+(r-c*a):(d=(e-i)/g)*(l=a)+(f=e-d*t):u=(d=(e-i)/g)*(l=(r-(c=(r-s)/p)*a-(f=e-d*t))/(d-c))+f;return h.x=l,h.y=u,h}function C(t,e,n,i,a,r,o,s,h,l,u,d,c,f){var g=1-h,p=t*g+n*h,m=e*g+i*h,v=n*g+a*h,y=i*g+r*h,w=a*g+o*h,S=r*g+s*h,P=p*g+v*h,b=m*g+y*h,x=v*g+w*h,k=y*g+S*h,L=P*g+x*h,M=b*g+k*h;l.x=p,l.y=m,u.x=P,u.y=b,d.x=L,d.y=M,c.x=x,c.y=k,f.x=w,f.y=S}var F=new a.a.Spot(.156,.156),B=new a.a.Spot(.844,.844),O=(Math.sqrt(2)-1)/3*4;a.a.Shape.defineFigureGenerator("Rectangle",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Rectangle);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i})),a.a.Shape.defineFigureGenerator("Square",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Rectangle);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.setFigureParameter("RoundedRectangle",0,new x("CornerRounding",5)),a.a.Shape.defineFigureGenerator("RoundedRectangle",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=5),i=Math.min(i,e/3);var r=(i=Math.min(i,n/3))*O,o=(new a.a.Geometry).add(new a.a.PathFigure(i,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,0)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,i,e-r,0,e,r)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-i)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-i,n,e,n-r,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,i,n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n-i,r,n,0,n-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,i)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,i,0,0,r,r,0).close()));return r>1&&(o.spot1=new a.a.Spot(0,0,r,r),o.spot2=new a.a.Spot(1,1,-r,-r)),o})),a.a.Shape.defineFigureGenerator("Border","RoundedRectangle"),a.a.Shape.defineFigureGenerator("Ellipse",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Ellipse);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i.spot1=F,i.spot2=B,i})),a.a.Shape.defineFigureGenerator("Circle",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Ellipse);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i.spot1=F,i.spot2=B,i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("TriangleRight",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())).setSpots(0,.25,.5,.75)})),a.a.Shape.defineFigureGenerator("TriangleDown",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n).close())).setSpots(.25,0,.75,.5)})),a.a.Shape.defineFigureGenerator("TriangleLeft",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,n).add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0).close())).setSpots(.5,.25,1,.75)})),a.a.Shape.defineFigureGenerator("TriangleUp",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,n).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0).close())).setSpots(.25,.5,.75,1)})),a.a.Shape.defineFigureGenerator("Triangle","TriangleUp"),a.a.Shape.defineFigureGenerator("Diamond",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.5*e,0).add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n).close())).setSpots(.25,.25,.75,.75)})),a.a.Shape.defineFigureGenerator("LineH",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Line);return i.startX=0,i.startY=n/2,i.endX=e,i.endY=n/2,i})),a.a.Shape.defineFigureGenerator("LineV",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Line);return i.startX=e/2,i.startY=0,i.endX=e/2,i.endY=n,i})),a.a.Shape.defineFigureGenerator("BarH","Rectangle"),a.a.Shape.defineFigureGenerator("BarV","Rectangle"),a.a.Shape.defineFigureGenerator("MinusLine","LineH"),a.a.Shape.defineFigureGenerator("PlusLine",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,n/2,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n/2)).add(new a.a.PathSegment(a.a.PathSegment.Move,e/2,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e/2,n)))})),a.a.Shape.defineFigureGenerator("XLine",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,n,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)))})),a.a.Shape.defineFigureGenerator("AsteriskLine",(function(t,e,n){var i=.2/Math.SQRT2;return(new a.a.Geometry).add(new a.a.PathFigure(i*e,(1-i)*n,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,i*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,i*e,i*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,(1-i)*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,n/2)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n/2)).add(new a.a.PathSegment(a.a.PathSegment.Move,e/2,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e/2,n)))})),a.a.Shape.defineFigureGenerator("CircleLine",(function(t,e,n){var i=e/2,r=(new a.a.Geometry).add(new a.a.PathFigure(e,e/2,!1).add(new a.a.PathSegment(a.a.PathSegment.Arc,0,360,i,i,i,i).close()));return r.spot1=F,r.spot2=B,r.defaultStretch=a.a.GraphObject.Uniform,r})),a.a.Shape.defineFigureGenerator("Line1",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Line);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i})),a.a.Shape.defineFigureGenerator("Line2",(function(t,e,n){var i=new a.a.Geometry(a.a.Geometry.Line);return i.startX=e,i.startY=0,i.endX=0,i.endY=n,i})),a.a.Shape.defineFigureGenerator("Curve1",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,n,O*e,0,e,(1-O)*n)))})),a.a.Shape.defineFigureGenerator("Curve2",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,n,0,O*n,(1-O)*e,n)))})),a.a.Shape.defineFigureGenerator("Curve3",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,e,O*n,O*e,n)))})),a.a.Shape.defineFigureGenerator("Curve4",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,(1-O)*e,0,0,(1-O)*n)))})),a.a.Shape.defineFigureGenerator("TriangleDownLeft",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())).setSpots(0,.5,.5,1)})),a.a.Shape.defineFigureGenerator("TriangleDownRight",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())).setSpots(.5,.5,1,1)})),a.a.Shape.defineFigureGenerator("TriangleUpLeft",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())).setSpots(0,0,.5,.5)})),a.a.Shape.defineFigureGenerator("TriangleUpRight",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n).close())).setSpots(.5,0,1,.5)})),a.a.Shape.defineFigureGenerator("RightTriangle","TriangleDownLeft"),a.a.Shape.setFigureParameter("Parallelogram1",0,new x("Indent",.1,-.99,.99)),a.a.Shape.defineFigureGenerator("Parallelogram1",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=.1:i<-1?i=-1:i>1&&(i=1);var r=Math.abs(i)*e;if(0===i)return(o=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new a.a.Geometry;return i>0?o.add(new a.a.PathFigure(r,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())):o.add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n).close())),r<e/2&&o.setSpots(r/e,0,(e-r)/e,1),o})),a.a.Shape.defineFigureGenerator("Parallelogram","Parallelogram1"),a.a.Shape.setFigureParameter("Parallelogram2",0,new x("Indent",10,-1/0,1/0)),a.a.Shape.defineFigureGenerator("Parallelogram2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=10:i<-e?i=-e:i>e&&(i=e);var r=Math.abs(i);if(0===i)return(o=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new a.a.Geometry;return i>0?o.add(new a.a.PathFigure(r,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())):o.add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n).close())),r<e/2&&o.setSpots(r/e,0,(e-r)/e,1),o})),a.a.Shape.setFigureParameter("Trapezoid1",0,new x("Indent",.2,-.99,.99)),a.a.Shape.defineFigureGenerator("Trapezoid1",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=.2:i<.5?i=-.5:i>.5&&(i=.5);var r=Math.abs(i)*e;if(0===i)return(o=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new a.a.Geometry;return i>0?o.add(new a.a.PathFigure(r,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())):o.add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n).close())),r<e/2&&o.setSpots(r/e,0,(e-r)/e,1),o})),a.a.Shape.defineFigureGenerator("Trapezoid","Trapezoid1"),a.a.Shape.setFigureParameter("Trapezoid2",0,new x("Indent",20,-1/0,1/0)),a.a.Shape.defineFigureGenerator("Trapezoid2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=20:i<-e?i=-e/2:i>e&&(i=e/2);var r=Math.abs(i);if(0===i)return(o=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new a.a.Geometry;return i>0?o.add(new a.a.PathFigure(r,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())):o.add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n).close())),r<e/2&&o.setSpots(r/e,0,(e-r)/e,1),o})),a.a.Shape.setFigureParameter("ManualOperation",0,new x("Indent",10,-1/0,1/0)),a.a.Shape.defineFigureGenerator("ManualOperation",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=10:i<-e?i=-e/2:i>e&&(i=e/2);var r=Math.abs(i);if(0===i)return(o=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new a.a.Geometry;return i>0?o.add(new a.a.PathFigure(0,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n).close())):o.add(new a.a.PathFigure(r,0).add(new a.a.PathSegment(a.a.PathSegment.Line,e-r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close())),r<e/2&&o.setSpots(r/e,0,(e-r)/e,1),o}));var A=[];function j(){var t=A.pop();return void 0===t?[]:t}function D(t){t.length=0,A.push(t)}function z(t){for(var e=j(),n=1.5*Math.PI,i=0,r=0;r<t;r++)i=2*Math.PI/t*r+n,e[r]=new a.a.Point(.5+.5*Math.cos(i),.5+.5*Math.sin(i));return e.push(e[0]),e}function G(t){var e=E(t),n=j();n[0]=e[0];for(var i=1,a=1;i<e.length;i+=2,a+=3)n[a]=e[i],n[a+1]=e[i],n[a+2]=e[i+1];return D(e),n}function E(t){for(var e=z(t),n=j(),i=Math.floor(e.length/2),r=e.length-1,o=t%2==0?2:1,s=0;s<r;s++){var h=e[s],l=e[s+1],u=e[(i+s-1)%r],d=e[(i+s+o)%r];n[2*s]=h,n[2*s+1]=T(h.x,h.y,u.x,u.y,l.x,l.y,d.x,d.y,new a.a.Point)}return n[n.length]=n[0],D(e),n}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Y(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}a.a.Shape.defineFigureGenerator("Pentagon",(function(t,e,n){var i=z(5),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<5;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.2,.22),r.spot2=new a.a.Spot(.8,.9),r})),a.a.Shape.defineFigureGenerator("Hexagon",(function(t,e,n){var i=z(6),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<6;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.07,.25),r.spot2=new a.a.Spot(.93,.75),r})),a.a.Shape.defineFigureGenerator("Heptagon",(function(t,e,n){var i=z(7),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<7;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.2,.15),r.spot2=new a.a.Spot(.8,.85),r})),a.a.Shape.defineFigureGenerator("Octagon",(function(t,e,n){var i=z(8),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<8;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.15,.15),r.spot2=new a.a.Spot(.85,.85),r})),a.a.Shape.defineFigureGenerator("Nonagon",(function(t,e,n){var i=z(9),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<9;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.17,.13),r.spot2=new a.a.Spot(.82,.82),r})),a.a.Shape.defineFigureGenerator("Decagon",(function(t,e,n){var i=z(10),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<10;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.16,.16),r.spot2=new a.a.Spot(.84,.84),r})),a.a.Shape.defineFigureGenerator("Dodecagon",(function(t,e,n){var i=z(12),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<12;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.16,.16),r.spot2=new a.a.Spot(.84,.84),r})),a.a.Shape.defineFigureGenerator("FivePointedStar",(function(t,e,n){var i=E(5),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<10;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.266,.333),r.spot2=new a.a.Spot(.733,.733),r})),a.a.Shape.defineFigureGenerator("SixPointedStar",(function(t,e,n){var i=E(6),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<12;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.17,.25),r.spot2=new a.a.Spot(.83,.75),r})),a.a.Shape.defineFigureGenerator("SevenPointedStar",(function(t,e,n){var i=E(7),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<14;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.222,.277),r.spot2=new a.a.Spot(.777,.666),r})),a.a.Shape.defineFigureGenerator("EightPointedStar",(function(t,e,n){var i=E(8),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<16;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.25,.25),r.spot2=new a.a.Spot(.75,.75),r})),a.a.Shape.defineFigureGenerator("NinePointedStar",(function(t,e,n){var i=E(9),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<18;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.222,.277),r.spot2=new a.a.Spot(.777,.666),r})),a.a.Shape.defineFigureGenerator("TenPointedStar",(function(t,e,n){var i=E(10),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<20;s++)o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[s].x*e,i[s].y*n));return o.add(new a.a.PathSegment(a.a.PathSegment.Line,i[0].x*e,i[0].y*n).close()),D(i),r.spot1=new a.a.Spot(.281,.261),r.spot2=new a.a.Spot(.723,.748),r})),a.a.Shape.defineFigureGenerator("FivePointedBurst",(function(t,e,n){var i=G(5),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.222,.277),r.spot2=new a.a.Spot(.777,.777),r})),a.a.Shape.defineFigureGenerator("SixPointedBurst",(function(t,e,n){var i=G(6),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.17,.222),r.spot2=new a.a.Spot(.833,.777),r})),a.a.Shape.defineFigureGenerator("SevenPointedBurst",(function(t,e,n){var i=G(7),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.222,.222),r.spot2=new a.a.Spot(.777,.777),r})),a.a.Shape.defineFigureGenerator("EightPointedBurst",(function(t,e,n){var i=G(8),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.222,.222),r.spot2=new a.a.Spot(.777,.777),r})),a.a.Shape.defineFigureGenerator("NinePointedBurst",(function(t,e,n){var i=G(9),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.222,.222),r.spot2=new a.a.Spot(.777,.777),r})),a.a.Shape.defineFigureGenerator("TenPointedBurst",(function(t,e,n){var i=G(10),r=new a.a.Geometry,o=new a.a.PathFigure(i[0].x*e,i[0].y*n,!0);r.add(o);for(var s=1;s<i.length;s+=3)o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i[s+2].x*e,i[s+2].y*n,i[s].x*e,i[s].y*n,i[s+1].x*e,i[s+1].y*n));return o.segments.last().close(),D(i),r.spot1=new a.a.Spot(.222,.222),r.spot2=new a.a.Spot(.777,.777),r})),a.a.Shape.setFigureParameter("FramedRectangle",0,new x("ThicknessX",8)),a.a.Shape.setFigureParameter("FramedRectangle",1,new x("ThicknessY",8)),a.a.Shape.defineFigureGenerator("FramedRectangle",(function(t,e,n){var i=t?t.parameter1:NaN,r=t?t.parameter2:NaN;isNaN(i)&&(i=8),isNaN(r)&&(r=8);var o=new a.a.Geometry,s=new a.a.PathFigure(0,0,!0);return o.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i<e/2&&r<n/2&&(s.add(new a.a.PathSegment(a.a.PathSegment.Move,i,r)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,i,n-r)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,n-r)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,r).close())),o.setSpots(0,0,1,1,i,r,-i,-r),o})),a.a.Shape.setFigureParameter("Ring",0,new x("Thickness",8)),a.a.Shape.defineFigureGenerator("Ring",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=8);var r=e/2,o=new a.a.Geometry,s=new a.a.PathFigure(e,e/2,!0);o.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Arc,0,360,r,r,r,r).close());var h=Math.max(r-i,0);return h>0&&(s.add(new a.a.PathSegment(a.a.PathSegment.Move,e/2+h,e/2)),s.add(new a.a.PathSegment(a.a.PathSegment.Arc,0,-360,r,r,h,h).close())),o.spot1=F,o.spot2=B,o.defaultStretch=a.a.GraphObject.Uniform,o})),a.a.Shape.defineFigureGenerator("Cloud",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.08034461*e,.1944299*n,!0).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2008615*e,.05349299*n,-.09239631*e,.07836421*n,.1406031*e,-.0542823*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.4338609*e,.074219*n,.2450511*e,-.00697547*n,.3776197*e,-.01112067*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.6558228*e,.07004196*n,.4539471*e,0,.6066018*e,-.02526587*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8921095*e,.08370865*n,.6914277*e,-.01904177*n,.8921095*e,-.01220843*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9147671*e,.3194596*n,1.036446*e,.04105738*n,1.020377*e,.3022052*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9082935*e,.562044*n,1.04448*e,.360238*n,.992256*e,.5219009*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9212406*e,.8217117*n,1.032337*e,.5771781*n,1.018411*e,.8120651*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.7592566*e,.9156953*n,1.028411*e,.9571472*n,.8556702*e,1.052487*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5101666*e,.9310455*n,.7431877*e,1.009325*n,.5624123*e,1.021761*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2609328*e,.9344623*n,.4820677*e,1.031761*n,.3030112*e,1.002796*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.08034461*e,.870098*n,.2329994*e,1.01518*n,.03213784*e,1.01518*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.06829292*e,.6545475*n,-.02812061*e,.9032597*n,-.01205169*e,.6835638*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.06427569*e,.4265613*n,-.01812061*e,.6089503*n,-.00606892*e,.4555777*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.08034461*e,.1944299*n,-.01606892*e,.3892545*n,-.01205169*e,.1944299*n))).setSpots(.1,.1,.9,.9)})),a.a.Shape.defineFigureGenerator("StopSign",(function(t,e,n){var i=1/(Math.SQRT2+2);return(new a.a.Geometry).add(new a.a.PathFigure(i*e,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,i*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,(1-i)*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,(1-i)*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,i*n).close())).setSpots(i/2,i/2,1-i/2,1-i/2)})),a.a.Shape.setFigureParameter("Pie",0,new x("Start",0,-360,360)),a.a.Shape.setFigureParameter("Pie",1,new x("Sweep",315,-360,360)),a.a.Shape.defineFigureGenerator("Pie",(function(t,e,n){var i=t?t.parameter1:NaN,r=t?t.parameter2:NaN;isNaN(i)&&(i=0),isNaN(r)&&(r=315);var o=i%360;o<0&&(o+=360);var s=r%360,h=Math.min(e,n)/2;return(new a.a.Geometry).add(new a.a.PathFigure(h,h).add(new a.a.PathSegment(a.a.PathSegment.Arc,o,s,h,h,h,h).close()))})),a.a.Shape.defineFigureGenerator("PiePiece",(function(t,e,n){var i=O/Math.SQRT2*.5,r=Math.SQRT2/2,o=1-Math.SQRT2/2;return(new a.a.Geometry).add(new a.a.PathFigure(e,n,!0).add(new a.a.PathSegment(a.a.PathSegment.Bezier,r*e,o*n,e,(1-i)*n,(r+i)*e,(o+i)*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()))})),a.a.Shape.setFigureParameter("ThickCross",0,new x("Thickness",30)),a.a.Shape.defineFigureGenerator("ThickCross",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=30);var r=Math.min(i,e)/2,o=e/2,s=n/2;return(new a.a.Geometry).add(new a.a.PathFigure(o-r,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,s-r).close()))})),a.a.Shape.setFigureParameter("ThinCross",0,new x("Thickness",10)),a.a.Shape.defineFigureGenerator("ThinCross",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=10);var r=Math.min(i,e)/2,o=e/2,s=n/2;return(new a.a.Geometry).add(new a.a.PathFigure(o-r,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o+r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,s+r)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,s-r)).add(new a.a.PathSegment(a.a.PathSegment.Line,o-r,s-r).close()))})),a.a.Shape.setFigureParameter("ThickX",0,new x("Thickness",30)),a.a.Shape.defineFigureGenerator("ThickX",(function(t,e,n){var i=t?t.parameter1:NaN;if((isNaN(i)||i<0)&&(i=30),0===e||0===n)return(u=new a.a.Geometry(a.a.Geometry.Rectangle)).startX=0,u.startY=0,u.endX=e,u.endY=n,u;var r=e/2,o=n/2,s=Math.atan2(n,e),h=i-Math.min(Math.cos(s)*i/2,r),l=i-Math.min(Math.sin(s)*i/2,o),u=new a.a.Geometry,d=new a.a.PathFigure(h,0,!0);return u.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Line,r,.2*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e-h,0)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e-h,n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,r,.8*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,h,n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n-l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,0,l).close()),u})),a.a.Shape.setFigureParameter("ThinX",0,new x("Thickness",10)),a.a.Shape.defineFigureGenerator("ThinX",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=10);var r=new a.a.Geometry,o=new a.a.PathFigure(.1*e,0,!0);return r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.9*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.1*n).close()),r})),a.a.Shape.setFigureParameter("SquareIBeam",0,new x("BeamWidth",.2,.1,.9)),a.a.Shape.defineFigureGenerator("SquareIBeam",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.2);var r=new a.a.Geometry,o=new a.a.PathFigure(0,0,!0);return r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,i*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,(.5+i/2)*e,i*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,(.5+i/2)*e,(1-i)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,(1-i)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,(1-i)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,(.5-i/2)*e,(1-i)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,(.5-i/2)*e,i*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,i*n).close()),r})),a.a.Shape.setFigureParameter("RoundedIBeam",0,new x("Curviness",.5,.05,.65)),a.a.Shape.defineFigureGenerator("RoundedIBeam",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.5);var r=new a.a.Geometry,o=new a.a.PathFigure(0,0,!0);return r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,n,Math.abs(1-i)*e,.25*n,Math.abs(1-i)*e,.75*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,i*e,.75*n,i*e,.25*n).close()),r})),a.a.Shape.defineFigureGenerator("HalfEllipse",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,O*e,0,e,(.5-O/2)*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,e,(.5+O/2)*n,O*e,n).close())).setSpots(0,.156,.844,.844)})),a.a.Shape.defineFigureGenerator("Crescent",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,e,0,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,.5*e,.75*n,.5*e,.25*n).close())).setSpots(.311,.266,.744,.744)})),a.a.Shape.defineFigureGenerator("Heart",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.5*e,n,!0).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.3*n,.1*e,.8*n,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.3*n,0,0,.45*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.3*n,.55*e,0,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,.5*n,.9*e,.8*n).close())).setSpots(.14,.29,.86,.78)})),a.a.Shape.defineFigureGenerator("Spade",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.5*e,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,.51*e,.01*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,.6*e,.2*n,e,.25*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.55*e,.7*n,e,.8*n,.6*e,.8*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.75*e,n,.5*e,.75*n,.55*e,.95*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.45*e,.7*n,.45*e,.95*n,.5*e,.75*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,.4*e,.8*n,0,.8*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.49*e,.01*n,0,.25*n,.4*e,.2*n).close())).setSpots(.14,.26,.86,.78)})),a.a.Shape.defineFigureGenerator("Club",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.4*e,.6*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.15*e,n,.5*e,.75*n,.45*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.6*e,.6*n,.55*e,.95*n,.5*e,.75*n));var o=.2,s=.3,h=0,l=o*O;return r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+s)*e,(.5+o+h)*n,(.5-o+s)*e,(.5+l+h)*n,(.5-l+s)*e,(.5+o+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o+s)*e,(.5+h)*n,(.5+l+s)*e,(.5+o+h)*n,(.5+o+s)*e,(.5+l+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+s)*e,(.5-o+h)*n,(.5+o+s)*e,(.5-l+h)*n,(.5+l+s)*e,(.5-o+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.65*e,.36771243*n,(.5-l+s)*e,(.5-o+h)*n,(.5-o+s+.05)*e,(.5-l+h-.02)*n)),s=0,h=-.3,l=(o=.2)*O,r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o+s)*e,(.5+h)*n,(.5+l+s)*e,(.5+o+h)*n,(.5+o+s)*e,(.5+l+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+s)*e,(.5-o+h)*n,(.5+o+s)*e,(.5-l+h)*n,(.5+l+s)*e,(.5-o+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o+s)*e,(.5+h)*n,(.5-l+s)*e,(.5-o+h)*n,(.5-o+s)*e,(.5-l+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-l+s)*e,(.5+o+h)*n,(.5-o+s)*e,(.5+l+h)*n,(.5-l+s)*e,(.5+o+h)*n)),s=-.3,h=0,l=(o=.2)*O,r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+s)*e,(.5-o+h)*n,(.5+o+s-.05)*e,(.5-l+h-.02)*n,(.5+l+s)*e,(.5-o+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o+s)*e,(.5+h)*n,(.5-l+s)*e,(.5-o+h)*n,(.5-o+s)*e,(.5-l+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+s)*e,(.5+o+h)*n,(.5-o+s)*e,(.5+l+h)*n,(.5-l+s)*e,(.5+o+h)*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.4*e,.6*n,(.5+l+s)*e,(.5+o+h)*n,(.5+o+s)*e,(.5+l+h)*n).close()),i.setSpots(.06,.33,.93,.68),i})),a.a.Shape.defineFigureGenerator("YinYang",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,180,.5*e,.5*e,.5*e,.5*e)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,90,-180,.5*e,.75*e,.25*e,.25*e)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,90,180,.5*e,.25*e,.25*e,.25*e));var o=.25;return r.add(new a.a.PathSegment(a.a.PathSegment.Move,.6*e,o*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,0,-360,.5*e,n*o,.1*e,.1*e).close()),r=new a.a.PathFigure(.5*e,0,!1),i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,-180,.5*e,.5*e,.5*e,.5*e)),o=.75,r=new a.a.PathFigure(.6*e,o*n,!0),i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,0,360,.5*e,n*o,.1*e,.1*e).close()),i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("Peace",(function(t,e,n){var i=.8535533905932737,r=.5*e,o=.5*n;return(new a.a.Geometry).add(new a.a.PathFigure(r,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Arc,270,360,r,o,r,o)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,n)).add(new a.a.PathSegment(a.a.PathSegment.Move,r,o)).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,i*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,r,o)).add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,i*n)))})),a.a.Shape.defineFigureGenerator("NotAllowed",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=.5,s=new a.a.PathFigure(.5*e,(.5-o)*n);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,(.5-r)*e,(.5-o)*n,(.5-o)*e,(.5-r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5-o)*e,(.5+r)*n,(.5-r)*e,(.5+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,(.5+r)*e,(.5+o)*n,(.5+o)*e,(.5+r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5-o)*n,(.5+o)*e,(.5-r)*n,(.5+r)*e,(.5-o)*n)),o=.4,r=.4*O;var h=M(),l=M(),u=M(),d=M();C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.42,h,l,u,d,d);var c=M(),f=M(),g=M();C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.58,d,d,g,c,f);var p=M(),m=M(),v=M();C(.5,.5+o,.5-r,.5+o,.5-o,.5+r,.5-o,.5,.42,p,m,v,d,d);var y=M(),w=M(),S=M();return C(.5,.5+o,.5-r,.5+o,.5-o,.5+r,.5-o,.5,.58,d,d,S,y,w),s.add(new a.a.PathSegment(a.a.PathSegment.Move,S.x*e,S.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,y.x*e,y.y*n,w.x*e,w.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5-o)*n,(.5-o)*e,(.5-r)*n,(.5-r)*e,(.5-o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u.x*e,u.y*n,h.x*e,h.y*n,l.x*e,l.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,S.x*e,S.y*n).close()),s.add(new a.a.PathSegment(a.a.PathSegment.Move,v.x*e,v.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,g.x*e,g.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,c.x*e,c.y*n,f.x*e,f.y*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5+o)*e,(.5+r)*n,(.5+r)*e,(.5+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,v.x*e,v.y*n,p.x*e,p.y*n,m.x*e,m.y*n).close()),N(h),N(l),N(u),N(d),N(c),N(f),N(g),N(p),N(m),N(v),N(y),N(w),N(S),i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("Fragile",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.15*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.25*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.29*e,.33*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.25*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.15*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.55*e,.5*n,e,.25*n,.75*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,.25*e,.5*n,0,.25*n).close()))})),a.a.Shape.setFigureParameter("HourGlass",0,new x("Thickness",30)),a.a.Shape.defineFigureGenerator("HourGlass",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=30),i>e&&(i=e);var r=(e-i)/2,o=r+i;return(new a.a.Geometry).add(new a.a.PathFigure(o,.5*n).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,r,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0).close()))})),a.a.Shape.defineFigureGenerator("Lightning",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,.55*n).add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.45*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.45*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.55*n).close()))})),a.a.Shape.defineFigureGenerator("GenderMale",(function(t,e,n){var i=new a.a.Geometry,r=.4*O,o=.4,s=M(),h=M(),l=M(),u=M(),d=new a.a.PathFigure((.5-o)*e,.5*n,!1);i.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5-o)*n,(.5-o)*e,(.5-r)*n,(.5-r)*e,(.5-o)*n)),C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.44,l,u,h,s,s),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,h.x*e,h.y*n,l.x*e,l.y*n,u.x*e,u.y*n));var c=L(h.x,h.y);C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.56,s,s,h,l,u);var f=L(h.x,h.y);d.add(new a.a.PathSegment(a.a.PathSegment.Line,(.1*c.x+.855)*e,.1*c.y*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.1*c.y*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,0)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.15*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,(.1*f.x+.9)*e,.15*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,(.1*f.x+.9)*e,(.1*f.y+.05*.9)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,f.x*e,f.y*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,l.x*e,l.y*n,u.x*e,u.y*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5+o)*e,(.5+r)*n,(.5+r)*e,(.5+o)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,(.5-r)*e,(.5+o)*n,(.5-o)*e,(.5+r)*n)),o=.35,r=.35*O;var g=new a.a.PathFigure(.5*e,(.5-o)*n,!1);i.add(g),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,(.5-r)*e,(.5-o)*n,(.5-o)*e,(.5-r)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5-o)*e,(.5+r)*n,(.5-r)*e,(.5+o)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,(.5+r)*e,(.5+o)*n,(.5+o)*e,(.5+r)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5-o)*n,(.5+o)*e,(.5-r)*n,(.5+r)*e,(.5-o)*n));var p=new a.a.PathFigure((.5-o)*e,.5*n,!1);return i.add(p),N(s),N(h),N(l),N(u),N(c),N(f),i.spot1=new a.a.Spot(.202,.257),i.spot2=new a.a.Spot(.792,.739),i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("GenderFemale",(function(t,e,n){var i=new a.a.Geometry,r=.375,o=0,s=-.125,h=r*O,l=new a.a.PathFigure((.525+o)*e,(.5+r+s)*n,!1);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+r+o)*e,(.5+s)*n,(.5+h+o)*e,(.5+r+s)*n,(.5+r+o)*e,(.5+h+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,(.5-r+s)*n,(.5+r+o)*e,(.5-h+s)*n,(.5+h+o)*e,(.5-r+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-r+o)*e,(.5+s)*n,(.5-h+o)*e,(.5-r+s)*n,(.5-r+o)*e,(.5-h+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.475+o)*e,(.5+r+s)*n,(.5-r+o)*e,(.5+h+s)*n,(.5-h+o)*e,(.5+r+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.475*e,.85*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.425*e,.85*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.425*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.475*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.475*e,n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.525*e,n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.525*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.575*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.575*e,.85*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.525*e,.85*n).close()),o=0,s=-.125,h=(r=.325)*O;l=new a.a.PathFigure((.5+r+o)*e,(.5+s)*n,!1);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,(.5+r+s)*n,(.5+r+o)*e,(.5+h+s)*n,(.5+h+o)*e,(.5+r+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-r+o)*e,(.5+s)*n,(.5-h+o)*e,(.5+r+s)*n,(.5-r+o)*e,(.5+h+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,(.5-r+s)*n,(.5-r+o)*e,(.5-h+s)*n,(.5-h+o)*e,(.5-r+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+r+o)*e,(.5+s)*n,(.5+h+o)*e,(.5-r+s)*n,(.5+r+o)*e,(.5-h+s)*n));l=new a.a.PathFigure((.525+o)*e,(.5+r+s)*n,!1);return i.add(l),i.spot1=new a.a.Spot(.232,.136),i.spot2=new a.a.Spot(.682,.611),i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("LogicImplies",(function(t,e,n){var i=t?t.parameter1:NaN;return isNaN(i)&&(i=.2),(new a.a.Geometry).add(new a.a.PathFigure((1-i)*e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n))).setSpots(0,0,.8,.5)})),a.a.Shape.defineFigureGenerator("LogicIff",(function(t,e,n){var i=t?t.parameter1:NaN;return isNaN(i)&&(i=.2),(new a.a.Geometry).add(new a.a.PathFigure((1-i)*e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,(1-i)*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,i*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,n))).setSpots(.2,0,.8,.5)})),a.a.Shape.defineFigureGenerator("LogicNot",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)))})),a.a.Shape.defineFigureGenerator("LogicAnd",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,n,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n))).setSpots(.25,.5,.75,1)})),a.a.Shape.defineFigureGenerator("LogicOr",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0))).setSpots(.219,0,.78,.409)})),a.a.Shape.defineFigureGenerator("LogicXor",(function(t,e,n){var i=(new a.a.Geometry).add(new a.a.PathFigure(.5*e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Arc,0,360,.5*e,.5*n,.5*e,.5*n)));return i.defaultStretch=a.a.GraphObject.Uniform,i})),a.a.Shape.defineFigureGenerator("LogicTruth",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)))})),a.a.Shape.defineFigureGenerator("LogicFalsity",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,n,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)))})),a.a.Shape.defineFigureGenerator("LogicThereExists",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)))})),a.a.Shape.defineFigureGenerator("LogicForAll",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Move,.25*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.5*n))).setSpots(.25,0,.75,.5)})),a.a.Shape.defineFigureGenerator("LogicIsDefinedAs",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Move,0,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n))).setSpots(.01,.01,.99,.49)})),a.a.Shape.defineFigureGenerator("LogicIntersect",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,n,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Arc,180,180,.5*e,.5*n,.5*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n))).setSpots(0,.5,1,1)})),a.a.Shape.defineFigureGenerator("LogicUnion",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(e,0,!1).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Arc,0,180,.5*e,.5*n,.5*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,0))).setSpots(0,0,1,.5)})),a.a.Shape.setFigureParameter("Arrow",0,new x("ArrowheadWidth",.3,.01,.99)),a.a.Shape.setFigureParameter("Arrow",1,new x("TailHeight",.3,.01,.99)),a.a.Shape.defineFigureGenerator("Arrow",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var r=t?t.parameter2:NaN;isNaN(r)&&(r=.3);var o=(1-i)*e,s=(.5-r/2)*n,h=(.5+r/2)*n,l=new a.a.Geometry,u=new a.a.PathFigure(0,s,!0);l.add(u),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,s)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,0)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,0)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,n)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,h)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,0,h).close()),l.spot1=new a.a.Spot(0,s/n);var d=T(0,h/n,1,h/n,o/e,1,1,.5,M());return l.spot2=new a.a.Spot(d.x,d.y),N(d),l})),a.a.Shape.setFigureParameter("Arrow2",0,new x("ArrowheadWidth",30)),a.a.Shape.setFigureParameter("Arrow2",0,new x("TailHeight",30)),a.a.Shape.defineFigureGenerator("Arrow2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=30),i>e&&(i=e);var r=t?t.parameter2:NaN;isNaN(r)&&(r=30);var o=e-i,s=(n-(r=Math.min(r,n/2)))/2,h=s+r,l=new a.a.Geometry,u=new a.a.PathFigure(0,s,!0);l.add(u),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,s)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,0)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,0)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,n)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,o,h)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,0,h).close()),l.spot1=new a.a.Spot(0,s/n);var d=T(0,h/n,1,h/n,o/e,1,1,.5,M());return l.spot2=new a.a.Spot(d.x,d.y),N(d),l})),a.a.Shape.defineFigureGenerator("Chevron",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n).close()),i})),a.a.Shape.defineFigureGenerator("DoubleArrow",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.214*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.786*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,1*n).close()),i})),a.a.Shape.setFigureParameter("DoubleEndArrow",0,new x("ConnecterHeight",.3,.01,.99)),a.a.Shape.defineFigureGenerator("DoubleEndArrow",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var r=(.5-i/2)*n,o=(.5+i/2)*n,s=new a.a.Geometry,h=new a.a.PathFigure(e,.5*n,!0);s.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,0).close());var l=T(0,.5,.3,0,0,r/n,.1,r/n,M());return s.spot1=new a.a.Spot(l.x,l.y),l=T(.7,1,1,.5,0,o/n,1,o/n,l),s.spot2=new a.a.Spot(l.x,l.y),N(l),s})),a.a.Shape.setFigureParameter("DoubleEndArrow2",0,new x("ConnecterHeight",40)),a.a.Shape.setFigureParameter("DoubleEndArrow2",1,new x("ArrowHeight",100)),a.a.Shape.defineFigureGenerator("DoubleEndArrow2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=40);var r=t?t.parameter2:NaN;isNaN(r)&&(r=100);var o=(n-i)/2,s=o+i,h=(n-r)/2,l=h+r;(i>n||r>n)&&(r>i?(s=(o=(n-(i=i*n/r))/2)+i,h=0,l=n):(o=0,s=n,h=0,l=n));var u=new a.a.Geometry,d=new a.a.PathFigure(e,.5*n,!0);u.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,s)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,s)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,h)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,h).close());var c=T(0,.5,.3,h/n,0,o/n,1,o/n,M());return u.spot1=new a.a.Spot(c.x,c.y),c=T(.7,l/n,1,.5,0,s/n,1,s/n,c),u.spot2=new a.a.Spot(c.x,c.y),N(c),u})),a.a.Shape.setFigureParameter("IBeamArrow",0,new x("ConnectorHeight",.7,.51,.97)),a.a.Shape.defineFigureGenerator("IBeamArrow",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var r=(.5-i/2)*n,o=(.5+i/2)*n,s=new a.a.Geometry,h=new a.a.PathFigure(e,.5*n,!0);s.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,0).close()),s.spot1=new a.a.Spot(0,r/n);var l=T(.7,1,1,.5,0,o/n,1,o/n,M());return s.spot2=new a.a.Spot(l.x,l.y),N(l),s})),a.a.Shape.setFigureParameter("IBeamArrow2",0,new x("ConnectorHeight",40)),a.a.Shape.setFigureParameter("IBeamArrow2",1,new x("BeamArrowHeight",100)),a.a.Shape.defineFigureGenerator("IBeamArrow2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=40);var r=t?t.parameter2:NaN;isNaN(r)&&(r=100);var o=(n-i)/2,s=o+i,h=(n-r)/2,l=h+r;(i>n||r>n)&&(r>i?(s=(o=(n-(i=i*n/r))/2)+i,h=0,l=n):(o=0,s=n,h=0,l=n));var u=new a.a.Geometry,d=new a.a.PathFigure(e,.5*n,!0);u.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,s)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,s)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,0,l)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,0,h)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,h)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,h).close()),u.spot1=new a.a.Spot(0,o/n);var c=T(.7,l/n,1,.5,0,s/n,1,s/n,M());return u.spot2=new a.a.Spot(c.x,c.y),N(c),u})),a.a.Shape.setFigureParameter("Pointer",0,new x("BackPoint",.1,0,.2)),a.a.Shape.defineFigureGenerator("Pointer",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.1);var r=new a.a.Geometry,o=new a.a.PathFigure(e,.5*n,!0);r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0).close()),r.spot1=new a.a.Spot(i,.35);var s=T(.2,.65,1,.65,0,1,1,.5,M());return r.spot2=new a.a.Spot(s.x,s.y),N(s),r})),a.a.Shape.setFigureParameter("RoundedPointer",0,new x("RoundedEdge",.3,0,.5)),a.a.Shape.defineFigureGenerator("RoundedPointer",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var r=new a.a.Geometry,o=new a.a.PathFigure(e,.5*n,!0);r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,i*e,.75*n,i*e,.25*n).close()),r.spot1=new a.a.Spot(i,.35);var s=T(0,.65,1,.65,0,1,1,.5,M());return r.spot2=new a.a.Spot(s.x,s.y),N(s),r})),a.a.Shape.setFigureParameter("SplitEndArrow",0,new x("TailHeight",.4,.01,.99)),a.a.Shape.defineFigureGenerator("SplitEndArrow",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.4);var r=(.5-i/2)*n,o=(.5+i/2)*n,s=new a.a.Geometry,h=new a.a.PathFigure(e,.5*n,!0);s.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,0).close()),s.spot1=new a.a.Spot(.2,.3);var l=T(.7,1,1,.5,0,o/n,1,o/n,M());return s.spot2=new a.a.Spot(l.x,l.y),N(l),s})),a.a.Shape.setFigureParameter("SplitEndArrow2",0,new x("TailThickness",50)),a.a.Shape.defineFigureGenerator("SplitEndArrow2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=50);var r=(n-i)/2,o=r+i;i>n&&(r=0,o=n);var s=new a.a.Geometry,h=new a.a.PathFigure(e,.5*n,!0);s.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,0).close()),s.spot1=new a.a.Spot(.2,r/n);var l=T(.7,1,1,.5,0,o/n,1,o/n,M());return s.spot2=new a.a.Spot(l.x,l.y),N(l),s})),a.a.Shape.setFigureParameter("SquareArrow",0,new x("ArrowPoint",.7,.2,.9)),a.a.Shape.defineFigureGenerator("SquareArrow",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.7);var r=new a.a.Geometry,o=new a.a.PathFigure(e,.5*n,!0);return r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,0).close()),r.spot1=a.a.Spot.TopLeft,r.spot2=new a.a.Spot(i,1),r})),a.a.Shape.defineFigureGenerator("Cone1",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=.1*O,s=new a.a.PathFigure(0,.9*n,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.9+o)*n,(.5+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.9*n,(.5-r)*e,n,0,(.9+o)*n).close()),i.spot1=new a.a.Spot(.25,.5),i.spot2=new a.a.Spot(.75,.97),i})),a.a.Shape.defineFigureGenerator("Cone2",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.9*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.9*n,(1-.85/.9)*e,n,.85/.9*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.9*n).close());var o=new a.a.PathFigure(0,.9*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.9*n,(1-.85/.9)*e,.8*n,.85/.9*e,.8*n)),i.spot1=new a.a.Spot(.25,.5),i.spot2=new a.a.Spot(.75,.82),i})),a.a.Shape.defineFigureGenerator("Cube1",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.85*n).close());var o=new a.a.PathFigure(.5*e,n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.15*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.15*n)),i.spot1=new a.a.Spot(0,.3),i.spot2=new a.a.Spot(.5,.85),i})),a.a.Shape.defineFigureGenerator("Cube2",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.3*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,0).close());var o=new a.a.PathFigure(0,.3*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.7*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),i.spot1=new a.a.Spot(0,.3),i.spot2=new a.a.Spot(.7,1),i})),a.a.Shape.defineFigureGenerator("Cylinder1",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,n/3);var r=new a.a.Geometry,o=.5*O,s=new a.a.PathFigure(0,i,!0);r.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,O*i,(.5-o)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,i,(.5+o)*e,0,1*e,O*i)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-i)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,1*n,1*e,n-O*i,(.5+o)*e,1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n-i,(.5-o)*e,1*n,0,n-O*i)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,i));var h=new a.a.PathFigure(e,i,!1);return r.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,2*i,1*e,2*i-O*i,(.5+o)*e,2*i)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,i,(.5-o)*e,2*i,0,2*i-O*i)),r.spot1=new a.a.Spot(0,0,0,2*i),r.spot2=new a.a.Spot(1,1),r})),a.a.Shape.defineFigureGenerator("Cylinder2",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,n/3);var r=new a.a.Geometry,o=.5*O,s=new a.a.PathFigure(0,n-i,!0);r.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,i)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,O*i,(.5-o)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,i,(.5+o)*e,0,e,O*i)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-i)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,n-O*i,(.5+o)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n-i,(.5-o)*e,n,0,n-O*i));var h=new a.a.PathFigure(0,n-i,!1);return r.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n-2*i,0,n-i-O*i,(.5-o)*e,n-2*i)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,n-i,(.5+o)*e,n-2*i,e,n-i-O*i)),r.spot1=new a.a.Spot(0,0),r.spot2=new a.a.Spot(1,1,0,-2*i),r})),a.a.Shape.defineFigureGenerator("Cylinder3",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,e/3);var r=new a.a.Geometry,o=.5*O,s=new a.a.PathFigure(i,0,!0);r.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,e-O*i,0,e,(.5-o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-i,n,e,(.5+o)*n,e-O*i,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,i,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,O*i,n,0,(.5+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i,0,0,(.5-o)*n,O*i,0));var h=new a.a.PathFigure(i,0,!1);return r.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,2*i,.5*n,i+O*i,0,2*i,(.5-o)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i,n,2*i,(.5+o)*n,i+O*i,n)),r.spot1=new a.a.Spot(0,0,2*i,0),r.spot2=new a.a.Spot(1,1),r})),a.a.Shape.defineFigureGenerator("Cylinder4",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,e/3);var r=new a.a.Geometry,o=.5*O,s=new a.a.PathFigure(e-i,0,!0);r.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,e-O*i,0,e,(.5-o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-i,n,e,(.5+o)*n,e-O*i,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,i,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,O*i,n,0,(.5+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i,0,0,(.5-o)*n,O*i,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,0));var h=new a.a.PathFigure(e-i,0,!1);return r.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-2*i,.5*n,e-i-O*i,0,e-2*i,(.5-o)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-i,n,e-2*i,(.5+o)*n,e-i-O*i,n)),r.spot1=new a.a.Spot(0,0),r.spot2=new a.a.Spot(1,1,-2*i,0),r})),a.a.Shape.defineFigureGenerator("Prism1",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.25*e,.25*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var o=new a.a.PathFigure(.25*e,.25*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),i.spot1=new a.a.Spot(.408,.172),i.spot2=new a.a.Spot(.833,.662),i})),a.a.Shape.defineFigureGenerator("Prism2",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.25*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var o=new a.a.PathFigure(0,n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.5*n)),i.spot1=new a.a.Spot(.25,.5),i.spot2=new a.a.Spot(.75,.75),i})),a.a.Shape.defineFigureGenerator("Pyramid1",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.75*n).close());var o=new a.a.PathFigure(.5*e,0,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),i.spot1=new a.a.Spot(.25,.367),i.spot2=new a.a.Spot(.75,.875),i})),a.a.Shape.defineFigureGenerator("Pyramid2",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.85*n).close());var o=new a.a.PathFigure(.5*e,0,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.7*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.85*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.7*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.85*n)),i.spot1=new a.a.Spot(.25,.367),i.spot2=new a.a.Spot(.75,.875),i})),a.a.Shape.defineFigureGenerator("Actor",(function(t,e,n){var i=new a.a.Geometry,r=.2*O,o=.1*O,s=.5,h=.1,l=new a.a.PathFigure(s*e,(h+.1)*n,!0);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-.2)*e,h*n,(s-r)*e,(h+.1)*n,(s-.2)*e,(h+o)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-.1)*n,(s-.2)*e,(h-o)*n,(s-r)*e,(h-.1)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+.2)*e,h*n,(s+r)*e,(h-.1)*n,(s+.2)*e,(h-o)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h+.1)*n,(s+.2)*e,(h+o)*n,(s+r)*e,(h+.1)*n));var u=.05,d=O*u;s=.05,h=.25;var c=new a.a.PathFigure(.5*e,.2*n,!0);return i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.95*e,.2*n)),s=.95,h=.25,c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+u)*e,h*n,(s+d)*e,(h-u)*n,(s+u)*e,(h-d)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.6*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.6*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.35*n)),d=O*(u=.025),s=.825,h=.35,c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-u)*n,(s+u)*e,(h-d)*n,(s+d)*e,(h-u)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-u)*e,h*n,(s-d)*e,(h-u)*n,(s-u)*e,(h-d)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.7*n)),d=O*(u=.05),s=.5,h=.7,c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-u)*n,(s+u)*e,(h-d)*n,(s+d)*e,(h-u)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-u)*e,h*n,(s-d)*e,(h-u)*n,(s-u)*e,(h-d)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.35*n)),d=O*(u=.025),s=.175,h=.35,c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-u)*n,(s+u)*e,(h-d)*n,(s+d)*e,(h-u)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-u)*e,h*n,(s-d)*e,(h-u)*n,(s-u)*e,(h-d)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.6*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.6*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.25*n)),d=O*(u=.05),s=.05,h=.25,c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-u)*n,(s-u)*e,(h-d)*n,(s-d)*e,(h-u)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.2*n)),i.spot1=new a.a.Spot(.2,.2),i.spot2=new a.a.Spot(.8,.65),i})),a.a.Shape.setFigureParameter("Card",0,new x("CornerCutoutSize",.2,.1,.9)),a.a.Shape.defineFigureGenerator("Card",(function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.2);var r=new a.a.Geometry,o=new a.a.PathFigure(e,0,!0);return r.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,i*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,i*e,0).close()),r.spot1=new a.a.Spot(0,i),r.spot2=a.a.Spot.BottomRight,r})),a.a.Shape.defineFigureGenerator("Collate",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,.5*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n));var o=new a.a.PathFigure(.5*e,.5*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),i.spot1=new a.a.Spot(.25,0),i.spot2=new a.a.Spot(.75,.25),i})),a.a.Shape.defineFigureGenerator("CreateRequest",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var s=new a.a.PathFigure(0,r*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,r*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,0,(1-r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,(1-r)*n)),i})),a.a.Shape.defineFigureGenerator("Database",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=.1*O,s=new a.a.PathFigure(e,.1*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.9+o)*n,(.5+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.9*n,(.5-r)*e,n,0,(.9+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.1-o)*n,(.5-r)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.1*n,(.5+r)*e,0,e,(.1-o)*n));var h=new a.a.PathFigure(e,.1*n,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.2*n,e,(.1+o)*n,(.5+r)*e,.2*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.1*n,(.5-r)*e,.2*n,0,(.1+o)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.2*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.3*n,e,(.2+o)*n,(.5+r)*e,.3*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.2*n,(.5-r)*e,.3*n,0,(.2+o)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.3*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.4*n,e,(.3+o)*n,(.5+r)*e,.4*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.3*n,(.5-r)*e,.4*n,0,(.3+o)*n)),i.spot1=new a.a.Spot(0,.4),i.spot2=new a.a.Spot(1,.9),i})),a.a.Shape.defineFigureGenerator("DataStorage",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.75*e,n,e,0,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,.25*e,.9*n,.25*e,.1*n).close()),i.spot1=new a.a.Spot(.226,0),i.spot2=new a.a.Spot(.81,1),i})),a.a.Shape.defineFigureGenerator("DiskStorage",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=.1*O,s=new a.a.PathFigure(e,.1*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.9+o)*n,(.5+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.9*n,(.5-r)*e,n,0,(.9+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.1-o)*n,(.5-r)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.1*n,(.5+r)*e,0,e,(.1-o)*n));var h=new a.a.PathFigure(e,.1*n,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.2*n,e,(.1+o)*n,(.5+r)*e,.2*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.1*n,(.5-r)*e,.2*n,0,(.1+o)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.2*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.3*n,e,(.2+o)*n,(.5+r)*e,.3*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.2*n,(.5-r)*e,.3*n,0,(.2+o)*n)),i.spot1=new a.a.Spot(0,.3),i.spot2=new a.a.Spot(1,.9),i})),a.a.Shape.defineFigureGenerator("Display",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.25*e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.75*e,n,e,0,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n).close()),i.spot1=new a.a.Spot(.25,0),i.spot2=new a.a.Spot(.75,1),i})),a.a.Shape.defineFigureGenerator("DividedEvent",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)?r=.2:r<.15&&(r=.15);var o=.2*O,s=new a.a.PathFigure(0,.2*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,0,0,(.2-o)*n,(.2-o)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.2*n,(.8+o)*e,0,e,(.2-o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,n,e,(.8+o)*n,(.8+o)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.8*n,(.2-o)*e,n,0,(.8+o)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.2*n));var h=new a.a.PathFigure(0,r*n,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e,r*n)),i})),a.a.Shape.defineFigureGenerator("DividedProcess",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;(isNaN(r)||r<.1)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var s=new a.a.PathFigure(0,r*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,r*n)),i})),a.a.Shape.defineFigureGenerator("Document",(function(t,e,n){var i=new a.a.Geometry;n/=.8;var r=new a.a.PathFigure(0,.7*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close()),i.spot1=a.a.Spot.TopLeft,i.spot2=new a.a.Spot(1,.6),i})),a.a.Shape.defineFigureGenerator("ExternalOrganization",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;(isNaN(r)||r<.2)&&(r=.2);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var s=new a.a.PathFigure(r*e,0,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,r*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,e,r*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-r)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,0,(1-r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,(1-r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,(1-r)*n)),i})),a.a.Shape.defineFigureGenerator("ExternalProcess",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n).close());var o=new a.a.PathFigure(.1*e,.4*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.9*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.6*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.4*e,.9*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.9*n)),i.spot1=new a.a.Spot(.25,.25),i.spot2=new a.a.Spot(.75,.75),i})),a.a.Shape.defineFigureGenerator("File",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var o=new a.a.PathFigure(.75*e,0,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),i.spot1=new a.a.Spot(0,.25),i.spot2=a.a.Spot.BottomRight,i})),a.a.Shape.defineFigureGenerator("Interrupt",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,.5*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n));var o=new a.a.PathFigure(e,.5*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n));var s=new a.a.PathFigure(e,.5*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(.5,.75),i})),a.a.Shape.defineFigureGenerator("InternalStorage",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN,o=t?t.parameter2:NaN;isNaN(r)&&(r=.1),isNaN(o)&&(o=.1);var s=new a.a.PathFigure(0,0,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var h=new a.a.PathFigure(r*e,0,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,0,o*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e,o*n)),i})),a.a.Shape.defineFigureGenerator("Junction",(function(t,e,n){var i=new a.a.Geometry,r=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,s=.5*O,h=new a.a.PathFigure(e,.5*n,!0);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.5+s)*n,(.5+s)*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,(.5-s)*e,n,0,(.5+s)*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.5-s)*n,(.5-s)*e,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+s)*e,0,e,(.5-s)*n));var l=new a.a.PathFigure((o+r)*e,(o+r)*n,!1);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,o*e,o*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Move,o*e,(o+r)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,(o+r)*e,o*n)),i})),a.a.Shape.defineFigureGenerator("LinedDocument",(function(t,e,n){var i=new a.a.Geometry;n/=.8;var r=new a.a.PathFigure(0,.7*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close());var o=new a.a.PathFigure(.1*e,0,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.75*n)),i.spot1=new a.a.Spot(.1,0),i.spot2=new a.a.Spot(1,.6),i})),a.a.Shape.defineFigureGenerator("LoopLimit",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n).close()),i.spot1=new a.a.Spot(0,.25),i.spot2=a.a.Spot.BottomRight,i})),a.a.Shape.defineFigureGenerator("MagneticTape",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(.5*e,n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,(.5-r)*e,n,0,(.5+r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.5-r)*n,(.5-r)*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+r)*e,0,e,(.5-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.6*e,.9*n,e,(.5+r)*n,(.5+r)*e,.9*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),i.spot1=new a.a.Spot(.15,.15),i.spot2=new a.a.Spot(.85,.8),i})),a.a.Shape.defineFigureGenerator("ManualInput",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.25*n).close()),i.spot1=new a.a.Spot(0,.25),i.spot2=a.a.Spot.BottomRight,i})),a.a.Shape.defineFigureGenerator("MessageFromUser",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.7);var o=new a.a.PathFigure(0,0,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i.spot1=a.a.Spot.TopLeft,i})),a.a.Shape.defineFigureGenerator("MicroformProcessing",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.25);var o=new a.a.PathFigure(0,0,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,r*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,(1-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i})),a.a.Shape.defineFigureGenerator("MicroformRecording",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(1,.75),i})),a.a.Shape.defineFigureGenerator("MultiDocument",(function(t,e,n){var i=new a.a.Geometry;n/=.8;var r=new a.a.PathFigure(e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.44*n,.96*e,.47*n,.93*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.54*n,.86*e,.57*n,.83*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.7*n,.4*e,.4*n,.4*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,0).close());var o=new a.a.PathFigure(.1*e,.2*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.54*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.44*n)),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(.8,.77),i})),a.a.Shape.defineFigureGenerator("MultiProcess",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.1*e,.1*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.2*n).close());var o=new a.a.PathFigure(.2*e,.1*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.8*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.1*e,.2*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.9*n)),i.spot1=new a.a.Spot(0,.2),i.spot2=new a.a.Spot(.8,1),i})),a.a.Shape.defineFigureGenerator("OfflineStorage",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n).close());var s=new a.a.PathFigure(.5*r*e,r*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-.5*r)*e,r*n)),i})),a.a.Shape.defineFigureGenerator("OffPageConnector",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i.spot1=a.a.Spot.TopLeft,i.spot2=new a.a.Spot(.75,1),i})),a.a.Shape.defineFigureGenerator("Or",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(e,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.5+r)*n,(.5+r)*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,(.5-r)*e,n,0,(.5+r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.5-r)*n,(.5-r)*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+r)*e,0,e,(.5-r)*n));var s=new a.a.PathFigure(e,.5*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),i})),a.a.Shape.defineFigureGenerator("PaperTape",(function(t,e,n){var i=new a.a.Geometry;n/=.8;var r=new a.a.PathFigure(0,.7*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.3*n,.5*e,.6*n,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close()),i.spot1=new a.a.Spot(0,.49),i.spot2=new a.a.Spot(1,.75),i})),a.a.Shape.defineFigureGenerator("PrimitiveFromCall",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN,o=t?t.parameter2:NaN;isNaN(r)&&(r=.1),isNaN(o)&&(o=.3);var s=new a.a.PathFigure(0,0,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-o)*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i})),a.a.Shape.defineFigureGenerator("PrimitiveToCall",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN,o=t?t.parameter2:NaN;isNaN(r)&&(r=.1),isNaN(o)&&(o=.3);var s=new a.a.PathFigure(0,0,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-o)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-o)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i})),a.a.Shape.defineFigureGenerator("Procedure",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var s=new a.a.PathFigure((1-r)*e,0,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,r*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,n)),i})),a.a.Shape.defineFigureGenerator("Process",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var s=new a.a.PathFigure(r*e,0,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,n)),i.spot2=a.a.Spot.BottomRight,i})),a.a.Shape.defineFigureGenerator("Sort",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n).close());var o=new a.a.PathFigure(0,.5*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),i.spot1=new a.a.Spot(.25,.25),i.spot2=new a.a.Spot(.75,.5),i})),a.a.Shape.defineFigureGenerator("Start",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.25);var o=new a.a.PathFigure(r*e,0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,180,.75*e,.5*n,.25*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Arc,90,180,.25*e,.5*n,.25*e,.5*n));var s=new a.a.PathFigure(r*e,0,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,r*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,(1-r)*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,(1-r)*e,n)),i.spot1=new a.a.Spot(r,0),i.spot2=new a.a.Spot(1-r,1),i})),a.a.Shape.defineFigureGenerator("Terminator",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.25*e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,180,.75*e,.5*n,.25*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,90,180,.25*e,.5*n,.25*e,.5*n)),i.spot1=new a.a.Spot(.23,0),i.spot2=new a.a.Spot(.77,1),i})),a.a.Shape.defineFigureGenerator("TransmittalTape",(function(t,e,n){var i=new a.a.Geometry,r=t?t.parameter1:NaN;isNaN(r)&&(r=.1);var o=new a.a.PathFigure(0,0,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,(1-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,(1-r)*n).close()),i.spot1=a.a.Spot.TopLeft,i})),a.a.Shape.defineFigureGenerator("AndGate",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(0,0,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+r)*e,0,e,(.5-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.5+r)*n,(.5+r)*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i.spot1=a.a.Spot.TopLeft,i.spot2=new a.a.Spot(.55,1),i})),a.a.Shape.defineFigureGenerator("Buffer",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(.5,.75),i})),a.a.Shape.defineFigureGenerator("Clock",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(e,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.5+r)*n,(.5+r)*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,(.5-r)*e,n,0,(.5+r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.5-r)*n,(.5-r)*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+r)*e,0,e,(.5-r)*n));var s=new a.a.PathFigure(e,.5*n,!1);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n));var h=new a.a.PathFigure(.8*e,.75*n,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.25*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.25*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.75*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.75*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.25*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.25*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.75*n)),i})),a.a.Shape.defineFigureGenerator("Ground",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.3*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.4*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,n)),i})),a.a.Shape.defineFigureGenerator("Inverter",(function(t,e,n){var i=new a.a.Geometry,r=.1*O,o=new a.a.PathFigure(.8*e,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.5*n));var s=new a.a.PathFigure(1*e,.5*n,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.6*n,1*e,(.5+r)*n,(.9+r)*e,.6*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.5*n,(.9-r)*e,.6*n,.8*e,(.5+r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-r)*n,(.9-r)*e,.4*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,.5*n,(.9+r)*e,.4*n,1*e,(.5-r)*n)),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(.4,.75),i})),a.a.Shape.defineFigureGenerator("NandGate",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=.4*O,s=.1*O,h=new a.a.PathFigure(.8*e,.5*n,!0);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.4*e,n,.8*e,(.5+o)*n,(.4+r)*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.5*n,(.4+r)*e,0,.8*e,(.5-o)*n));var l=new a.a.PathFigure(1*e,.5*n,!0);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.6*n,1*e,(.5+s)*n,(.9+s)*e,.6*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.5*n,(.9-s)*e,.6*n,.8*e,(.5+s)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-s)*n,(.9-s)*e,.4*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,.5*n,(.9+s)*e,.4*n,1*e,(.5-s)*n)),i.spot1=new a.a.Spot(0,.05),i.spot2=new a.a.Spot(.55,.95),i})),a.a.Shape.defineFigureGenerator("NorGate",(function(t,e,n){var i=new a.a.Geometry,r=.5,o=O*r,s=0,h=.5,l=new a.a.PathFigure(.8*e,.5*n,!0);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,.7*e,(h+o)*n,(s+o)*e,(h+r)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,.25*e,.75*n,.25*e,.25*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.5*n,(s+o)*e,(h-r)*n,.7*e,(h-o)*n)),r=.1,o=.1*O,s=.9,h=.5;var u=new a.a.PathFigure((s-r)*e,h*n,!0);return i.add(u),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-r)*n,(s-r)*e,(h-o)*n,(s-o)*e,(h-r)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+r)*e,h*n,(s+o)*e,(h-r)*n,(s+r)*e,(h-o)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h+r)*n,(s+r)*e,(h+o)*n,(s+o)*e,(h+r)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-r)*e,h*n,(s-o)*e,(h+r)*n,(s-r)*e,(h+o)*n)),i.spot1=new a.a.Spot(.2,.25),i.spot2=new a.a.Spot(.6,.75),i})),a.a.Shape.defineFigureGenerator("OrGate",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(0,0,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(0+r+r)*e,0*n,.8*e,(.5-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,.8*e,(.5+r)*n,(0+r+r)*e,1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,0,.25*e,.75*n,.25*e,.25*n).close()),i.spot1=new a.a.Spot(.2,.25),i.spot2=new a.a.Spot(.75,.75),i})),a.a.Shape.defineFigureGenerator("XnorGate",(function(t,e,n){var i=new a.a.Geometry,r=.5,o=O*r,s=.2,h=.5,l=new a.a.PathFigure(.1*e,0,!1);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.1*e,n,.35*e,.25*n,.35*e,.75*n));var u=new a.a.PathFigure(.8*e,.5*n,!0);i.add(u),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,n,.7*e,(h+o)*n,(s+o)*e,(h+r)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,0,.45*e,.75*n,.45*e,.25*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.5*n,(s+o)*e,(h-r)*n,.7*e,(h-o)*n)),r=.1,o=.1*O,s=.9,h=.5;var d=new a.a.PathFigure((s-r)*e,h*n,!0);return i.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-r)*n,(s-r)*e,(h-o)*n,(s-o)*e,(h-r)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+r)*e,h*n,(s+o)*e,(h-r)*n,(s+r)*e,(h-o)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h+r)*n,(s+r)*e,(h+o)*n,(s+o)*e,(h+r)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-r)*e,h*n,(s-o)*e,(h+r)*n,(s-r)*e,(h+o)*n)),i.spot1=new a.a.Spot(.4,.25),i.spot2=new a.a.Spot(.65,.75),i})),a.a.Shape.defineFigureGenerator("XorGate",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(.1*e,0,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.1*e,n,.35*e,.25*n,.35*e,.75*n));var s=new a.a.PathFigure(.2*e,0,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.2+r)*e,0*n,.9*e,(.5-r)*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,n,.9*e,(.5+r)*n,(.2+r)*e,1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,0,.45*e,.75*n,.45*e,.25*n).close()),i.spot1=new a.a.Spot(.4,.25),i.spot2=new a.a.Spot(.8,.75),i})),a.a.Shape.defineFigureGenerator("Capacitor",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),i})),a.a.Shape.defineFigureGenerator("Resistor",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.5*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.5*n)),i})),a.a.Shape.defineFigureGenerator("Inductor",(function(t,e,n){var i=new a.a.Geometry,r=.1*O,o=.1,s=new a.a.PathFigure((o-.5*r)*e,n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(o+.1)*e,0,(o-r)*e,n,(o-.1)*e,0)),o=.3,s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,o*e,n,(o+.1)*e,0,(o+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(o+.1)*e,0,(o-r)*e,n,(o-.1)*e,0)),o=.5,s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,o*e,n,(o+.1)*e,0,(o+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(o+.1)*e,0,(o-r)*e,n,(o-.1)*e,0)),o=.7,s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,o*e,n,(o+.1)*e,0,(o+r)*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(o+.1)*e,0,(o-r)*e,n,(o-.1)*e,0)),o=.9,s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(o+.5*r)*e,n,(o+.1)*e,0,(o+r)*e,n)),i})),a.a.Shape.defineFigureGenerator("ACvoltageSource",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(0*e,.5*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0*n,0*e,(.5-r)*n,(.5-r)*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,.5*n,(.5+r)*e,0*n,1*e,(.5-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,1*n,1*e,(.5+r)*n,(.5+r)*e,1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0*e,.5*n,(.5-r)*e,1*n,0*e,(.5+r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.1*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.5*n,.5*e,0*n,.5*e,1*n)),i})),a.a.Shape.defineFigureGenerator("DCvoltageSource",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.75*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),i})),a.a.Shape.defineFigureGenerator("Diode",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),i.spot1=new a.a.Spot(0,.25),i.spot2=new a.a.Spot(.5,.75),i})),a.a.Shape.defineFigureGenerator("Wifi",(function(t,e,n){var i=new a.a.Geometry,r=.8*O,o=.8,s=0,h=.5,l=(e-(e*=.38))/2,u=(n-(n*=.6))/2,d=new a.a.PathFigure(s*e+l,(h+o)*n+u,!0);i.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-o)*e+l,h*n+u,(s-r)*e+l,(h+o)*n+u,(s-o)*e+l,(h+r)*n+u)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h-o)*n+u,(s-o)*e+l,(h-r)*n+u,(s-r)*e+l,(h-o)*n+u)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-o+.5*r)*e+l,h*n+u,s*e+l,(h-o)*n+u,(s-o+.5*r)*e+l,(h-r)*n+u)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h+o)*n+u,(s-o+.5*r)*e+l,(h+r)*n+u,s*e+l,(h+o)*n+u).close()),r=.4*O,o=.4,s=.2,h=.5;var c=new a.a.PathFigure(s*e+l,(h+o)*n+u,!0);i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-o)*e+l,h*n+u,(s-r)*e+l,(h+o)*n+u,(s-o)*e+l,(h+r)*n+u)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h-o)*n+u,(s-o)*e+l,(h-r)*n+u,(s-r)*e+l,(h-o)*n+u)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-o+.5*r)*e+l,h*n+u,s*e+l,(h-o)*n+u,(s-o+.5*r)*e+l,(h-r)*n+u)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h+o)*n+u,(s-o+.5*r)*e+l,(h+r)*n+u,s*e+l,(h+o)*n+u).close()),r=.2*O,o=.2,s=.5,h=.5;var f=new a.a.PathFigure((s-o)*e+l,h*n+u,!0);i.add(f),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h-o)*n+u,(s-o)*e+l,(h-r)*n+u,(s-r)*e+l,(h-o)*n+u)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+o)*e+l,h*n+u,(s+r)*e+l,(h-o)*n+u,(s+o)*e+l,(h-r)*n+u)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h+o)*n+u,(s+o)*e+l,(h+r)*n+u,(s+r)*e+l,(h+o)*n+u)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-o)*e+l,h*n+u,(s-r)*e+l,(h+o)*n+u,(s-o)*e+l,(h+r)*n+u)),r=.4*O,o=.4,s=.8,h=.5;var g=new a.a.PathFigure(s*e+l,(h-o)*n+u,!0);i.add(g),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+o)*e+l,h*n+u,(s+r)*e+l,(h-o)*n+u,(s+o)*e+l,(h-r)*n+u)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h+o)*n+u,(s+o)*e+l,(h+r)*n+u,(s+r)*e+l,(h+o)*n+u)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+o-.5*r)*e+l,h*n+u,s*e+l,(h+o)*n+u,(s+o-.5*r)*e+l,(h+r)*n+u)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h-o)*n+u,(s+o-.5*r)*e+l,(h-r)*n+u,s*e+l,(h-o)*n+u).close()),r=.8*O,o=.8,s=1,h=.5;var p=new a.a.PathFigure(s*e+l,(h-o)*n+u,!0);return i.add(p),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+o)*e+l,h*n+u,(s+r)*e+l,(h-o)*n+u,(s+o)*e+l,(h-r)*n+u)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h+o)*n+u,(s+o)*e+l,(h+r)*n+u,(s+r)*e+l,(h+o)*n+u)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+o-.5*r)*e+l,h*n+u,s*e+l,(h+o)*n+u,(s+o-.5*r)*e+l,(h+r)*n+u)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e+l,(h-o)*n+u,(s+o-.5*r)*e+l,(h-r)*n+u,s*e+l,(h-o)*n+u).close()),i})),a.a.Shape.defineFigureGenerator("Email",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0).close());var o=new a.a.PathFigure(0,0,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.54*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.54*n)),i})),a.a.Shape.defineFigureGenerator("Ethernet",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.35*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,0).close());var o=new a.a.PathFigure(.1*e,n,!0,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,n).close());var s=new a.a.PathFigure(.6*e,n,!0,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.6*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.6*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,n).close());var h=new a.a.PathFigure(0,.5*n,!1);return i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.4*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,.75*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.6*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Move,.25*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.6*n)),i})),a.a.Shape.defineFigureGenerator("Power",(function(t,e,n){var i=new a.a.Geometry,r=.4*O,o=.4,s=M(),h=M(),l=M(),u=M();C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.5,s,s,h,l,u);var d=L(h.x,h.y),c=new a.a.PathFigure(h.x*e,h.y*n,!0);i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,l.x*e,l.y*n,u.x*e,u.y*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5+o)*e,(.5+r)*n,(.5+r)*e,(.5+o)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,(.5-r)*e,(.5+o)*n,(.5-o)*e,(.5+r)*n)),C(.5-o,.5,.5-o,.5-r,.5-r,.5-o,.5,.5-o,.5,l,u,h,s,s),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,h.x*e,h.y*n,l.x*e,l.y*n,u.x*e,u.y*n)),C(.5-(o=.3),.5,.5-o,.5-(r=.3*O),.5-r,.5-o,.5,.5-o,.5,l,u,h,s,s),c.add(new a.a.PathSegment(a.a.PathSegment.Line,h.x*e,h.y*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-o)*e,.5*n,u.x*e,u.y*n,l.x*e,l.y*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.5+o)*n,(.5-o)*e,(.5+r)*n,(.5-r)*e,(.5+o)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5+o)*e,.5*n,(.5+r)*e,(.5+o)*n,(.5+o)*e,(.5+r)*n)),C(.5,.5-o,.5+r,.5-o,.5+o,.5-r,.5+o,.5,.5,s,s,h,l,u),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,h.x*e,h.y*n,u.x*e,u.y*n,l.x*e,l.y*n).close());c=new a.a.PathFigure(.45*e,0,!0);return i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.5*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.5*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,0).close()),N(s),N(h),N(l),N(u),N(d),i.spot1=new a.a.Spot(.25,.45),i.spot2=new a.a.Spot(.75,.8),i})),a.a.Shape.defineFigureGenerator("Fallout",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n/2,!0);function o(t,i,r){t.add(new a.a.PathSegment(a.a.PathSegment.Move,(.3+i)*e,(.8+r)*n)),t.add(new a.a.PathSegment(a.a.PathSegment.Line,(.5+i)*e,(.5+r)*n)),t.add(new a.a.PathSegment(a.a.PathSegment.Line,(.1+i)*e,(.5+r)*n)),t.add(new a.a.PathSegment(a.a.PathSegment.Line,(.3+i)*e,(.8+r)*n).close())}return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,180,360,e/2,n/2,e/2,n/2)),o(r,0,0),o(r,.4,0),o(r,.2,-.3),i})),a.a.Shape.defineFigureGenerator("IrritationHazard",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.2*e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.2*n).close()),i.spot1=new a.a.Spot(.3,.3),i.spot2=new a.a.Spot(.7,.7),i})),a.a.Shape.defineFigureGenerator("ElectricalHazard",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.37*e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.11*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.77*e,.04*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.33*e,.49*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.37*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.63*e,.86*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.77*e,.91*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.34*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.34*e,.78*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.44*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.56*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.68*n).close()),i})),a.a.Shape.defineFigureGenerator("FireHazard",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.1*e,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.29*e,0,-.25*e,.63*n,.45*e,.44*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.51*e,.42*n,.48*e,.17*n,.54*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.59*e,.18*n,.59*e,.29*n,.58*e,.28*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.75*e,.6*n,.8*e,.34*n,.88*e,.43*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.88*e,.31*n,.87*e,.48*n,.88*e,.43*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,n,1.17*e,.76*n,.82*e,.8*n).close()),i.spot1=new a.a.Spot(.07,.445),i.spot2=new a.a.Spot(.884,.958),i})),a.a.Shape.defineFigureGenerator("BpmnActivityLoop",(function(t,e,n){var i=new a.a.Geometry,r=.5,o=r*O,s=.4*Math.SQRT2/2+.5,h=.5-.5*Math.SQRT2/2,l=new a.a.PathFigure(s*e,(1-h)*n,!1);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,.5*n,1*e,.7*n,1*e,.5*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0*n,1*e,(.5-o+0)*n,(.5+o+0)*e,0*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0*e,.5*n,(.5-o+0)*e,0*n,0*e,(.5-o+0)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.35*e,.9*n,0*e,(.5+o+0)*n,(.5-o+0)*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Move,.25*e,.8*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.9*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.95*n)),i})),a.a.Shape.defineFigureGenerator("BpmnActivityParallel",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),i})),a.a.Shape.defineFigureGenerator("BpmnActivitySequential",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),i})),a.a.Shape.defineFigureGenerator("BpmnActivityAdHoc",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);i.add(r);var o=new a.a.PathFigure(e,n,!1);i.add(o);var s=new a.a.PathFigure(0,.5*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.5*n,.2*e,.35*n,.3*e,.35*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,.7*e,.65*n,.8*e,.65*n)),i})),a.a.Shape.defineFigureGenerator("BpmnActivityCompensation",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.5*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n).close()),i})),a.a.Shape.defineFigureGenerator("BpmnTaskMessage",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.2*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n).close());r=new a.a.PathFigure(0,.2*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n)),i})),a.a.Shape.defineFigureGenerator("BpmnTaskScript",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.7*e,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,0,.6*e,.5*n,0,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.7*e,n,.4*e,.5*n,e,.5*n).close());var o=new a.a.PathFigure(.45*e,.73*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.73*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.38*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.63*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.31*e,.27*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.56*e,.27*n)),i})),a.a.Shape.defineFigureGenerator("BpmnTaskUser",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);i.add(r);var o=new a.a.PathFigure(.335*e,(1-.555)*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.335*e,.595*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.665*e,.595*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.665*e,(1-.555)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.68*n,.88*e,.46*n,.98*e,.54*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.68*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.335*e,(1-.555)*n,.02*e,.54*n,.12*e,.46*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.365*e,.405*n));var s=Math.PI/4,h=4*(1-Math.cos(s))/(3*Math.sin(s)),l=h*(.5-.285),u=h*(.5-.285);o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.285*e,(.5-.285)*n,(.5-(l+(.5-.285))/2)*e,(.5-.285+(.5-.285+u)/2)*n,.285*e,(.5-.285+u)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0*n,.285*e,(.5-.285-u)*n,(.5-l)*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.5-.285+.5)*e,(.5-.285)*n,(.5+l)*e,0*n,(.5-.285+.5)*e,(.5-.285-u)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.635*e,.405*n,(.5-.285+.5)*e,(.5-.285+u)*n,(.5+(l+(.5-.285))/2)*e,(.5-.285+(.5-.285+u)/2)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.635*e,.405*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.665*e,(1-.555)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.665*e,.595*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.335*e,.595*n));var d=new a.a.PathFigure(.2*e,n,!1);i.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.8*n));var c=new a.a.PathFigure(.8*e,n,!1);return i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.8*n)),i})),a.a.Shape.defineFigureGenerator("BpmnEventConditional",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.1*e,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,n).close());var o=new a.a.PathFigure(.2*e,.2*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.8*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.8*n)),i})),a.a.Shape.defineFigureGenerator("BpmnEventError",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.33*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.33*e,.5*n).close()),i})),a.a.Shape.defineFigureGenerator("BpmnEventEscalation",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);i.add(r);var o=new a.a.PathFigure(e,n,!1);i.add(o);var s=new a.a.PathFigure(.1*e,n,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n).close()),i})),a.a.Shape.defineFigureGenerator("Caution",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.05*e,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.1*e,.8*n,0,n,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.55*e,.1*n,.5*e,0,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.95*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,n,e,n,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.05*e,n));return r.add(new a.a.PathSegment(a.a.PathSegment.Move,.45*e,.875*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,180,-360,.5*e,.875*n,.05*e,.05*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.325*n,.575*e,.725*n,.625*e,.375*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.75*n,.375*e,.375*n,.425*e,.725*n)),i})),a.a.Shape.defineFigureGenerator("Recycle",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.45*e,.95*n,!1);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.185*e,.85*n,.17*e,.95*n,.15*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.235*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.625*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.275*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.05*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.05*e,.575*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.1875*e,.95*n,0,.675*n,0,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.45*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.775*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.22*e,.775*n));var o=new a.a.PathFigure(.475*e,.2*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.225*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.275*e,.175*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.325*e,.05*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.4*e,.05*n,.35*e,0,.375*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.575*e,.375*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.525*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.475*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.315*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.32*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.05*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.575*e,0,.65*e,.05*n,.625*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.38*e,.0105*n));var s=new a.a.PathFigure(.675*e,.575*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.875*e,.525*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.775*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.85*e,.95*n,e,.8*n,e,.85*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.95*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.85*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.725*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.775*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.775*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.775*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,.675*e,.575*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.775*e,.775*n)),i})),a.a.Shape.defineFigureGenerator("BpmnEventTimer",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(e,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,(.5+r)*n,(.5+r)*e,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,(.5-r)*e,n,0,(.5+r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,(.5-r)*n,(.5-r)*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,(.5+r)*e,0,e,(.5-r)*n));var s=new a.a.PathFigure(.5*e,0,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.15*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.85*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.58*e,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.78*e,.54*n)),i})),a.a.Shape.defineFigureGenerator("Package",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.15*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close());var o=new a.a.PathFigure(0,.15*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.15*n).close()),i.spot1=new a.a.Spot(0,.1),i.spot2=new a.a.Spot(1,1),i})),a.a.Shape.defineFigureGenerator("Class",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0).close());var o=new a.a.PathFigure(0,.2*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n).close());var s=new a.a.PathFigure(0,.5*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n).close()),i})),a.a.Shape.defineFigureGenerator("Component",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n).close());var o=new a.a.PathFigure(0,.2*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.2*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.2*n).close());var s=new a.a.PathFigure(0,.6*n,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.6*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.8*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.6*n).close()),i})),a.a.Shape.defineFigureGenerator("Boat Shipment",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.15*e,.6*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.6*n));var o=new a.a.PathFigure(.15*e,.6*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.6*n)),i})),a.a.Shape.defineFigureGenerator("Customer/Supplier",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.33*e,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.33*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n).close()),i})),a.a.Shape.defineFigureGenerator("Workcell",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),i})),a.a.Shape.defineFigureGenerator("Supermarket",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.33*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.66*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.66*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,e,.66*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),i})),a.a.Shape.defineFigureGenerator("TruckShipment",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0).close());var o=new a.a.PathFigure(e,.8*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.8*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n).close());var s=.1,h=.1*O,l=.2,u=.9,d=new a.a.PathFigure((l-s)*e,u*n,!0);i.add(d),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,l*e,(u-s)*n,(l-s)*e,(u-h)*n,(l-h)*e,(u-s)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(l+s)*e,u*n,(l+h)*e,(u-s)*n,(l+s)*e,(u-h)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,l*e,(u+s)*n,(l+s)*e,(u+h)*n,(l+h)*e,(u+s)*n)),d.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(l-s)*e,u*n,(l-h)*e,(u+s)*n,(l-s)*e,(u+h)*n).close()),s=.1,h=.1*O,l=.8,u=.9;var c=new a.a.PathFigure((l-s)*e,u*n,!0);return i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,l*e,(u-s)*n,(l-s)*e,(u-h)*n,(l-h)*e,(u-s)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(l+s)*e,u*n,(l+h)*e,(u-s)*n,(l+s)*e,(u-h)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,l*e,(u+s)*n,(l+s)*e,(u+h)*n,(l+h)*e,(u+s)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(l-s)*e,u*n,(l-h)*e,(u+s)*n,(l-s)*e,(u+h)*n).close()),i})),a.a.Shape.defineFigureGenerator("KanbanPost",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.2*e,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,n)),i})),a.a.Shape.defineFigureGenerator("Forklift",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0));var o=new a.a.PathFigure(0,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.8*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n));var s=new a.a.PathFigure(.5*e,.8*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.8*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.8*n));var h=new a.a.PathFigure(.5*e,.7*n,!1);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n));var l=.1,u=.1*O,d=.1,c=.9,f=new a.a.PathFigure((d-l)*e,c*n,!0);i.add(f),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,d*e,(c-l)*n,(d-l)*e,(c-u)*n,(d-u)*e,(c-l)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(d+l)*e,c*n,(d+u)*e,(c-l)*n,(d+l)*e,(c-u)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,d*e,(c+l)*n,(d+l)*e,(c+u)*n,(d+u)*e,(c+l)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(d-l)*e,c*n,(d-u)*e,(c+l)*n,(d-l)*e,(c+u)*n)),l=.1,u=.1*O,d=.4,c=.9;var g=new a.a.PathFigure((d-l)*e,c*n,!0);return i.add(g),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,d*e,(c-l)*n,(d-l)*e,(c-u)*n,(d-u)*e,(c-l)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(d+l)*e,c*n,(d+u)*e,(c-l)*n,(d+l)*e,(c-u)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,d*e,(c+l)*n,(d+l)*e,(c+u)*n,(d+u)*e,(c+l)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(d-l)*e,c*n,(d-u)*e,(c+l)*n,(d-l)*e,(c+u)*n)),i})),a.a.Shape.defineFigureGenerator("RailShipment",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.1*e,.4*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.4*n).close());var o=new a.a.PathFigure(.45*e,.7*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.7*n));var s=new a.a.PathFigure(.55*e,.4*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.4*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.9*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.9*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.4*n).close());var h=.05,l=.05*O,u=.175,d=.95,c=new a.a.PathFigure((u-h)*e,d*n,!0);i.add(c),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d-h)*n,(u-h)*e,(d-l)*n,(u-l)*e,(d-h)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u+h)*e,d*n,(u+l)*e,(d-h)*n,(u+h)*e,(d-l)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d+h)*n,(u+h)*e,(d+l)*n,(u+l)*e,(d+h)*n)),c.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u-h)*e,d*n,(u-l)*e,(d+h)*n,(u-h)*e,(d+l)*n));h=.05,l=.05*O,u=.375,d=.95;var f=new a.a.PathFigure((u-h)*e,d*n,!0);i.add(f),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d-h)*n,(u-h)*e,(d-l)*n,(u-l)*e,(d-h)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u+h)*e,d*n,(u+l)*e,(d-h)*n,(u+h)*e,(d-l)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d+h)*n,(u+h)*e,(d+l)*n,(u+l)*e,(d+h)*n)),f.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u-h)*e,d*n,(u-l)*e,(d+h)*n,(u-h)*e,(d+l)*n));h=.05,l=.05*O,u=.625,d=.95;var g=new a.a.PathFigure((u-h)*e,d*n,!0);i.add(g),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d-h)*n,(u-h)*e,(d-l)*n,(u-l)*e,(d-h)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u+h)*e,d*n,(u+l)*e,(d-h)*n,(u+h)*e,(d-l)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d+h)*n,(u+h)*e,(d+l)*n,(u+l)*e,(d+h)*n)),g.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u-h)*e,d*n,(u-l)*e,(d+h)*n,(u-h)*e,(d+l)*n));h=.05,l=.05*O,u=.825,d=.95;var p=new a.a.PathFigure((u-h)*e,d*n,!0);i.add(p),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d-h)*n,(u-h)*e,(d-l)*n,(u-l)*e,(d-h)*n)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u+h)*e,d*n,(u+l)*e,(d-h)*n,(u+h)*e,(d-l)*n)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,u*e,(d+h)*n,(u+h)*e,(d+l)*n,(u+l)*e,(d+h)*n)),p.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(u-h)*e,d*n,(u-l)*e,(d+h)*n,(u-h)*e,(d+l)*n).close());var m=new a.a.PathFigure(0,n,!1);return i.add(m),m.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n).close()),i})),a.a.Shape.defineFigureGenerator("Warehouse",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0).close());var o=new a.a.PathFigure(0,.2*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n).close());var s=new a.a.PathFigure(.15*e,n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.5*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,n).close());var h=.05*O,l=new a.a.PathFigure(.3*e,.775*n,!0);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.35*e,.725*n,.3*e,(.775-h)*n,(.35-h)*e,.725*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(.35+.05)*e,.775*n,(.35+h)*e,.725*n,(.35+.05)*e,(.775-h)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.35*e,(.775+.05)*n,(.35+.05)*e,(.775+h)*n,(.35+h)*e,(.775+.05)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,.775*n,(.35-h)*e,(.775+.05)*n,.3*e,(.775+h)*n).close()),i})),a.a.Shape.defineFigureGenerator("ControlCenter",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.1*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.8*n).close()),i})),a.a.Shape.defineFigureGenerator("Bluetooth",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.75*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.25*n)),i})),a.a.Shape.defineFigureGenerator("Bookmark",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.4*n)),i})),a.a.Shape.defineFigureGenerator("Bookmark",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.4*n)),i})),a.a.Shape.defineFigureGenerator("Globe",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.5*n,.75*e,0,e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,e,.75*n,.75*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,.25*e,n,0,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,0,.25*n,.25*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,n,.15*e,.25*n,.15*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,.85*e,.75*n,.85*e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.1675*e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8325*e,.15*n,.35*e,.3*n,.65*e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.1675*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8325*e,.85*n,.35*e,.7*n,.65*e,.7*n)),i})),a.a.Shape.defineFigureGenerator("Wave",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.25*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,.25*n,.1*e,0,.2*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.7*e,.25*n,.425*e,.5*n,.575*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.25*n,.8*e,0,.9*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,.75*n,.1*e,.5*n,.2*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.7*e,.75*n,.425*e,n,.575*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.75*n,.8*e,.5*n,.9*e,.5*n)),i})),a.a.Shape.defineFigureGenerator("Operator",(function(t,e,n){var i=new a.a.Geometry,r=.3*O,o=new a.a.PathFigure(.2*e,.7*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,(.7-.3)*n,.2*e,(.7-r)*n,(.5-r)*e,(.7-.3)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.7*n,(.5+r)*e,(.7-.3)*n,.8*e,(.7-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,1*n,.8*e,(.7+r)*n,(.5+r)*e,1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.2*e,.7*n,(.5-r)*e,1*n,.2*e,(.7+r)*n));var s=new a.a.PathFigure(0,.7*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.7*n,0,0,e,0)),i})),a.a.Shape.defineFigureGenerator("TripleFanBlades",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.65*n,.65*e,.3*n,.65*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,.35*e,.5*n,.35*e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n,.3*e,.6*n,.1*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.65*n,.2*e,n,.35*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,n,.7*e,.6*n,.9*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.65*n,.8*e,n,.65*e,.95*n)),i})),a.a.Shape.defineFigureGenerator("CentrifugalPump",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(e,0,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,0,.075*n,0,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.4*e,n,0,n,.4*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.4*n,.8*e,n,.85*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)),i})),a.a.Shape.defineFigureGenerator("Battery",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.4*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.1*n));var o=new a.a.PathFigure(0,.6*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.4*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.4*n)),i})),a.a.Shape.defineFigureGenerator("Delete",(function(t,e,n){var i=new a.a.Geometry,r=.5*O,o=new a.a.PathFigure(0*e,.5*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0*n,0*e,(.5-r)*n,(.5-r)*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,1*e,.5*n,(.5+r)*e,0*n,1*e,(.5-r)*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,1*n,1*e,(.5+r)*n,(.5+r)*e,1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0*e,.5*n,(.5-r)*e,1*n,0*e,(.5+r)*n));var s=new a.a.PathFigure(.15*e,.5*n,!1);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.5*n)),i})),a.a.Shape.defineFigureGenerator("Flag",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.1*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,0,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.1*n,.15*e,0,.35*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,.1*n,.65*e,.2*n,.85*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.5*n,.85*e,.6*n,.65*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.5*n,.35*e,.4*n,.15*e,.4*n).close()),i})),a.a.Shape.defineFigureGenerator("Help",(function(t,e,n){var i=new a.a.Geometry,r=.5,o=.5*O,s=.5,h=.5,l=new a.a.PathFigure((s-r)*e,h*n,!1);i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-r)*n,(s-r)*e,(h-o)*n,(s-o)*e,(h-r)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+r)*e,h*n,(s+o)*e,(h-r)*n,(s+r)*e,(h-o)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h+r)*n,(s+r)*e,(h+o)*n,(s+o)*e,(h+r)*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-r)*e,h*n,(s-o)*e,(h+r)*n,(s-r)*e,(h+o)*n).close()),r=.05,o=.05*O,s=.5,h=.8;var u=new a.a.PathFigure((s-r)*e,h*n,!1);return i.add(u),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h-r)*n,(s-r)*e,(h-o)*n,(s-o)*e,(h-r)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s+r)*e,h*n,(s+o)*e,(h-r)*n,(s+r)*e,(h-o)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,s*e,(h+r)*n,(s+r)*e,(h+o)*n,(s+o)*e,(h+r)*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,(s-r)*e,h*n,(s-o)*e,(h+r)*n,(s-r)*e,(h+o)*n).close()),u.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.7*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.5*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,.2*n,.75*e,.475*n,.75*e,.225*n)),u.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,.35*n,.4*e,.2*n,.3*e,.25*n)),i})),a.a.Shape.defineFigureGenerator("Location",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.5*e,n,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.5*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5*e,0,.975*e,.025*n,.5*e,0)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.25*e,.5*n,.5*e,0,.025*e,.025*n).close()).add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.2*n)).add(new a.a.PathSegment(a.a.PathSegment.Arc,270,360,.5*e,.3*n,.1*e,.1*n).close()))})),a.a.Shape.defineFigureGenerator("Lock",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.5*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n));var o=new a.a.PathFigure(.2*e,.5*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.3*n,.25*e,0,.75*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.3*n)),i})),a.a.Shape.defineFigureGenerator("Unlocked",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.5*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n));var o=new a.a.PathFigure(.2*e,.5*n,!1);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.5*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.3*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.8*e,.3*n,.25*e,0,.75*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.35*n)),i})),a.a.Shape.defineFigureGenerator("Gear",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(.9375*e,.56246875*n,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,.9375*e,.4375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.80621875*e,.4375*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.763*e,.3316875*n,.79840625*e,.39915625*n,.7834375*e,.3635*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.8566875*e,.23796875*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.76825*e,.14959375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.67596875*e,.24184375*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.5625*e,.19378125*n,.64228125*e,.2188125*n,.603875*e,.2021875*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5625*e,.0625*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.4375*e,.0625*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.4375*e,.19378125*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.32775*e,.239375*n,.39759375*e,.20190625*n,.36053125*e,.2176875*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.2379375*e,.14959375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.14953125*e,.2379375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.23934375*e,.3278125*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.19378125*e,.4375*n,.21765625*e,.36059375*n,.201875*e,.397625*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.0625*e,.4375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.0625*e,.5625*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.1938125*e,.5625*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.241875*e,.67596875*n,.20221875*e,.603875*n,.21884375*e,.64228125*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.1495625*e,.76825*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.238*e,.8566875*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.3316875*e,.76296875*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.43753125*e,.80621875*n,.36353125*e,.78340625*n,.3991875*e,.79840625*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.43753125*e,.9375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5625*e,.9375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5625*e,.80621875*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.67225*e,.760625*n,.602375*e,.79809375*n,.63946875*e,.78234375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.76828125*e,.8566875*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.85671875*e,.76825*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.76065625*e,.67221875*n)).add(new a.a.PathSegment(a.a.PathSegment.Bezier,.80621875*e,.56246875*n,.78234375*e,.63940625*n,.798125*e,.602375*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.9375*e,.56246875*n).close()).add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.6*n)).add(new a.a.PathSegment(a.a.PathSegment.Arc,90,360,.5*e,.5*n,.1*e,.1*n).close()))})),a.a.Shape.defineFigureGenerator("Hand",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.5*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.1*e,.3*n,0,.375*n,.05*e,.325*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.45*e,.075*n,.3*e,.225*n,.4*e,.175*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.525*e,.075*n,.46*e,.05*n,.525*e,.05*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.3*e,.4*n,.525*e,.275*n,.475*e,.325*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.55*n,e,.4*n,e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.425*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.6*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.6*e,.7*n,.675*e,.55*n,.675*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.575*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.575*e,.85*n,.65*e,.7*n,.65*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.525*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.535*e,n,.61*e,.85*n,.61*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,.9*n,.435*e,n,0,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.5*n)),i})),a.a.Shape.defineFigureGenerator("Map",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,.2*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.25*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.5*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.75*e,0)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.8*n)),i})),a.a.Shape.defineFigureGenerator("Eject",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.7*n).close());var o=new a.a.PathFigure(0,.6*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.6*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0).close()),i})),a.a.Shape.defineFigureGenerator("Pencil",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.1*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.2*n).close()))})),a.a.Shape.defineFigureGenerator("Building",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(1*e,1*n,!1);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.046*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.046*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.046*e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.954*e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.3*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.954*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.954*e,.85*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e,.85*n).close());var o=new a.a.PathFigure(.126*e,.85*n,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.126*e,.45*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.322*e,.45*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.322*e,.85*n).close());var s=new a.a.PathFigure(.402*e,.85*n,!1);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.402*e,.45*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.598*e,.45*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.598*e,.85*n).close());var h=new a.a.PathFigure(.678*e,.85*n,!1);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.678*e,.45*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.874*e,.45*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.874*e,.85*n).close());var l=new a.a.PathFigure(.5*e,.1*n,!1);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.196*e,.3*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.804*e,.3*n).close()),i})),a.a.Shape.defineFigureGenerator("Staircase",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,1*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.15*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.95*n).close()),i})),a.a.Shape.defineFigureGenerator("5Bars",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,1*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.184*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.184*e,n*(1-.184)).close());var o=new a.a.PathFigure(.204*e,n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.204*e,n*(1-.184))),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.388*e,.632*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.388*e,1*n).close());var s=new a.a.PathFigure(.408*e,n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.408*e,.632*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.592*e,n*(1-.552))),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.592*e,1*n).close());var h=new a.a.PathFigure(.612*e,n,!0);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.612*e,n*(1-.552))),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.796*e,.264*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.796*e,1*n).close());var l=new a.a.PathFigure(.816*e,n,!0);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.816*e,.264*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,n*(1-.184*5))),l.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n).close()),i})),a.a.Shape.defineFigureGenerator("PC",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,0).close());var o=new a.a.PathFigure(.055*e,.07*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.07*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.055*e,.1*n).close());var s=new a.a.PathFigure(.055*e,.13*n,!0);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.13*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.16*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.055*e,.16*n).close());var h=new a.a.PathFigure(.055*e,.18*n,!0);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.18*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.21*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.055*e,.21*n).close());var l=new a.a.PathFigure(1*e,0,!0);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,0)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.65*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.65*n).close()),i})),a.a.Shape.defineFigureGenerator("Plane",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.55*e,n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.7*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.475*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.35*e,.525*n,0,.4*n,.225*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.475*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.325*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.325*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Bezier,.9*e,.2*n,.975*e,0,e,.08*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,n).close()),i})),a.a.Shape.defineFigureGenerator("Key",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(1*e,.5*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.4*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.2*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.15*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.8*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.6*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,.575*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.6*n).close()),r.add(new a.a.PathSegment(a.a.PathSegment.Move,.17*e,.425*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,360,.17*e,.5*n,.075*e,.075*n).close()),i})),a.a.Shape.defineFigureGenerator("FilmTape",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0,0,!1);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,180,0*e,.3*e,.055*e)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.08*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.08*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.136*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.136*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.192*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.192*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.248*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.248*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.304*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.304*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.28),.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.28),1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.336),1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.336),.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.392),.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.392),1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.528*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.528*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.584*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.584*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.696*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.696*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.752*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.752*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.728),.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.728),1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.864*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.864*e,.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.84),.95*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.08+.84),1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n));var o=new a.a.PathFigure(0,0,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Arc,270,-180,1*e,.3*e,.055*e)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n));var s=new a.a.PathFigure(.11*e,.1*n,!1);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.35133333*e,.1*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.35133333*e,.8*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.11*e,.8*n).close());var h=new a.a.PathFigure(.37933333*e,.1*n,!1);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.62066666*e,.1*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.62066666*e,.8*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.37933333*e,.8*n).close());var l=new a.a.PathFigure(e*(.59266666+.056),.1*n,!1);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.83399999+.056),.1*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.83399999+.056),.8*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(.59266666+.056),.8*n).close()),i})),a.a.Shape.defineFigureGenerator("FloppyDisk",(function(t,e,n){var i=new a.a.Geometry,r=8*O,o=new a.a.PathFigure(8,0,!1);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.86*e,0)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.14*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-8)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-8,n,e,n-r,e-r,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,8,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n-8,r,n,0,n-r)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,0,8)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,8,0,0,r,r,0).close());var s=new a.a.PathFigure(.83*e,0,!1);i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.83*e,.3*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.17*e,.3*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.17*e,0*n).close());var h=new a.a.PathFigure(.83*e,1*n,!1);i.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.83*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.17*e,.5*n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.17*e,1*n).close());var l=new a.a.PathFigure(.78*e,.05*n,!1);return i.add(l),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.05*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.25*n)),l.add(new a.a.PathSegment(a.a.PathSegment.Line,.78*e,.25*n).close()),i})),a.a.Shape.defineFigureGenerator("SpeechBubble",(function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=15),i=Math.min(i,e/3);var r=(i=Math.min(i,n/3))*O,o=.8*n,s=new a.a.Geometry,h=new a.a.PathFigure(i,0,!0);return s.add(h),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e-i,0)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e,i,e-r,0,e,r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,e,o-i)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-i,o,e,o-r,e-r,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,n)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,i,o)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,o-i,r,o,0,o-r)),h.add(new a.a.PathSegment(a.a.PathSegment.Line,0,i)),h.add(new a.a.PathSegment(a.a.PathSegment.Bezier,i,0,0,r,r,0).close()),r>1?(s.spot1=new a.a.Spot(0,0,r,r),s.spot2=new a.a.Spot(1,.8,-r,-r)):(s.spot1=a.a.Spot.TopLeft,s.spot2=new a.a.Spot(1,.8)),s})),a.a.Shape.defineFigureGenerator("Repeat",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0*e,.45*n,!0);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.45*n).close());var o=new a.a.PathFigure(1*e,.55*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.55*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.55*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.1*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,.55*n).close()),i})),a.a.Shape.defineFigureGenerator("Windows",(function(t,e,n){return(new a.a.Geometry).add(new a.a.PathFigure(0,0,!0).add(new a.a.PathSegment(a.a.PathSegment.Line,e,0)).add(new a.a.PathSegment(a.a.PathSegment.Line,e,n)).add(new a.a.PathSegment(a.a.PathSegment.Line,0,n).close()).add(new a.a.PathSegment(a.a.PathSegment.Move,.4*e,.4*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.8*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.8*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.9*e,.4*n).close()).add(new a.a.PathSegment(a.a.PathSegment.Move,.2*e,.1*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.2*e,.6*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.6*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,.1*n).close()).add(new a.a.PathSegment(a.a.PathSegment.Move,.1*e,.6*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.9*n)).add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.6*n).close()))})),a.a.Shape.defineFigureGenerator("Terminal",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0*e,.1*n,!1);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.9*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0*e,.9*n).close());var o=new a.a.PathFigure(.1*e,.2*n,!0);i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.22*e,.285*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.32*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.1*e,.37*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.275*e,.32*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.275*e,.25*n).close());var s=new a.a.PathFigure(.28*e,.37*n,!0);return i.add(s),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.37*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.41*n)),s.add(new a.a.PathSegment(a.a.PathSegment.Line,.28*e,.41*n).close()),i})),a.a.Shape.defineFigureGenerator("Beaker",(function(t,e,n){var i=new a.a.Geometry,r=15*O,o=new a.a.PathFigure(.62*e,.475*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,e,n-15)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,e-15,n,e,n-r,e-r,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,15,n)),o.add(new a.a.PathSegment(a.a.PathSegment.Bezier,0,n-15,r,n,0,n-r)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.38*e,.475*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.38*e,.03*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.36*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,0*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.62*e,.03*n).close()),r>1?(i.spot1=new a.a.Spot(0,0,r,r),i.spot2=new a.a.Spot(1,1,-r,-r)):(i.spot1=a.a.Spot.TopLeft,i.spot2=a.a.Spot.BottomRight),i})),a.a.Shape.defineFigureGenerator("Download",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0*e,1*n,!0);i.add(r);r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.755*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.93*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.61*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.39*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.36*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.07*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.8),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0*e,n*(1-.1/.3)).close());var o=new a.a.PathFigure(.4*e,0*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.44*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.26*e,.44*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.66*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.74*e,.44*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.44*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,0*n).close()),i})),a.a.Shape.defineFigureGenerator("Bin",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0*e,1*n,!0);i.add(r);return r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.755*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.93*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.61*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.39*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.36*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.07*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.8),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0*e,n*(1-.1/.3)).close()),i})),a.a.Shape.defineFigureGenerator("Upload",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(0*e,1*n,!0);i.add(r);r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.8*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.66*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.755*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.93*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.64*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.61*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.39*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.36*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.07*e,n*(1-.1/.3))),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.245*e,.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),.055*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.66),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,e*(1-.8),0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0*e,n*(1-.1/.3)).close());var o=new a.a.PathFigure(.5*e,0*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.26*e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.4*e,.63*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.63*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.6*e,.25*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.74*e,.25*n).close()),i})),a.a.Shape.defineFigureGenerator("EmptyDrink",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.15*e,0*n,!1);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,1*n).close()),i})),a.a.Shape.defineFigureGenerator("Drink",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.15*e,0*n,!1);i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.85*e,0*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.7*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.3*e,1*n).close());var o=new a.a.PathFigure(.235*e,.28*n,!0);return i.add(o),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.765*e,.28*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.655*e,.97*n)),o.add(new a.a.PathSegment(a.a.PathSegment.Line,.345*e,.97*n).close()),i})),a.a.Shape.defineFigureGenerator("4Arrows",(function(t,e,n){var i=new a.a.Geometry,r=new a.a.PathFigure(.5*e,0*n,!0);return i.add(r),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,1*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.75*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.55*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.65*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.5*e,1*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.75*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.55*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.65*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,0*e,.5*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.35*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.25*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.45*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.45*e,.25*n)),r.add(new a.a.PathSegment(a.a.PathSegment.Line,.35*e,.25*n).close()),i})),a.a.Shape.defineFigureGenerator("Connector","Ellipse"),a.a.Shape.defineFigureGenerator("Alternative","TriangleUp"),a.a.Shape.defineFigureGenerator("Merge","TriangleUp"),a.a.Shape.defineFigureGenerator("Decision","Diamond"),a.a.Shape.defineFigureGenerator("DataTransmissions","Hexagon"),a.a.Shape.defineFigureGenerator("Gate","Crescent"),a.a.Shape.defineFigureGenerator("Delay","HalfEllipse"),a.a.Shape.defineFigureGenerator("Input","Parallelogram1"),a.a.Shape.defineFigureGenerator("ManualLoop","ManualOperation"),a.a.Shape.defineFigureGenerator("ISOProcess","Chevron"),a.a.Shape.defineFigureGenerator("MessageToUser","SquareArrow"),a.a.Shape.defineFigureGenerator("MagneticData","Cylinder1"),a.a.Shape.defineFigureGenerator("DirectData","Cylinder4"),a.a.Shape.defineFigureGenerator("StoredData","DataStorage"),a.a.Shape.defineFigureGenerator("SequentialData","MagneticTape"),a.a.Shape.defineFigureGenerator("Subroutine","Procedure");var H=a.a.GraphObject.make,X=["#FFFFFF","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#607D8B"],U=H(a.a.Adornment,"Spot",{cursor:"move",mouseEnter:function(t,e){t.diagram.isReadOnly||ct(e)},mouseLeave:function(t,e){t.diagram.isReadOnly||ct(e,!1)},doubleClick:function(t,e){if(e.diagram&&!e.diagram.isReadOnly){var n=e.part.findObject("TEXT");n&&e.diagram.commandHandler.editTextBlock(n)}}},H(a.a.Panel,"Auto",H(a.a.Shape,"RoundedRectangle",{fill:null,stroke:"#2196F3cc",strokeWidth:1,alignment:a.a.Spot.Center},new a.a.Binding("stroke","color"),new a.a.Binding("strokeDashArray","strokeDashArray")),H(a.a.Placeholder,{padding:2,alignment:a.a.Spot.Center}))),q=H(a.a.Adornment,{locationSpot:a.a.Spot.Center,locationObjectName:"CONTAINER",cursor:"pointer"},H(a.a.Shape,"Diamond",{desiredSize:new a.a.Size(12,12),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{geometryString:"M6 12 L6 45",isGeometryPositioned:!0,stroke:"#2196F3",strokeWidth:1.5,strokeDashArray:[4,2]})),W=H(a.a.Adornment,"Spot",{locationSpot:a.a.Spot.Center},H(a.a.Placeholder),H(a.a.Shape,{alignment:a.a.Spot.TopLeft,alignmentFocus:a.a.Spot.BottomRight,cursor:"nw-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.Top,alignmentFocus:a.a.Spot.Bottom,cursor:"n-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.TopRight,alignmentFocus:a.a.Spot.BottomLeft,cursor:"ne-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.Left,alignmentFocus:a.a.Spot.Right,cursor:"w-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.Right,alignmentFocus:a.a.Spot.Left,cursor:"e-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.BottomLeft,alignmentFocus:a.a.Spot.TopRight,cursor:"se-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.Bottom,alignmentFocus:a.a.Spot.Top,cursor:"s-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"}),H(a.a.Shape,{alignment:a.a.Spot.BottomRight,alignmentFocus:a.a.Spot.TopLeft,cursor:"sw-resize",desiredSize:new a.a.Size(9,9),fill:"white",stroke:"#2196F3"})),K=H("ContextMenu",H(a.a.Panel,"Horizontal",{background:"#fff",padding:12},H(a.a.Panel,"Auto",{width:24,height:24,padding:2,cursor:"pointer",click:function(t,e){t.diagram.startTransaction(""),t.diagram.model.removeArrayItem(e.part.adornedPart.data.icons,e.part.adornedObject.itemIndex),t.diagram.commitTransaction("")}},H(a.a.Shape,"Circle",{fill:"red",strokeWidth:0}),H(a.a.Shape,"XLine",{stroke:"#fff"})),H(a.a.Shape,"LineV",{stroke:"#3333",height:28,width:6}),X.map((function(t){return H(a.a.Shape,"Circle",{cursor:"pointer",stroke:"#c3c3c3",strokeWidth:1,width:18,height:18,fill:t,margin:2,click:function(t,e){t.diagram.startTransaction(""),e.part.adornedObject.data.stroke=e.fill,e.part.adornedObject.updateTargetBindings(),t.diagram.commitTransaction("")}})}))));function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=null;switch(t){case"fontColor":i=new a.a.Binding("stroke",e+"fontColor",n);break;case"radius":i=new a.a.Binding("parameter1",e+"radius",n);break;case"smallWidth":i=new a.a.Binding("width",e+"smallWidth",n);break;case"smallHeight":i=new a.a.Binding("height",e+"smallHeight",n);break;case"location":i=new a.a.Binding("loc",e+"location",n);break;default:i=new a.a.Binding(t,e+t,n)}return i}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.separator,a=void 0===i?"_":i;if(!o.a.isArray(t)&&!o.a.isString(t)||!o.a.isArray(e))throw new Error("rootName should be string or array,names should be array ");return o.a.isArray(t)&&(t=t.join(a)),o.a.map(e,(function(e){var n=J(e=o.a.toLower(e),t+a,(function(t,n){return n.data[e]||t}));return n=n.ofModel()}))}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.separator,i=void 0===n?"_":n;if(!o.a.isArray(t)||!o.a.isString(i))throw new Error("name must be an array and  separator should be a string");return o.a.toLower(t.join(i))}function Q(t){if(!o.a.isBoolean(t))throw new Error("isTwoway must be a boolean");for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return o.a.map(n,(function(e){var n=J(e);return t&&n&&(n=n.makeTwoWay()),n}))}function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TEXT";return{doubleClick:function(e,n){if(n.diagram&&!n.diagram.isReadOnly){var i=n.part.findObject(t);i&&n.diagram.commandHandler.editTextBlock(i)}}}}function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(o.a.isString(t)&&(t=[t]),!o.a.isArray(t))throw new Error("rootName should be an array");for(var i=o.a.defaults(e,{fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontItalic:!1,fontBold:!1,isUnderline:!1,isStrikethrough:!1,textAlign:"center",verticalAlignment:a.a.Spot.Center,alignment:a.a.Spot.Center,stretch:a.a.GraphObject.Horizontal,margin:new a.a.Margin(12),overflow:a.a.TextBlock.OverflowClip}),r=i.fontColor,s=i.fontFamily,h=i.fontSize,l=i.fontItalic,u=i.fontBold,d=i.isUnderline,c=i.isStrikethrough,f=i.verticalAlignment,g=i.alignment,p=i.stretch,m=i.margin,v={name:"TEXT",textAlign:"center",text:n,font:nt({fontFamily:s,fontSize:h,fontItalic:l,fontBold:u}),isUnderline:d,isStrikethrough:c,margin:m,overflow:a.a.TextBlock.WrapBreakAll,wrap:a.a.TextBlock.WrapDesiredSize,stroke:r,verticalAlignment:f,stretch:p,alignment:g},y=arguments.length,w=new Array(y>3?y-3:0),S=3;S<y;S++)w[S-3]=arguments[S];return H.apply(void 0,[a.a.TextBlock,v,new a.a.Binding("stroke","fontColor").ofModel(),new a.a.Binding("font",$([].concat(V(t),["fontFamily"])),(function(t,e){return nt(I({},e.part.data,{fontFamily:t}))})).ofModel(),new a.a.Binding("font",$([].concat(V(t),["fontSize"])),(function(t,e){return nt(I({},e.part.data,{fontSize:t}))})).ofModel(),new a.a.Binding("font",$([].concat(V(t),["fontItalic"])),(function(t,e){return nt(I({},e.part.data,{fontItalic:t}))})).ofModel(),new a.a.Binding("font",$([].concat(V(t),["fontBold"])),(function(t,e){return nt(I({},e.part.data,{fontBold:t}))})).ofModel(),new a.a.Binding("stroke","fontColor"),new a.a.Binding("font","fontFamily",(function(t,e){return nt(I({},e.part.data,{fontFamily:t}))})),new a.a.Binding("font","fontSize",(function(t,e){return nt(I({},e.part.data,{fontSize:t}))})),new a.a.Binding("font","fontItalic",(function(t,e){return nt(I({},e.part.data,{fontItalic:t}))})),new a.a.Binding("font","fontBold",(function(t,e){return nt(I({},e.part.data,{fontBold:t}))}))].concat(V(Q(!0,"text","isUnderline","isStrikethrough")),w))}function nt(t){var e=t.fontFamily,n=void 0===e?"arial,sans-serif":e,i=t.fontSize,a=void 0===i?"14px":i,r=t.fontItalic,o=t.fontBold;return"".concat(r?"italic":""," ").concat(o?"bold":"","  ").concat(parseInt(a),"px/").concat(parseInt(a)+6,"px ").concat(n||""," ")}function it(t,e){a.a.GraphObject.make(a.a.TreeLayout,{angle:e,arrangement:a.a.TreeLayout.ArrangementFixedRoots,nodeSpacing:2,layerSpacing:35,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(t)}function at(t,e,n){t.model.setDataProperty(e.data,"dir",n);for(var i=e.findTreeChildrenNodes();i.next();)at(i.value.diagram,i.value,n)}function rt(t){if(t){var e=t.diagram;e.startTransaction("Layout");var n=new a.a.Set,i=new a.a.Set;t.findLinksConnected().each((function(e){var a=e.toNode;at(a.diagram,a,a.data.dir),"left"===a.data.dir?(i.add(t),i.add(e),i.addAll(a.findTreeParts())):(n.add(t),n.add(e),n.addAll(a.findTreeParts()))})),it(n,0),it(i,180),e.commitTransaction("Layout")}}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"icons";return H(a.a.Panel,"Horizontal",{stretch:a.a.GraphObject.Horizontal,itemTemplate:st(t)},new a.a.Binding("itemArray",e))}function st(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fontSize:32},e=t.fontSize;return H(a.a.Panel,"Auto",{contextMenu:K,padding:2,cursor:"pointer",mouseEnter:function(t,e){e.findObject("ICON_CONTAINER").stroke="#3333"},mouseLeave:function(t,e){e.findObject("ICON_CONTAINER").stroke="transparent"},click:function(t,e){t.diagram.commandHandler.showContextMenu(e)}},H(a.a.Shape,{fill:"transparent",stroke:"transparent",strokeWidth:1,name:"ICON_CONTAINER"}),H.apply(void 0,[a.a.TextBlock,{name:"ICON",margin:0,stroke:"#666",font:"".concat(e,"px 'Material Design Icons'"),editable:!1,isMultiline:!1}].concat(V(Q(!1,"stroke")),[new a.a.Binding("text","text",(function(t){return String.fromCodePoint(parseInt(t,16))}))])))}function ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NODE",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q;return{rotatable:!0,rotateObjectName:t,rotateAdornmentTemplate:e}}function lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NODE",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;return{resizable:!0,resizeObjectName:t,resizeAdornmentTemplate:e}}function ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NODE",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;return{selectable:!0,selectionObjectName:t,selectionAdornmentTemplate:e}}function dt(){return[{itemTemplate:H(a.a.Panel,"Auto",H(a.a.Shape,"Circle",{opacity:0,name:"PORT",fromLinkable:!0,toLinkable:!0,fill:"#2196F3",stroke:null,desiredSize:new a.a.Size(10,10),cursor:"pointer"},new a.a.Binding("fromSpot","align",a.a.Spot.parse),new a.a.Binding("toSpot","align",a.a.Spot.parse),new a.a.Binding("portId","id")),new a.a.Binding("alignment","align",a.a.Spot.parse),new a.a.Binding("alignmentFocus","align",a.a.Spot.parse))},new a.a.Binding("itemArray","ports")]}function ct(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(t instanceof a.a.Adornment?t.adornedObject.part:t.part).ports.each((function(t){"PORT"===t.name&&(t.opacity=e?.6:0)}))}function ft(t){var e=[];return t.forEach((function(t){if(t){var n=(i=t.label,r={click:function(e){t.execute(e.diagram.selection.first())}},H("ContextMenuButton",H(a.a.TextBlock,i,I({verticalAlignment:a.a.Spot.Center,stroke:"#333",minSize:new a.a.Size(80,30),background:"#fff",font:"14px sans-serif"},r))));t.onChangeStatus=function(t){n.visible=t},e.push(n)}var i,r})),e.length>0?H.apply(void 0,["ContextMenu"].concat(e)):null}function gt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&t.toolManager.draggingTool.copiedParts&&t.toolManager.draggingTool.copiedParts.iteratorKeys||t.selection).first()}function pt(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e&&t.toolManager.draggingTool.copiedParts&&t.toolManager.draggingTool.copiedParts.iteratorKeys||t.selection}function mt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{denyCategories:[],afterSuccess:r,transactionName:"",removeOnSuccess:!0},i=n.denyCategories,r=n.afterSuccess,s=n.removeOnSuccess;return e=o.a.pull(e,i),{mouseDragEnter:function(t,n){for(var a=pt(t.diagram).iterator;a.next();){var r=a.value.part.category;if(i.indexOf(r)<0&&("*"===e[0]||e.indexOf(r)>-1)){n.part.isHighlighted=!0;break}}},mouseDragLeave:function(t,e){e.isHighlighted=!1},mouseDrop:function(n,o){o.isHighlighted=!1;var h=pt(n.diagram).iterator;n.diagram.model.commit((function(l){for(var u=new a.a.List;h.next();){var d=h.value.data,c=d.text,f=d.stroke,g=h.value.part.category;i.indexOf(g)<0&&("*"===e[0]||e.indexOf(g)>-1)&&(o.part.data[t]||l.set(o.part.data,t,[]),l.addArrayItem(o.part.data[t],{text:c,stroke:f})),s&&n.diagram.remove(h.value)}r&&r(o,u)}))}}}function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeCategorys:[],afterSuccess:null,transactionName:"",removeOnSuccess:!0},n=e.denyCategories,i=void 0===n?[]:n,r=e.afterSuccess;return t=o.a.pull(t,i),{mouseDragEnter:function(e,n){for(var a=pt(e.diagram).iterator;a.next();){var r=a.value.part.category;if(i.indexOf(r)<0&&("*"===t[0]||t.indexOf(r)>-1)){n.part.isHighlighted=!0;break}}},mouseDragLeave:function(t,e){e.part.isHighlighted=!1},mouseDrop:function(e,n){n.part.isHighlighted=!1;for(var o=pt(e.diagram).iterator,s=new a.a.List;o.next();){var h=o.value.category;i.indexOf(h)<0&&("*"===t[0]||t.indexOf(h)>-1)&&s.add(o.value)}n.part.addMembers(s,!0),r&&r(n,s)}}}var yt=null;a.a.GraphObject.make;function wt(t,e){var n=null,i=e.key,r=e.locationObject.getDocumentBounds(),o=r.width,s=r.height,h=r.x,l=r.y,u=null,d=null,c=["top","bottom","left","right"],f=[new a.a.Rect(h,l-20-20,o,s),new a.a.Rect(h,l,o,s+20+20),new a.a.Rect(h-20,l,o,s),new a.a.Rect(h,l,o+20,s)],g=null;return f.some((function(e,r){if((n=function(t,e,n){return t.findObjectsIn(e,(function(t){return t.part}),(function(t){return t instanceof a.a.Node&&("TreeNode"===t.category||"TreeTitle"===t.category||"TreeSubtitle"===t.category||"TreeFree"===t.category)&&t.key!==n}),!0)}(t,e,i)).size>0)return g=c[r],!0})),n.size>0&&(u=n.first(),d="left"==g||"right"===g?u:t.findNodeForKey(u.data.parent)),{part:u,direction:g,parent:d}}function St(t){var e=function(t){var e=null;return t.model.nodeDataArray.some((function(t){if("TreeHolder"===t.category)return e=t,!0})),e}(t);t.model.removeNodeData(e)}function Pt(){a.a.DraggingTool.call(this)}a.a.Diagram.inherit(Pt,a.a.DraggingTool),Pt.prototype.doMouseMove=function(){a.a.DraggingTool.prototype.doMouseMove.call(this);var t=this.diagram.selection.first(),e=wt(this.diagram,t),n=(e.part,e.parent),i=(e.direction,null),r=null;if(!n||"TreeNode"!==t.part.category&&"TreeFree"!==t.part.category)St(this.diagram),yt=null;else{if(n.data.dir)i=n.data.dir;else i=t.getDocumentBounds().x>n.getDocumentBounds().x?"right":"left";if(!yt||n.key!==yt.key){St(this.diagram),r={category:"TreeHolder",dir:i,parent:n.key},this.diagram.model.addNodeData(r);var o=this.diagram.findNodeForData(r).findTreeRoot();at(this.diagram,o,i),rt(o,this.diagram)}yt=n}},Pt.prototype.doActivate=function(){a.a.DraggingTool.prototype.doActivate.call(this);for(var t=this.diagram.selection.iterator;t.next();)t.value.setProperties({isTreeExpanded:!1}),this.diagram.model.setDataProperty(t.value.data,"parent",null)},Pt.prototype.doDeactivate=function(){a.a.DraggingTool.prototype.doDeactivate.call(this);var t,e,n=(t=this.diagram,e=null,t.model.nodeDataArray.some((function(n){if("TreeHolder"===n.category)return e=t.findNodeForKey(n.key),!0})),e),i=n?n.part.data:null,r=n?n.findTreeRoot():null,o=this.diagram.selection.iterator;if(St(this.diagram),i){i.category;var s=i.parent,h=i.dir;for(i.loc;o.next();)this.diagram.commandHandler.expandTree(o.value),o.value.data&&(this.diagram.model.setDataProperty(o.value.data,"parent",s),this.diagram.model.setDataProperty(o.value.data,"dir",h),this.diagram.model.setCategoryForNodeData(o.value.data,"TreeNode"),o.value.data.dir!==h&&at(this.diagram,o.value,h));rt(r,this.diagram)}else for(;o.next();){var l=o.value;"TreeFree"!==l.category&&"TreeNode"!==l.category||(this.diagram.commandHandler.expandTree(l),l.data&&(this.diagram.model.setCategoryForNodeData(l.data,"TreeFree"),rt(l,this.diagram)))}},Pt.prototype.doDragOver=function(t,e){a.a.DraggingTool.prototype.doDragOver.call(this)},Pt.prototype.doDropOnto=function(t,e){a.a.DraggingTool.prototype.doDropOnto.call(this)};var bt=Pt;function xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var kt=a.a.GraphObject.make,Lt=null,Mt=null,Nt=null,Tt=null,Ct=null,Ft=function(t){var e=t.viewportBounds;t.startTransaction("update scales"),Mt.location=new a.a.Point(e.x,e.y),Mt.graduatedMin=e.x,Mt.graduatedMax=e.right,Mt.scale=1/t.scale,Nt.location=new a.a.Point(e.x,e.y),Nt.graduatedMin=e.y,Nt.graduatedMax=e.bottom,Nt.scale=1/t.scale,t.commitTransaction("update scales");var n=t.div.offsetWidth,i=t.div.offsetHeight;n>0&&i>0&&(Mt.part.findObject("CONTAINER").setProperties({geometryString:"M0 0 H".concat(n)}),Nt.part.findObject("CONTAINER").setProperties({geometryString:"M0 0 V".concat(i)}))},Bt=function(t){t.commitTransaction("add scales"),t.add(Mt),t.add(Nt),t.add(Tt),t.add(Ct),t.commitTransaction("add scales"),Ft(t)},Ot=function(t){var e=t.viewportBounds,n=t.lastInput.documentPoint;Tt.location=new a.a.Point(Math.max(n.x,e.x),e.y),Tt.scale=1/t.scale,Ct.location=new a.a.Point(e.x,Math.max(n.y,e.y)),Ct.scale=1/t.scale},At=function(){function t(e,n){var i,r=e.meshColor,o=e.ruleColor;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=n,this.meshColor=r,this.ruleColor=o,i=r,Lt=kt(a.a.Panel,"Grid",{name:"GRID",visible:!1,gridCellSize:new a.a.Size(10,10),gridOrigin:new a.a.Point(0,0)},kt(a.a.Shape,"LineH",{strokeWidth:.5,interval:1,stroke:i}),kt(a.a.Shape,"LineH",{strokeWidth:.5,interval:10,stroke:i}),kt(a.a.Shape,"LineV",{strokeWidth:.5,interval:1,stroke:i}),kt(a.a.Shape,"LineV",{strokeWidth:.5,interval:10,stroke:i}));var s=function(t){return{gradScaleHoriz:kt(a.a.Node,"Graduated",{name:"GRAD_SCALE",selectable:!1,graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1,background:"#fff",opacity:.6,visible:!1},kt(a.a.Shape,{name:"CONTAINER",geometryString:"M0 0 H1920"}),kt(a.a.Shape,{geometryString:"M0 0 V3",interval:1,stroke:t}),kt(a.a.Shape,{geometryString:"M0 0 V15",interval:5,stroke:t}),kt(a.a.TextBlock,{font:"10px sans-serif",interval:5,alignmentFocus:a.a.Spot.TopLeft,segmentOffset:new a.a.Point(0,7)},t)),gradScaleVert:kt(a.a.Node,"Graduated",{name:"GRAD_SCALE",selectable:!1,graduatedTickUnit:10,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1,background:"#fff",opacity:.6,visible:!1},kt(a.a.Shape,{name:"CONTAINER",geometryString:"M0 0 V1080"}),kt(a.a.Shape,{geometryString:"M0 0 V3",interval:1,alignmentFocus:a.a.Spot.Bottom}),kt(a.a.Shape,{geometryString:"M0 0 V15",interval:5,alignmentFocus:a.a.Spot.Bottom}),kt(a.a.TextBlock,{font:"10px sans-serif",segmentOrientation:a.a.Link.OrientOpposite,interval:5,stroke:t,alignmentFocus:a.a.Spot.BottomLeft,segmentOffset:new a.a.Point(0,-7)})),gradIndicatorHoriz:kt(a.a.Node,{visible:!1,selectable:!1,pickable:!1,layerName:"Foreground",isInDocumentBounds:!1,isAnimated:!1,locationSpot:a.a.Spot.Top},kt(a.a.Shape,{geometryString:"M0 0 V15",strokeWidth:2,stroke:"red"})),gradIndicatorVert:kt(a.a.Node,{selectable:!1,isInDocumentBounds:!1,isAnimated:!1,pickable:!1,layerName:"Foreground",visible:!1,locationSpot:a.a.Spot.Left},kt(a.a.Shape,{geometryString:"M0 0 H15",strokeWidth:2,stroke:"red"}))}}(o);Mt=s.gradScaleHoriz,Nt=s.gradScaleVert,Tt=s.gradIndicatorHoriz,Ct=s.gradIndicatorVert}var e,n,i;return e=t,(n=[{key:"makeMeshTemplate",value:function(){return{grid:Lt}}},{key:"makeResizingTool",value:function(){return{resizingTool:new S}}},{key:"makeArchorTemplate",value:function(){return kt(a.a.Shape,"Rectangle",{width:10,height:10,opacity:.8,fill:"#409eff",stroke:"#333",mouseEnter:function(t,e){if(!e.cursor){var n=e.alignment;n===a.a.Spot.TopLeft?e.cursor="nw-resize":n===a.a.Spot.TopCenter?e.cursor="n-resize":n===a.a.Spot.TopRight?e.cursor="ne-resize":n===a.a.Spot.RightCenter?e.cursor="e-resize":n===a.a.Spot.BottomRight?e.cursor="se-resize":n===a.a.Spot.BottomCenter?e.cursor="s-resize":n===a.a.Spot.BottomLeft?e.cursor="sw-resize":n===a.a.Spot.LeftCenter&&(e.cursor="w-resize")}}},new a.a.Binding("cursor"))}},{key:"makeRelinkTool",value:function(){return{"linkingTool.isUnconnectedLinkValid":!0,"linkingTool.portGravity":20,"relinkingTool.isUnconnectedLinkValid":!0,"relinkingTool.portGravity":20,"relinkingTool.fromHandleArchetype":kt(a.a.Shape,"Diamond",{segmentIndex:0,cursor:"pointer",desiredSize:new a.a.Size(12,12),fill:"#2196F3",stroke:"#2196F3"}),"relinkingTool.toHandleArchetype":kt(a.a.Shape,"Diamond",{segmentIndex:-1,cursor:"pointer",desiredSize:new a.a.Size(12,12),fill:"#2196F3",stroke:"#2196F3"}),"linkReshapingTool.handleArchetype":kt(a.a.Shape,"Diamond",{desiredSize:new a.a.Size(12,12),fill:"#2196F3",stroke:"#2196F3"})}}},{key:"makeGuideDraggingTool",value:function(){return{draggingTool:new b,"dragSelectingTool.box":kt(a.a.Part,{layerName:"Tool",selectable:!1},kt(a.a.Shape,{name:"SHAPE",fill:"#2196F322",stroke:"#2196F399",strokeWidth:1})),"draggingTool.dragsLink":!0,"draggingTool.isGridSnapEnabled":!0,"draggingTool.horizontalGuidelineColor":"blue","draggingTool.verticalGuidelineColor":"blue","draggingTool.centerGuidelineColor":"green","draggingTool.guidelineWidth":1}}},{key:"makeDraggingTreeTool",value:function(){return{draggingTool:new bt,"dragSelectingTool.box":kt(a.a.Part,{layerName:"Tool",selectable:!1},kt(a.a.Shape,{name:"SHAPE",fill:"#2196F322",stroke:"#2196F399",strokeWidth:1}))}}},{key:"makeRotatingTool",value:function(){return{"rotatingTool.handleAngle":270,"rotatingTool.handleDistance":30,"rotatingTool.snapAngleMultiple":15,"rotatingTool.snapAngleEpsilon":15}}},{key:"setupRule",value:function(){var t=this.canvas;t.addDiagramListener("InitialLayoutCompleted",(function(){return Bt(t)})),t.addDiagramListener("ViewportBoundsChanged",(function(){return Ft(t)})),t.addDiagramListener("ViewportBoundsChanged",(function(){return Ot(t)})),t.toolManager.doMouseMove=function(){a.a.ToolManager.prototype.doMouseMove.call(this),Ot(t)},t.toolManager.linkingTool.doMouseMove=function(){a.a.LinkingTool.prototype.doMouseMove.call(this),Ot(t)},t.toolManager.draggingTool.doMouseMove=function(){a.a.DraggingTool.prototype.doMouseMove.call(this),Ot(t)},t.toolManager.dragSelectingTool.doMouseMove=function(){a.a.DragSelectingTool.prototype.doMouseMove.call(this),Ot(t)},t.mouseEnter=function(){Tt.visible=!0,Ct.visible=!0},t.mouseLeave=function(){Tt.visible=!1,Ct.visible=!1},Bt(t)}},{key:"unsetupRule",value:function(){var t;(t=this.canvas).startTransaction("remove scales"),t.remove(Mt),t.remove(Nt),t.remove(Tt),t.remove(Ct),t.commitTransaction("remove scales")}},{key:"setMeshColor",value:function(t){this.canvas.grid.elements.each((function(e){e.stroke=t}))}},{key:"setRuleColor",value:function(t){Mt.elements.each((function(e){e.stroke=t})),Nt.elements.each((function(e){e.stroke=t}))}},{key:"setupMesh",value:function(){Lt.visible=!0}},{key:"unsetupMesh",value:function(){Lt.visible=!1}}])&&xt(e.prototype,n),i&&xt(e,i),t}(),jt=n(2),Dt=n.n(jt);function zt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Gt=a.a.GraphObject.make,Et=Gt(a.a.Adornment,"Auto",Gt(a.a.Placeholder));function Rt(){a.a.Link.call(this)}a.a.Diagram.inherit(Rt,a.a.Link),Rt.prototype.makeGeometry=function(){var t=this.pointsCount;if(t<4||this.computeCurve()!==a.a.Link.Bezier)return a.a.Link.prototype.makeGeometry.call(this);var e=this.getPoint(0),n=this.getPoint(t>4?2:1),i=this.getPoint(t>4?t-3:2),r=this.getPoint(t-1),o=Math.abs(e.y-n.y)<Math.abs(e.x-n.x),s=Math.abs(i.y-r.y)<Math.abs(i.x-r.x),h=e.x+(o?0:-4),l=e.y+(o?-4:0),u=n.x+(o?0:-3),d=n.y+(o?-3:0),c=i.x+(s?0:-2),f=i.y+(s?-2:0),g=r.x+(s?0:-1),p=r.y+(s?-1:0),m=new a.a.PathFigure(h,l,!0);m.add(new a.a.PathSegment(a.a.PathSegment.Bezier,g,p,u,d,c,f)),h=e.x+(o?0:4),l=e.y+(o?4:0),u=n.x+(o?0:3),d=n.y+(o?3:0),c=i.x+(s?0:2),f=i.y+(s?2:0),g=r.x+(s?0:1),p=r.y+(s?1:0),m.add(new a.a.PathSegment(a.a.PathSegment.Line,g,p)),m.add(new a.a.PathSegment(a.a.PathSegment.Bezier,h,l,c,f,u,d).close());var v=new a.a.Geometry;return v.add(m),v.normalize(),v};var It={name:"treeLink",style:{stroke:"#333",strokeWidth:1,strokeDashArray:[]},node:"LINE",createTemplate:function(t){var e=this.style,n=e.stroke,i=e.strokeWidth,r=e.strokeDashArray;return Gt(a.a.Link,{curve:a.a.Link.Bezier,toEndSegmentLength:35,fromEndSegmentLength:10,selectable:!1,fromShortLength:-2,toShortLength:-2},Gt.apply(void 0,[a.a.Shape,{name:"LINE",strokeDashArray:r,stroke:n,strokeWidth:i},new a.a.Binding("stroke","toNode",(function(t){return t.data.stroke||t.findObject("LINE").stroke||"#3333"})).ofObject(),new a.a.Binding("strokeDashArray","toNode",(function(t){return t.data.strokeDashArray||t.findObject("LINE").strokeDashArray||[]})).ofObject()].concat(zt(Z("link",["strokeWidth"])),zt(Q(!1,"strokeWidth","stroke","strokeDashArray")))),t)}};function _t(t){return 20*t+40}function Vt(){a.a.Link.call(this),this.time=0}a.a.Diagram.inherit(Vt,a.a.Link),Vt.prototype.getLinkPoint=function(t,e,n,i,r,o,s){var h=e.getDocumentPoint(a.a.Spot.Center),l=s.getDocumentPoint(a.a.Spot.Center),u=this.data,d=null!==u?u.time:this.time,c=this.findActivityWidth(t,d),f=l.x>h.x?h.x+c/2:h.x-c/2,g=_t(d);return new a.a.Point(f,g)},Vt.prototype.findActivityWidth=function(t,e){var n=80;return t instanceof a.a.Group&&(t.memberParts.any((function(t){var n=t.data;return null!==n&&n.start<=e&&e<=n.start+n.duration}))||(n=0)),n},Vt.prototype.getLinkDirection=function(t,e,n,i,r,o,s,h){var l=e.getDocumentPoint(a.a.Spot.Center);return h.getDocumentPoint(a.a.Spot.Center).x>l.x?0:180},Vt.prototype.computePoints=function(){if(this.fromNode===this.toNode){var t=this.data,e=null!==t?t.time:this.time,n=this.fromNode.port.getDocumentPoint(a.a.Spot.Center),i=this.findActivityWidth(this.fromNode,e),r=n.x+i/2,o=_t(e);return this.clearPoints(),this.addPoint(new a.a.Point(r,o)),this.addPoint(new a.a.Point(r+50,o)),this.addPoint(new a.a.Point(r+50,o+5)),this.addPoint(new a.a.Point(r,o+5)),!0}return a.a.Link.prototype.computePoints.call(this)};var Yt={name:"sequenceLink",style:{stroke:"#333",strokeWidth:1,strokeDashArray:[],label:{fontColor:"#333",fontSize:14,fontFamily:"arial,sans-serif",fontBold:null,fontItalic:null,isUnderline:null,isStrikethrough:!1}},createTemplate:function(t){return Gt(Vt,{selectionAdorned:!0,curviness:0},Gt(a.a.Shape,"Rectangle",{stroke:"black"}),Gt(a.a.Shape,{toArrow:"OpenTriangle",stroke:"black"}),Gt(a.a.TextBlock,{font:"400 9pt Source Sans Pro, sans-serif",segmentIndex:0,segmentOffset:new a.a.Point(NaN,NaN),isMultiline:!1,editable:!0},new a.a.Binding("text","text").makeTwoWay())),t}},Ht={name:"structLink",createTemplate:function(t){return Gt(a.a.Link,a.a.Link.Orthogonal,{corner:5,relinkableFrom:!0,relinkableTo:!0},Gt(a.a.Shape,{strokeWidth:1.5,stroke:"#F5F5F5"}),t)}},Xt={LineLink:{name:"lineLink",style:{line:"Broken",stroke:"#333",strokeWidth:1,curve:a.a.Link.JumpGap,routing:a.a.Link.Orthogonal,strokeDashArray:[],relinkableFrom:!0,relinkableTo:!0,label:{fill:"#fff",stroke:"#666",strokeWidth:1,fontColor:"#333"},corner:5,toShortLength:5,fromShortLength:0,fromArrow:"",reshapable:!0,toArrow:"Standard"},actions:["delete"],node:"LINE",createTemplate:function(t){var e=this.style,n=e.stroke,i=e.strokeWidth,r=e.curve,o=e.routing,s=e.strokeDashArray,h=e.label,l=e.corner,u=e.toShortLength,d=e.fromShortLength,c=e.fromArrow,f=e.reshapable,g=e.toArrow,p=e.adjusting,m=h.fill,v=h.stroke,y=h.strokeWidth;return Gt.apply(void 0,[a.a.Link,{selectionAdornmentTemplate:Et,adjusting:p,reshapable:f,resegmentable:!0,relinkableFrom:!0,relinkableTo:!0,curve:r,corner:l,toShortLength:u,fromShortLength:d,selectionAdorned:!0,routing:o,mouseEnter:function(t,e){!t.diagram.isReadOnly||e.part.isSelected},mouseLeave:function(t,e){!t.diagram.isReadOnly&&e.part.isSelected},doubleClick:function(t,e){if(e.diagram&&!e.diagram.isReadOnly){var n=e.part.findObject("TEXT");n&&e.diagram.commandHandler.editTextBlock(n)}}}].concat(zt(Q(!1,"smoothness","points")),[new a.a.Binding("curviness","curviness").makeTwoWay(),new a.a.Binding("curve","line",(function(t){return"Bend"===t?a.a.Link.Bezier:a.a.Link.JumpGap})),new a.a.Binding("routing","line",(function(t){return"Straight"===t||"Bend"===t?a.a.Link.Normal:a.a.Link.Orthogonal})),Gt(a.a.Shape,{isPanelMain:!0,strokeWidth:i+6,stroke:"transparent",name:"HIGHLIGHT"},new a.a.Binding("strokeWidth","strokeWidth",(function(t){return parseInt(t)+6})),new a.a.Binding("stroke","isSelected",(function(t){return t?"#2196F366":"transparent"})).ofObject()),Gt.apply(void 0,[a.a.Shape,{stroke:n,strokeDashArray:s,strokeWidth:i,name:"LINE",isPanelMain:!0}].concat(zt(Z(this.name,["strokeWidth","strokeDashArray","stroke"])),zt(Q(!1,"strokeWidth","strokeDashArray","stroke")))),Gt(a.a.Shape,{fromArrow:c,stroke:n,strokeWidth:i,fill:n,name:"FROMARROW"},new a.a.Binding("fromArrow","fromArrow"),new a.a.Binding("scale","strokeWidth",(function(t){return parseInt(parseInt(t)/4)}))),Gt(a.a.Panel,"Auto",{background:"transparent",cursor:"pointer",click:function(t,e){if(e.diagram&&!e.diagram.isReadOnly){var n=e.part.findObject("TEXT");n&&e.diagram.commandHandler.editTextBlock(n)}}},Gt(a.a.Shape,"RoundedRectangle",{name:"LABEL",fill:m,strokeWidth:y,stroke:v,visible:!1},new a.a.Binding("visible","text",(function(t){return t.length>0})).ofObject("TEXT"),new a.a.Binding("strokeWidth","strokeWidth"),new a.a.Binding("strokeDashArray","strokeDashArray")),et(this.name,this.style,"")),Gt(a.a.Shape,{toArrow:g,stroke:n,strokeWidth:i,fill:n,name:"TOARROW"},new a.a.Binding("scale","strokeWidth",(function(t){return parseInt(parseInt(t)/4)})),new a.a.Binding("toArrow","toArrow")),t]))},onChangeStyle:function(t,e,n){"strokeWidth"===e&&n<=0&&(t.data.strokeWidth=1)}},TreeLink:It,SequenceLink:Yt,StructLink:Ht};function Ut(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var qt=a.a.GraphObject.make,Wt={ColorCanvas:{name:"colorCanvas",style:{background:"transparent",fill:"transparent",opacity:1,width:40,height:40,fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},actions:["cut","delete","paste","group","copy","ungroup"],createTemplate:function(t){return qt(a.a.Node,"Spot",qt(a.a.Panel,"Vertical",qt(a.a.Panel,"Viewbox",{background:"transparent",name:"NODE",width:40,height:40},new a.a.Binding("desiredSize","size",a.a.Size.parse).makeTwoWay(a.a.Size.stringify),qt(a.a.Panel,{width:1024,height:1024,itemTemplate:qt(a.a.Panel,qt.apply(void 0,[a.a.Shape,{name:"NODE",opacity:1}].concat(Ut(Z("canvas",["opacity","fill"])),Ut(Q(!0,"opacity","fill")),Ut(Q(!1,"geometryString")))))}))),et("canvas","text"),t)}},MonoCanvas:{name:"monoCanvas",style:{background:"transparent",fill:"transparent",opacity:1,width:40,height:40,fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},actions:["cut","delete","paste","group","copy","ungroup"],createTemplate:function(t){return qt(a.a.Node,"Vertical",qt(a.a.Panel,"Viewbox",{name:"NODE",width:80,height:80},new a.a.Binding("desiredSize","size",a.a.Size.parse).makeTwoWay(a.a.Size.stringify),qt(a.a.Panel,{width:1024,height:1024,itemTemplate:qt(a.a.Panel,qt.apply(void 0,[a.a.Shape,{name:"NODE",opacity:1,stroke:"#666",strokeWidth:0,fill:"transparent"}].concat(Ut(Z("canvas",["opacity","fill"])),Ut(Q(!0,"opacity","fill")),Ut(Q(!1,"geometryString")))))})),et("canvas"),t)}}};function Kt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Jt=a.a.GraphObject.make,Zt={Picture:{name:"picture",actions:["cut","paste","group","copy","ungroup"],style:{figure:"RoundedRectangle",fill:"transparent",background:"transparent",opacity:1,strokeWidth:1,stroke:"transparent",width:80,height:80,fontColor:"#333",fontSize:"14px",fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},createTemplate:function(t){var e=this.style,n=e.fill,i=e.stroke,r=e.strokeWidth,o=e.width,s=e.height,h=e.figure,l=e.background,u=e.opacity;return Jt(a.a.Node,"Spot",Jt(a.a.Panel,"Auto",{alignment:a.a.Spot.Center,width:o,height:s,name:"NODE",stretch:a.a.GraphObject.Fill,background:l},new a.a.Binding("desiredSize","size",a.a.Size.parse).makeTwoWay(a.a.Size.stringify),Jt.apply(void 0,[a.a.Shape,{figure:h,fill:n,stroke:i,opacity:u,strokeWidth:r}].concat(Kt(Q(!1,"figure","fill","stroke","strokeWidth"))))),et(this.name,this.style),t)}}};function $t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(n),!0).forEach((function(e){te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ee=null,ne=a.a.GraphObject.make,ie=function(t,e){for(var n=e.selection.iterator;n.next();)n.value.setProperties({isTreeExpanded:!1}),e.model.setDataProperty(n.value.data,"parent",null)},ae=function(t,e){var n=function(t,e){var n=null,i=e.key,r=e.locationObject.getDocumentBounds(),o=r.width,s=r.height,h=r.x,l=r.y,u=null,d=null,c=["top","bottom","left","right"],f=[new a.a.Rect(h,l-20-20,o,s),new a.a.Rect(h,l,o,s+20+20),new a.a.Rect(h-20,l,o,s),new a.a.Rect(h,l,o+20,s)],g=null;f.some((function(e,r){if((n=function(t,e,n){return t.findObjectsIn(e,(function(t){return t.part}),(function(t){return t instanceof a.a.Node&&("TreeNode"===t.category||"TreeFree"===t.category)&&t.key!==n}),!0)}(t,e,i)).size>0)return g=c[r],!0})),n.size>0&&(u=n.first(),d="left"==g||"right"===g?u:t.findNodeForKey(u.data.parent));return{part:u,direction:g,parent:d}}(e,t).parent,i=null,r=null;if(n){if(0!==n.findTreeLevel())i=n.data.dir;else i=t.getDocumentBounds().x>n.getDocumentBounds().x?"right":"left";if(!ee||n.key!==ee.key)le(e),r={category:"TreeHolder",dir:i,parent:n.key},e.model.addNodeData(r),rt(e.findNodeForData(r).findTreeRoot());ee=n}else le(e),ee=null},re=function(t,e){var n=function(t){var e=null;return t.model.nodeDataArray.some((function(n){if("TreeHolder"===n.category)return e=t.findNodeForKey(n.key),!0})),e}(e),i=n?n.part.data:null,a=n?n.findTreeRoot():null,r=e.selection.iterator;if(le(e),i){for(var o=i.category,s=i.dir;r.next();)e.commandHandler.expandTree(r.value),r.value.data&&(e.model.commit((function(t){t.setDataProperty(r.value.data,"parent",o),t.setDataProperty(r.value.data,"dir",s),t.setCategoryForNodeData(r.value.data,"TreeNode")})),r.value.data.dir!==s&&at(e,r.value,s));rt(a)}else for(;r.next();)e.commandHandler.expandTree(r.value),e.model.commit((function(t){t.setCategoryForNodeData(r.value.data,"TreeFree"),rt(r.value)}))},oe=function(t,e){"FontIcon"===gt(t.diagram).category&&(e.isHighlighted=!0)},se=function(t,e){e.isHighlighted=!1},he=function(t,e){e.isHighlighted=!1;var n=gt(t.diagram),i=n.category,a=n.data,r=a.text,o=a.stroke;"FontIcon"===i&&(t.diagram.startTransaction(""),e.part.data.icons instanceof Array||(e.part.data.icons=[]),t.diagram.model.addArrayItem(e.part.data.icons,{text:r,stroke:o}),e.part.updateTargetBindings(),rt(e.findTreeRoot()),t.diagram.remove(n),t.diagram.commitTransaction(""))};function le(t){var e=function(t){var e=null;return t.model.nodeDataArray.some((function(t){if("TreeHolder"===t.category)return e=t,!0})),e}(t);t.model.removeNodeData(e)}function ue(t,e){return"left"===t?e?a.a.Spot.LeftCenter:a.a.Spot.RightCenter:e?a.a.Spot.RightCenter:a.a.Spot.LeftCenter}var de={TreeNode:{name:"treeNode",style:{fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,isItalic:!1,isStrikethrough:!1},actions:["delete","insertChild","insertBrother","insertParent"],onStartDrag:ie,onDragging:ae,onStopDrag:re,onChangeStyle:function(t,e,n){var i=t.findLinksInto();if("stroke"===e)for(;i.next();)i.value.findObject("LINE").stroke=n},createTemplate:function(t){var e=[ne(a.a.Panel,"Vertical",{name:"NODE",padding:2,alignment:a.a.Spot.Center},new a.a.Binding("position","pos").makeTwoWay(),ne(a.a.Panel,"Horizontal",ne(a.a.Panel,"Auto",{name:"EXPANDER",visible:!0,alignment:a.a.Spot.Left,alignmentFocus:a.a.Spot.Right},new a.a.Binding("opacity","isTreeLeaf",(function(t){return!t})).ofObject(),new a.a.Binding("visible","dir",(function(t){return"left"===t})),ne("TreeExpanderButton")),ot(),et(this.name,Qt({},this.style,{fontSize:"14px"}),"",{margin:new a.a.Margin(2,6,2,6),alignment:a.a.Spot.Default,stretch:a.a.GraphObject.Default,textEdited:function(t){return rt(t.part.findTreeRoot(),t.part.diagram)}}),ne(a.a.Panel,"Auto",{name:"EXPANDER",visible:!0,alignment:a.a.Spot.Right,alignmentFocus:a.a.Spot.Left},new a.a.Binding("opacity","isTreeLeaf",(function(t){return!t})).ofObject(),new a.a.Binding("visible","dir",(function(t){return"right"===t})),ne("TreeExpanderButton")),new a.a.Binding("background","isHighlighted",(function(t){return t?"#FFC107":"transparent"})).ofObject()),ne(a.a.Shape,"LineH",{name:"LINE",height:1,stroke:"red",fromShortLength:6,toShortLength:6,stretch:a.a.GraphObject.Horizontal,strokeWidth:1,portId:"",fromSpot:a.a.Spot.LeftRightSides,toSpot:a.a.Spot.LeftRightSides},new a.a.Binding("stroke"),new a.a.Binding("fromSpot","dir",(function(t){return ue(t,!0)})),new a.a.Binding("toSpot","dir",(function(t){return ue(t,!1)}))))];return ne(a.a.Node,"Spot",{locationObjectName:"LINE",locationSpot:a.a.Spot.Right,mouseDragEnter:oe,mouseDragLeave:se,mouseDrop:he,margin:2,padding:2},new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),e,ut(),tt(),t)},onDeleteing:function(t){var e=t.findTreeRoot();setTimeout((function(){rt(e)}),0)}},TreeHolder:{name:"treeHolder",styleNames:[],actions:[],createTemplate:function(t){return ne(a.a.Node,"Vertical",{name:"CONTAINER",padding:2},"Vertical",ne(a.a.Shape,"RoundedRectangle",{fill:"#FFC107",name:"NODE",width:60,height:25,stroke:"#FFC107"}),ne(a.a.Shape,"LineH",{stroke:"#FFC107",name:"LINE",height:1,stretch:a.a.GraphObject.Horizontal,strokeWidth:1,portId:"",fromSpot:a.a.Spot.LeftRightSides,toSpot:a.a.Spot.LeftRightSides},new a.a.Binding("stroke"),new a.a.Binding("fromSpot","dir",(function(t){return ue(t,!0)})),new a.a.Binding("toSpot","dir",(function(t){return ue(t,!1)}))),t)}},TreeFree:{name:"treeFree",onStartDrag:ie,onDragging:ae,onStopDrag:re,style:{fill:"#CFD8DC",fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,isItalic:!1,isStrikethrough:!1},actions:["delete","insertChild"],createTemplate:function(t){var e=this.style.fill,n=[ne(a.a.Panel,"ViewBox",ne(a.a.Panel,"Auto",{stretch:a.a.GraphObject.Fill},ne(a.a.Shape,"RoundedRectangle",{name:"NODE",strokeWidth:0,fill:"#CFD8DC"},new a.a.Binding("fill","isHighlighted",(function(t,n){return t?"#FFC107":n.part.data.fill||e})).ofObject()),ne(a.a.Shape,"LineH",{stretch:a.a.GraphObject.Horizontal,name:"PORT",margin:new a.a.Margin(0,-5,0,-5),stroke:"transparent",height:1,portId:"",fromSpot:a.a.Spot.LeftRightSides,toSpot:a.a.Spot.LeftRightSides}))),ne(a.a.Panel,"Horizontal",ot(),et(this.name,this.style,"",{textEdited:function(t){return rt(t.part.findTreeRoot(),t.diagram)}}))];return ne(a.a.Node,"Auto",{padding:0,margin:0,locationObjectName:"PORT",mouseDragEnter:oe,mouseDragLeave:se,mouseDrop:he},n,new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),tt(),ut(),t)}}};function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var me={fill:"#fff",stroke:"#333",strokeDashArray:[],strokeWidth:1,opacity:1,width:80,height:80,fontColor:"#333",fontSize:14,fontFamily:"arial,sans-serif",fontBold:null,fontItalic:null,isUnderline:null,isStrikethrough:!1},ve=["cut","paste","group","copy","ungroup"],ye=a.a.GraphObject.make;function we(){var t=me.fill,e=me.stroke,n=me.strokeDashArray,i=me.strokeWidth;return ye(a.a.Node,"Vertical",{locationObjectName:"SHAPE",cursor:"move",selectionAdornmentTemplate:U},ye.apply(void 0,[a.a.Shape,{name:"SHAPE",width:60,height:60,fill:t,stroke:e,strokeDashArray:n,strokeWidth:i}].concat(pe(Q(!1,"angle","figure")))),et(this.name,fe({},me,{fontColor:"#333",fontSize:12}),name,{isMultiline:!1}))}var Se={Shape:{name:"shape",actions:ve,style:me,createPreview:we,createTemplate:function(){for(var t="#fff",e="#333",n=[],i=1,r=1,o=80,s=80,h=arguments.length,l=new Array(h),u=0;u<h;u++)l[u]=arguments[u];return ye(a.a.Node,"Auto",ye(a.a.Panel,"Spot",{stretch:a.a.GraphObject.Fill,mouseEnter:function(t,e){ct(e,!0)},mouseLeave:function(t,e){ct(e,!1)}},ye.apply(void 0,[a.a.Shape,{width:o,height:s,fill:t,stroke:e,opacity:r,strokeDashArray:n,strokeWidth:i,cursor:"move",name:"NODE"}].concat(pe(Z(this.name,["figure","fill","opacity","stroke","strokeWidth","strokeDashArray"])),pe(Q(!0,"figure","fill","opacity","stroke","strokeWidth","strokeDashArray","width","height","angle")))),dt()),new a.a.Binding("position","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),et(this.name),tt(),ut(),ht(),lt(),l)},resetStyle:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=o.a.pick(this.style,n);o.a.has(a,"stroke")&&(t.findObject("NODE").stroke=a.stroke)}},ShapeVertical:{name:"shapeVertical",styleName:"Shape",style:me,actions:ve,createPreview:we,createTemplate:function(t){var e=this.style,n=e.fill,i=e.stroke,r=e.strokeDashArray,o=e.strokeWidth,s=e.opacity,h=e.width,l=e.height;return ye(a.a.Node,"Vertical",ye.apply(void 0,[a.a.Shape,fe({width:h,height:l,stretch:a.a.GraphObject.Fill,name:"NODE",fill:n,stroke:i,opacity:s,strokeDashArray:r,strokeWidth:o,cursor:"move"},tt())].concat(pe(Z("shapevertical",["figure","fill","opacity","stroke","strokeWidth","strokeDashArray"])),pe(Q(!1,"figure","fill","opacity","stroke","strokeWidth","strokeDashArray")),pe(Q(!1,"width","height","angle")))),et(this.name,me),ut(),ht(),lt(),t)}}};function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach((function(e){xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ke(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Le=a.a.GraphObject.make;function Me(t){t.findExternalLinksConnected().each((function(t){t.visible=t.fromNode.isVisible()&&t.toNode.isVisible()}))}var Ne={Group:{name:"group",style:{radius:8,opacity:1,fill:"transparent",stroke:"#333",strokeWidth:1,fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},actions:["ungroup","remove","copy","cut"],createTemplate:function(t){var e=this.style,n=e.radius,i=e.opacity,r=e.fill,o=e.stroke,s=e.strokeWidth;return Le(a.a.Group,"Vertical",{cursor:"move",name:"GROUP",ungroupable:!0,selectionAdornmentTemplate:U,doubleClick:function(t,e){if(e.diagram&&!e.diagram.isReadOnly){var n=e.part.findObject("TEXT");n&&e.diagram.commandHandler.editTextBlock(n)}}},Le(a.a.Panel,"Auto",Le.apply(void 0,[a.a.Shape,"RoundedRectangle",{parameter1:n,fill:r,opacity:i,stroke:o,strokeWidth:s}].concat(ke(Z("group",["opacity","fill","radius","stroke","strokeWidth"])),ke(Q(!1,"opacity","fill","radius","stroke","strokeWidth")))),Le.apply(void 0,[a.a.Placeholder,{padding:6}].concat(ke(Q(!1,"padding"))))),et(this.name,this.style),tt(),t)}},verticalPool:{style:{fill:"#fff",stroke:"#333",strokeWidth:1,radius:2,strokeDashArray:[]},name:"verticalPool",actions:["insertLane","cut","delete","paste","group","copy","ungroup"],subscribes:{SelectionMoved:function(t){return s(t.diagram)},SelectionCopied:function(t){return s(t.diagram)}},createPreview:function(){return Le(a.a.Group,"Vertical",{name:"NODE",background:"#fff"},ut(),Le(a.a.Panel,"Viewbox",{width:60,height:60},Le(a.a.Shape,{stroke:"#333",strokeWidth:1,fill:"#fff",geometryString:"M 0 0 L 80 0 L 80 80 L 0 80 L 0 0 M 0 20 L 80 20 M 40 20 L 40 80"})),et(this.name,this.style,""))},createTemplate:function(t){var e=this.style,n=e.fill,i=e.stroke,r=e.strokeWidth,o=e.radius,s=e.strokeDashArray;return Le(a.a.Group,"Auto",be({selectionAdornmentTemplate:U,layerName:"Background",background:"transparent",layout:Le(d,{direction:"Vertical",spacing:0})},vt(["verticalLane"])),new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),tt(),Le.apply(void 0,[a.a.Shape,"RoundedRectangle",{name:"NODE",fill:n,stroke:i,strokeWidth:r,parameter1:o,strokeDashArray:s},new a.a.Binding("fill","isHighlighted",(function(t,e){return t?"#FFC107":e.part.data.color||n})).ofObject()].concat(ke(Q(!1,"fill","stroke","strokeWidth","radius","strokeDashArray")))),Le(a.a.Panel,"Table",{name:"TABLE",defaultRowSeparatorStroke:i,defaultRowSeparatorStrokeWidth:r,defaultRowSeparatorDashArray:s},new a.a.Binding("defaultRowSeparatorStroke","stroke"),new a.a.Binding("defaultRowSeparatorStrokeWidth","strokeWidth"),new a.a.Binding("defaultRowSeparatorDashArray","strokeDashArray"),Le(a.a.Panel,"Horizontal",{row:0,angle:0},et(this.name,this.style,"",{stretch:a.a.GraphObject.Horizontal})),Le(a.a.Placeholder,{padding:0,row:1})),t)}},horizontalPool:{name:"horizontalPool",styleSetter:{},style:{radius:4,fill:"#fff",stroke:"#333",strokeWidth:1,strokeDashArray:[],fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},actions:["insertLane","cut","delete","paste","group","copy","ungroup"],subscribes:{SelectionMoved:function(t){return s(t.diagram)},SelectionCopied:function(t){return s(t.diagram)}},createPreview:function(){return Le(a.a.Group,"Vertical",{name:"NODE",background:"#fff"},ut(),Le(a.a.Panel,"Viewbox",{width:60,height:60},Le(a.a.Shape,{stroke:"#333",strokeWidth:1,fill:"#fff",geometryString:"M 0 0 L 80 0 L 80 80 L 0 80 L 0 0 M 20 0 L 20 80 M 20 40 L 80 40"})),et(this.name,null,""))},createTemplate:function(t){var e="#fff",n="#333",i=1,r=[];return Le(a.a.Group,"Auto",be({selectionAdornmentTemplate:U,layerName:"Background",background:"transparent",layout:Le(d,{direction:"Horizontal",spacing:6})},vt(["HorizontalLane"])),new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),tt(),Le.apply(void 0,[a.a.Shape,"RoundedRectangle",{name:"NODE",fill:e,stroke:n,strokeWidth:i,parameter1:4,strokeDashArray:r,minSize:new a.a.Size(100,60)},new a.a.Binding("fill","isHighlighted",(function(t,n){return t?"#FFC107":n.part.data.color||e})).ofObject()].concat(ke(Q(!1,"fill","stroke","strokeWidth","radius","strokeDashArray")))),Le(a.a.Panel,"Table",{name:"TABLE",defaultColumnSeparatorStroke:n,defaultColumnSeparatorStrokeWidth:i,defaultRowSeparatorDashArray:r},new a.a.Binding("defaultColumnSeparatorStroke","stroke"),new a.a.Binding("defaultColumnSeparatorStrokeWidth","strokeWidth"),new a.a.Binding("defaultColumnSeparatorDashArray","strokeDashArray"),Le(a.a.Panel,"Horizontal",{column:0,angle:270},et(this.name,this.style,"")),Le(a.a.Placeholder,{padding:0,column:1})),t)}},verticalLane:{name:"verticalLane",style:{radius:4,opacity:1,fill:"#fff",stroke:"#333",strokeWidth:1,fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},actions:["cut","delete","paste","group","copy","ungroup"],createPreview:function(){return Le(a.a.Group,"Vertical",{name:"NODE",background:"#fff"},ut(),Le(a.a.Panel,"Viewbox",{width:60,height:60},Le(a.a.Shape,{geometryString:"M 0 20 L 80 20 L 80 60 L 0 60 L 0 20 M 20 0 L 20 80 L 60 80 L 60 0 L 20 0",stroke:"#333",strokeWidth:1})),et(this.name,null,""))},createTemplate:function(t){var e="#fff";return Le(a.a.Group,"Vertical",{layerName:"Background",background:"transparent",name:"GROUP",resizeAdornmentTemplate:Le(a.a.Adornment,"Spot",Le(a.a.Placeholder),Le(a.a.Shape,{alignment:a.a.Spot.Bottom,desiredSize:new a.a.Size(50,7),fill:"lightblue",stroke:"dodgerblue",cursor:"row-resize"},new a.a.Binding("visible","",(function(t){return null!==t.adornedPart&&t.adornedPart.isSubGraphExpanded})).ofObject()),Le(a.a.Shape,{alignment:a.a.Spot.Right,desiredSize:new a.a.Size(7,50),fill:"lightblue",stroke:"dodgerblue",cursor:"col-resize"},new a.a.Binding("visible","",(function(t){return null!==t.adornedPart&&t.adornedPart.isSubGraphExpanded})).ofObject())),selectionObjectName:"GROUP",selectionAdornmentTemplate:U,resizable:!0,resizeObjectName:"SHAPE",layout:Le(a.a.LayeredDigraphLayout,{isInitial:!1,isOngoing:!1,direction:90,columnSpacing:10,layeringOption:a.a.LayeredDigraphLayout.LayerLongestPathSource}),computesBoundsAfterDrag:!0,computesBoundsIncludingLinks:!1,computesBoundsIncludingLocation:!0,subGraphExpandedChanged:function(t){var e=t.resizeObject;t.diagram.undoManager.isUndoingRedoing||(t.isSubGraphExpanded?e.width=t._savedBreadth:(t._savedBreadth=e.width,e.width=NaN),Me(t))}},new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),new a.a.Binding("isSubGraphExpanded","expanded").makeTwoWay(),tt(),Le(a.a.Panel,"Horizontal",{name:"HEADER",angle:0,alignment:a.a.Spot.Center},Le(a.a.Panel,"Horizontal",new a.a.Binding("visible","isSubGraphExpanded").ofObject(),et(this.name,null,"",{margin:0})),Le("SubGraphExpanderButton",{margin:5})),Le(a.a.Panel,"Auto",Le.apply(void 0,[a.a.Shape,"RoundedRectangle",{minSize:new a.a.Size(100,60),name:"SHAPE",fill:e,stroke:"#333",strokeWidth:1,parameter1:4,opacity:1}].concat(ke(Q(!1,"fill","stroke","strokeWidth","radius","opacity")),[new a.a.Binding("desiredSize","size",a.a.Size.parse).makeTwoWay(a.a.Size.stringify),new a.a.Binding("fill","isHighlighted",(function(t,n){return t?"#FFC107":n.part.data.color||e})).ofObject()])),Le(a.a.Placeholder,{alignment:a.a.Spot.TopLeft,padding:6,angle:90},vt(["*"],{denyCategories:["verticalPool","horizontalPool","HorizontalLane","verticalLane"]})),et(this.name,null,"",new a.a.Binding("visible","isSubGraphExpanded",(function(t){return!t})).ofObject())),t)}},HorizontalLane:{name:"horizontalLane",actions:["cut","delete","paste","group","copy","ungroup"],createPreview:function(){return Le(a.a.Group,"Vertical",{name:"NODE",background:"#fff"},ut(),Le(a.a.Panel,"Viewbox",{width:60,height:60},Le(a.a.Shape,{geometryString:"M 0 20 L 80 20 L 80 60 L 0 60 L 0 20 M 20 0 L 20 80 L 60 80 L 60 0 L 20 0",stroke:"#333",strokeWidth:1})),et(this.name,null,""))},createTemplate:function(t){var e="#fff";return Le(a.a.Group,"Horizontal",{layerName:"Background",background:"transparent",name:"GROUP",resizeAdornmentTemplate:Le(a.a.Adornment,"Spot",Le(a.a.Placeholder),Le(a.a.Shape,{alignment:a.a.Spot.Right,desiredSize:new a.a.Size(7,50),fill:"lightblue",stroke:"dodgerblue",cursor:"col-resize"},new a.a.Binding("visible","",(function(t){return null!==t.adornedPart&&t.adornedPart.isSubGraphExpanded})).ofObject()),Le(a.a.Shape,{alignment:a.a.Spot.Bottom,desiredSize:new a.a.Size(50,7),fill:"lightblue",stroke:"dodgerblue",cursor:"row-resize"},new a.a.Binding("visible","",(function(t){return null!==t.adornedPart&&t.adornedPart.isSubGraphExpanded})).ofObject())),selectionObjectName:"GROUP",selectionAdornmentTemplate:U,resizable:!0,resizeObjectName:"SHAPE",layout:Le(a.a.LayeredDigraphLayout,{isInitial:!1,isOngoing:!1,direction:0,columnSpacing:10,layeringOption:a.a.LayeredDigraphLayout.LayerLongestPathSource}),computesBoundsAfterDrag:!0,computesBoundsIncludingLinks:!1,computesBoundsIncludingLocation:!0,subGraphExpandedChanged:function(t){var e=t.resizeObject;t.diagram.undoManager.isUndoingRedoing||(t.isSubGraphExpanded?e.height=t._savedBreadth:(t._savedBreadth=e.height,e.height=NaN),Me(t))}},new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),new a.a.Binding("isSubGraphExpanded","expanded").makeTwoWay(),tt(),Le(a.a.Panel,"Horizontal",{name:"HEADER",angle:270,alignment:a.a.Spot.Center},Le(a.a.Panel,"Horizontal",new a.a.Binding("visible","isSubGraphExpanded").ofObject(),et(this.name,null,"",{margin:0})),Le("SubGraphExpanderButton",{margin:4})),Le(a.a.Panel,"Auto",be({},vt(["*"],{denyCategories:["verticalPool","horizontalPool","HorizontalLane","verticalLane"]})),Le.apply(void 0,[a.a.Shape,"RoundedRectangle",{name:"SHAPE",fill:e,stroke:"#333",strokeWidth:1,parameter1:4,opacity:1}].concat(ke(Q(!1,"fill","stroke","strokeWidth","radius","opacity")),[new a.a.Binding("desiredSize","size",a.a.Size.parse).makeTwoWay(a.a.Size.stringify),new a.a.Binding("fill","isHighlighted",(function(t,n){return t?"#FFC107":n.part.data.color||e})).ofObject()])),Le(a.a.Placeholder,{alignment:a.a.Spot.TopLeft,padding:6}),et(this.name,null,"",new a.a.Binding("visible","isSubGraphExpanded",(function(t){return!t})).ofObject())),et(this.name,this.style),tt(),t)}}};function Te(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ce=a.a.GraphObject.make,Fe={FontIcon:{name:"fontIcon",style:{fill:"#333",fontSize:32,opacity:1,width:40,height:40,fontColor:"#333"},styleSetter:{stroke:function(t,e){t.findObject("TEXT").stroke=e}},actions:["cut","delete","paste","group","copy","ungroup"],createTemplate:function(t){var e=this.style,n=e.fill,i=e.fontSize,r=e.opacity;return Ce(a.a.Node,"Viewbox",{padding:0,margin:0},Ce.apply(void 0,[a.a.TextBlock,{name:"ICON",margin:0,stroke:n,opacity:r,font:"".concat(i,'px "').concat("Material Design Icons",'"'),editable:!1,isMultiline:!1}].concat(Te(Z("icon",["fontSize"])),Te(Q(!1,"fontSize")),[new a.a.Binding("fill"),new a.a.Binding("text","text",(function(t){return String.fromCodePoint(parseInt(t,16))}))])),t)}}};function Be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function je(t,e,n){return e&&Ae(t.prototype,e),n&&Ae(t,n),t}var De=function(){function t(e){Oe(this,t),this.commander=e}return je(t,[{key:"execute",value:function(t,e){switch(t.name){case"redo":this.commander.redo();break;case"undo":this.commander.undo();break;case"cut":this.commander.cutSelection();break;case"paste":this.commander.pasteSelection();break;case"delete":this.commander.deleteSelection();break;case"group":this.commander.groupSelection();break;case"ungroup":this.commander.ungroupSelection();break;case"collapse":this.commander.collapseTree(e);break;case"expand":this.commander.expandTree(e);break;case"floor":this.commander.floorSelection();break;case"ceiling":this.commander.ceilingSelection();break;case"insertChild":this.commander.insertChild(e);break;case"insertBrother":this.commander.insertBrother(e);break;case"insertParent":this.commander.insertParent(e);break;case"insertLane":this.commander.insertLane(e)}}}]),t}(),ze=function(){function t(e,n,i){Oe(this,t),Be(this,"label",void 0),Be(this,"name",void 0),Be(this,"shortcutKey",void 0),Be(this,"status",!0),Be(this,"onChangeStatus",null),this.label=e,this.name=n,this.runner=i}return je(t,[{key:"setShortcutKey",value:function(t){return this.shortcutKey=t,this}},{key:"execute",value:function(t){this.runner.execute(this,t)}},{key:"setStatus",value:function(t){return this.status!==t&&(this.status=t,this.onChangeStatus&&this.onChangeStatus(t),!0)}}]),t}(),Ge=function(){function t(e){var n=this;Oe(this,t),Be(this,"list",null),Be(this,"runner",null),Be(this,"onChangeStatus",null),Be(this,"map",null);var i=new De(e.commandHandler);e.addDiagramListener("ChangedSelection",(function(){return n.updateStatus()})),e.addDiagramListener("Modified",(function(){return n.updateStatus()})),e.addDiagramListener("SelectionGrouped",(function(){return n.updateStatus()})),e.addDiagramListener("ClipboardChanged",(function(){return n.updateStatus()})),e.addDiagramListener("ClipboardPasted",(function(){return n.updateStatus()})),this.map=e,this.runner=i,this.list={delete:new ze("","delete",i),redo:new ze("","redo",i),undo:new ze("","undo",i),copy:new ze("","copy",i),cut:new ze("","cut",i),paste:new ze("","paste",i),group:new ze("","group",i),ungroup:new ze("","ungroup",i),floor:new ze("","floor",i),ceiling:new ze("","ceiling",i),collapse:new ze("","collapse",i),expand:new ze("","expand",i),insertChild:new ze("","insertChild",i).setShortcutKey("tab"),insertBrother:new ze("","insertBrother",i).setShortcutKey("ctrl&enter"),insertParent:new ze("","insertParent",i).setShortcutKey("shift&enter"),insertLane:new ze("","insertLane",i).setShortcutKey("tab")}}return je(t,[{key:"searchAction",value:function(t){return o.a.values(o.a.pick(this.list,t))}},{key:"updateStatus",value:function(){var t=this,e=this.map.commandHandler,n={},i=!1;n.copy=e.canCopySelection(),n.cut=e.canCutSelection(),n.paste=e.canPasteSelection(),n.undo=e.canUndo(),n.redo=e.canRedo(),n.group=e.canGroupSelection(),n.ungroup=e.canUngroupSelection(),n.collapse=e.canCollapseTree(),n.expand=e.canExpandTree(),n.delete=e.canDeleteSelection(),Object.keys(n).forEach((function(e){!0===t.list[e].setStatus(n[e])&&(i=!0)})),i&&this.onChangeStatus&&this.onChangeStatus(n)}}]),t}(),Ee=Ge;function Re(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ye=Xt.TreeLink,He=Xt.LineLink,Xe=Xt.SequenceLink,Ue=Xt.StructLink,qe=["background"],We=["fill","stroke","strokeDashArray","strokeWidth","opacity","width","height"],Ke=["fontColor","fontFamily","fontSize","fontBold","fontItalic","isUnderline","isStrikethrough"],Je=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"FLOWCHART";switch(Ie(this,t),Ve(this,"event",Dt()()),Ve(this,"groups",new Map),Ve(this,"nodes",new Map),Ve(this,"links",new Map),Ve(this,"mouseDrops",{}),Ve(this,"mouseDragEnters",{}),Ve(this,"mouseDragLeaves",{}),Ve(this,"actionList",null),Ve(this,"canvas",null),this.mapName=r,this.canvas=n,this.actionList=i||new Ee(n),this.setMap(this.nodes,Wt,Se,de,Fe,Zt),this.setMap(this.groups,Ne),this.canvas.addDiagramListener("SelectionDeleting",this.onDeleteing.bind(this)),this.canvas instanceof a.a.Diagram&&this.bindCategoryEvent(),r){case"MINDMAP":this.links.set("",Ye);break;case"FLOWCHART":this.links.set("",He);break;case"SEQUENCEMAP":this.links.set("",Xe);break;case"STRUCTMAP":this.links.set("",Ue)}}var e,n,i;return e=t,(n=[{key:"setMap",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o.a.each(n,(function(e){o.a.each(e,(function(e,n){if(e){if(!o.a.has(e,"name"))return void console.warn(n+' not added to templateMap cause that has no "name" property');t.set(e.name,e)}}))}))}},{key:"bindCategoryEvent",value:function(){var t=this;[this.nodes,this.groups,this.links].forEach((function(e){e.forEach((function(e){o.a.forIn(e.subscribes||{},(function(n,i){t.canvas.addDiagramListener(i,n.bind(e))}))}))}))}},{key:"onMouseDrop",value:function(t,e){var n=arguments,i=o.a.get(this.mouseDrops,e.part.category)||[];o.a.isEmpty(i)||o.a.each(i,(function(t){return t.apply(void 0,Re(n))}))}},{key:"onMouseDragEnter",value:function(t,e){var n=arguments,i=o.a.get(this.mouseDragEnters,e.part.category)||[];o.a.isEmpty(i)||o.a.each(i,(function(t){return t.apply(void 0,Re(n))}))}},{key:"onMouseDragLeave",value:function(t,e){var n=arguments,i=o.a.get(this.mouseDragLeaves,e.part.category)||[];o.a.isEmpty(i)||o.a.each(i,(function(t){return t.apply(void 0,Re(n))}))}},{key:"addDropListener",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];o.a.each(i,(function(n){o.a.has(e.mouseDrops,n)||(e.mouseDrops[n]=[]),e.mouseDrops[n].push(t)}))}},{key:"addDragEnterListener",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];o.a.each(i,(function(n){o.a.has(e.mouseDragEnters,n)||(e.mouseDragEnters[n]=[]),e.mouseDragEnters[n].push(t)}))}},{key:"addDragLeaveListener",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];o.a.each(i,(function(n){o.a.has(e.mouseDragLeaves,n)||(e.mouseDragLeaves[n]=[]),e.mouseDragLeaves[n].push(t)}))}},{key:"on",value:function(t,e){this.event.on(t,e)}},{key:"onDeleteing",value:function(t){var e=this,n=null;t.subject.each((function(t){(n=e.getTemplate(t))&&n.onDeleteing&&n.onDeleteing(t)}))}},{key:"onShortcut",value:function(t){for(var e=this.canvas.selection.iterator,n=null,i=!1;e.next();){var a;(n=this.nodes.get(e.value.category))&&(a=this.actionList).searchAction.apply(a,Re(n.allowAction||[])).forEach((function(n){n.shortcutKey===t&&(n.execute(e.value),i=!0)}))}return i}},{key:"makeNodeTemplates",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new a.a.Map,i=null;return this.nodes.forEach((function(r,s){if(e&&o.a.isFunction(r.createPreview)?i=r.createPreview():o.a.isFunction(r.createTemplate)&&(i=r.createTemplate({contextMenu:ft(t.actionList.searchAction(r.actions))})),i){if(!(i instanceof a.a.Node))return void console.warn('template "'+s+'" is not typeof Node');n.add(s,i)}})),{nodeTemplateMap:n}}},{key:"makeLinkTemplate",value:function(){var t=this.links.get(""),e={contextMenu:ft(this.actionList.searchAction(t.actions))};if(t)return{linkTemplate:t.createTemplate(e)}}},{key:"makeGroupTemplate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new a.a.Map,i=null;return this.groups.forEach((function(a,r){i=null,e&&o.a.isFunction(a.createPreview)?i=a.createPreview():o.a.isFunction(a.createTemplate)&&(i=a.createTemplate({contextMenu:ft(t.actionList.searchAction(a.actions))})),n.add(r,i)})),{groupTemplateMap:n}}},{key:"setCategoryPartStyle",value:function(t,e,n){var i,a,r,s=o.a.pick(n,qe),h=o.a.pick(n,We),l=o.a.pick(n,Ke),u=o.a.intersection(o.a.keys(n),o.a.keys(e.styleSetter));t.forEach((function(t){o.a.isEmpty(s)||(i=t.findObject(e.container||"CONTAINER"))&&i.setProperties(s),o.a.isEmpty(h)||(r=t.findObject(e.node||"NODE"))&&r.setProperties(h),o.a.isEmpty(l)||(o.a.has(l,"fontColor")&&(o.a.set(l,"stroke",l.fontColor),o.a.unset(l,"fontColor")),(a=t.findObject(e.text||"TEXT"))&&a.setProperties(l)),u.forEach((function(i){e.styleSetter[i].call(e,t,n[i])}))}))}},{key:"resetStyle",value:function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var r=null;this.canvas.model.commit((function(t){e.canvas.selection.each((function(n){o.a.each(i,(function(t){delete n.part.data[t]})),(r=e.getTemplate(n))&&r.resetStyle&&r.resetStyle(n,i),t.updateTargetBindings(n.part.data)}))}),""),this.canvas.requestUpdate()}},{key:"changeStyle",value:function(t,e){var n=this,i=null,a=this.canvas.selection.toArray();this.canvas.model.commit((function(r){a.forEach((function(a){r.set(a.data,t,e),(i=n.getTemplate(a))?i.onChangeStyle&&i.onChangeStyle(a,t,e):console.warn('no template named "'+a.category+'" ')}))}))}},{key:"getTemplate",value:function(t){return(t instanceof a.a.Link?this.links:t instanceof a.a.Group?this.groups:this.nodes).get(t.category)}},{key:"getNameTemplate",value:function(t){return this.nodes.get(t)||this.groups.get(t)||this.links.get(t)}},{key:"onStartDrag",value:function(){var t=this.canvas.selection.first();if(t){var e=t.category,n=this.nodes.get(e);n&&n.onStartDrag&&n.onStartDrag.call(n,t,this.canvas)}}},{key:"onDragging",value:function(){var t=this.canvas.selection.first();if(t){var e=t.category,n=this.nodes.get(e);n&&n.onDragging&&n.onDragging.call(n,t,this.canvas)}}},{key:"onStopDrag",value:function(){var t=this.canvas.selection.first();if(t){var e=t.category,n=this.nodes.get(e);n&&n.onStopDrag&&n.onStopDrag.call(n,t,this.canvas)}}},{key:"resetLink",value:function(t){this.links=new Map,this.links.set("",t)}},{key:"setNode",value:function(e,n){this.nodes.set(e,n),t.categoryStyle[n.name]=n.style}},{key:"setGroup",value:function(e,n){this.groups.set(e,n),t.categoryStyle[n.name]=n.style}}])&&_e(e.prototype,n),i&&_e(e,i),t}();Je.categoryStyle={},Je.styleNameSeparator="_",o.a.each([Wt,Zt,de,Se,Ne,Fe,Xt],(function(t){o.a.each(t,(function(t){Je.categoryStyle[t.name]=t.style}))}));var Ze=Je;function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function en(t,e,n){return(en="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nn(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var on=function(t,e){if(t){var n=t.part,i=n.data,a=i.key,r=i.stroke,o=n.diagram,s=function(t){var e=t.part.data.dir,n=0,i=0;if(e)return e;for(var a=t.findTreeChildrenNodes().iterator;a.next();)"left"===a.value.part.data.dir?n++:"right"===a.value.part.data.dir&&i++;return n>=i?"right":"left"}(t);o.startTransaction(""),r||(r=function(t){return X[Math.abs(t)%X.length]}(o.model.nodeDataArray.length));var h={stroke:r,dir:s,parent:a,category:"TreeNode"};o.model.addNodeData(h),e&&e(h),rt(n.findTreeRoot()),o.commitTransaction("");var l=o.findNodeForData(h);return null!==l&&(o.scrollToRect(l.actualBounds),o.select(l),function(t){var e=t.diagram;if(e&&!e.isReadOnly){var n=t.part.findObject("TEXT");n&&e.commandHandler.editTextBlock(n)}}(l)),l}return null},sn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=function(t,e){return!e||"object"!==$e(e)&&"function"!=typeof e?tn(t):e}(this,nn(e).call(this)),rn(tn(t),"customShortcutKeys",{}),rn(tn(t),"shortcutEvent",Dt()()),rn(tn(t),"loopEverySelection",(function(t,e,n){for(var i=t.selection.iterator;i.next();)e.call(this,i.value,i);n&&n()})),t}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(e,t),n=e,(i=[{key:"editNodeText",value:function(t){if(t||(t=this.diagram.selection.first()),t&&this.diagram&&!this.diagram.isReadOnly){var e=t.part.findObject("TEXT");e&&this.editTextBlock(e)}}},{key:"expandTreeNode",value:function(t){t||(t=this.diagram.selection.first()),0!==t.key&&this.diagram.commandHandler.canExpandTree(t)&&this.diagram.commandHandler.expandTree(t)}},{key:"collapseTreeNode",value:function(t){t||(t=this.diagram.selection.first()),t&&0!==t.key&&this.diagram.commandHandler.canCollapseTree(t)&&this.diagram.commandHandler.collapseTree(t)}},{key:"arrowKeySelect",value:function(t){var e=this.diagram.lastInput,n=null;switch(t){case"arrowleft":n=this.findNearestPartTowards(180);break;case"arrowup":n=this.findNearestPartTowards(270);break;case"arrowdown":n=this.findNearestPartTowards(90);break;case"arrowright":n=this.findNearestPartTowards(0)}null!==n&&(e.shift?n.isSelected=!0:e.control||e.meta?n.isSelected=!n.isSelected:this.diagram.select(n),this.diagram.lastInput.handled=!0)}},{key:"canDeleteSelection",value:function(){return!0}},{key:"doKeyDown",value:function(){var t,n,i=(t=this.diagram.lastInput,n=[],t.shift&&n.push("shift"),t.control&&n.push("ctrl"),t.alt&&n.push("alt"),n.push(t.event.key.toLowerCase()),"&"===(n=n.join("&"))[0]&&(n=n.slice(1)),n),a={char:i,isHandle:!1};this.shortcutEvent.emit("shortcut",a),!0===a.isHandle&&(this.diagram.lastInput.handled=!0),this.diagram.lastInput.handled||this.arrowKeySelect(i),en(nn(e.prototype),"doKeyDown",this).call(this)}},{key:"addShortcutListener",value:function(t){this.shortcutEvent.on("shortcut",t)}},{key:"removeShortcutListener",value:function(t){this.shortcutEvent.off("shortcut",t)}},{key:"registeShortcuts",value:function(t,e,n){var i=this;o.a.each(t,(function(t){var a=o.a.get(i.customShortcutKeys,t);a||(a={key:e,triggers:[]},i.customShortcutKeys[t]=a),i.customShortcutKeys[t].triggers.push(n)}))}},{key:"moveUp",value:function(){var t=this;this.diagram.commit((function(e){t.loopEverySelection(t.diagram,(function(t){var n=t.part.data,i=(n.zOrder||0)+1;e.model.set(n,"zOrder",i)}))}),"")}},{key:"moveDown",value:function(){var t=this;this.diagram.commit((function(e){t.loopEverySelection(t.diagram,(function(t){var n=t.part.data,i=(n.zOrder||1)-1;e.model.set(n,"zOrder",i<0?0:i)}))}),"")}},{key:"removeNode",value:function(){var t=this;this.diagram.commit((function(){t.loopEverySelection(t.diagram,(function(e){t.diagram.commit((function(t){var n=e.part.data;t.model.removeNodeData(n)}))}))}),"")}},{key:"setGroup",value:function(){var t=this;this.diagram.commit((function(e){e.model.addNodeData({key:"group",isGroup:!0}),t.loopEverySelection(t.diagram,(function(t){e.model.set(t.data,"group","group")}))}),"")}},{key:"insertChild",value:function(t){on(t)}},{key:"insertBrother",value:function(t){var e=t.diagram.findNodeForKey(t.part.data.parent);e&&on(e)}},{key:"insertLane",value:function(t){"Pool"===t.category&&t.diagram.model.commit((function(e){var n={group:t.key,text:" ".concat(t.findSubGraphParts("SHAPE").size+1," "),isGroup:!0,category:"Lane"};e.addNodeData(n)}))}},{key:"deleteSelection",value:function(){var t=this.diagram.selection.toArray();en(nn(e.prototype),"deleteSelection",this).call(this),this.shortcutEvent.emit("delete",t)}},{key:"insertParent",value:function(t){var e=this.diagram,n=e.findNodeForKey(t.part.data.parent);n&&on(n,(function(n){e.model.setDataProperty(t.part.data,"parent",n.key),e.model.setCategoryForNodeData(t.part.data,"TreeNode")}))}},{key:"getAllParts",value:function(){var t=new Array;return this.diagram.nodes.each((function(e){t.push(e)})),this.diagram.parts.each((function(e){t.push(e)})),t}},{key:"findNearestPartTowards",value:function(t){var e=this.diagram.selection.first();if(null===e)return null;for(var n=e.actualBounds.center,i=this.getAllParts(),a=1/0,r=e,o=0;o<i.length;o++){var s=i[o];if(s!==e){var h=s.actualBounds.center,l=n.directionPoint(h),u=this.angleCloseness(l,t);if(u<=45){var d=n.distanceSquaredPoint(h);(d*=1+Math.sin(u*Math.PI/180))<a&&(a=d,r=s)}}}return r}},{key:"angleCloseness",value:function(t,e){return Math.min(Math.abs(e-t),Math.min(Math.abs(e+360-t),Math.abs(e-360-t)))}}])&&Qe(n.prototype,i),a&&Qe(n,a),e}(a.a.CommandHandler),hn=null,ln=null,un=function(t){var e=document.createRange();e.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)},dn=document.createElement("div");dn.id="text_editing",dn.setAttribute("contenteditable",!0),dn.addEventListener("input",(function(t){var e=cn.tool;if(null!==e.textBlock){var n=e.textBlock,i=e.diagram;i.startTransaction(),n.text=this.value,i.commitTransaction("input text"),dn.rows=e.textBlock.lineCount}}),!1),dn.addEventListener("keydown",(function(t){var e=cn.tool;if(null!==e.textBlock){var n=t.which;if(13===n&&t.shiftKey)!1===e.textBlock.isMultiline&&t.preventDefault(),e.acceptText(a.a.TextEditingTool.Enter);else{if(13===n)return void e.acceptText(a.a.TextEditingTool.Tab);if(9===n)return e.acceptText(a.a.TextEditingTool.Tab),void t.preventDefault();27===n&&(e.doCancel(),null!==e.diagram&&e.diagram.doFocus())}}}),!1),dn.addEventListener("focus",(function(t){var e=cn.tool;e&&null!==e.currentTextEditor&&(e.state===a.a.TextEditingTool.StateActive&&(e.state=a.a.TextEditingTool.StateEditing),e.selectsTextOnActivate&&un(dn))}),!1),dn.addEventListener("blur",(function(t){var e=cn.tool;e&&null!==e.currentTextEditor&&e.state!==a.a.TextEditingTool.StateNone&&(dn.focus(),e.selectsTextOnActivate&&un(dn))}),!1);var cn=new a.a.HTMLInfo;cn.valueFunction=function(){return dn.innerText},cn.mainElement=dn,cn.show=function(t,e,n){if(t instanceof a.a.TextBlock){cn.tool=n;var i=t.part.naturalBounds.width;if(n.state===a.a.TextEditingTool.StateInvalid)return dn.style.color="red",void dn.focus();var r=t.part.locationObject.getDocumentPoint(a.a.Spot.TopLeft),o=t.getDocumentPoint(a.a.Spot.TopLeft),s=e.position,h=e.scale,l=t.getDocumentScale()*h;l<n.minimumEditorScale&&(l=n.minimumEditorScale);t.naturalBounds.width,t.naturalBounds.height;var u=(r.x-s.x)*h,d=(o.y-s.y)*h;dn.innerText=t.text,e.div.style.font=t.font,e.div.style.color=t.stroke,dn.style.position="absolute",dn.style.zIndex="100",dn.style.font=t.font,dn.style.fontSize=100*l+"%",dn.style.lineHeight="normal",dn.style.left=u+"px",dn.style.top=d+"px",dn.style.textAlign=t.textAlign,dn.style.width=i+"px",dn.style.maxWidth=i+"px",dn.rows=t.lineCount,dn.textScale=l,dn.className="goTXarea",e.div.appendChild(dn),dn.focus(),hn=t,ln=t.minSize,t.minSize=new a.a.Size(t.naturalBounds.width,t.naturalBounds.height),t.text=null,n.selectsTextOnActivate&&un(dn)}},cn.hide=function(t,e){hn.minSize=ln,t.div.removeChild(dn),dn.innerText=dn.innerHTML="",cn.tool=null};var fn=cn;function gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vn=a.a.GraphObject.make,yn=Object.freeze({PNG:Symbol("png"),SVG:Symbol("svg"),JPEG:Symbol("jpg"),BASE64:Symbol("base64")}),wn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.a.clone(o.a.get(t,"model.root")),i=e.meshColor,a=e.ruleColor,r=e.background;return o.a.isEmpty(i)||o.a.set(n,"meshColor",i),o.a.isEmpty(a)||o.a.set(n,"ruleColor",a),o.a.isEmpty(r)||o.a.set(n,"background",r),n},Sn=function(t){var e=JSON.parse(t.model.toJSON());o.a.unset(e,"modelData"),t.isTransactionFinished&&(e.nodeDataArray&&(e.nodeDataArray=e.nodeDataArray.filter((function(t){return t&&!t.temporary}))),e.linkDataArray&&(e.linkDataArray=e.linkDataArray.filter((function(t){return t&&!t.temporary}))),o.a.isEqual(JSON.stringify(e),this.model)||(this.event.emit("model:changed",e),this.model=JSON.stringify(e)))},Pn=function(t,e,n){t.div.style[e]=n,t.requestUpdate()},bn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),mn(this,"setting",null),mn(this,"style",null),mn(this,"canvas",null),mn(this,"model",null),mn(this,"toolMaker",null),mn(this,"templateMaker",null),mn(this,"actionList",null),mn(this,"onModelChange",null),mn(this,"allowActions",[]),mn(this,"event",new Dt.a),n&&(this.setting=n),e&&(this.style=e),this.onModelChange=Sn.bind(this)}var e,n,i;return e=t,(n=[{key:"mount",value:function(t,e){var n=this;this.canvas=vn(a.a.Diagram,t),this.canvas.ir=function(){},this.canvas.commandHandler=new sn,this.canvas.commandHandler.arrowKeyBehavior="select",this.canvas.commandHandler.shortcutEvent.on("shortcut",(function(t){n.templateMaker.onShortcut(t.char)&&(t.isHandle=!0)})),this.canvas.toolManager.textEditingTool.defaultTextEditor=fn,this.actionList=new Ge(this.canvas),this.toolMaker=new At(wn(this.style,this.setting),this.canvas),this.templateMaker=new Ze(this.style,this.canvas,this.actionList,this.name);var i=this.getProperties();this.canvas.setProperties(i),this.canvas.model=this.parseModel(e),this.canvas.toolManager.hoverDelay=200,this.model=this.canvas.model.toJSON(),this.created&&this.created(),this.canvas.model.addChangedListener(this.onModelChange),this.applyStyle(this.style),this.applySetting(this.setting),this.applyBackground()}},{key:"loopSelection",value:function(t,e){for(var n=this.canvas.selection.iterator;n.next();)t.call(this,n.value,n);e&&e()}},{key:"setReadonly",value:function(t){this.canvas.setProperties({isReadOnly:t})}},{key:"setModel",value:function(t,e){e||this.canvas.removeModelChangedListener(this.onModelChange),this.canvas.setProperties({model:a.a.Model.fromJson(t)}),e||this.canvas.addModelChangedListener(this.onModelChange)}},{key:"getModel",value:function(){return this.canvas.model.toJSON()}},{key:"addMapListener",value:function(t,e){this.canvas.addDiagramListener(t,e)}},{key:"addStyleListener",value:function(t){this.styleChangeListener.push(t)}},{key:"applyDirection",value:function(t,e,n){if(!o.a.isEmpty(e)&&!o.a.isEmpty(n)){var i=parseInt(e),a=parseInt(n);switch(t){case"H":i>a?this.applySize(e,n):this.applySize(n,e);break;case"V":i>a?this.applySize(n,e):this.applySize(e,n)}}}},{key:"applySize",value:function(t,e){Pn(this.canvas,"min-width",t),Pn(this.canvas,"min-height",e)}},{key:"applyBackground",value:function(){var t=this.canvas.model.modelData[$(["root","background"])];Pn(this.canvas,"background",this.setting.background||t)}},{key:"applySetting",value:function(t){var e=t.showMesh,n=t.showRule,i=t.width,a=t.height,r=t.direction,s=wn(this.style,t),h=s.meshColor,l=s.ruleColor;if(!0===e?this.toolMaker.setupMesh(this.canvas):!1===e&&this.toolMaker.unsetupMesh(this.canvas),!0===n){var u=t.width,d=t.height;u||(u=this.canvas.div.offsetWidth),d||(d=this.canvas.div.offsetHeight),this.toolMaker.setupRule(this.canvas,u,d)}else!1===n&&this.toolMaker.unsetupRule(this.canvas);o.a.isEmpty(r)||o.a.isEmpty(i)||o.a.isEmpty(a)||this.applyDirection(r,i,a),h!==this.toolMaker.meshColor&&this.toolMaker.setMeshColor(h),l!==this.toolMaker.ruleColor&&this.toolMaker.setRuleColor(l)}},{key:"changeSetting",value:function(t){this.setting=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.setting,{},t),this.applySetting(this.setting),this.applyBackground(),this.event.emit("setting:changed",this.setting)}},{key:"setStyle",value:function(t){this.applyStyle(t),this.applyBackground(),this.event.emit("style:changed",this.style)}},{key:"applyStyle",value:function(t){this.style=t,this.canvas.model.commit((function(e){e.modelData=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",n=function t(n,i,a){return o.a.reduce(n,(function(n,a,r){var s=(o.a.isEmpty(i)?"":i+e)+r;return o.a.isObject(a)?t(a,s,n):n[s]=a,n}),a)};return n(t,"",{})}(t.model)})),this.canvas.requestUpdate()}},{key:"capture",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=this.canvas.documentBounds,r=i.width,s=i.height,h=i.centerX,l=i.centerY,u=Math.max(r,s)+n,d=h-u/2-n,c=l-u/2-n,f=new a.a.Point(d,c),g=new a.a.Size(u+2*n,u+2*n),p=o.a.get(this.setting,"root.background")||o.a.get(this.style,"model.root.background")||"#fff";return new Promise((function(n){switch(t){case yn.PNG:e.canvas.makeImageData({scale:1,type:"image/png",background:p,position:f,size:g,returnType:"blob",callback:function(t){n(t)}});break;case yn.BASE64:e.canvas.makeImageData({scale:1,type:"image/png",background:p,position:f,size:g,callback:function(t){n(t)}});break;case yn.SVG:var i=e.map.canvas.makeSvg({background:p,position:f,size:g}),a=new Blob([i.outerHTML],{type:"text/plain;charset=utf-8"});n(a)}}))}},{key:"unmount",value:function(){this.canvas&&(this.canvas.div=null)}}])&&pn(e.prototype,n),i&&pn(e,i),t}();bn.Captures=yn;var xn=bn;function kn(t){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tn(t,e){return!e||"object"!==kn(e)&&"function"!=typeof e?Fn(t):e}function Cn(t){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bn(t,e){return(Bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function On(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var An={class:"go.TreeModel",nodeDataArray:[{key:0,text:"",location:"0 0",category:"TreeFree"}]},jn=function(t){function e(){var t,n;Mn(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return On(Fn(n=Tn(this,(t=Cn(e)).call.apply(t,[this].concat(a)))),"name","MINDMAP"),On(Fn(n),"allowActions",["undo","redo","insertChild","insertParent","insertBrother","delete"]),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bn(t,e)}(e,t),n=e,(i=[{key:"getProperties",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ln(Object(n),!0).forEach((function(e){On(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({allowCopy:!1,"commandHandler.copiesTree":!0,"commandHandler.copiesParentKey":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0},this.toolMaker.makeDraggingTreeTool(),{},this.templateMaker.makeNodeTemplates(),{},this.templateMaker.makeLinkTemplate())}},{key:"parseModel",value:function(t){return a.a.Model.fromJson(t||An)}},{key:"created",value:function(){}}])&&Nn(n.prototype,i),r&&Nn(n,r),e}(xn);function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Rn(t,e){return!e||"object"!==Dn(e)&&"function"!=typeof e?_n(t):e}function In(t){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hn=a.a.GraphObject.make,Xn=(Hn(a.a.Adornment,"Auto",Hn(a.a.Placeholder)),{}),Un=function(t){function e(){var t,n;Gn(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return Yn(_n(n=Rn(this,(t=In(e)).call.apply(t,[this].concat(a)))),"name","FLOWCHART"),Yn(_n(n),"allowActions",["undo","redo","cut","paste","copy","ceiling","floor","lock","unlock","merge","split"]),Yn(_n(n),"linkTemplate",void 0),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(e,t),n=e,(i=[{key:"getProperties",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(n),!0).forEach((function(e){Yn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({"undoManager.isEnabled":!0},this.toolMaker.makeGuideDraggingTool(),{},this.toolMaker.makeMeshTemplate(),{},this.templateMaker.makeGroupTemplate(),{},this.templateMaker.makeNodeTemplates(),{},this.templateMaker.makeLinkTemplate(),{},this.toolMaker.makeRelinkTool(),{},this.toolMaker.makeRotatingTool(),{},this.toolMaker.makeResizingTool(),{"draggingTool.dragsLink":!0,"draggingTool.isGridSnapEnabled":!0,"relinkingTool.isUnconnectedLinkValid":!0,"relinkingTool.portGravity":20,"rotatingTool.handleAngle":270,"rotatingTool.handleDistance":30,"rotatingTool.snapAngleMultiple":15,"rotatingTool.snapAngleEpsilon":15,"linkingTool.isUnconnectedLinkValid":!0,"linkingTool.portGravity":20})}},{key:"parseModel",value:function(t){return a.a.Model.fromJson(t||Xn)}},{key:"created",value:function(){}}])&&En(n.prototype,i),r&&En(n,r),e}(xn);function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Kn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zn(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?Qn(t):e}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(t,e){return(ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ei(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ni(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ii=a.a.GraphObject.make;function ai(t){return 20+20*t+30}function ri(t,e){var n=e.diagram.model.findNodeDataForKey(t.group);if(null===n)return new a.a.Point;var i=a.a.Point.parse(n.loc);return new a.a.Point(i.x,ui(t.start)-5)}function oi(t,e){e.start=di(t.y+5),this.diagram.model.setDataProperty(e,"start",di(t.y+5))}function si(t){return 5+20*t+5}function hi(t){return(t-5-5)/20}function li(t){var e=t.model.nodeDataArray,n=-1,i=0;for(i=0;i<e.length;i++){var a=e[i];a.isGroup||(n=Math.max(n,a.start+a.duration))}if(n>0)for(i=0;i<e.length;i++){var r=e[i];r.isGroup&&(n>r.duration&&t.model.setDataProperty(r,"duration",n))}}function ui(t){return 20*t+20}function di(t){return(t-20)/20}function ci(){a.a.Link.call(this),this.time=0}function fi(){a.a.LinkingTool.call(this),this.temporaryLink=ii(ci,ii(a.a.Shape,"Rectangle",{stroke:"magenta",strokeWidth:2}),ii(a.a.Shape,{toArrow:"OpenTriangle",stroke:"magenta"}))}function gi(){a.a.DraggingTool.call(this)}a.a.Diagram.inherit(ci,a.a.Link),ci.prototype.getLinkPoint=function(t,e,n,i,r,o,s){var h=e.getDocumentPoint(a.a.Spot.Center),l=s.getDocumentPoint(a.a.Spot.Center),u=this.data,d=null!==u?u.time:this.time,c=this.findActivityWidth(t,d),f=l.x>h.x?h.x+c/2:h.x-c/2,g=ui(d);return new a.a.Point(f,g)},ci.prototype.findActivityWidth=function(t,e){var n=10;return t instanceof a.a.Group&&(t.memberParts.any((function(t){var n=t.data;return null!==n&&n.start<=e&&e<=n.start+n.duration}))||(n=0)),n},ci.prototype.getLinkDirection=function(t,e,n,i,r,o,s,h){var l=e.getDocumentPoint(a.a.Spot.Center);return h.getDocumentPoint(a.a.Spot.Center).x>l.x?0:180},ci.prototype.computePoints=function(){if(this.fromNode===this.toNode){var t=this.data,e=null!==t?t.time:this.time,n=this.fromNode.port.getDocumentPoint(a.a.Spot.Center),i=this.findActivityWidth(this.fromNode,e),r=n.x+i/2,o=ui(e);return this.clearPoints(),this.addPoint(new a.a.Point(r,o)),this.addPoint(new a.a.Point(r+50,o)),this.addPoint(new a.a.Point(r+50,o+5)),this.addPoint(new a.a.Point(r,o+5)),!0}return a.a.Link.prototype.computePoints.call(this)},a.a.Diagram.inherit(fi,a.a.LinkingTool),fi.prototype.doActivate=function(){a.a.LinkingTool.prototype.doActivate.call(this);var t=di(this.diagram.firstInput.documentPoint.y);this.temporaryLink.time=Math.ceil(t)},fi.prototype.insertLink=function(t,e,n,i){var r=a.a.LinkingTool.prototype.insertLink.call(this,t,e,n,i);if(null!==r){var o=this.diagram.model,s=this.temporaryLink.time;r.data.time=s;var h={category:"Activity",group:r.data.to,start:s,duration:1};o.addNodeData(h),li(this.diagram)}return r},a.a.Diagram.inherit(gi,a.a.DraggingTool),gi.prototype.computeEffectiveCollection=function(t,e){var n=a.a.DraggingTool.prototype.computeEffectiveCollection.call(this,t,e);return n.add(new a.a.Node,new a.a.DraggingInfo(new a.a.Point)),t.each((function(t){t instanceof a.a.Link&&n.add(t,new a.a.DraggingInfo(t.getPoint(0).copy()))})),n},gi.prototype.mayMove=function(){return!this.diagram.isReadOnly&&this.diagram.allowMove},gi.prototype.moveParts=function(t,e,n){a.a.DraggingTool.prototype.moveParts.call(this,t,e,n);for(var i=t.iterator;i.next();)if(i.key instanceof a.a.Link){var r=i.key,o=i.value.point.y+e.y,s=this.gridSnapCellSize.height;o=Math.round(o/s)*s;var h=Math.max(0,di(o));r.diagram.model.set(r.data,"time",h),r.invalidateRoute()}};var pi={},mi={name:"SequenceLink",node:"LINE",createTemplate:function(t){var e="#333";return ii(ci,{selectionAdorned:!0,curviness:0,relinkableFrom:!0,relinkableTo:!0},tt(),ii.apply(void 0,[a.a.Shape,"Rectangle",{stroke:e,strokeWidth:1,strokeDashArray:[]}].concat(ni(Z("link","stroke","strokeDashArray")),ni(Q("stroke","strokeDashArray")))),ii.apply(void 0,[a.a.Shape,{fill:e,toArrow:"",stroke:e},new a.a.Binding("fill","stroke")].concat(ni(Q(!1,"stroke","toArrow")))),et(this.name,null,"",{segmentIndex:0,segmentOffset:new a.a.Point(NaN,NaN)})),t}},vi={styleSetter:{stroke:function(t,e){t.findObject("TABLE").defaultColumnSeparatorStroke=e,t.findObject("TABLE").defaultRowSeparatorStroke=e},strokeDashArray:function(t,e){t.findObject("TABLE").defaultRowSeparatorDashArray=e,t.findObject("TABLE").defaultColumneparatorDashArray=e},strokeWidth:function(t,e){t.findObject("TABLE").defaultColumnSeparatorStrokeWidth=e,t.findObject("TABLE").defaultWidthSeparatorStrokeWidth=e}},style:{radius:0,fill:"#f3f3f3",stroke:"#333",strokeWidth:1,strokeDashArray:[3,3],fontColor:"#333",fontFamily:"arial,sans-serif",fontSize:14,fontBold:!1,fontItalic:!1,isUnderline:!1,isStrikethrough:!1},allowAction:["insertLane","cut","delete","paste","group","copy","ungroup"],createTemplate:function(t){var e=this.style,n=e.fill,i=e.stroke,r=e.strokeWidth,o=e.radius,s=e.strokeDashArray;return ii(a.a.Group,"Vertical",{locationSpot:a.a.Spot.Bottom,locationObjectName:"HEADER",minLocation:new a.a.Point(0,0),maxLocation:new a.a.Point(9999,0),selectionObjectName:"HEADER"},new a.a.Binding("location","loc",a.a.Point.parse).makeTwoWay(a.a.Point.stringify),[mt("icons",["FontIcon"]),tt()],ii(a.a.Panel,"Auto",{name:"HEADER"},ii.apply(void 0,[a.a.Shape,"RoundedRectangle",{fill:n,stroke:null,parameter1:o}].concat(ni(Q(!1,"fill","radius")),[new a.a.Binding("fill","isHighlighted",(function(t,e){return t?"#FFC107":e.part.data.fill||n})).ofObject()])),ii(a.a.Panel,"Vertical",ot({fontSize:32}),et(this.name,this.style,"",{margin:5}))),ii(a.a.Shape,{figure:"LineV",fill:n,stroke:i,strokeWidth:r,strokeDashArray:s,width:1,alignment:a.a.Spot.Center,portId:"",fromLinkable:!0,fromLinkableDuplicates:!0,toLinkable:!0,toLinkableDuplicates:!0,cursor:"pointer"},new a.a.Binding("height","duration",ai),[Q(!1,"fill","stroke","strokeWidth","strokeDashArray")]),t)}},yi={diagram:null,allowAction:["cut","paste","group","copy","ungroup"],createTemplate:function(t){return ii(a.a.Node,{locationSpot:a.a.Spot.Top,locationObjectName:"SHAPE",minLocation:new a.a.Point(NaN,15),maxLocation:new a.a.Point(NaN,19999),selectionObjectName:"SHAPE",resizable:!0,resizeObjectName:"SHAPE",resizeAdornmentTemplate:ii(a.a.Adornment,"Spot",ii(a.a.Placeholder),ii(a.a.Shape,{alignment:a.a.Spot.Bottom,cursor:"col-resize",desiredSize:new a.a.Size(6,6),fill:"yellow"}))},new a.a.Binding("location","",ri).makeTwoWay(oi.bind(this)),ii(a.a.Shape,"Rectangle",{name:"SHAPE",fill:"white",stroke:"black",width:10,minSize:new a.a.Size(10,si(.25))},new a.a.Binding("height","duration",si).makeTwoWay(hi.bind(this))),t)}},wi=function(t){function e(){var t,n;Kn(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return ei(Qn(n=Zn(this,(t=$n(e)).call.apply(t,[this].concat(a)))),"name","SEQUENCEMAP"),ei(Qn(n),"allowActions",["undo","redo","cut","paste","copy","ceiling","floor","lock","unlock","merge","split"]),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ti(t,e)}(e,t),n=e,(i=[{key:"getProperties",value:function(){var t=this;return this.templateMaker.resetLink(mi),this.templateMaker.setGroup("Sequential",vi),this.templateMaker.setNode("Activity",yi),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wn(Object(n),!0).forEach((function(e){ei(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({allowCopy:!1,linkingTool:ii(fi),"resizingTool.isGridSnapEnabled":!0,draggingTool:ii(gi),"draggingTool.gridSnapCellSize":new a.a.Size(1,5),"draggingTool.isGridSnapEnabled":!0,SelectionMoved:function(){return li(t.canvas)},PartResized:function(){return li(t.canvas)},"undoManager.isEnabled":!0},this.toolMaker.makeMeshTemplate(),{},this.templateMaker.makeGroupTemplate(),{},this.templateMaker.makeNodeTemplates(),{},this.templateMaker.makeLinkTemplate())}},{key:"parseModel",value:function(t){return a.a.Model.fromJson(t||pi)}}])&&Jn(n.prototype,i),r&&Jn(n,r),e}(xn);function Si(t){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ki(t,e){return!e||"object"!==Si(e)&&"function"!=typeof e?Mi(t):e}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ti(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ci={class:"go.TreeModel",nodeDataArray:[{key:0,text:"Boss",location:"0 0",category:"TreeFree"}]},Fi=a.a.GraphObject.make,Bi=function(t){function e(){var t,n;bi(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return Ti(Mi(n=ki(this,(t=Li(e)).call.apply(t,[this].concat(a)))),"name","STRUCTMAP"),Ti(Mi(n),"allowActions",["undo","redo","insertChild","insertParent","insertBrother","delete"]),n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(e,t),n=e,(i=[{key:"getProperties",value:function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(n),!0).forEach((function(e){Ti(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({layout:Fi(a.a.TreeLayout,{treeStyle:a.a.TreeLayout.StyleLastParents,arrangement:a.a.TreeLayout.ArrangementHorizontal,angle:90,layerSpacing:35,alternateAngle:90,alternateLayerSpacing:35,alternateAlignment:a.a.TreeLayout.AlignmentBus,alternateNodeSpacing:20}),maxSelectionCount:1,validCycle:a.a.Diagram.CycleDestinationTree,"clickCreatingTool.archetypeNodeData":{name:"(new person)",title:"",comments:"",category:"Personal"},"clickCreatingTool.insertPart":function(t){var e=a.a.ClickCreatingTool.prototype.insertPart.call(this,t);return null!==e&&(this.diagram.select(e),this.diagram.commandHandler.scrollToPart(e)),e},"undoManager.isEnabled":!0},this.toolMaker.makeMeshTemplate(),{},this.templateMaker.makeNodeTemplates(),{},this.templateMaker.makeLinkTemplate())}},{key:"parseModel",value:function(t){return a.a.Model.fromJson(t||Ci)}},{key:"created",value:function(){var t=this;this.toolMaker.setupRule(this.canvas);var e,n=null;this.canvas.addDiagramListener("SelectionDeleting",(function(i){var r=i.subject.first();if(t.canvas.startTransaction("clear boss"),r instanceof a.a.Node)for(var o=r.findTreeChildrenNodes();o.next();){if(e=o.value,null===(n=e.findObject("boss")))return;n.text=""}else if(r instanceof a.a.Link){if(e=r.toNode,null===(n=e.findObject("boss")))return;n.text=""}t.canvas.commitTransaction("clear boss")})),this.canvas.layout.commitNodes=function(){a.a.TreeLayout.prototype.commitNodes.call(t.canvas.layout)}}}])&&xi(n.prototype,i),r&&xi(n,r),e}(xn);a.a.GraphObject.defineBuilder("Button",(function(t){var e=a.a.GraphObject.make(a.a.Panel,"Auto",{isActionable:!0,enabledChanged:function(t,e){var n=t.findObject("ButtonBorder");null!==n&&(n.fill=e?t._buttonFillNormal:t._buttonFillDisabled)},cursor:"pointer",_buttonFillNormal:"#f9f9f9",_buttonStrokeNormal:"#fff",_buttonFillOver:"#2196F3",_buttonStrokeOver:"#2196F3",_buttonFillPressed:"#3F51B5",_buttonStrokePressed:"#3F51B5",_buttonFillDisabled:"#E5E5E5"},a.a.GraphObject.make(a.a.Shape,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new a.a.Spot(0,0,2.76142374915397,2.761423749153969),spot2:new a.a.Spot(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#f9f9f9",stroke:"#fff",strokeWidth:1}));function n(t,e){return null!==t.diagram.findObjectAt(t.documentPoint,(function(t){for(;null!==t.panel;){if(t.isActionable)return t;t=t.panel}return t}),(function(t){return t===e}))}return(e.mouseEnter=function(t,e,n){if(e.isEnabledObject()){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=e._buttonFillOver;e._buttonFillNormal=i.fill,i.fill=r,r=e._buttonStrokeOver,e._buttonStrokeNormal=i.stroke,i.stroke=r}}},e.mouseLeave=function(t,e,n){if(e.isEnabledObject()){var i=e.findObject("ButtonBorder");i instanceof a.a.Shape&&(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal)}},e.actionDown=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed&&0===t.button){var n=e.findObject("ButtonBorder");if(n instanceof a.a.Shape){var i=t.diagram,r=i.skipsUndoManager;i.skipsUndoManager=!0;var o=e._buttonFillPressed;e._buttonFillOver=n.fill,n.fill=o,o=e._buttonStrokePressed,e._buttonStrokeOver=n.stroke,n.stroke=o,i.skipsUndoManager=r}}},e.actionUp=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed&&0===t.button){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=t.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,n(t,e)?(i.fill=e._buttonFillOver,i.stroke=e._buttonStrokeOver):(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionCancel=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=t.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,n(t,e)?(i.fill=e._buttonFillOver,i.stroke=e._buttonStrokeOver):(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionMove=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed){var i=t.diagram;if(0===i.firstInput.button&&(i.currentTool.standardMouseOver(),n(t,e))){var r=e.findObject("ButtonBorder");if(r instanceof a.a.Shape){var o=i.skipsUndoManager;i.skipsUndoManager=!0;var s=e._buttonFillPressed;r.fill!==s&&(r.fill=s),s=e._buttonStrokePressed,r.stroke!==s&&(r.stroke=s),i.skipsUndoManager=o}}}},e)})),a.a.GraphObject.defineBuilder("CircleButton",(function(t){var e=a.a.GraphObject.make(a.a.Panel,"Auto",{isActionable:!0,enabledChanged:function(t,e){var n=t.findObject("ButtonBorder");null!==n&&(n.fill=e?t._buttonFillNormal:t._buttonFillDisabled)},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},a.a.GraphObject.make(a.a.Shape,{name:"ButtonBorder",figure:"Circle",spot1:new a.a.Spot(0,0,2.76142374915397,2.761423749153969),spot2:new a.a.Spot(1,1,-2.76142374915397,-2.761423749153969),fill:"#F5F5F5",stroke:"#BDBDBD"}));function n(t,e){return null!==t.diagram.findObjectAt(t.documentPoint,(function(t){for(;null!==t.panel;){if(t.isActionable)return t;t=t.panel}return t}),(function(t){return t===e}))}return(e.mouseEnter=function(t,e,n){if(e.isEnabledObject()){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=e._buttonFillOver;e._buttonFillNormal=i.fill,i.fill=r,r=e._buttonStrokeOver,e._buttonStrokeNormal=i.stroke,i.stroke=r}}},e.mouseLeave=function(t,e,n){if(e.isEnabledObject()){var i=e.findObject("ButtonBorder");i instanceof a.a.Shape&&(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal)}},e.actionDown=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed&&0===t.button){var n=e.findObject("ButtonBorder");if(n instanceof a.a.Shape){var i=t.diagram,r=i.skipsUndoManager;i.skipsUndoManager=!0;var o=e._buttonFillPressed;e._buttonFillOver=n.fill,n.fill=o,o=e._buttonStrokePressed,e._buttonStrokeOver=n.stroke,n.stroke=o,i.skipsUndoManager=r}}},e.actionUp=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed&&0===t.button){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=t.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,n(t,e)?(i.fill=e._buttonFillOver,i.stroke=e._buttonStrokeOver):(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionCancel=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed){var i=e.findObject("ButtonBorder");if(i instanceof a.a.Shape){var r=t.diagram,o=r.skipsUndoManager;r.skipsUndoManager=!0,n(t,e)?(i.fill=e._buttonFillOver,i.stroke=e._buttonStrokeOver):(i.fill=e._buttonFillNormal,i.stroke=e._buttonStrokeNormal),r.skipsUndoManager=o}}},e.actionMove=function(t,e){if(e.isEnabledObject()&&null!==e._buttonFillPressed){var i=t.diagram;if(0===i.firstInput.button&&(i.currentTool.standardMouseOver(),n(t,e))){var r=e.findObject("ButtonBorder");if(r instanceof a.a.Shape){var o=i.skipsUndoManager;i.skipsUndoManager=!0;var s=e._buttonFillPressed;r.fill!==s&&(r.fill=s),s=e._buttonStrokePressed,r.stroke!==s&&(r.stroke=s),i.skipsUndoManager=o}}}},e)})),a.a.GraphObject.defineBuilder("TreeExpanderButton",(function(t){var e=a.a.GraphObject.make("CircleButton",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},a.a.GraphObject.make(a.a.Shape,{figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:new a.a.Size(8,8)},new a.a.Binding("figure","isTreeExpanded",(function(t,e){var n=e.panel;return t?n._treeExpandedFigure:n._treeCollapsedFigure})).ofObject()));return e.click=function(t,e){var n=e.part;if(n instanceof a.a.Adornment&&(n=n.adornedPart),n instanceof a.a.Node){var i=n.diagram;if(null!==i){var r=i.commandHandler;if(n.isTreeExpanded){if(!r.canCollapseTree(n))return}else if(!r.canExpandTree(n))return;t.handled=!0,n.isTreeExpanded?r.collapseTree(n):r.expandTree(n)}}},e})),a.a.GraphObject.defineBuilder("TreeExpanderLink",(function(t){var e=a.a.GraphObject.make("CircleButton",a.a.GraphObject.make(a.a.Shape,{figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:new a.a.Size(8,8)},new a.a.Binding("figure","toNode",(function(t,e){return t?"MinusLine":"PlusLine"})).ofObject()));return e.click=function(t,e){var n=e.part;if(n instanceof a.a.Link){var i=n.toNode;if(i instanceof a.a.Node){i instanceof a.a.Adornment&&(i=i.adornedPart);var r=i.diagram;if(null!==r){var o=r.commandHandler;if(i.isTreeExpanded){if(!o.canCollapseTree(i))return}else if(!o.canExpandTree(i))return;t.handled=!0,i.isTreeExpanded?o.collapseTree(i):o.expandTree(i)}}}},e})),a.a.GraphObject.defineBuilder("SubGraphExpanderButton",(function(t){var e=a.a.GraphObject.make("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},a.a.GraphObject.make(a.a.Shape,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:new a.a.Size(8,8)},new a.a.Binding("figure","isSubGraphExpanded",(function(t,e){var n=e.panel;return t?n._subGraphExpandedFigure:n._subGraphCollapsedFigure})).ofObject()));return e.click=function(t,e){var n=e.part;if(n instanceof a.a.Adornment&&(n=n.adornedPart),n instanceof a.a.Group){var i=n.diagram;if(null!==i){var r=i.commandHandler;if(n.isSubGraphExpanded){if(!r.canCollapseSubGraph(n))return}else if(!r.canExpandSubGraph(n))return;t.handled=!0,n.isSubGraphExpanded?r.collapseSubGraph(n):r.expandSubGraph(n)}}},e})),a.a.GraphObject.defineBuilder("ToolTip",(function(t){return a.a.GraphObject.make(a.a.Adornment,"Auto",{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new a.a.Point(0,4),shadowBlur:4},a.a.GraphObject.make(a.a.Shape,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#f6f6f6",stroke:"#f0f0f0",spot1:new a.a.Spot(0,0,4,6),spot2:new a.a.Spot(1,1,-4,-4)}))})),a.a.GraphObject.defineBuilder("ContextMenu",(function(t){return a.a.GraphObject.make(a.a.Adornment,"Vertical",{padding:6,background:"#fff",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new a.a.Point(0,4),shadowBlur:2},new a.a.Binding("background","",(function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#f3f3f3"})))})),a.a.GraphObject.defineBuilder("ContextMenuButton",(function(t){var e=a.a.GraphObject.make("Button");e.stretch=a.a.GraphObject.Horizontal;var n=e.findObject("ButtonBorder");return n instanceof a.a.Shape&&(n.figure="Rectangle",n.spot1=new a.a.Spot(0,0,2,2),n.spot2=new a.a.Spot(1,1,-2,-2)),e})),a.a.GraphObject.defineBuilder("PanelExpanderButton",(function(t){var e=a.a.GraphObject.takeBuilderArgument(t,"COLLAPSIBLE"),n=a.a.GraphObject.make("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},a.a.GraphObject.make(a.a.Shape,{name:"ButtonIcon",strokeWidth:2},new a.a.Binding("geometryString","visible",(function(t){return t?n._buttonExpandedFigure:n._buttonCollapsedFigure})).ofObject(e))),i=n.findObject("ButtonBorder");return i instanceof a.a.Shape&&(i.stroke=null,i.fill="rgba(0, 0, 0, 0)"),n.click=function(t,n){var i=n.diagram;if(null!==i&&!i.isReadOnly){var a=n.findTemplateBinder();if(null===a&&(a=n.part),null!==a){var r=a.findObject(e);null!==r&&(i.startTransaction("Collapse/Expand Panel"),r.visible=!r.visible,i.commitTransaction("Collapse/Expand Panel"))}}},n})),a.a.GraphObject.defineBuilder("CheckBoxButton",(function(t){var e=a.a.GraphObject.takeBuilderArgument(t),n=a.a.GraphObject.make("Button",{desiredSize:new a.a.Size(14,14)},a.a.GraphObject.make(a.a.Shape,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:a.a.GraphObject.Fill,geometryStretch:a.a.GraphObject.Uniform,visible:!1},""!==e?new a.a.Binding("visible",e).makeTwoWay():[]));return n.click=function(t,n){var i=t.diagram;if(!(null===i||i.isReadOnly||""!==e&&i.model.isReadOnly)){t.handled=!0;var a=n.findObject("ButtonIcon");i.startTransaction("checkbox"),a.visible=!a.visible,"function"==typeof n._doClick&&n._doClick(t,n),i.commitTransaction("checkbox")}},n})),a.a.GraphObject.defineBuilder("CheckBox",(function(t){var e=a.a.GraphObject.takeBuilderArgument(t),n=a.a.GraphObject.make("CheckBoxButton",e,{name:"Button",isActionable:!1,margin:new a.a.Margin(0,1,0,0)}),i=a.a.GraphObject.make(a.a.Panel,"Horizontal",n,{isActionable:!0,cursor:n.cursor,margin:1,_buttonFillNormal:n._buttonFillNormal,_buttonStrokeNormal:n._buttonStrokeNormal,_buttonFillOver:n._buttonFillOver,_buttonStrokeOver:n._buttonStrokeOver,_buttonFillPressed:n._buttonFillPressed,_buttonStrokePressed:n._buttonStrokePressed,_buttonFillDisabled:n._buttonFillDisabled,mouseEnter:n.mouseEnter,mouseLeave:n.mouseLeave,actionDown:n.actionDown,actionUp:n.actionUp,actionCancel:n.actionCancel,actionMove:n.actionMove,click:n.click,_buttonClick:n.click});return n.mouseEnter=null,n.mouseLeave=null,n.actionDown=null,n.actionUp=null,n.actionCancel=null,n.actionMove=null,n.click=null,i}))}]));